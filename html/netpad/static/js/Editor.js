!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=n(26),g=2020,f=null,v=function(){function e(t){var n=t.el,i=void 0===n?document.createElement("div"):n,a=t.init;d(this,e),this.el=i,this.init=a,i.className=i.className+" "+p.dialog}return h(e,[{key:"changePos",value:function(e,t){e||(e=(this.el.parentNode.clientWidth-this.el.clientWidth)/2),t||(t=(this.el.parentNode.clientHeight-this.el.clientHeight)/2),e<0&&(e=0),t<0&&(t=0),this.el.style.left=e+"px",this.el.style.top=t+"px",this.init&&this.init({left:e,top:t})}},{key:"__createShade__",value:function(e){var t=this,n=document.createElement("div");n.className=p.shade,n.style.zIndex=g++,document.body.appendChild(n),this.shadeDOM=n,n.addEventListener("click",(function(n){n.target===t.el||t.el.contains(n.target)||e&&e()}))}}]),e}(),m=function(e){a(n,e);var t=o(n);function n(e){var i,a=e.el,s=e.init,o=e.handle,r=e.stop,c=e.left,u=e.top,h=e.containment,p=void 0===h?document.body:h,f=e.modal,v=e.shadeClick;return d(this,n),(i=t.call(this,{el:a,init:s})).handle=o,i.stop=r,i.pageX=0,i.pageY=0,i.mousedown=i.__mousedown__.bind(l(i)),i.mousemove=i.__mousemove__.bind(l(i)),i.mouseup=i.__mouseup__.bind(l(i)),o.style.cursor="move",i.handle.addEventListener("mousedown",i.mousedown),f&&(i.__createShade__(v),i.el.style.zIndex=g++),p.appendChild(i.el),i.changePos(c,u),i}return h(n,[{key:"destroy",value:function(){this.handle.removeEventListener("mousedown",this.mousedown),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null,this.shadeDOM&&(this.shadeDOM.parentNode&&this.shadeDOM.parentNode.removeChild(this.shadeDOM),this.shadeDOM=null)}},{key:"__mousedown__",value:function(e){this.pageX=e.pageX,this.pageY=e.pageY,document.addEventListener("mousemove",this.mousemove,!0),document.addEventListener("mouseup",this.mouseup,!0),e.stopPropagation(),e.preventDefault()}},{key:"__mousemove__",value:function(e){var t=this.el.parentNode.getBoundingClientRect(),n=this.el.getBoundingClientRect(),i=e.pageX-this.pageX,a=e.pageY-this.pageY,s=n.left-t.left+i,o=n.top-t.top+a;s<0&&(s=0),o<0&&(o=0),o+120>t.height&&(o=t.height-120),s+200>t.width&&(s=t.width-200),this.pageY=e.pageY,this.pageX=e.pageX,this.el.style.left=s+"px",this.el.style.top=o+"px"}},{key:"__mouseup__",value:function(){document.removeEventListener("mousemove",this.mousemove,!0),document.removeEventListener("mouseup",this.mouseup,!0),this.stop&&this.stop()}}]),n}(v),y=function(e){a(n,e);var t=o(n);function n(e){var i,a=e.modal,s=e.title,o=e.msg,r=e.icon,l=e.iconColor,c=e.cancel,u=e.sure,h=e.sureCallback,f=e.time;if(d(this,n),i=t.call(this,{}),a&&i.__createShade__((function(){i.destroy()})),i.el.style.zIndex=g++,s){var v=document.createElement("div");v.innerHTML=s+'<span name="close" class="npeditorfont npeditor-close '+p.close+'"></span>',v.className=p.title,v.addEventListener("click",(function(e){"SPAN"===e.target.nodeName&&i.destroy()})),i.el.appendChild(v)}f&&setTimeout((function(){i.destroy()}),f);var m=document.createElement("div");return m.innerHTML=i.renderContent(o,r,l),i.el.appendChild(m),document.body.appendChild(i.el),(c||u)&&i.renderBtns(c,u,h),i.changePos(),i}return h(n,[{key:"renderContent",value:function(e,t,n){return t?'<div class="'.concat(p["msg-dialog"],'">\n            <span class="npsitefont ').concat(t,'" ').concat(n?'style="color:'+n+'"':"","></span>\n            <span>").concat(e,"</span>\n            </div>"):'<div class="'+p["msg-dialog"]+'">'+e+"</div>"}},{key:"renderBtns",value:function(e,t,n){var i=this,a=document.createElement("div");if(a.className=p.btns,e){var s=document.createElement("div");s.className=p["cancel-btn"],s.innerHTML=e,s.addEventListener("click",(function(){i.destroy()})),a.appendChild(s)}if(t){var o=document.createElement("div");o.className=p["sure-btn"],o.innerHTML=t,o.addEventListener("click",(function(){n?n(i):i.destroy()})),a.appendChild(o)}this.el.appendChild(a)}},{key:"destroy",value:function(){this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null,f=null,this.shadeDOM&&(this.shadeDOM.parentNode&&this.shadeDOM.parentNode.removeChild(this.shadeDOM),this.shadeDOM=null))}}]),n}(v);e.exports={widthTitleEl:function(e){return new m(e)},widthTitleName:function(e){var t=document.createElement("div");t.innerHTML=e.title+'<span name="close" class="npeditorfont npeditor-close '+p.close+'"></span>',t.className=p.title,t.addEventListener("click",(function(t){"SPAN"===t.target.nodeName&&(t.stopPropagation(),e.close&&e.close())}));var n=document.createElement("div");return n.appendChild(t),n.appendChild(e.el),e.el=n,e.handle=t,new m(e)},msgForm:function(e){return f&&f.destroy(),f=new y(e)}}},function(e,t,n){var i=n(2),a=n(32);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};i(a,s);e.exports=a.locals||{}},function(e,t,n){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function r(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],a=0;a<e.length;a++){var s=e[a],l=t.base?s[0]+t.base:s[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=r(d),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(o[u].references++,o[u].updater(h)):o.push({identifier:d,updater:v(h,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,i){var a=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var s=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function p(e,t,n){var i=n.css,a=n.media,s=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var g=null,f=0;function v(e,t){var n,i,a;if(t.singleton){var s=f++;n=g||(g=c(t)),i=h.bind(null,n,s,!1),a=h.bind(null,n,s,!0)}else n=c(t),i=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var a=r(n[i]);o[a].references--}for(var s=l(e,t),c=0;c<n.length;c++){var d=r(n[c]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}n=s}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(o=i,r=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(l," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(s).concat([a]).join("\n")}var o,r,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(i)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(a[o]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);i&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t){e.exports={isForceEdit:function(){return e=new RegExp("([?&]?)"+"forceEdit"+"=([^&]*)([?&]?)","i"),null!=(t=window.location.search.substr(1).match(e)||window.location.hash.substr(1).match(e))?unescape(t[2]):null;var e,t},formatDateTime:function(e){var t=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();i=i<10?"0"+i:i;var a=e.getHours();a=a<10?"0"+a:a;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return t+"-"+n+"-"+i+" "+a+":"+s+":"+(o=o<10?"0"+o:o)}}},function(e,t,n){var i=n(2),a=n(46);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};i(a,s);e.exports=a.locals||{}},function(e,t){var n=function(e,t){this._attributes=t||{owner:{source_id:null,source_from:"user"}},this._pubRelations=[],this._packRelations=[],this._currentUser=e,this.ws=null,this.editStatus={isEdit:!1,user:{id:null,user_name:""}},this._wsTimer=null};$.extend(n.prototype,np.EventDispatcher.prototype,{setAttr:function(e){if(e){for(var t in e.hasOwnProperty("source_id")&&(e.source_id=e.source_id?parseInt(e.source_id):null),e.hasOwnProperty("parent_id")&&(e.parent_id=0==e.parent_id?"":e.parent_id),e)this._attributes[t]=e[t];this.dispatchEvent("change")}},createWS:function(){this.closeWS(),this.get("id")&&!this.isUser()&&this._currentUser.get("id")&&this._currentUser.isInGroup(this.get("owner").source_id,this.__createWSCallBack__.bind(this))},__createWSCallBack__:function(){var e=this;this.ws=new WebSocket("".concat("wss://www.netpad.net.cn/websocket/course","/").concat(this.get("id"),"/").concat(this._currentUser.get("id"),"/").concat(this._currentUser.get("user_name"))),this.ws.onmessage=this.onmessage.bind(this),this.ws.onopen=function(){e.senMessage("StartEdit"),e._wsTimer=setInterval(e.senMessage.bind(e),6e4)}},closeWS:function(){this._wsTimer&&clearInterval(this._wsTimer),this._wsTimer=null,this.ws&&this.ws.close(),this.ws=null,this.editStatus={isEdit:!1},this.dispatchEvent("editStatus")},onmessage:function(e){var t=e.data;this.editStatus=JSON.parse(t).data,this.dispatchEvent("editStatus")},senMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HeartBeat";this.ws&&this.ws.send(JSON.stringify({msg:e}))},getAttr:function(){return $.extend({},this._attributes)},get:function(e){return this._attributes[e]},latestAccess:function(e){this._currentUser.get("code")&&($.ajax({type:"POST",url:"/resourceAdmin/latestAccess",data:{resource_id:this._attributes.id},beforeSend:function(e){e.setRequestHeader("code",this._currentUser.get("code"))}.bind(this)}),e||this._currentUser.addBehaviors("course",this._attributes.source_id,"analyse"))},getPubRelations:function(){return this._pubRelations.slice(0)},fetchPubRelations:function(e,t){if(this._attributes.id){var n=this;$.ajax({type:"GET",url:"/resourceAdmin/pubcategories/relations?resource_id="+this._attributes.id,dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))},success:function(t){n._pubRelations=t,e&&e(n.getPubRelations())},error:t})}else e&&e(this.getPubRelations())},updatePubRelations:function(e){if(e&&e instanceof Array){for(var t=this.getPubRelations(),n=[],i=0;a=t[i];i++)-1===e.indexOf(a)?n.push(a.id):e.splice(e.indexOf(a),1);n.length>0&&this.removeRelations(n);var a;for(i=0;a=e[i];i++)this.addRelation(a.cate_id)}},removeRelations:function(e){if(this._attributes.id){var t=this;$.ajax({type:"DELETE",url:"/resourceAdmin/pubcategories/relations",dataType:"json",contentType:"application/json",data:JSON.stringify({id:e.join(",")}),beforeSend:function(e){e.setRequestHeader("code",t._currentUser.get("code"))},success:function(){this.fetchPubRelations()}.bind(this)})}},addRelation:function(e){if(this._attributes.id){var t=this;$.ajax({type:"POST",url:"/resourceAdmin/pubcategories/relations",dataType:"json",contentType:"application/json",data:JSON.stringify({cate_id:e,resource_id:this._attributes.id}),beforeSend:function(e){e.setRequestHeader("code",t._currentUser.get("code"))},success:function(){this.fetchPubRelations()}.bind(this)})}},getPackRelations:function(){return this._packRelations.slice(0)},fetchPackRelations:function(e,t){var n=this;this._attributes.id&&this._currentUser.get("id")?this._currentUser.getAuthorID((function(i){if(!i)return e&&e([]);var a=n;$.ajax({type:"GET",url:"/resourceAdmin/resourcepacks/categories/relations?resource_id="+n._attributes.id+"&owner_id="+i,dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",a._currentUser.get("code"))},success:function(t){a._packRelations=t,e&&e(a.getPackRelations())},error:t})})):e&&e(this.getPackRelations())},updatePackRelations:function(e){if(e&&e instanceof Array){for(var t=this.getPackRelations(),n=[],i=0;a=t[i];i++)-1===e.indexOf(a)?n.push(a):e.splice(e.indexOf(a),1);for(i=0;a=n[i];i++)this.removePackRelations(a.resourcepack_id,a.id);var a;for(i=0;a=e[i];i++)this.addPackRelation(a.resourcepack_id,a.cate_id)}},removePackRelations:function(e,t){if(this._attributes.id){var n=this;$.ajax({type:"DELETE",url:"/resourceAdmin/resourcepacks/"+e+"/categories/relations",dataType:"json",contentType:"application/json",data:JSON.stringify({id:t+""}),beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))}})}},addPackRelation:function(e,t){if(this._attributes.id){var n=this;$.ajax({type:"POST",url:"/resourceAdmin/resourcepacks/"+e+"/categories/relations",dataType:"json",contentType:"application/json",data:JSON.stringify({cate_id:t,resource_id:this._attributes.id}),beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))}})}},reset:function(e){this._attributes={owner:{source_id:null,source_from:"user"}},this._pubRelations=[],this._packRelations=[],e&&this.setAttr(e),this.dispatchEvent("reset"),this.createWS()},save:function(e,t){var n=this,i=e.fileInfo,a=e.pubRelations,s=e.packRelations,o=e.success,r=e.error;if(!this.checkLegal())return this.saveAs({fileInfo:i,pubRelations:a,packRelations:s,success:o,error:r},t);i.id=this.get("source_id"),$.ajax({type:"PUT",url:"/resourceAdmin/netpadFile/"+(t?"?forceEdit=true":""),dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))},data:JSON.stringify(i),success:function(e){n.setAttr(e),n.updatePubRelations(a),n.updatePackRelations(s),o&&o(n.getAttr())},error:r})},saveAs:function(e){var t=this,n=e.fileInfo,i=e.pubRelations,a=e.packRelations,s=e.success,o=e.error;$.ajax({type:"POST",url:"/resourceAdmin/netpadFile",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",t._currentUser.get("code"))},data:JSON.stringify(n),success:function(e){t._pubRelations=[],t._packRelations=[],t.setAttr(e),t.dispatchEvent("reset"),t.updatePubRelations(i),t.updatePackRelations(a),s&&s(t.getAttr())},error:o})},checkLegal:function(){return!!this._attributes.id},isUser:function(){return"user"===this._attributes.owner.source_from},isMyOriginalFile:function(){return this.isMyFile()&&"original"==this._attributes.source_type},isMyFile:function(){return this.get("id")&&this._currentUser.isSelfByOwner(this._attributes.owner)},isNewFile:function(){return!this._attributes.id&&!this._attributes.parent_id},isFromLocal:function(){return!this._attributes.id&&this._attributes.parent_id},checkAuthority:function(e){return"shared"===this._attributes.jurisdiction||this._currentUser.isVip()&&"read-only"==this._attributes.jurisdiction?e(!0):void this.isOwner((function(t){e(t)}))},isOwner:function(e){return this._attributes.id?this.isMyFile()?e(!0):this.isUser()?e(!1):void this._currentUser.isInGroup(this._attributes.owner.source_id,(function(t){e(t)})):e(!0)},editStatusIsTrue:function(){return!this.isUser()&&(!!this.editStatus.isEdit&&this.editStatus.user.id==this._currentUser.get("id"))}}),e.exports=n},function(e,t){var n=np.EventDispatcher,i=function(e,t){n.call(this),this._currentUser=e,this._attributes={id:t.id,isgeneral:t.isgeneral,author_id:t.author_id,author:t.author,name:t.name,content:t.content,summary:t.summary}};$.extend(i.prototype,n.prototype,{getID:function(){return this._attributes.id},getContent:function(){return this._attributes.content},setAttr:function(e,t){if(e){for(var n in e)this._attributes.hasOwnProperty(n)&&(this._attributes[n]=e[n]);t||this.dispatchEvent("change")}},getAttr:function(){return $.extend({},this._attributes)},update:function(e){$.ajax({type:"PUT",url:"/workspaceAdmin/workspaces/"+this._attributes.id,dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this._currentUser.get("code"))}.bind(this),data:e,success:function(e){this.setAttr(e)}.bind(this)})},fetchWorkspaces:function(e,t){if(this._attributes.content)return e&&e(this._attributes.content);$.ajax({type:"GET",url:"/workspaceAdmin/workspaces/"+this._attributes.id,dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this._currentUser.get("code"))}.bind(this),success:function(t){this._attributes.content=t.content,e&&e(t.content)}.bind(this),error:t})}}),e.exports=i},function(e,t){e.exports={jurisdiction:{shared:"共享","read-only":"只读",privated:"私有","own-only":"专有",quality:"优质"},file:"文件",newFile:"新建",save:"保存",saveAs:"另存",attr:"属性",open:"打开",myFile:"我的文件",localFile:"本地文件(NPC)",export:"导出",exportPng:"导出.png",exportPdf:"导出.pdf",exportSvg:"导出.svg",sourceFile:"本地文件(NPC)",hdPicture:"高清图片(.png/.pdf/.svg)",systemTheme:"系统预设主题",moreTheme:"更多主题...",language:"语言/Language",zh_cn:"简体中文/Chinese Simplified",en:"英文/English Beta",help:"帮助",fullScreen:"全屏",exitFullScreen:"退出全屏",share:"分享",saveAsLocalFile:"保存为本地文件",downloadFail:"下载素材失败，请稍后重试！",unnamed:"未命名",login:"登录",vip0:"普通用户",vip1:"个人VIP",vip2:"校园VIP",vip3:"校园高级VIP",myStation:"我的空间",dashboard:"工作台",myGroups:"团队",account:"账号设置",exit:"退出",myResource:"我的资源",resourePackage:"资源包",waring:"警告",leave:"离开",stay:"留在此页",leaveTip:"你确定要离开图形吗？未保存的工作将会丢失。",forbidSave:"该作品受版权保护，不能私自保存",switchTheme:"切换主题",sure:"确定",cancel:"取消",switchThemeTitle:"确定切换主题吗？",switchThemeTip:"温馨提示：切换主题不影响已存在的内容",myTheme:"我的主题",setAsDefault:"设为默认",themeDescript:"这是一段简介...",loginTimeout:"用户信息已过期，请重新登录！",saveCourse:"保存素材",QualityOwnonlyForbidReSave:"从本地导入的优质、专有素材，不能另存为我的资源。",saveAsCourse:"另存素材",saveAsCourceError:"另存素材失败，请稍后重试！",otherShareFileSave:"他人的共享素材，当前所做的修改可以另存。",otherReadOnlyFileForbidSave:"他人的只读素材，当前所做的修改不能保存。",otherOwnonlyOnlyFileForbidSave:"他人的专有素材，当前所做的修改不能保存。",otherPrivatedFileForbidSave:"他人的私有素材，当前所做的修改不能保存。",otherQualityFileForbidSave:"他人的优质素材，当前所做的修改不能保存。",readForbidSave:'当前为只读模式，你所作的修改<span style="color: #f00;">不能保存</span>。',EditByOther:"本素材正在被别人编辑，您所做的修改不能保存！",editModeSave:"当前为协作编辑模式，你所作的修改可保存到该文件。",cooperate:"协作",CannotEdit:"不能编辑",EditAnyway:"仍要编辑",title:"标题",descript:"简介",descriptDefault:"简要介绍一下吧！\n方便了别人，也照亮了自己",tag:"标签",addTag:"添加新标签",authority:"权限",thumbnail:"缩略图",relateCate:"关联体系",myResourcePackage:"我的资源包",reminder:'温馨提示:加<span style="color:#f00;margin:0 2px;">*</span>号项目为必填。',searchKey:"请输入关键字",updateTime:"更新时间",creatTime:"创建时间",browse:"浏览次数",loadMore:"加载更多",noMore:"没有更多了",loading:"正在加载···",emptyPackage:"你还没有创建资源包",delTheme:"删除主题",delThemeWindow:"确定删除本主题吗？",choosed:"已选择",relateResourcePackage:"关联资源包",noResourcePackage:"您还没有创建资源包。",return:"返回",academicDiscipline:"学段学科",version:"版本",chapter:"章节",knowledge:"知识点",textbooks:"教材",topic:"主题",copySuccess:"链接已复制到剪贴板",sharePreviewUrl:"分享浏览地址",shareEditUrl:"分享编辑地址",openPreviewUrl:"开启分享后，通过链接，任何人都可以安全地浏览本资源。\n 开启分享后可关闭。",openEditUrl:"开启分享后，通过链接，任何人都可以安全地在编辑器中打开本资源。\n 开启分享后可关闭。",openShareUrl:"开启分享",closeShareUrl:"关闭分享",sharePreviewTip:"通过链接，任何人都可以安全地浏览本资源。",shareEditTip:"通过链接，任何人都可以安全地在编辑器中打开本资源。",copyPreviewUrl:"复制浏览链接",copyEditUrl:"复制编辑地址",refresh:"刷新",expiredDateTip:function(e){return e<=0?"链接地址已过期，需刷新后才能正常访问！":"链接地址有效期还剩"+e+"天，刷新后重新计数。"},expiredDate:"链接有效期",Days7:"7天",Days30:"30天",Years1:"1年",qrcode:"使用手机扫一扫",shareLinkError:function(e){return e?"抱歉，该链接已过期":"抱歉，该链接已关闭"},more:"查看更多",bgTransparency:"背景透明",quality:"品质",pictureSize:"图片大小",pixel:"像素",exportPicture:"导出图片",exporting:"正在获取高清图片数据...",exportSuccess:"获取图片数据成功",exportFaild:"获取图片数据失败",globalSetting:"全局设置",globalAxis:"全局坐标系",UscFun:"自定义函数",UscAxis:"自定义坐标系",default:"默认",basis:"基础",grid:"网格",AutoNamePoint:"新点自动命名",paperColor:"画布颜色",type:"类型",rectangularCoordinates:"直角坐标",polarCoordinates:"极坐标",step:"间距",offset:"偏移",PI2:"π/2单位",number:"显示数字",tick:"显示刻度",antialias:"反锯齿",fog:"雾效",perspective:"透视度",appearance:"外观",setting:"设置",senior:"高级",label:"标签",name:"名称",callShow:"显示",fontColor:"字色",fontSize:"字号",object:"对象",show:"显示",locked:"锁定",selectable:"可选",traced:"跟踪",traceLength:"痕长",strokeColor:"线色",strokeWidth:"线宽",strokeStyle:"线型",fillColor:"填充色",fillTexture:"填充纹理",borderRadius:"边框圆角",iconColor:"图标色",bArrow:"起始箭头",eArrow:"结束箭头",isTexture:"填充纹理",texture:"纹理",pointSize:"点径",twinkle:"闪烁",drawPoint:"离散",wireframe:"线框",colorful:"炫彩",blocking:"遮挡",isFanShaped:"扇形",underside:"底面",spherical:"球面",showBtn:"显示播放按钮",showRuler:"显示滑杆",showVariable:"显示变量名",showInput:"显示输入框",arrow:"箭头",braces:"花括号",lengthStyle:"标注",left:"左",top:"上",btnStyle:"类型",fontStyle:"文本",imageStyle:"图标",icon:"图标",setIcon:"设置图标",custom:"自定义",measureStyle:"展示",noLabel:"无标签",curLabel:"当前标签",originCalculate:"原计算",calculate:"计算",audioSrc:"音频",setAudioSrc:"设置音频",audioPlay:"次数",once:"播放一次",repeat:"循环播放",angleDirect:"显示箭头",labelStyle:"类型",animationType:"播放按钮",twoWay:"双向",position:"位置",fValue:"起值",eValue:"终值",stepNum:"阈值",accuracy:"精度",thickness:"厚度",shader:"着色",shaderSelf:"自身颜色",shaderOrigin:"跟随原象",layerShader:"分层着色",layerRandom:"分层随机",isSmooth:"圆滑",density:"密度",deneType:"类型",vertex_vertex:"顶点-顶点",center_vertex:"中心-顶点",vertex_center:"顶点-中心",defineType:"类型",arcBy3Points:"过三点的弧",arcByCircleAngle:"圆周角上的弧",arcByCircleCore:"圆心与两点的弧",angleDefine:"角型",bigAngle:"优⻆",smallAngle:"劣⻆",clockwise:"顺时针",anticlockwise:"逆时针",unit:"单位",radian:"弧度",angle:"角度",coorType:"平移",rightAngleAxis:"直角坐标",level:"水平",vertical:"垂直",coorX:"X",coorY:"Y",coorZ:"Z",bind:"绑定点",unbind:"解绑",conicType:"类型",hyperbola:"双曲线",parabola:"抛物线",ellipse:"椭圆",playType:"播放方向",Return:"往返",forward:"正向",reverse:"反向",fixedAngle:"定角",fixedLength:"定长",lineType:"线形",lineLength:"线长",segment:"线段",radial:"射线",straight:"直线",planeType:"形状",triangle:"三角形",rectangle:"矩形",diamond:"菱形",roundness:"圆度",translate:"平移",inLine:"线内",limit:"限制",isIn:"内分",isClosed:"曲线闭合",isInner:"内切",isSegmentColor:"色随原象",directReverse:"反向",inPlane:"面内",isVertical:"垂直",segmentType:"分段",isParallel:"并行",cornerPoint:"角点",inVais:"点值",ratio:"比例",inverPower:"反演",pNum:"样本",eccentricity:"离心率",rStrObj:"半径",radius:"半径",taper:"锥度",entityHeight:"高度",edgeNum:"边数",gapAngle:"缺口",corner:"转角",lineAngle:"线面角",pWidth:"宽度",pHeight:"高度",dx:"dx",dy:"dy",ang:"弧角",transform:"变换",length:"长",width:"宽",height:"高",playExp:"播放控制",range1:"范围1",range2:"范围2",outVais:"拖动",dragDx:"拖x",dragDy:"拖y",point:"点",circle:"圆",polygon:"多边形",conic:"圆锥曲线",measure:"测量",var:"变量",animation:"动画",action:"动作",actionBtn:"动作按钮",path:"路径",entity:"实体",plane:"平面",surface:"曲面",circularArc:"圆弧",arc:"弧",ruledSurface:"直纹面",curvesPath:"函数曲线",locusPath:"轨迹曲线",lineLabel:"线的标注",angleLabel:"角的标注","2PointLabel":"两点标注",none:"无",digitalPrecision:"变量与计算显示精度",scene:"场景",sceneColor:"场景颜色",axisOfCoor:"坐标轴",axisControlPoint:"坐标轴控制点",unitControlPoint:"单位控制点",fPoint:"自由点",hfPoint:"半自由点",cPoint:"约束点",curve:"曲线",ball:"球",frustum:"圆台",prism:"棱台",convex:"凸包",polyhedron:"多面体",ShowGrid:"显示网格",tranformPath:"变换路径",showPlayBtn:"显示播放按钮",showVarRuler:"显示滑杆",forbidRead:"无权限查看此资源",onlineLoadFaild:"在线：课件加载失败",tip:"提示",recovery:"恢复",recoveryFile:"系统存在缓存文件，是否恢复？",cancelRecovery:"若取消，缓存文件将会丢失!",saveFaild:"保存失败",downloading:"正在准备下载...",screenshotSuccess:"截图成功",screenshotFail:"截图失败"}},function(e,t,n){var i=n(1),a=function(e,t,n){this.pubcategories=e,this.parent=t,this.relations=n,this.$el=$('<div class="'+i["rel-relationed"]+'"></div>'),this.$first=$('<div class="'+i["rel-relationed-first"]+'"></div>'),this.$el.append(this.$first),this.$el.on("mouseenter",".sort-desc",function(){this.$list=$('<div class="'+i["rel-more-list"]+'"></div>');for(var e,t=0;e=this.relations[t];t++)this.$list.append(this.singleRelationEl(e,t+1));this.$el.append(this.$list)}.bind(this)),this.$el.on("mouseleave","."+i["rel-more-list"],(function(e){$(e.currentTarget).remove(),this.$list=null})),this.$el.on("click",".npsvg-close",function(e){this.$list&&this.$list.remove(),this.parent.removeRelations(e.target.getAttribute("name"))}.bind(this)),this.render()};a.prototype={render:function(){if(this.$first.empty(),0!==this.relations.length){var e=this.relations[0].cate_id;this.pubcategories.getPathNameByCate(e,function(t){this.$first.empty(),this.$first.append(' <a class="'+i["a-link"]+'" target="_blank" href="/resource_web/#/resources/?assort='+e+'">1. '+t.shift()+"："+t.join(" > ")+"</a>"),this.relations.length>1?this.$first.append('<span class="npsvg-iconfont sort-desc '+i["rel-relationed-btn"]+'">&#xe603;</span>'):this.$first.append('<span name="'+e+'" class="npsvg-iconfont npsvg-close '+i["rel-relationed-btn"]+'" style="font-size: 10px;">&#xe60a;</span>')}.bind(this))}},updateRelations:function(e){this.relations=e,this.render()},singleRelationEl:function(e,t){var n=$('<div class="'+i["rel-relationed-first"]+'"></div>');return this.pubcategories.getPathNameByCate(e.cate_id,(function(a){n.html('<a class="'+i["a-link"]+'" target="_blank" href="/resource_web/#/resources/?assort='+e.cate_id+'">'+t+"."+a.shift()+"： "+a.join(" > ")+'</a><span name="'+e.cate_id+'" class="'+i["rel-more-list-remove"]+' npsvg-iconfont npsvg-close" style="font-size: 10px;">&#xe60a;</span>')})),n}},e.exports=a},function(e,t,n){var i=n(1),a=function(e,t,n){this.$el=$('<div class="'+i["rel-relationed-first"]+'" ></div>'),this.name="",this.path="",this.index=n,this.URL="/resource_web/packageDetail/#/"+t.resourcepack_id+"?assort="+t.cate_id,e.fetchInfo(function(e){this.name=this.index+1+": "+e.name,this.render()}.bind(this)),e.getPathNameByCate(t.cate_id,function(e){e.shift(),this.path=e.join(" > "),this.render()}.bind(this))};a.prototype={render:function(){this.$el.html('<a class="'+i["a-link"]+'" target="_blank" href="'+this.URL+'">'+this.name+": "+this.path+'</a><span name="'+this.index+'" class="'+i["rel-more-list-remove"]+'  npsvg-close npsvg-iconfont" style="font-size: 10px;">&#xe60a;</span>')}};var s=function(e,t,n){this.packages=e,this.parent=t,this.pack_name="",this.cate_path="",this.relations=n,this.$el=$('<div class="'+i["rel-relationed"]+'"></div>'),this.$first=$('<div class="'+i["rel-relationed-first"]+'"></div>'),this.$el.append(this.$first),this.$el.on("mouseenter",".sort-desc",function(){this.$list=$('<div class="'+i["rel-more-list"]+'"></div>');for(var t,n=0;t=this.relations[n];n++)this.$list.append(new a(e.getPackage(t.resourcepack_id),t,n).$el);this.$el.append(this.$list)}.bind(this)),this.$el.on("mouseleave","."+i["rel-more-list"],(function(e){$(e.currentTarget).remove(),this.$list=null})),this.$el.on("click",".npsvg-close",function(e){this.$list&&this.$list.remove();var t=this.relations[e.target.getAttribute("name")];t&&this.parent.removePackRelations(t.resourcepack_id,t.cate_id)}.bind(this)),this.updateRelations(this.relations)};s.prototype={render:function(){if(this.$first.empty(),0!==this.relations.length){var e=this.relations[0];this.$first.append('<a class="'+i["a-link"]+'"  target="_blank" href="/resource_web/packageDetail/#/'+e.resourcepack_id+"/?assort="+e.cate_id+'">'+this.pack_name+"："+this.cate_path+"</a>"),this.relations.length>1?this.$first.append('<span class="npsvg-iconfont sort-desc '+i["rel-relationed-btn"]+'">&#xe603;</span>'):this.$first.append('<span name="0" class="npsvg-iconfont npsvg-close '+i["rel-relationed-btn"]+'" style="font-size: 10px;">&#xe60a;</span>')}},updateRelations:function(e){if(this.relations=e,0!==this.relations.length){var t=this.relations[0];this.packages.getPackage(t.resourcepack_id).fetchInfo(function(e){this.pack_name=e.name,this.render()}.bind(this)),this.packages.getPackage(t.resourcepack_id).getPathNameByCate(t.cate_id,function(e){e.shift(),this.cate_path=e.join(" > "),this.render()}.bind(this))}else this.render()}},e.exports=s},function(e,t,n){var i,a=n(12),s=((i=function(e){var t=this;for(var n in this.option={label:"",tip:"",disable:!1,backgroundColor:"#000",color:"#fff",callback:null},e)this.option.hasOwnProperty(n)&&(this.option[n]=e[n]);this.el=document.createElement("div"),this.el.setAttribute("class",a.dropDownBtn);var i=document.createElement("div");i.setAttribute("class",a["drop-btn"]),i.innerHTML=e.label,this.dropBtn=i,this.el.appendChild(i),this.tip=document.createElement("div"),this.tip.setAttribute("class",a.tip),this.tip.style.backgroundColor=this.option.backgroundColor,this.tip.style.color=this.option.color,this.tipContent=document.createElement("div"),this.tipContent.setAttribute("style","padding:5px"),this.tipContent.innerHTML=e.tip,this.tip.appendChild(this.tipContent);var s=document.createElement("div");s.setAttribute("style","border-top: 5px transparent dashed;\n        border-left: 5px transparent dashed;\n        border-right: 5px transparent dashed;\n        border-bottom: 5px ".concat(this.option.backgroundColor," solid;    width: 10px;\n        position: absolute;\n        top: -10px;\n        left: 10px;")),this.tip.appendChild(s),this.el.appendChild(this.tip),i.addEventListener("mouseenter",(function(){t.tip.style.display="block"})),i.addEventListener("mouseleave",(function(){t.tip.style.display="none"})),i.addEventListener("click",(function(){t.option.disabel||t.option.callback&&t.option.callback()}))}).prototype.update=function(e){for(var t in e)this.option.hasOwnProperty(t)&&(this.option[t]=e[t]);this.option.disable?this.dropBtn.setAttribute("class",a.disable+" "+a["drop-btn"]):this.dropBtn.setAttribute("class",a["drop-btn"]),this.tipContent.innerHTML=this.option.tip,this.dropBtn.innerHTML=this.option.label},i);e.exports=s},function(e,t,n){var i=n(2),a=n(37);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};i(a,s);e.exports=a.locals||{}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=n(5),g=NetpadEditor.components.NumberInput,f=function(){function e(t,n){d(this,e),this.parent=t,this.language=n}return h(e,[{key:"validate",value:function(){return!0}},{key:"fire_change",value:function(){this.parent.fire_change()}},{key:"addDivider",value:function(){this.$el.append($("<hr>"))}},{key:"addTitle",value:function(e){this.$el.append('<div class="'+p["setting-element"]+'" >'+e+"</div>")}}]),e}(),v=function(e){a(n,e);var t=o(n);function n(e,i,a,s){var o;d(this,n),o=t.call(this,e,s);var r="npCheck"+Math.random();return o.$el=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+a+'</div><div class="'+p["setting-content"]+'"><input id="'+r+'" type="checkbox" class="'+p["check-input"]+'"><label  for="'+r+'"></label ></div></div>'),i&&o.$el.find("input").prop("checked",i),o}return h(n,[{key:"getValue",value:function(){return this.$el.find("input").prop("checked")}}]),n}(f),m={solid:"netpad-1106",dashed1:"netpad-1107",dashed2:"netpad-1108"},y=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.strokeColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height: 20px;"></div></div></div><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.strokeWidth+'</div><div class="'+p["setting-content"]+'"><div name="width" class="'+p["number-input"]+'"></div></div></div><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.strokeStyle+'</div><div class="'+p["setting-content"]+'"><div name="style" style="position:relative;border: 1px solid #D3D3D3;cursor:pointer;width:148px;height: 18px;text-align: center;"><div class="edit-font"><svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#'+m[i.style]+'"></use></svg></div></div></div></div></div>'),s.width=new g(l(s),{allowNagetive:!1}),s.width.addEventListener("blur",s.fire_change.bind(l(s))),s.width.addEventListener("change",s.fire_change.bind(l(s))),s.$styleList=$('<ul class="'+p["menu-list"]+'"><li name="solid"><svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#'+m.solid+'"></use></svg></li><li name="dashed1"><svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#'+m.dashed1+'"></use></svg></li><li name="dashed2"><svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#'+m.dashed2+'"></use></svg></li></ul>'),s.colorPick=new npColorPick({color:i}),s.width.setValue(i.width),s.$el.find("div[name=width]").append(s.width.el),s.$el.find("div[name=color]").append(s.colorPick.$el),s.$el.find("div[name=style]").append(s.$styleList),s.style=i.style,s.$el.find("div[name=style]").on("click",function(){"block"===this.$styleList[0].style.display?this.$styleList.hide():this.$styleList.show()}.bind(l(s))),s.$styleList.on("click","li",function(e){var t=e.currentTarget.getAttribute("name");this.style=t,this.$el.find(".edit-font").html('<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#'+m[t]+'"></use></svg>'),this.$styleList.hide(),e.stopPropagation()}.bind(l(s))),s.$styleList.on("mouseleave",function(){this.$styleList.hide()}.bind(l(s))),s}return h(n,[{key:"getValue",value:function(){var e=this.colorPick.getColor();return{width:this.width.getValue(),style:this.style,color:e.color,opacity:e.opacity}}},{key:"validate",value:function(){return this.width.validate()}}]),n}(f),b=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.fillColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height: 20px;"></div></div></div>'),s.colorPick=new npColorPick({color:i}),s.$el.find("div[name=color]").append(s.colorPick.$el),s}return h(n,[{key:"getValue",value:function(){return this.colorPick.getColor()}}]),n}(f),x=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.iconColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height: 20px;"></div></div></div>'),s.colorPick=new npColorPick({color:i}),s.$el.find("div[name=color]").append(s.colorPick.$el),s}return h(n,[{key:"getValue",value:function(){return this.colorPick.getColor()}}]),n}(f),_=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.fontColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height: 20px;"></div></div></div><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.fontSize+'</div><div class="'+p["setting-content"]+'"><div name="size" class="'+p["number-input"]+'"></div></div></div></div>'),i.hasOwnProperty("color")||(i.color=i.font_color),i.hasOwnProperty("opacity")||(i.opacity=i.font_opacity),i.hasOwnProperty("size")||(i.size=i.font_size),s.colorPick=new npColorPick({color:i}),s.fontSize=new g(l(s),{allowFloat:!1,min:10}),s.fontSize.setValue(i.size),s.$el.find("div[name=color]").append(s.colorPick.$el),s.$el.find("div[name=size]").append(s.fontSize.el),s}return h(n,[{key:"getValue",value:function(){var e=this.colorPick.getColor();return{color:e.color,opacity:e.opacity,size:this.fontSize.getValue()}}},{key:"validate",value:function(){return this.fontSize.validate()}}]),n}(f),w=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.bArrow=new v(l(s),i.bArrow,s.language.bArrow),s.eArrow=new v(l(s),i.eArrow,s.language.eArrow),s.$el.append(s.bArrow.$el),s.$el.append(s.eArrow.$el),s}return h(n,[{key:"getValue",value:function(){return{bArrow:this.bArrow.getValue(),eArrow:this.eArrow.getValue()}}}]),n}(f),k=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.borderRadius+'</div><div class="'+p["setting-content"]+'"><div name="borderRadius" class="'+p["number-input"]+'"></div></div></div>'),s.borderRadius=new g(l(s),{allowNagetive:!1,allowFloat:!1}),s.borderRadius.setValue(i||0),s.$el.find("div[name=borderRadius]").append(s.borderRadius.el),s}return h(n,[{key:"getValue",value:function(){return parseInt(this.borderRadius.getValue())}},{key:"validate",value:function(){return this.borderRadius.validate()}}]),n}(f),S=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.measure+"/"+s.language.calculate),s.stroke=new y(l(s),i.Calculation.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.Calculation.fill,s.language),s.$el.append(s.fill.$el),s.font=new _(l(s),i.Calculation.font,s.language),s.$el.append(s.font.$el),s}return h(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()}},{key:"getValue",value:function(){return{Calculation:{stroke:this.stroke.getValue(),fill:this.fill.getValue(),font:this.font.getValue()}}}}]),n}(f),C=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.UscFun),s.stroke=new y(l(s),i.CustomFunction.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.CustomFunction.fill,s.language),s.$el.append(s.fill.$el),s.font=new _(l(s),i.CustomFunction.font,s.language),s.$el.append(s.font.$el),s}return h(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()}},{key:"getValue",value:function(){return{CustomFunction:{stroke:this.stroke.getValue(),fill:this.fill.getValue(),font:this.font.getValue()}}}}]),n}(f),A=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.animation),s.stroke=new y(l(s),i.Animation.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.Animation.fill,s.language),s.$el.append(s.fill.$el),s.font=new _(l(s),i.Animation.font,s.language),s.$el.append(s.font.$el),s.icon=new x(l(s),i.Animation.icon,s.language),s.$el.append(s.icon.$el),s.borderRadius=new k(l(s),i.Animation.borderRadius,a),s.$el.append(s.borderRadius.$el),s.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.animationType+'</div><div class="'+p["setting-content"]+'"><select style="width:104px;height: 23px;border: 1px solid #D3D3D3;"><option value="0">'+s.language.forward+'</option><option value="1">'+s.language.reverse+'</option><option value="2">'+s.language.twoWay+"</option></select></div></div>"),s.$el.find("select").val(i.Animation.animationType||"0"),s}return h(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()&&this.borderRadius.validate()}},{key:"getValue",value:function(){return{Animation:{stroke:this.stroke.getValue(),fill:this.fill.getValue(),font:this.font.getValue(),icon:this.icon.getValue(),borderRadius:this.borderRadius.getValue(),animationType:this.$el.find("select").val()}}}}]),n}(f),P=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.action),s.stroke=new y(l(s),i.Action.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.Action.fill,s.language),s.$el.append(s.fill.$el),s.font=new _(l(s),i.Action.font,s.language),s.$el.append(s.font.$el),s.borderRadius=new k(l(s),i.Action.borderRadius,a),s.$el.append(s.borderRadius.$el),s}return h(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()&&this.borderRadius.validate()}},{key:"getValue",value:function(){return{Action:{stroke:this.stroke.getValue(),fill:this.fill.getValue(),font:this.font.getValue(),borderRadius:this.borderRadius.getValue()}}}}]),n}(f),T=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.var),s.stroke=new y(l(s),i.Variable.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.Variable.fill,s.language),s.$el.append(s.fill.$el),s.font=new _(l(s),i.Variable.font,s.language),s.$el.append(s.font.$el),s.icon=new x(l(s),i.Variable.icon,s.language),s.$el.append(s.icon.$el),s.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+s.language.pWidth+'</div><div class="'+p["setting-content"]+'"><div name="rulerWidth" class="'+p["number-input"]+'"></div></div></div>'),s.rulerWidth=new g(l(s),{allowNagetive:!1}),s.rulerWidth.setValue(i.Variable.rulerWidth),s.rulerWidth.addEventListener("blur",s.fire_change.bind(l(s))),s.rulerWidth.addEventListener("change",s.fire_change.bind(l(s))),s.showBtn=new v(l(s),i.Variable.showBtn,s.language.showPlayBtn),s.showRuler=new v(l(s),i.Variable.showRuler,s.language.showVarRuler),s.showVariable=new v(l(s),i.Variable.showVariable,s.language.showVariable),s.showInput=new v(l(s),i.Variable.showInput,s.language.showInput),s.$el.find("div[name=rulerWidth]").append(s.rulerWidth.el),s.$el.append(s.showBtn.$el),s.$el.append(s.showRuler.$el),s.$el.append(s.showVariable.$el),s.$el.append(s.showInput.$el),s}return h(n,[{key:"validate",value:function(){return this.rulerWidth.validate()&&this.stroke.validate()&&this.font.validate()}},{key:"getValue",value:function(){return{Variable:{rulerWidth:this.rulerWidth.getValue(),showBtn:this.showBtn.getValue(),showRuler:this.showRuler.getValue(),showVariable:this.showVariable.getValue(),showInput:this.showInput.getValue(),stroke:this.stroke.getValue(),fill:this.fill.getValue(),font:this.font.getValue(),icon:this.icon.getValue()}}}}]),n}(f),N=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.fontStyle),s.stroke=new y(l(s),i.DynamicText.stroke,s.language),s.$el.append(s.stroke.$el),s.fill=new b(l(s),i.DynamicText.fill,s.language),s.$el.append(s.fill.$el),s}return h(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{DynamicText:{stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}}]),n}(f),E=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return d(this,n),(s=t.call(this,e,a)).$el=$('<div class="'+p["setting-box"]+'"></div>'),s.addTitle(s.language.label),s.font=new _(l(s),i.Label,s.language),s.$el.append(s.font.$el),s}return h(n,[{key:"validate",value:function(){return this.font.validate()}},{key:"getValue",value:function(){return{Label:this.font.getValue()}}}]),n}(f),R=function(){function e(t,n,i){d(this,e),this.parent=t,this.ThemeConfig=n,this.language=i,this.$el=$('<div class="'+p["theme-setting"]+'"></div>'),this.$elementList=$('<div class="'+p["elements-list"]+'"></div>'),this.$elementConfig=$('<div class="'+p["element-config"]+'"></div>'),this.elementConfig={},this.currentConfig="",this.$el.append(this.$elementList).append(this.$elementConfig),this.renderElementList(),this.renderElementConfig("Global"),this.addEvents()}return h(e,[{key:"addEvents",value:function(){this.$elementList.on("click","."+p["element-list-single"],function(e){var t=e.target.getAttribute("name");this.currentConfig!==t&&(this.renderElementConfig(t),this.$elementList.find("."+p["element-list-single"]).removeClass(p["element-list-active"]),e.target.className=e.target.className+" "+p["element-list-active"])}.bind(this))}},{key:"ElementListConfig",get:function(){return{}}},{key:"getValue",value:function(){var e=this.ThemeConfig;for(var t in this.ElementListConfig)this.elementConfig[t]&&$.extend(e,this.elementConfig[t].getValue());return e}},{key:"renderElementList",value:function(){}},{key:"renderElementConfig",value:function(e){if(this.currentConfig&&this.elementConfig[this.currentConfig]){if(!this.elementConfig[this.currentConfig].validate())return;this.elementConfig[this.currentConfig].$el.detach()}this.currentConfig=e,this.elementConfig[e]||(this.elementConfig[e]=new this.ElementListConfig[e](this,this.ThemeConfig,this.language)),this.$elementConfig.append(this.elementConfig[e].$el)}},{key:"fire_change",value:function(){this.parent.fire_change()}},{key:"validate",value:function(){return!this.elementConfig[this.currentConfig]||this.elementConfig[this.currentConfig].validate()}}]),e}();e.exports={CompBase:f,CheckBox:v,Stroke:y,Fill:b,Font:_,Arrow:w,Calculation:S,CustomFunction:C,Animation:A,Action:P,Variable:T,DynamicText:N,Label:E,EnvironmentConfig:R}},function(e,t,n){var i=n(15),a=n(6),s=n(16),o=n(52),r=n(0);$(document).ready((function(){var e=new i,t=new a(e),n=new s(e,t);new o(e,t,n);!function(){if(NetpadPreview.userAgent.isPc)return;if(document.body.clientWidth>document.body.clientHeight)return;r.msgForm({modal:!0,icon:"npsitewarn",msg:"为了更好的体验，请将设备横过来!"})}(),function(){var e=document.createElement("script");e.src="https://s11.cnzz.com/z.js?id=1257414806&async=1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),new HeartBeat({clear:function(){e.update()}})}))},function(e,t){var n=Backbone.Model.extend({initialize:function(){i()&&(this.set(i()),this.fetchAttr()),this._groupMap={},this._isLoaded=!1,this._isFetchAuthor=!1,this.addEventOnStorage()},update:function(){this._isLoaded=!1,this._isFetchAuthor=!1,localStorage.getItem("userInfo")?this.set(i()):this.clear()},addEventOnStorage:function(){window.ActiveXObject||"ActiveXObject"in window?setInterval(this.update.bind(this),500):document.attachEvent?document.attachEvent("onstorage",this.update.bind(this)):window.addEventListener("storage",this.update.bind(this),!1)},fetchAttr:function(){this.fetch({url:" /userAdmin/users/"+this.get("id"),type:"GET"})},isVip:function(){return this.get("id")&&this.get("authority")&&this.get("authority")>0},addBehaviors:function(e,t,n){var i=this;this.get("code")&&this.get("id")&&$.ajax({type:"POST",url:"/userAdmin/behaviors",beforeSend:function(e){e.setRequestHeader("code",i.get("code"))},data:{user_id:this.get("id"),topic:e,topic_id:t,operation:n}})},exit:function(){this.clear(),this._isLoaded=!1,this._isFetchAuthor=!1,localStorage&&localStorage.removeItem("userInfo")},loginTimeout:function(){this.exit(),this.trigger("loginTimeout")},fetchGroups:function(e){var t=this;$.ajax({url:"/userAdmin/members/groups?user_id=".concat(this.get("id")),success:function(n){t._isLoaded=!0,t._groupMap={},n.forEach((function(e){var n=e.groups;t._groupMap[n.id]=n})),e(t._groupMap)}})},isInGroup:function(e,t){if(this._isLoaded)return t(this._groupMap[e]);this.fetchGroups((function(n){t(n[e])}))},fetchAuthorID:function(e){var t=this;$.ajax({url:"/resourceAdmin/authors/".concat(this.get("id"),"/user"),success:function(n){t._isFetchAuthor=!0,t.set({author_id:n.id}),e(n.id)},error:function(n){404===n.status&&(t._isFetchAuthor=!0),e(null)}})},getAuthorID:function(e){if(this._isFetchAuthor)return e(this.get("author_id"));this.fetchAuthorID((function(t){e(t)}))},isSelfByOwner:function(e){return this.get("id")&&"user"===e.source_from&&e.source_id==this.get("id")}});function i(){var e=localStorage.getItem("userInfo");return e?JSON.parse(e):null}e.exports=n},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(17),s=n(7),o=n(19),r=n(6),l=n(20),c=n(21),d=n(22),u=n(24),h=np.EventDispatcher,p=n(25),g=p.alertWaitMsg,f=(p.expiredUl,n(28)),v=n(30),m=n(0).msgForm,y=n(51),b=y.linkExpired,x=y.linkClose,_=function(e,t){h.call(this),this.languageType="zh_cn",this.userModel=e,this.fileModel=t,this.netpadEditor=null,this.dmDOM=document.getElementById("contentBody"),this.fileSaveService=new l(e,t);var n=new o(e);this.themeService=new c(e,this),this.audioService=new d(e),this.sharedResourceService=new u(this.userModel,this.fileModel),this.language=f[this.languageType],this.nav=new v({parent:$("#netpadNav"),userModel:e,fileModel:t,netpadSVG:this,netpadEditor:this.netpadEditor,pubcategories:n,themeService:this.themeService,fileSaveService:this.fileSaveService,sharedResourceService:this.sharedResourceService,language:this.language}),this.__addEvents__()};function w(e,t,n,i,a){var s={};t&&(s.code=t),n&&(s.forceEdit=!0),$.ajax({url:"/resourceAdmin/netpadFile/"+e,dataType:"json",data:s,success:i,error:a})}function k(e,t,n){a.getAutoCacheById(e,(function(e){e&&e.content?t&&t(e):n&&n()}),(function(){n&&n()}))}function S(e,t,n){var i=this;n.id=t,n.htmlContent=e,$.ajax({type:"PUT",url:"/resourceAdmin/webshot",contentType:"application/json",data:JSON.stringify(n),success:function(){console.log(i.language.screenshotSuccess)},error:function(){console.error(i.language.screenshotFail)}})}$.extend(_.prototype,np.EventDispatcher.prototype,{Events:{DM_CHANGE:0},__addEvents__:function(){var e=this;this.userModel.on("change:id",(function(){e.isLoadAudioList=!1,e.audioList=[],e.netpadEditor&&(e.netpadEditor.toggleVip(e.userModel.isVip()),e.audioService.abortUpdate(),e.netpadEditor.updateAudio())})),document.ondragover=function(e){e.preventDefault()},document.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.files;t[0]&&/.npc$/.test(t[0].name)&&(e.stopPropagation(),this.restoreByNpcFile(t[0]))}.bind(this),!0),setInterval(function(){if(this.netpadEditor&&this.netpadEditor.isChanged()){var e={};e.id=parseInt(this.fileModel.getAttr().source_id||0),e.source_id=e.id,e.content=this.netpadEditor.toJSONLocal(),a.updateAutoCacheFile(e)}}.bind(this),6e4)},switchLanguage:function(e){this.languageType=e,this.language=f[this.languageType],this.nav.switchLanguage(this.language),this.netpadEditor.switchLanguage(this.languageType)},restoreByID:function(e,t){var n=this;npLoadingStatus.loading();var i=this;if(!e)return k(0,(function(e){i.restoreByCache(0,e,(function(){i.restoreEditorByMode("2D")}))}),(function(){i.restoreEditorByMode("2D")}));w.call(this,e,this.userModel.get("code"),t,(function(n){var a=new r(i.userModel,n);a.checkAuthority((function(s){if(!s&&!t)return npLoadingStatus.remove(),i.__msgForm__(i.language.forbidRead);k(e,(function(s){i.restoreByCache(e,$.extend({},n,{content:s.content}),(function(){i.restoreByFile(n),a.latestAccess(t)}))}),(function(){i.restoreByFile(n),a.latestAccess(t)}))}))}),(function(e){if(npLoadingStatus.remove(),401==e.status||412===e.status)return n.userModel.loginTimeout();n.__msgForm__(e.responseText)}))},restoreByShareID:function(e){var t=this;npLoadingStatus.loading(),this.sharedResourceService.getSharedResourceByID(e,(function(e){return"edit"!==e.operation||"course"!==e.topic?x(t.language):e.expired_day<=0?b(t.language,e.topic,e.topic_id):void t.restoreByID(e.topic_id,!0)}),(function(){x(t.language)}))},restoreByNpcFile:function(e){npLoadingStatus.loading(),function(e,t,n){if(!e)return;var i=new FileReader;i.readAsText(e),i.onload=function(){var n=CryptoJS.enc.Utf8.parse("6O3D4Q3W6D4E4F4X"),a=CryptoJS.enc.Hex.parse(i.result),s=CryptoJS.enc.Base64.stringify(a),o=CryptoJS.AES.decrypt(s,CryptoJS.MD5(n),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8),r=JSON.parse(o),l=r.meta||{},c=r.owner||{};r.author_id&&(c.source_id=r.author_id||l.authorID,c.source_from="user",c.name=r.author||l.author),t&&t({parent_id:r.parent_id||l.fileID,heading:e.name.replace(/.npc$/,""),content:r.fileContent,owner:c,create_at:r.create_at||l.downloadTime,update_at:r.update_at,summary:r.summary||"",operation:r.operation,jurisdiction:r.jurisdiction||"shared"})}}(e,function(e){this.restoreByFile(e),npLoadingStatus.remove()}.bind(this))},restoreByCache:function(e,t,n){npLoadingStatus.remove(),layer.open({type:1,title:this.language.tip,content:'<div style="width: 100%;padding: 20px"><div style="text-align: center;">'+this.language.recoveryFile+'</div><div style="text-align: center;">'+this.language.cancelRecovery+"</div></div>",btn:[this.language.recovery,this.language.cancel],btn1:function(){layer.closeAll(),npLoadingStatus.loading(),this.restoreByFile(t)}.bind(this),btn2:function(e){layer.close(e)},cancel:function(){n&&n(),a.clearAutoCacheById(e)}})},restoreByFile:function(e){this.restoreEditorByMode(function(e){"object"!==i(e)&&(e=JSON.parse(e));return 1==e.fileType||"3D"===e.environment}(e.content)?"3D":"2D",e)},restoreEditorByMode:function(e,t){return this.netpadEditor&&this.netpadEditor.mode===e?t?(this.fileModel.reset(t),this.netpadEditor.loadFromJSON(t.content),npLoadingStatus.remove()):this.constructEditor(e,this.themeService.getDefaultTheme(),t):this.userModel.get("id")?void function(e,t,n,i){$.ajax({type:"GET",url:"/workspaceAdmin/workspaces",dataType:"json",beforeSend:function(t){t.setRequestHeader("code","Bearer "+e.get("code"))}.bind(this),data:{mode:t,isgeneral:"1",author_id:e.get("id"),current_page:1,per_page:1},success:function(t){if(!t.data[0])return n&&n();var i=new s(e,t.data[0]);return i.fetchWorkspaces((function(){n&&n(i)}))},error:i})}(this.userModel,e,function(n){this.constructEditor(e,n,t)}.bind(this),function(){this.constructEditor(e,null,t)}.bind(this)):this.constructEditor(e,null,t)},constructEditor:function(e,t,n){this.fileModel.reset(n),this.themeService.updateDefaultTheme(t);var i={canUploadAudio:this.canUploadAudio.bind(this),uploadAudio:this.uploadAudio.bind(this),getAudioList:this.getAudioList.bind(this),getAudioByURL:this.getAudioByURL.bind(this),updateAudio:this.updateAudio.bind(this),delAudio:this.delAudio.bind(this),allowCopyCrossPages:this.fileModel.isMyOriginalFile()};if(t&&t.getContent()&&(i.environmentConfig=JSON.parse(t.getContent())),!n)return"3D"===e?NetpadEditor.create3D(this.dmDOM,i,this.__netpadEditor__.bind(this)):NetpadEditor.create2D(this.dmDOM,i,this.__netpadEditor__.bind(this)),npLoadingStatus.remove();NetpadEditor.createByContent(this.dmDOM,n.content,i,this.__netpadEditor__.bind(this)),npLoadingStatus.remove()},canUploadAudio:function(){return this.audioService.canUploadAudio()},uploadAudio:function(e,t,n,i){return this.audioService.uploadAudio(e,t,n,i)},getAudioList:function(e,t){this.audioService.getAudioList(e,t)},getAudioByURL:function(e,t,n){this.audioService.getAudioByURL(e,t,n)},updateAudio:function(e,t,n){this.audioService.updateAudio(e,t,n)},delAudio:function(e,t,n){this.audioService.delAudio(e,t,n)},save:function(e){this.__saveToServer__("save",e)},saveAs:function(e){this.__saveToServer__("saveAs",e)},forceSave:function(e){this.__saveToServer__("forceSave",e)},forceSaveAs:function(e){this.__saveToServer__("forceSaveAs",e)},saveAsNPC:function(e){this.__saveToLocal__(e)},__netpadEditor__:function(e){this.netpadEditor=e,this.netpadEditor.toggleVip(this.userModel.isVip()),this.netpadEditor.switchLanguage(this.languageType),this.netpadEditor.addEventListener(this.netpadEditor.Events.MODE_CHANGE_WANTED,function(){this.netpadEditor.netpadPreview.isChanged()&&!confirm(this.language.leaveTip)||this.restoreEditorByMode("3D"===this.netpadEditor.mode?"2D":"3D")}.bind(this)),this.dispatchEvent(this.Events.DM_CHANGE,{dynamicMath:this.netpadEditor}),"3D"===e.mode&&this.fileModel.setAttr({tags:"3D"})},__saveToServer__:function(e,t){if(this.netpadEditor){g("文件保存中，请耐心等待");var n=this.fileModel.getAttr().source_id||0;this.netpadEditor.toJSONServer(function(i){console.log(i);var s=$.extend({},t&&t.fileInfo,{content:i});this.fileSaveService[e]({fileInfo:s,pubRelations:t.pubRelations,packRelations:t.packRelations,success:function(e){S.call(this,this.netpadEditor.netpadPreview.exportPaperHTML(),this.fileModel.getAttr().source_id,this.netpadEditor.netpadPreview.getPaperThumbnail()),t.success&&t.success(e),this.netpadEditor.loadFromJSON(i),a.clearAutoCacheById(parseInt(n))}.bind(this),error:t.error})}.bind(this),t.error)}},__saveToLocal__:function(e){this.netpadEditor&&(g(this.language.downloading),this.netpadEditor.toJSONBase64(function(t){e.content=t,this.fileSaveService.saveAsNPC(e),this.__msgForm__("下载成功",{icon:"npsiteduigou",iconColor:"#6dd400",time:2e3})}.bind(this)))},__msgForm__:function(e,t){m($.extend({msg:e,modal:!0,icon:"npsitewarn",sure:this.language.sure},t))}}),e.exports=_},function(e,t,n){function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s=n(18),o=!1,r=null,l=[];try{s("JZJY",5,(function(e){e.objectStoreNames.contains("autoSave")||e.createObjectStore("autoSave",{keyPath:"id"})}),(function(e){r=e,c()}),(function(){o=!0,c()}))}catch(e){o=!0,console.warn("不支持本地存储！"),c()}function c(){for(;0!==l.length;){var e=l.pop();e.fun.apply(e,i(e.params))}}e.exports={getAutoCacheById:function e(t,n,i){o?i&&i():r?r.getData("autoSave",t,n,i):l.push({fun:e,params:[t,n,i]})},updateAutoCacheFile:function e(t,n,i){o?i&&i():r?r.replaceData("autoSave",t,n,i):l.push({fun:e,params:[t,n,i]})},clearAutoCacheById:function e(t,n,i){o?i&&i():r?r.delData("autoSave",t,n,i):l.push({fun:e,params:[t,n,i]})}}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dbControl=t}var t,i,a;return t=e,(i=[{key:"getData",value:function(e,t,n,i){var a=this.transacteRead(e).get(t);a.onsuccess=function(e){var t=e.target.result;n instanceof Function&&n(t)},a.onerror=function(e){console.error("getData error:",e.target.errorCode||e.target.error),i instanceof Function&&i()}}},{key:"replaceData",value:function(e,t,n,i){var a=this.transacteWrite(e).put(t);a.onsuccess=function(e){n instanceof Function&&n()},a.onerror=function(e){i instanceof Function&&i(t)}}},{key:"delData",value:function(e,t,n){var i=this.transacteWrite(e).delete(t);i.onsuccess=function(){n instanceof Function&&n()},i.onerror=function(e){console.error("delData error:",e.target.errorCode||e.target.error)}}},{key:"transacteRead",value:function(e){return this.dbControl.transaction(e).objectStore(e)}},{key:"transacteWrite",value:function(e){return this.dbControl.transaction(e,"readwrite").objectStore(e)}}])&&n(t.prototype,i),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=function(e,t,n,a,s){var o=indexedDB.open(e,t);o.onsuccess=function(e){console.log("initDb opened"),a instanceof Function&&a(new i(e.target.result))},o.onerror=function(e){console.error("initDb error:",e.target.errorCode||e.target.error),s instanceof Function&&s(null)},o.onupgradeneeded=function(e){console.log("initDb.onupgradeneeded");var t=e.currentTarget.result;n instanceof Function&&n(t)}}},function(e,t){var n=function(e){this._categories=[],this._categoriesMap={},this._currentUser=e,this._isLoaded=!1};$.extend(n.prototype,np.EventDispatcher.prototype,{fetchCategories:function(e,t){if(this._isLoaded)e&&e(this.getCategories());else{var n=this;$.ajax({type:"GET",url:"/resourceAdmin/pubcategories?status=shared",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))},success:function(t){n._isLoaded=!0,n._categories=t,n.updateCateMap(n._categories),e&&e(n.getCategories())},error:t})}},updateCateMap:function(e){for(var t,n=0;t=e[n];n++)this._categoriesMap[t.id]=t,t.children&&t.children.length>0&&this.updateCateMap(t.children)},getCategoryByID:function(e){return this._categoriesMap[e]},getCategories:function(){return this._categories.slice(0)},getPathNameByCate:function(e,t){for(var n=this.getCategoryByID(e),i=[];n&&(i.push(n.name),n.parent_id);)n=this.getCategoryByID(n.parent_id);n?t&&t(i.reverse()):$.ajax({type:"GET",url:"/resourceAdmin/pubcategories/"+e+"/path",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",this._currentUser.get("code"))}.bind(this),success:function(e){var n=[];e.forEach((function(e){n.push(e.name)})),t&&t(n)}})}}),e.exports=n},function(e,t,n){var i=n(4).formatDateTime,a=function(e,t){this._fileModel=t,this._currentUser=e};$.extend(a.prototype,np.EventDispatcher.prototype,{getAttr:function(){return this._fileModel.getAttr()},setAttr:function(e,t){this._fileModel.setAttr(e,t)},fetchPubRelations:function(e,t){this._fileModel.fetchPubRelations(e,t)},fetchPackRelations:function(e,t){this._fileModel.fetchPackRelations(e,t)},save:function(e){var t=e.fileInfo,n=e.pubRelations,i=e.packRelations,a=e.success,s=e.error;this._fileModel.isNewFile()&&(t.owner={name:this._currentUser.get("user_name"),source_id:this._currentUser.get("id"),source_from:"user"}),this._fileModel.save({fileInfo:t,pubRelations:n,packRelations:i,success:a,error:s})},saveAs:function(e){var t=e.fileInfo,n=e.pubRelations,i=e.packRelations,a=e.success,s=e.error;t.owner={name:this._currentUser.get("user_name"),source_id:this._currentUser.get("id"),source_from:"user"},t.parent_id=this._fileModel.getAttr().source_id||this._fileModel.getAttr().parent_id,this._fileModel.saveAs({fileInfo:t,pubRelations:n,packRelations:i,success:a,error:s})},forceSave:function(e){this._fileModel.save(e,!0)},forceSaveAs:function(e){var t=e.fileInfo,n=e.pubRelations,i=e.packRelations,a=e.success,s=e.error;t.owner={name:this._currentUser.get("user_name"),source_id:this._currentUser.get("id"),source_from:"user"},t.parent_id=null,this._fileModel.saveAs({fileInfo:t,pubRelations:n,packRelations:i,success:a,error:s},!0)},saveAsNPC:function(e){var t=i(new Date),n=$.extend({},this._fileModel.getAttr(),e),a=CryptoJS.enc.Utf8.parse("6O3D4Q3W6D4E4F4X"),s=CryptoJS.AES.encrypt(JSON.stringify({fileContent:n.content,heading:n.heading||"未命名",owner:n.owner,parent_id:n.source_id,summary:n.summary||"",jurisdiction:n.jurisdiction||"shared",create_at:t,update_at:t}),CryptoJS.MD5(a),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).ciphertext.toString(),o=new Blob([s],{type:"text/plain;charset=utf-8"});saveAs(o,(n.heading||"未命名")+".npc"),n.source_id&&$.ajax({type:"POST",url:"/resourceAdmin/netpadFile/"+n.source_id+"/download",dataType:"json",beforeSend:function(e){e.setRequestHeader("code",this._currentUser.get("code"))}.bind(this)})},checkSaveAuthority:function(e){if("shared"===this._fileModel.getAttr().jurisdiction)return e(!0);this._fileModel.isOwner(e)}}),e.exports=a},function(e,t,n){var i=np.EventDispatcher,a=n(7),s=NetpadPreview.utils.deepCopy,o=function(e,t){i.call(this),this.currentUser=e,this.dynamicMath=null,this.themes=[],this.defaultTheme=null,t.addEventListener(t.Events.DM_CHANGE,function(e){this.dynamicMath=e.dynamicMath}.bind(this))};$.extend(o.prototype,i.prototype,{updateDefaultTheme:function(e){this.defaultTheme=e,this.dispatchEvent("general_change")},getDefaultTheme:function(){return this.defaultTheme},getThemeConfig:function(e,t){if(e)for(var n,i=0;n=this.themes[i];i++)if(n.getID()===e)return n.fetchWorkspaces(function(e){t&&t(s(JSON.parse(e),this.dynamicMath.netpadPreview.getEnvironmentConfig()))}.bind(this));return this.defaultTheme?this.defaultTheme.fetchWorkspaces(function(e){t&&t(s(JSON.parse(e),this.dynamicMath.netpadPreview.getEnvironmentConfig()))}.bind(this)):t&&t(this.dynamicMath.netpadPreview.getEnvironmentConfig())},getThemeByID:function(e){for(var t,n=0;t=this.themes[n];n++)if(t.getID()===e)return t},fetchThemes:function(e){$.ajax({type:"GET",url:"/workspaceAdmin/workspaces",dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this.currentUser.get("code"))}.bind(this),data:{mode:this.dynamicMath.mode,author_id:this.currentUser.get("id"),current_page:1,per_page:1e3},success:function(t){this.themes=[];for(var n,i=this.defaultTheme?this.defaultTheme.getID():null,s=0;n=t.data[s];s++)this.themes.push(i===n.id?this.defaultTheme:new a(this.currentUser,n));e&&e(this.themes.slice(0))}.bind(this)})},addTheme:function(e){$.ajax({type:"POST",url:"/workspaceAdmin/workspaces",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this.currentUser.get("code"))}.bind(this),data:JSON.stringify({mode:this.dynamicMath.mode,isgeneral:"0",author_id:this.currentUser.get("id"),author:this.currentUser.get("user_name"),name:e.name,content:e.content,summary:e.summary}),success:function(e){var t=new a(this.currentUser,e);this.themes.push(t),this.dispatchEvent("add_theme",{theme:t})}.bind(this)})},delTheme:function(e,t){$.ajax({type:"DELETE",url:"/workspaceAdmin/workspaces/"+e,dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this.currentUser.get("code"))}.bind(this),success:function(){for(var n,i=0;n=this.themes[i];i++)if(n.getID()===e){this.themes.slice(i,1);break}this.defaultTheme&&this.defaultTheme.getID()===e&&(this.defaultTheme=null,this.dispatchEvent("general_change")),t&&t(),this.dispatchEvent("del_theme")}.bind(this)})},ungeneral:function(e){$.ajax({type:"PUT",url:"/workspaceAdmin/workspaces/ungeneral",dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this.currentUser.get("code"))}.bind(this),data:{mode:this.dynamicMath.mode,author_id:this.currentUser.get("id")},success:function(){this.defaultTheme=null,this.dispatchEvent("general_change"),e&&e(),this.dynamicMath.netpadPreview.setEnvironmentConfig(this.dynamicMath.netpadPreview.getEnvironmentConfig())}.bind(this)})},general:function(e){this.defaultTheme&&this.defaultTheme.getID()===e||($.ajax({type:"PUT",url:"/workspaceAdmin/workspaces/"+e+"/general",dataType:"json",beforeSend:function(e){e.setRequestHeader("code","Bearer "+this.currentUser.get("code"))}.bind(this),success:function(){this.defaultTheme=this.getThemeByID(e),this.dispatchEvent("general_change")}.bind(this)}),this.getThemeByID(e).fetchWorkspaces(function(e){this.dynamicMath.netpadPreview.setEnvironmentConfig(JSON.parse(e))}.bind(this)))}}),e.exports=o},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(23),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isLoadAudioList=!1,this.audioList=[],this.audioMap={},this.userModel=t,this.uploadList=[]}var t,n,s;return t=e,(n=[{key:"abortUpdate",value:function(){this.isLoadAudioList=!1,this.audioList=!1,this.uploadList.forEach((function(e){e.abort()})),this.uploadList=[]}},{key:"canUploadAudio",value:function(){return this.userModel.get("id")?{valid:!0}:{valid:!1,title:"未登录",msg:"您尚未登录，请先登录！"}}},{key:"uploadAudio",value:function(e,t,n,i){var s=this;if(!e)throw"no data";if(this.userModel.get("id")){var o=new FormData;o.append("file",e);var r=function(e){for(var t,n=0;t=s.uploadList[n];n++)if(e===t){s.uploadList.splice(n,1);break}},l=this.userModel.get("id"),c=new XMLHttpRequest;return c.upload.addEventListener("progress",(function(e){e.lengthComputable&&i(e.loaded/e.total)})),c.upload.addEventListener("abort",(function(){r(c)}),!1),c.upload.addEventListener("error",(function(){n()}),!1),c.onload=function(){if(200===c.status){var e=c.response,i=new a(e,s.userModel);s.audioMap[i.id]=i,r(c),l==s.userModel.get("id")&&(s.audioList.unshift(i),t(e))}else n()},c.open("post","/resourceAdmin/attach/sounds/"+l),c.responseType="json",c.setRequestHeader("code",this.userModel.get("code")),c.send(o),this.uploadList.push(c),c}n({valid:!1,title:"未登录",msg:"您尚未登录，请先登录！"})}},{key:"getAudioList",value:function(e,t){var n=this;this.isLoadAudioList?e(this.audioList):this.userModel.get("id")?$.ajax({type:"GET",url:"/resourceAdmin/attach/sounds/"+this.userModel.get("id")+"?is_del=0",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n.userModel.get("code"))},success:function(t){n.audioList=[],t.forEach((function(e){var t=new a(e,n.userModel);n.audioList.push(t),n.audioMap[t.id]=t})),n.isLoadAudioList=!0,e&&e(t)},error:function(){t({valid:!1,title:"加载失败",msg:"加载音频文件失败！"})}}):t({valid:!1,title:"未登录",msg:"您尚未登录，请先登录！"})}},{key:"getAudioByURL",value:function(e,t,n){var i=this;if(this.audioMap)for(var s in this.audioMap)if(this.audioMap[s].url===e)return void(t&&t(this.audioMap[s].toJSON()));$.ajax({type:"GET",url:"/resourceAdmin/attach/sounds?url="+e,dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",i.userModel.get("code"))},success:function(e){i.audioMap[e.id]=new a(e,i.userModel),t&&t(i.audioMap[e.id].toJSON())},error:n})}},{key:"updateAudio",value:function(e,t,n){this.audioMap[e.id]&&this.audioMap[e.id].update(e,t,n)}},{key:"delAudio",value:function(e,t,n){var i=this;$.ajax({type:"DELETE",url:"/resourceAdmin/attach/sounds/"+e,dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",i.userModel.get("code"))},success:function(){for(var n,a=0;n=i.audioList[a];a++)if(n.id===e){i.audioList.splice(a,1);break}t&&t()},error:n})}}])&&i(t.prototype,n),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=s},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.url=t.url,this.userId=t.userId,this.userModel=n}var t,i,a;return t=e,(i=[{key:"toJSON",value:function(){return{id:this.id,name:this.name,url:this.url,user_id:this.user_id}}},{key:"update",value:function(e,t,n){var i=this,a=e.name;a&&$.ajax({type:"PUT",url:"/resourceAdmin/attach/sounds/"+this.id,dataType:"json",contentType:"application/json",data:JSON.stringify({name:a}),beforeSend:function(e){e.setRequestHeader("code",i.userModel.get("code"))},success:function(e){i.name=e.name,t&&t(i.toJSON())},error:n})}}])&&n(t.prototype,i),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=i},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(t,i){n(this,e),this.userModel=t,this.fileModel=i}return a(e,[{key:"fetchSharedResource",value:function(e,t,n){var i=this;$.ajax({type:"GET",url:"/resourceAdmin/sharedResources",data:{topic:"course",topic_id:this.fileModel.get("source_id"),user_id:this.userModel.get("id"),operation:e},success:function(e){t&&t(e[0]?new o(e[0],i.userModel):null)},error:n})}},{key:"openSharedResource",value:function(e,t,n){var i=this;$.ajax({type:"POST",url:"/resourceAdmin/sharedResources",data:JSON.stringify({topic:"course",topic_id:this.fileModel.get("source_id"),user_id:this.userModel.get("id"),operation:e,expired_day:7}),beforeSend:function(e){e.setRequestHeader("code",i.userModel.get("code"))},dataType:"json",contentType:"application/json",success:function(e){t&&t(e?new o(e,i.userModel):null)},error:n})}},{key:"getSharedResourceByID",value:function(e,t,n){$.ajax({type:"GET",url:"/resourceAdmin/sharedResources/"+e,success:function(e){t(e)},error:function(){n()}})}}]),e}(),o=function(){function e(t,i){n(this,e),this.userModel=i,this.id=t.id,this.topic_id=t.topic_id,this.topic=t.topic,this.operation=t.operation,this.expired_day=t.expired_day}return a(e,[{key:"updateSharedResource",value:function(e,t,n){var i=this;$.ajax({type:"PUT",url:"/resourceAdmin/sharedResources/"+this.id,beforeSend:function(e){e.setRequestHeader("code",i.userModel.get("code"))},data:JSON.stringify({expired_day:parseInt(e)}),dataType:"json",contentType:"application/json",success:function(e){i.expired_day=e.expired_day,t&&t(i)},error:n})}},{key:"closeSharedResource",value:function(e,t){var n=this;$.ajax({type:"DELETE",url:"/resourceAdmin/sharedResources/"+this.id,beforeSend:function(e){e.setRequestHeader("code",n.userModel.get("code"))},success:e,error:t})}}]),e}();e.exports=s},function(e,t,n){var i=n(0).msgForm;e.exports={alertWaitMsg:function(e){i({msg:'<div style="width:300px;height:120px;background: #fff;border-radius: 4px;padding: 10px"><div style="text-align: center"><img src="images/netPad_img/wait.gif" style="width: 60px;height: 60px"></div><div style="text-align: center;font-size: 22px;font-family: cursive;">'+e+"</div></div>",modal:!0})}}},function(e,t,n){var i=n(2),a=n(27);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};i(a,s);e.exports=a.locals||{}},function(e,t,n){(t=n(3)(!1)).push([e.i,".npNav__dialog--3KBNv {\n    position: absolute;\n    background: #fff;\n    border: 1px solid #a9a9a9;\n    z-index: 2020;\n}\n\n.npNav__dialog--3KBNv input,\n.npNav__dialog--3KBNv textarea {\n    border: 1px solid #ccc;\n    border-radius: 0;\n    line-height: 20px;\n}\n\n.npNav__msg-dialog--1mM4v {\n    width: 240px;\n    margin: 20px 30px;\n    display: flex;\n    align-items: center;\n}\n\n.npNav__msg-dialog--1mM4v .npsitefont {\n    font-size: 42px;\n    margin-right: 20px;\n}\n\n.npNav__msg-dialog--1mM4v .npsitetip {\n    color: #FF090B;\n}\n\n.npNav__msg-dialog--1mM4v .npsitewarn {\n    color: #FAAD14;\n}\n\n.npNav__shade--3XY0N {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: #000;\n    opacity: 0.3;\n}\n\n.npNav__title--1taWi {\n    height: 38px;\n    line-height: 38px;\n    margin: 0 4px;\n    font-weight: bolder;\n    border-bottom: 1px solid #e2e6ed;\n}\n\n.npNav__close--2l_YI {\n    position: absolute;\n    right: 7px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.npNav__btns--1CENz {\n    text-align: center;\n    margin: 8px 0 14px;\n}\n\n.npNav__btns--1CENz>div {\n    display: inline-block;\n    height: 32px;\n    line-height: 32px;\n    width: 102px;\n    text-align: center;\n    border: 1px solid #888;\n    cursor: pointer;\n}\n\n.npNav__cancel-btn--1PgCb {\n    color: #888;\n    margin-right: 26px;\n}\n\n.npNav__sure-btn--21kNz {\n    color: #fff;\n    background: #0091ff;\n}",""]),t.locals={dialog:"npNav__dialog--3KBNv","msg-dialog":"npNav__msg-dialog--1mM4v",shade:"npNav__shade--3XY0N",title:"npNav__title--1taWi",close:"npNav__close--2l_YI",btns:"npNav__btns--1CENz","cancel-btn":"npNav__cancel-btn--1PgCb","sure-btn":"npNav__sure-btn--21kNz"},e.exports=t},function(e,t,n){e.exports={zh_cn:n(8),en:n(29)}},function(e,t){e.exports={jurisdiction:{shared:"Shared","read-only":"Read Only",privated:"Privated","own-only":"Own Only",quality:"Quality"},file:"File",newFile:"New",save:"Save",saveAs:"Save as ...",attr:"Properties ...",open:"Open ...",myFile:"My Materials",localFile:"Local Material(NPC) ...",export:"导出",exportPng:"导出.png",exportPdf:"导出.pdf",exportSvg:"导出.svg",sourceFile:"Local Material(NPC) ...",hdPicture:"HD Picture(.png/.pdf/.svg)",systemTheme:"System Default Theme",moreTheme:"More Themes ...",language:"Language/语言",zh_cn:"Chinese Simplified/简体中文",en:"English/英文 Beta",help:"Help",fullScreen:"Full Screen",exitFullScreen:"Exit Full Screen",share:"Share ...",saveAsLocalFile:"Save as Local Material",downloadFail:"Download failed, please try again later.",unnamed:"Untitled",login:"Login ...",vip0:"Member",vip1:"VIP Member",vip2:"Campus VIP Member",vip3:"Campus Super VIP Member",myStation:"Personal Space",dashboard:"Dashboard",myGroups:"Groups",account:"Account Setting",exit:"Logout ..",myResource:"Resources",resourePackage:"Resource Packages",waring:"Warning",leave:"Leave",stay:"Stay",leaveTip:"Are you sure you want to leave? Unsaved work will be lost.",forbidSave:"This work is protected by copyright and cannot be kept privately.",switchTheme:"Switch Theme",sure:"OK",cancel:"Cancel",switchThemeTitle:"Are you sure to switch theme?",switchThemeTip:"Tip: Switching theme does not affect existing content",myTheme:"My Themes",setAsDefault:"Select",themeDescript:"This is a brief introduction ...",loginTimeout:"User information has expired, please login again!",saveCourse:"Save Material",QualityOwnonlyForbidReSave:"Quality, Own-only material imported from local, can't be saved as my resource.",saveAsCourse:"Save as",saveAsCourceError:"Save failed, please try again later",otherShareFileSave:"Other people's shared material. The current modification can be saved.",otherReadOnlyFileForbidSave:"Read only material, the modification can not be saved.",otherOwnonlyOnlyFileForbidSave:"Own only material, the modification can not be saved.",otherPrivatedFileForbidSave:"Pravited material，the modification can not be saved.",otherQualityFileForbidSave:"Quality material，the modification can not be saved.",readForbidSave:'Currently in read-only mode, your changes <span style="color: #f00;">cannot be saved</span>',EditByOther:"This material is being edited by others. Your modification cannot be saved!",editModeSave:"The current mode is collaborative editing. The current modification can be saved.",cooperate:"Cooperate",CannotEdit:"Cannot edit",EditAnyway:"Edit anyway",title:"Title",descript:"Intro",descriptDefault:"Briefly introduce it! \nConvenient for others, but also illuminate yourself",tag:"Tags",addTag:"Add Tag",authority:"Authority",thumbnail:"Thumbnail",relateCate:"Catalog",myResourcePackage:"Packages",reminder:'Tip: <span style="color:#f00;margin:0 2px;">*</span> item is required.',searchKey:"Please enter keywords",updateTime:"Update Time",creatTime:"Create Time",browse:"Browse",loadMore:"More",noMore:"No More",loading:"Loading ...",emptyPackage:"You haven't created a resource packpage",delTheme:"Delete Theme",delThemeWindow:"Are you sure to delete this Theme?",choosed:"Chosed",relateResourcePackage:"Add to resource package.",noResourcePackage:"You haven't created a resource packpage.",return:"Return",academicDiscipline:"Subject",version:"Version",chapter:"Chapter",knowledge:"Knowledge",textbooks:"Textbooks",topic:"Topic",copySuccess:"Link has copied to clipboard",sharePreviewUrl:"preview URL ...",shareEditUrl:"edit URL ...",openPreviewUrl:"After sharing, anyone can browse this resource safely through the link.\nYou can turn it off when sharing is on.",openEditUrl:"After sharing is enabled, anyone can safely open the resource in the editor through the link.\n You can turn it off when sharing is on.",openShareUrl:"Open",closeShareUrl:"Turn off",sharePreviewTip:"Share preview URL of this material, and anyone who receives the link can open it.",shareEditTip:"Share Edit URL of this material, and anyone who receives the link can open it. But only shared material can be saved.",copyPreviewUrl:"Copy",copyEditUrl:"Copy",refresh:"Refresh",expiredDateTip:function(e){return e<=0?"The link address has expired and needs to be refreshed before it can be accessed normally":"The validity period of the linked address has "+e+" days left. It will be counted again after refreshing."},expiredDate:"Link validity",Days7:"7 days",Days30:"30 days",Years1:"1 year",qrcode:"Scan with mobile phone",shareLinkError:function(e){return e?"Sorry, The link is expired.":"Sorry, The link is closed."},more:"See More",bgTransparency:"Transparent",quality:"Quality",pictureSize:"Size",pixel:"Pixel",exportPicture:"Export Picture",exporting:"Getting HD picture data...",exportSuccess:"HD picture success.",exportFaild:"HD picture failed",globalSetting:"Global Settings",globalAxis:"Global Coordinate System",UscFun:"Customized Function",UscAxis:"Customized Coordinate System",default:"Default",basis:"Basic",grid:"Gird",AutoNamePoint:"Auto Name Point",paperColor:"Background Color",type:"Type",rectangularCoordinates:"Cartesian",polarCoordinates:"Polar",step:"Distance",offset:"Offset",PI2:"π/2 Unit",number:"Show Numbers",tick:"Show Ticks",antialias:"Antialias",fog:"Fog Effect",perspective:"Perspective",appearance:"Style",setting:"Setting",senior:"Advanced",label:"Label",name:"Name",callShow:"Show",fontColor:"Font Color",fontSize:"Font Size",object:"Objects",show:"Show",locked:"Fix Object",selectable:"Selection Allowed",traced:"Show Trace",traceLength:"Trace Length",strokeColor:"Stroke Color",strokeWidth:"Stroke Width",strokeStyle:"Stroke Style",fillColor:"Fill Color",fillTexture:"Filling",borderRadius:"Border Radius",iconColor:"Icon Color",bArrow:"Start Arrow",eArrow:"End Arrow",isTexture:"Filling",texture:"Filling",pointSize:"Point Size",twinkle:"Twinkle",drawPoint:"Draw Point",wireframe:"Wireframe",colorful:"Colorful",blocking:"Blocking",isFanShaped:"Sector",underside:"Bottom",spherical:"Spherical Surface",showBtn:"Button",showRuler:"Slider",showVariable:"Variable",showInput:"Input",arrow:"Arrow",braces:"Brace",lengthStyle:"Mark Style",left:"Left",top:"Top",btnStyle:"Button Style",fontStyle:"Font Style",imageStyle:"Icon",icon:"Icon",setIcon:"Icon Setting",custom:"Coustomize",measureStyle:"Measure Style",noLabel:"No Label",curLabel:"Current Label",originCalculate:"Calculation",calculate:"Calculation",audioSrc:"Audio",setAudioSrc:"Audio Setting",audioPlay:"Play Setting",once:"Once",repeat:"Repeat",angleDirect:"Show Arrow",labelStyle:"Label Style",animationType:"Play Button",twoWay:"Two-Way",position:"Postion",fValue:"Start Value",eValue:"End Value",stepNum:"Threshold",accuracy:"Accuracy",thickness:"Thickness",shader:"Color Style",shaderSelf:"Self Color",shaderOrigin:"Same to pre-image",layerShader:"Hierarchical Color",layerRandom:"Hierarchical Random",isSmooth:"Smooth",density:"Density",deneType:"Type",vertex_vertex:"Vertex-Vertex",center_vertex:"Center-Vertex",vertex_center:"Vertex-Center",defineType:"Define Type",arcBy3Points:"Arc through 3 Points",arcByCircleAngle:"Arc of Circumferential Angle",arcByCircleCore:"Arc with Center and Radius",angleDefine:"Angle Type",bigAngle:"Reflex Angle",smallAngle:"Inferior Angle",clockwise:"Clockwise",anticlockwise:"Anticlockwise",unit:"Unit",radian:"Radian",angle:"Degree",coorType:"Translation",rightAngleAxis:"Cartesian",level:"Horizontal",vertical:"Vertical",coorX:"X",coorY:"Y",coorZ:"Z",bind:"Bind to Point",unbind:"Unbind",conicType:"Conic Type",hyperbola:"Hyperbola",parabola:"Parabola",ellipse:"Ellipse",playType:"Play Direction",Return:"Round",forward:"Forward",reverse:"Reverse",fixedAngle:"Fixed Angle",fixedLength:"Fixed Length",lineType:"Line Type",lineLength:"Line Length",segment:"Segment",radial:"Ray",straight:"Straight",planeType:"Plane Shape",triangle:"Traingle",rectangle:"Rectrangle",diamond:"Rhombus",roundness:"Roundness",translate:"Translation",inLine:"Intersection in line",limit:"Limit in Grid",isIn:"Inner",isClosed:"Closed",isInner:"Inscribed Circle",isSegmentColor:"Color Follow Pre-image",directReverse:"Reverse",inPlane:"in Plane",isVertical:"Vertical",segmentType:"Segmentation",isParallel:"Parallel",cornerPoint:"Corner Point",inVais:"Point Value",ratio:"Ration",inverPower:"Inversion  Constant",pNum:"Number of Samples",eccentricity:"Eccentricity",rStrObj:"Radius",radius:"Radius",taper:"Conical Degree",entityHeight:"Hight",edgeNum:"Number of Edges",gapAngle:"Gap",corner:"Rotation Angle",lineAngle:"Angle of Line and Plane",pWidth:"Width",pHeight:"Height",dx:"dx",dy:"dy",ang:"Angle",transform:"Transform",length:"Length",width:"Width",height:"Hight",playExp:"Play Control",range1:"Range 1",range2:"Range 2",outVais:"Drag Varible",dragDx:"X Drag Varible",dragDy:"y Drag Varible",point:"Point",circle:"Cicle",polygon:"Polygon",conic:"Conic",measure:"Measurement",var:"Varible",animation:"Animation Button",action:"Action",actionBtn:"Action Button",path:"Path",entity:"Entity",plane:"Plane",surface:"Surface",circularArc:"Arc",arc:"Arc",ruledSurface:"Ruled Surface",curvesPath:"Fucntion Curve",locusPath:"Locus Curve",lineLabel:"Line Marker",angleLabel:"Angle Marker","2PointLabel":"2 Points Marker",none:"None",digitalPrecision:"Display Accuracy",scene:"Scene",sceneColor:"Color",axisOfCoor:"Axis",axisControlPoint:"Cotrol Point",unitControlPoint:"Unit Point",fPoint:"Free Point",hfPoint:"Semi-Free Point",cPoint:"Constraint Point",curve:"Curve",ball:"Sphere",frustum:"Frustum",prism:"Prism",convex:"Convex Hull",polyhedron:"Polyhedron",ShowGrid:"Show Grid",tranformPath:"Transform Curve",showPlayBtn:"Button",showVarRuler:"Slider",forbidRead:"No permission to view this resource!",onlineLoadFaild:"Online: Material failed to load",tip:"Tip",recovery:"Restore",recoveryFile:"The cache file exists in the system. Is it restored?",cancelRecovery:"If you cancel, the cache file will be lost!",saveFaild:"Save failed",downloading:"Downloading ...",screenshotSuccess:"Screenshot Successful",screenshotFail:"Screenshot Failed"}},function(e,t,n){var i=n(31),a=n(35),s=n(36),o=n(11),r=n(38),l=n(41),c=n(42),d=n(4).isForceEdit,u=n(0).msgForm,h=n(44),p=h.FileUl,g=h.SaveSaveAsUl,f=h.SettingUl,v=h.TitleUl,m=h.JurisdictionUl,y=h.EditStatusUl,b=h.ShareUl,x=h.FullscreenUl,_=function(e){this.option=e,this.userModel=e.userModel,this.fileModel=e.fileModel,this.dynamicMath=e.netpadEditor,this.netpadSVG=e.netpadSVG,this.fileSaveService=e.fileSaveService,this.themeService=e.themeService,this.pubcategories=e.pubcategories,this.language=e.language,this.callback=e.callback,this.packages=new c(this.userModel),this.sharedResourceService=e.sharedResourceService,this.addEvents(),this.render()};function w(e){this.dynamicMath.isChanged()?layer.open({type:1,title:this.language.waring,content:'<div style="width: 100%;text-align: center;padding: 20px">'+this.language.leaveTip+"</div>",btn:[this.language.leave,this.language.stay],btn1:function(t){this.dynamicMath.netpadPreview.undoRedo.set("isChanged",!1),e()}.bind(this),btn2:function(e){layer.close(e)}}):e()}function k(){layer.msg(this.language.forbidSave,{icon:2})}_.prototype={render:function(){new l(this.userModel),this.renderLeft(),this.renderRight(),this.__updateMenus__(),this.userInfoUl.update(),this.settingUl.update(),this.option.parent.html("").append(this.$left).append(this.$right)},renderLeft:function(){this.$left=$('<div style="display: flex;align-items: center;color: #fff;">\n                <a href="index.html" target="_blank" style="width: 30px;height: 22px;margin: 0 15px 0 20px;background: url(\'/images/index_img/logo.png\') no-repeat;background-size: contain;"></a>             \n                </div>'),this.fileUl=new p(this,this.fileModel,this.language),this.saveSaveAsUl=new g(this,this.fileModel,this.language),this.settingUl=new f(this,this.userModel,this.themeService,this.language),this.titleUl=new v(this,this.fileModel,this.language),this.jurisdictionUl=new m(this.language),this.editStatusUl=new y(this.fileModel,this.language),this.$left.append(this.fileUl.$el).append(this.saveSaveAsUl.$el).append(this.settingUl.$el).append(this.titleUl.$el).append(this.jurisdictionUl.el).append(this.editStatusUl.el)},renderRight:function(){var e=this;this.$right=$('<div style="display:flex;align-items: center;color: #fff;"></div>'),this.shareUl=new b(this.userModel,this.fileModel,this.sharedResourceService,this.language),this.fullscreenUl=new x(this.language);var t=document.createElement("span");t.style.margin="0 10px",this.userInfoUl=new UserInfoUl({parentNode:t,redirect:"_blank",language:this.language,exitFun:function(){e.userModel.exit()}}),this.$right.append(new o({label:'<a class="npsvg-iconfont" href="/helpOnLine_web.html" target="_blank" style="color: #fff;text-decoration: none;">&#xe61c;</a>',tip:this.language.help}).el).append(this.shareUl.el).append(this.fullscreenUl.el).append(t)},addEvents:function(){var e=this;document.addEventListener("keydown",(function(t){if(83==t.keyCode&&t.ctrlKey)return t.preventDefault(),e.save(),!1})),document.addEventListener("fullscreenchange",(function(t){e.fullscreenUl.update(t)})),this.userModel.on("change",(function(){e.__updateMenus__(),e.userInfoUl.update()})),this.userModel.on("loginTimeout",(function(){e.reLogin()})),this.fileModel.addEventListener("change",this.__updateMenus__.bind(this)),this.fileModel.addEventListener("editStatus",this.__editStatus__.bind(this)),this.netpadSVG.addEventListener(this.netpadSVG.Events.DM_CHANGE,function(e){this.dynamicMath=e.dynamicMath}.bind(this)),this.themeService.addEventListener("general_change",function(){this.settingUl.update()}.bind(this))},switchLanguage:function(e){this.language=e,this.render()},reLogin:function(){u({msg:this.language.loginTimeout,modal:!0,icon:"npsitetip",sure:this.language.sure,sureCallback:function(e){e.destroy(),window.open("/oauthui/#/login?isredirect=false")}})},__errorMSG__:function(e){u({msg:e,modal:!0,icon:"npsitewarn",sure:this.language.sure})},openNewFile:function(){w.call(this,function(){this.netpadSVG.restoreByID()}.bind(this))},save:function(){var e=this;this.__beforeSave__((function(t){t&&(e.fileModel.getAttr().id?e.__saving__():i({dynamicMath:e.dynamicMath,fileModel:e.fileModel,pubcategories:e.pubcategories,packages:e.packages,title:e.language.saveCourse,callback:e.__saving__.bind(e)},e.language))}))},saveAsNewFile:function(){var e=this;this.__beforeSave__((function(t){if(t)return d()?e.__saveAs__():void $.ajax({type:"POST",url:"/resourceAdmin/resourceOauth/saveAs/"+e.fileModel.get("id"),dataType:"json",contentType:"application/json",beforeSend:function(t){t.setRequestHeader("code",e.userModel.get("code"))},success:function(t){t.pass?e.__saveAs__():npOperateAuthExplain.explain(t.auth)},error:e.errorSave.bind(e)})}))},successSave:function(){this.__updateMenus__(),setTimeout((function(){u({msg:"保存成功",modal:!0,icon:"npsiteduigou",iconColor:"#6dd400",time:2e3})}),1e3)},errorSave:function(e){if(401!=e.status&&412!=e.status||this.userModel.loginTimeout(),403==e.status&&e.responseText&&!JSON.parse(e.responseText).pass)return npOperateAuthExplain.explain(JSON.parse(e.responseText).auth);this.__errorMSG__(e.responseText)},reName:function(){this.__illegelUser__()&&i({dynamicMath:this.dynamicMath,fileModel:this.fileModel,pubcategories:this.pubcategories,packages:this.packages,title:this.language.attr,cancelRelations:!this.fileModel.isMyFile()||!this.fileModel.isUser,callback:this.__saving__.bind(this)},this.language)},fileList:function(){this.__illegelUser__()&&new a(this.netpadSVG,this.userModel,this.language)},downloadFile:function(){var e=this;this.__illegelUser__()&&this.fileSaveService.checkSaveAuthority((function(t){return t||d()?d()||!e.fileModel.getAttr().id?e.__download__():void $.ajax({type:"POST",url:"/resourceAdmin/resourceOauth/download/"+e.fileModel.get("id"),dataType:"json",contentType:"application/json",beforeSend:function(t){t.setRequestHeader("code",e.userModel.get("code"))},success:function(t){t.pass?e.__download__():npOperateAuthExplain.explain(t.auth)},error:e.errorSave.bind(e)}):k.call(e)}))},nativeFile:function(){var e=document.createElement("input");e.setAttribute("id","_ef"),e.setAttribute("type","file"),e.setAttribute("accept",".npc"),e.setAttribute("style","visibility:hidden"),document.body.appendChild(e);var t=this;e.addEventListener("change",(function(e){var n=e.target.files[0];t.netpadSVG.restoreByNpcFile(n)})),e.click()},downloadImg:function(){new r(this.dynamicMath,this.language)},__illegelUser__:function(){return!!this.userModel.get("id")||(window.open("/oauthui/#/login?isredirect=false"),!1)},__updateFileInfo__:function(e){d()?this.fileSaveService.forceSave({fileInfo:e}):this.fileSaveService.save({fileInfo:e})},__updateMenus__:function(){var e=this;this.fileModel.isOwner((function(t){var n=e.fileModel.getAttr();e.fileUl.update(n,t),e.saveSaveAsUl.update(n,t),e.titleUl.update(n,t),e.jurisdictionUl.update(n,t),e.editStatusUl.update(n,t),e.shareUl.update(n,t)}))},__editStatus__:function(){var e=this;this.__updateMenus__(),this.fileModel.editStatus.isEdit&&this.fileModel.editStatus.user.id!=this.userModel.get("id")&&(this.form=u({title:this.language.CannotEdit,msg:this.language.EditByOther,modal:!0,icon:"npsitewarn",sure:this.language.exit,cancel:this.language.EditAnyway,sureCallback:function(t){e.netpadSVG.restoreByID(),t.destroy()}}))},__beforeSave__:function(e){var t=this;return this.__illegelUser__()?d()?e(!0):void this.fileSaveService.checkSaveAuthority((function(n){return n||k.call(t),e(n)})):e(!1)},__saving__:function(e){var t,n;e&&e.pubRelations&&(t=e.pubRelations,delete e.pubRelations),e&&e.packRelations&&(n=e.packRelations,delete e.packRelations),d()?this.netpadSVG.forceSave({fileInfo:e,pubRelations:t,packRelations:n,success:this.successSave.bind(this),error:this.errorSave.bind(this)}):this.netpadSVG.save({fileInfo:e,pubRelations:t,packRelations:n,success:this.successSave.bind(this),error:this.errorSave.bind(this)})},__saveAs__:function(){i({dynamicMath:this.dynamicMath,fileModel:this.fileModel,pubcategories:this.pubcategories,packages:this.packages,title:this.language.saveAsCourse,isSaveAs:!0,callback:function(e){var t=e.pubRelations,n=e.packRelations;delete e.pubRelations,delete e.packRelations,d()?this.netpadSVG.forceSaveAs({pubRelations:t,packRelations:n,fileInfo:e,success:this.successSave.bind(this),error:this.errorSave.bind(this)}):this.netpadSVG.saveAs({pubRelations:t,packRelations:n,fileInfo:e,success:this.successSave.bind(this),error:this.errorSave.bind(this)})}.bind(this)},this.language)},__download__:function(){s({dynamicMath:this.dynamicMath,cancelThumbnail:!0,title:this.language.saveAsLocalFile,callback:function(e){this.netpadSVG.saveAsNPC(e)}.bind(this),fileData:this.fileModel.getAttr()},this.language)}},e.exports=_},function(e,t,n){var i=n(0).widthTitleName,a=n(1),s=n(33),o=n(34),r=n(9),l=n(10),c=function(e,t){this.down=!1,this.downPageX=0,this.downPageY=0,this.lastTranslateX=0,this.lastTranslateY=0,this.dx=0,this.dy=0,this.scale=1,this.$el=$('<div style="width:200px;position: relative;"><div style="font-weight: bold;font-size: 14px;line-height:26px;">'+t.thumbnail+':</div><div style="position: relative;width:200px;height: 200px;overflow: hidden;border: 2px solid #ccc;user-select: none;cursor: move;"><div style="position: absolute;width:1366px;height:768px;left: -583px;top: -284px;"><div name="preview" style="pointer-events:none;position: absolute;width:1366px;height:768px;left:0;top:0;"></div></div></div><div style="color:#333;font-size: 16px;text-align: right;position: absolute;right:0;top: 0;"><span name="plus" class="npsvg-iconfont" style="margin-right: 20px;cursor:pointer">&#xe644;</span><span name="minus" class="npsvg-iconfont" style="cursor:pointer;font-weight: bold;">&#8212;</span></div></div>'),this.preview=this.$el.find("div[name=preview]")[0],this.$el.find("div[name=preview]").append(e.netpadPreview.exportPaperHTML()),this.render(e.netpadPreview.getPaperThumbnail()),this.$el.on("mousewheel",this.mousewheel.bind(this)),this.$el.on("mousedown",this.mousedown.bind(this)),this.$el.on("mousemove",this.mousemove.bind(this)),this.$el.on("mouseup",this.mouseup.bind(this)),this.$el.on("mouseleave",this.mouseleave.bind(this)),this.$el.on("click",".npsvg-iconfont",function(e){var t=e.target.getAttribute("name");this.updateScale("plus"===t?1.1*this.scale:.9*this.scale)}.bind(this))};c.prototype={render:function(e){this.scale=200/e.width,this.dx=Math.floor((683-e.x)*this.scale-100),this.dy=Math.floor((384-e.y)*this.scale-100),this.preview.style.transform="translate("+this.dx+"px,"+this.dy+"px) scale("+this.scale+")"},getValue:function(){var e=Math.floor(683-(100+this.dx)/this.scale),t=Math.floor(384-(100+this.dy)/this.scale),n=Math.floor(200/this.scale);return{x:e,y:t,width:n,height:n}},mousewheel:function(e){var t=e.originalEvent.wheelDelta||e.originalEvent.detail;t<-500?t=-500:t>500&&(t=500),this.updateScale(this.scale*(1+t/2e3))},updateScale:function(e){this.scale=e,this.scale>.6666&&(this.scale=.6666),this.scale<.2605&&(this.scale=.2605);var t=this.updateDxDy(this.dx,this.dy);this.dx=t.translateX,this.dy=t.translateY},mousedown:function(e){this.down=!0,this.downPageX=e.pageX,this.downPageY=e.pageY},mousemove:function(e){if(this.down){var t=this.updateDxDy(e.pageX-this.downPageX+this.dx,e.pageY-this.downPageY+this.dy);this.lastTranslateX=t.translateX,this.lastTranslateY=t.translateY}},mouseup:function(e){if(this.down){this.down=!1;var t=this.updateDxDy(e.pageX-this.downPageX+this.dx,e.pageY-this.downPageY+this.dy);this.dx=t.translateX,this.dy=t.translateY}},mouseleave:function(){this.down&&(this.down=!1,this.dx=this.lastTranslateX,this.dy=this.lastTranslateY)},updateDxDy:function(e,t){var n=e,i=t,a=Math.floor(200/this.scale),s=(a-683)*this.scale-100,o=683*this.scale-100,r=(a-384)*this.scale-100,l=384*this.scale-100;return n<s&&(n=s),n>o&&(n=o),i<r&&(i=r),i>l&&(i=l),this.preview.style.transform="translate("+n+"px,"+i+"px) scale("+this.scale+")",{translateX:n,translateY:i}}};var d=function(e,t){this.dynamicMath=e.dynamicMath,this.fileModel=e.fileModel,this.pubcategories=e.pubcategories,this.packages=e.packages,this.pubRelations=[],this.packRelations=[],this.updatePubRelationed=!1,this.updatePackRelationed=!1,this.language=t,this.callback=e.callback,this.$el=$('<div class="'.concat(a["save-form"],'"></div>')),this.thumbnail=new c(e.dynamicMath,t),this.render(e),this.$labels=this.$el.find("span[name=labels]"),this.$relationed=this.$el.find("span[name=relationed]"),this.$packRelationed=this.$el.find("span[name=packRelationed]"),this.fileID=this.fileModel.getAttr().id||"",this.addEvents()};function u(e){return"<button name="+e+' type="button" class="'+a["btn-tag"]+'" style="margin:0 10px 10px 0;">'+e+'<span class="remove-label" style="padding-left: 4px;color:#666;font-weight:bold;">×</span></button>'}d.prototype={addEvents:function(){this.$el.on("click","."+a["blue-btn"],this.saveFile.bind(this)),this.$el.find("input").on("change",this.canSubmit.bind(this)),this.$el.find("textarea").on("change",this.canSubmit.bind(this)),this.$el.find("input").on("input",this.canSubmit.bind(this)),this.$el.find("textarea").on("input",this.canSubmit.bind(this)),this.$el.on("click",".add-pub-cate",function(){new s(this.pubcategories,this.pubRelations,function(e){this.pubRelations=e,this.renderPubRelations(),this.updatePubRelationed=!0}.bind(this),this.language)}.bind(this)),this.$el.on("click",".add-pack-cate",function(){new o(this.packages,this.packRelations,function(e){this.packRelations=e,this.renderPackRelations(),this.updatePackRelationed=!0}.bind(this),this.language)}.bind(this)),this.$labels.on("mouseenter",".remove-label",(function(e){e.target.style.color="#000"})),this.$labels.on("mouseleave",".remove-label",(function(e){e.target.style.color="#666"})),this.$labels.on("click",".remove-label",function(e){$(e.target.parentNode).remove(),this.$labels.find("button").length>=5?this.$el.find("input[name=labels]").hide():this.$el.find("input[name=labels]").show()}.bind(this)),this.$el.find("input[name=labels]").on("keyup",function(e){13===e.keyCode&&this.addLabel(e)}.bind(this)),this.$el.find("input[name=labels]").on("blur",function(e){this.addLabel(e)}.bind(this)),this.relationeds=new r(this.pubcategories,this,this.pubRelations),this.packRelationeds=new l(this.packages,this,this.packRelations),this.$relationed.append(this.relationeds.$el),this.$packRelationed.append(this.packRelationeds.$el),this.fileModel.fetchPubRelations(function(e){this.pubRelations=e,this.$relationed.append('<div><span style="color:#979797;cursor: pointer" class="add-pub-cate">[＋]</span></div>'),this.renderPubRelations()}.bind(this)),this.fileModel.fetchPackRelations(function(e){this.packRelations=e,this.$packRelationed.append('<div><span style="color:#979797;cursor: pointer" class="add-pack-cate">[＋]</span></div>'),this.renderPackRelations()}.bind(this))},addLabel:function(e){var t=e.target.value.trim();t&&(e.target.value="",this.$labels.append(u(t.length>6?t.slice(0,6):t)),this.$labels.find("button").length>=5?this.$el.find("input[name=labels]").hide():this.$el.find("input[name=labels]").show())},disabled:function(){return!this.$el.find("input[name=heading]").val()||!this.$el.find("textarea[name=summary]").val()},canSubmit:function(){this.$el.find("."+a["blue-btn"]).prop("disabled",this.disabled())},render:function(e){var t=this,n=this.fileModel.getAttr();this.$el.append('<div class="'.concat(a["save-top"],'">\n            <div class="').concat(a["save-left"],'">\n                ').concat(this.getHeadingStr(n.heading),"\n                ").concat(this.getSummaryStr(n.summary),"\n                ").concat(this.getTagsStr(n.tags),"\n                ").concat(this.getJurisdictionStr(n.jurisdiction,e.isSaveAs),'\n            </div>\n            <div class="').concat(a["save-thumbnail"],'"></div>          \n            </div>')).append('<div style="margin:30px 0;width:50%;text-align: right;position: absolute;bottom: 0;">\n                <span style="font-size:12px;margin-right: 6px;">'.concat(this.language.reminder,'</span>\n                <button disabled class="').concat(a["blue-btn"],'">').concat(this.language.sure,"</button>\n                </div>")),this.$el.find("."+a["save-thumbnail"]).append(this.thumbnail.$el),this.renderRelationeds(e.cancelRelations,n.jurisdiction),this.form=i({title:e.title,el:this.$el[0],modal:!0,close:function(){t.form.destroy(),t.$el.remove()}}),this.canSubmit()},getHeadingStr:function(e){return'<div class="'.concat(a["save-div"],'">\n        <span class="').concat(a["save-title"],'"><span class="').concat(a["save-title-star"],'">*</span>').concat(this.language.title,':</span>\n        <input type="text" name="heading" value="').concat(e||"",'" style="width: 350px;color: #333;">\n        </div>')},getSummaryStr:function(e){return'<div class="'.concat(a["save-div"],'">\n        <span class="').concat(a["save-title"],'"><span class="').concat(a["save-title-star"],'">*</span>').concat(this.language.descript,':</span>\n        <textarea name="summary" placeholder="').concat(this.language.descriptDefault,'" rows="5" style="width: 350px;resize: none;color: #333;height: 100px;">').concat(e||"","</textarea>\n        </div>")},getTagsStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(e){for(var t="",n=0;n<e.length;n++)e[n]&&(t+=u(e[n]));return t}var n=e.split("#").filter((function(e){return e}));return'<div class="'.concat(a["save-div"],'">\n            <span class="').concat(a["save-title"],'">').concat(this.language.tag,':</span>\n            <span style="display: inline-block;width: 350px;font-size: 12px;">\n            <span name="labels" style="vertical-align: top;">').concat(t(e.split("#")),'</span>\n            <input name="labels" type="text" placeholder="').concat(this.language.addTag,'" maxlength="6" style="width:72px;height: 22px;font-size: 12px;display: ').concat(n.length>=5?"none":"inline",'">\n            </span>\n            </div>')},getJurisdictionStr:function(e,t){if("own-only"===e)return'<div class="'.concat(a["save-div"],'">\n                <span class="').concat(a["save-title"],'">').concat(this.language.authority,':</span>\n                <span style="font-size: 14px;">').concat(this.language.jurisdiction[e],"</span>\n                </div>");if("quality"===e){if(!t)return'<div class="'.concat(a["save-div"],'">\n                <span class="').concat(a["save-title"],'">').concat(this.language.authority,':</span>\n                <span style="font-size: 14px;">').concat(this.language.jurisdiction[e],"</span>\n                </div>");e="read-only"}return'<div class="'.concat(a["save-div"],'">\n        <span class="').concat(a["save-title"],'">').concat(this.language.authority,':</span>\n        <select name="jurisdiction" style="width: 100px;border:1px solid #ccc;">\n        <option value="shared" ').concat("shared"===e?"selected":"",">").concat(this.language.jurisdiction.shared,'</option>\n        <option value="read-only" ').concat("read-only"===e?"selected":"",">").concat(this.language.jurisdiction["read-only"],'</option>\n        <option value="privated" ').concat("privated"===e?"selected":"",">").concat(this.language.jurisdiction.privated,"</option>\n        </select>            \n        </div>")},renderRelationeds:function(e,t){"own-only"!==t&&this.$el.append('<div class="'+a["save-div"]+'"><span class="'+a["save-title"]+'">'+this.language.relateCate+':</span><span name="relationed" class="'+a["save-div-content"]+'"></span></div>'),e||this.$el.append('<div class="'+a["save-div"]+'"><span class="'+a["save-title"]+'">'+this.language.myResourcePackage+':</span><span name="packRelationed" class="'+a["save-div-content"]+'"></span></div>')},renderPubRelations:function(){this.relationeds.updateRelations(this.pubRelations),this.canSubmit()},renderPackRelations:function(){this.packRelationeds.updateRelations(this.packRelations)},removeRelations:function(e){for(var t,n=0;t=this.pubRelations[n];n++)if(e===t.cate_id){this.pubRelations.splice(n,1),this.renderPubRelations(),this.updatePubRelationed=!0;break}},removePackRelations:function(e,t){for(var n,i=0;n=this.packRelations[i];i++)if(e===n.resourcepack_id&&t===n.cate_id){this.packRelations.splice(i,1),this.renderPackRelations(),this.updatePackRelationed=!0;break}},saveFile:function(){var e=this.fileModel.getAttr().id||"";this.fileID!=e&&(this.form.destroy(),this.$el.remove());var t=this.$el.find("input[name=heading]").val()||this.language.unnamed,n=this.$el.find("textarea[name=summary]").val(),i=this.$el.find("select[name=jurisdiction]")[0]?this.$el.find("select[name=jurisdiction]").val():this.fileModel.getAttr().jurisdiction||"own-only";this.form.destroy(),this.$el.remove(),this.thumbnail&&this.dynamicMath.netpadPreview.setPaperThumbnail(this.thumbnail.getValue());for(var a=this.$labels.find("button"),s=[],o=0;o<a.length;o++)s.push(a[o].getAttribute("name"));var r={heading:t,summary:n,jurisdiction:i,tags:s.join("#")};this.updatePubRelationed&&(r.pubRelations=this.pubRelations),this.updatePackRelationed&&(r.packRelations=this.packRelations),this.callback(r)}},e.exports=function(e,t){return new d(e,t)}},function(e,t,n){(t=n(3)(!1)).push([e.i,".npNav__btn--F75de {\n    cursor: pointer;\n}\n\n.npNav__btn-tag--1bT3L {\n    padding: 3px;\n    line-height: 1;\n    border-radius: 4px;\n    color: #888;\n    border: 1px solid #888;\n    background: #fff;\n    cursor: pointer;\n    outline: 0;\n}\n\n.npNav__btn-tag--1bT3L:hover {\n    color: #000;\n    border: 1px solid #000;\n}\n\n.npNav__blue-btn--3km_3 {\n    width: 72px;\n    padding: 4px 0;\n    line-height: 1;\n    border: 1px solid #409eff;\n    border-radius: 4px;\n    color: #fff;\n    background: #409eff;\n    cursor: pointer;\n    outline: 0;\n    margin-right: 10px;\n}\n\n.npNav__blue-btn--3km_3:hover {\n    color: #fff;\n    background: #0966ac;\n    border: 1px solid #0966ac;\n}\n\n.npNav__blue-btn--3km_3:disabled {\n    opacity: .6;\n}\n\n.npNav__save-form--3jaO8 {\n    background: #ffffff;\n    user-select: none;\n    margin-top: 10px;\n    overflow: visible;\n    position: relative;\n    width: 710px;\n    height: 420px;\n    padding: 0 12px;\n}\n\n.npNav__save-top--2Gr_g {\n    display: flex;\n    flex-flow: nowrap;\n}\n\n.npNav__save-left--CwT85 {\n    flex: 1;\n    min-width: 200px;\n}\n\n.npNav__save-thumbnail--13Id_ {\n    display: inline-block;\n    width: 200px;\n    margin-top: 4px;\n}\n\n.npNav__save-div--21ZjL {\n    display: flex;\n    margin-top: 10px;\n}\n\n.npNav__save-title--1d0og {\n    font-weight: bold;\n    font-size: 14px;\n    width: 76px;\n    text-align: right;\n    margin-right: 10px;\n    vertical-align: top;\n}\n\n.npNav__save-title-star--1opdb {\n    color: #f00;\n    margin-right: 2px;\n}\n\n.npNav__save-div-content--153PC {\n    flex: 1;\n    min-width: 100px;\n}\n\n.npNav__rel-root-nav--1Q9sL {\n    height: 30px;\n    line-height: 30px;\n    padding: 0 30px;\n    font-weight: bold;\n    font-size: 14px;\n    cursor: pointer;\n    box-sizing: border-box;\n    border-bottom: 1px solid #979797;\n}\n\n.npNav__rel-root-nav--1Q9sL:hover {\n    background: #D8D8D8;\n    border: 1px solid #979797;\n}\n\n.npNav__rel-root-nav-active--2AH1_ {\n    background: #D8D8D8;\n    border: 1px solid #979797;\n}\n\n.npNav__rel-second-nav--3sqc3 {\n    font-size: 14px;\n    cursor: pointer;\n    margin: 0 10px;\n    display: inline-block;\n}\n\n.npNav__rel-second-nav--3sqc3:hover {\n    color: #0091FF;\n}\n\n.npNav__rel-second-nav-active--19U3d {\n    color: #0091FF;\n}\n\n.npNav__rel-relationed--1V6ZM {\n    position: relative;\n    flex: 1;\n    min-width: 200px;\n}\n\n.npNav__rel-relationed-first--3451N {\n    line-height: 26px;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.npNav__rel-relationed-btn--VZtzQ {\n    margin-left: 4px;\n    padding: 0 4px;\n    cursor: pointer;\n    color: #6D7278;\n}\n\n.npNav__rel-relationed--1V6ZM .npNav__a-link--3nJza {\n    text-decoration: underline;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.npNav__rel-more-list--3wQqt {\n    position: absolute;\n    background: #fff;\n    top: 0;\n    left: 0;\n    border: 1px solid #979797;\n    padding: 8px 20px;\n    line-height: 26px;\n    max-height: 100px;\n    overflow: auto;\n    z-index: 1000000;\n    width: 100%;\n}\n\n.npNav__rel-more-list-remove--1Dcxj {\n    margin-left: 8px;\n    color: #A5A7AE;\n    cursor: pointer;\n}\n\n.npNav__rel-cate-nav--1q5wS {\n    line-height: 26px;\n    display: flex;\n}\n\n.npNav__rel-cate-name--1meCQ {\n    font-weight: bold;\n    width: 70px;\n    text-align: right;\n}\n\n.npNav__rel-cate-details--2xzQO {\n    flex: 1;\n}\n\n.npNav__package-el--hUDT3 {\n    display: inline-block;\n    margin: 0 10px 10px 0;\n}\n\n.npNav__inline-block--lwL1d {\n    display: inline-block;\n    vertical-align: top;\n}\n\n.npNav__link-container--24-ga {\n    height: 40px;\n    line-height: 40px;\n    padding: 0 10px;\n}\n\n.npNav__link-container--24-ga .npNav__nav-link--2QywC {\n    padding: 0 10px;\n    cursor: pointer;\n}\n\n.npNav__link-container--24-ga .npNav__nav-link--2QywC:hover {\n    color: #fff;\n}\n\n.npNav__float-right--bZsZQ {\n    float: right;\n    height: 30px;\n    line-height: 30px;\n}\n\n.npNav__create-btn--eeltL {\n    width: 90px;\n    height: 30px;\n    line-height: 1;\n    border-width: 1px;\n    border-style: solid;\n    background: rgba(0, 0, 0, 0);\n    border-radius: 4px;\n    margin: 0 10px;\n    cursor: pointer;\n}\n\n.npNav__create-btn--eeltL:hover {\n    color: #fff;\n    border-color: #fff;\n}\n\n.npNav__loginEntry--3AixA {\n    width: 40px;\n    margin-left: 20px;\n}\n\n.npNav__loginEntry--3AixA span {\n    padding: 0 2px;\n    cursor: pointer;\n}\n\n.npNav__loginEntry--3AixA .npNav__login--23jLJ:hover,\n.npNav__register--TRzjA:hover {\n    color: #fff;\n}\n\n.npNav__loginImg--enWyA {\n    width: 34px;\n    height: 26px;\n    margin-top: 8px;\n    position: relative;\n    cursor: pointer;\n    color: #fff;\n}\n\n.npNav__vip-flag--26-Xy {\n    width: 18px;\n    position: absolute;\n    bottom: 2px;\n    right: -7px;\n}\n\n.npNav__userNameContainer--k-NCe {\n    position: relative;\n    text-align: center;\n    cursor: pointer;\n    width: 60px;\n}\n\n.npNav__userNameContainer--k-NCe:hover {\n    color: #fff;\n}\n\n.npNav__userName--2eHPY {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 80px;\n}\n\n.npNav__userImg--39rdF {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    position: relative;\n}\n\n.npNav__user-container--2wVls {\n    background-color: rgb(34, 34, 34);\n    top: 50px;\n    display: block;\n    z-index: 10;\n}\n\n.npNav__logined-menu--3t73U {\n    position: absolute;\n    width: 156px;\n    box-sizing: border-box;\n    text-align: left;\n    background-color: rgb(34, 34, 34);\n    right: 2px;\n    padding: 4px;\n    color: #fff;\n    line-height: 26px;\n}\n\n.npNav__userNameDiv--3rV1t {\n    display: flex\n}\n\n.npNav__shared--PiPCn {\n    color: #fff;\n    background: #FB2634;\n}\n\n.npNav__read-only--3XtzM {\n    color: #fff;\n    background: #FB9802;\n}\n\n.npNav__privated--2uKIa {\n    color: #fff;\n    background: #99CC34;\n    margin-left: 5px;\n}\n\n.npNav__own-only--10zQ3 {\n    color: #fff;\n    background: #2F5A01;\n}\n\n.npNav__quality--C0cbH {\n    color: #fff;\n    background: #B620E0;\n}\n\n.npNav__jurisdiction--GdepQ {\n    margin-left: 5px;\n    padding: 2px 6px;\n    line-height: 1;\n}\n\n.npNav__cooperate--3XGwv {\n    border-radius: 2px;\n    border: 1px solid #B2D1F7;\n    color: #B2D1F7;\n    margin-left: 10px;\n    padding: 2px 6px;\n    line-height: 1;\n}",""]),t.locals={btn:"npNav__btn--F75de","btn-tag":"npNav__btn-tag--1bT3L","blue-btn":"npNav__blue-btn--3km_3","save-form":"npNav__save-form--3jaO8","save-top":"npNav__save-top--2Gr_g","save-left":"npNav__save-left--CwT85","save-thumbnail":"npNav__save-thumbnail--13Id_","save-div":"npNav__save-div--21ZjL","save-title":"npNav__save-title--1d0og","save-title-star":"npNav__save-title-star--1opdb","save-div-content":"npNav__save-div-content--153PC","rel-root-nav":"npNav__rel-root-nav--1Q9sL","rel-root-nav-active":"npNav__rel-root-nav-active--2AH1_","rel-second-nav":"npNav__rel-second-nav--3sqc3","rel-second-nav-active":"npNav__rel-second-nav-active--19U3d","rel-relationed":"npNav__rel-relationed--1V6ZM","rel-relationed-first":"npNav__rel-relationed-first--3451N","rel-relationed-btn":"npNav__rel-relationed-btn--VZtzQ","a-link":"npNav__a-link--3nJza","rel-more-list":"npNav__rel-more-list--3wQqt","rel-more-list-remove":"npNav__rel-more-list-remove--1Dcxj","rel-cate-nav":"npNav__rel-cate-nav--1q5wS","rel-cate-name":"npNav__rel-cate-name--1meCQ","rel-cate-details":"npNav__rel-cate-details--2xzQO","package-el":"npNav__package-el--hUDT3","inline-block":"npNav__inline-block--lwL1d","link-container":"npNav__link-container--24-ga","nav-link":"npNav__nav-link--2QywC","float-right":"npNav__float-right--bZsZQ","create-btn":"npNav__create-btn--eeltL",loginEntry:"npNav__loginEntry--3AixA",login:"npNav__login--23jLJ",register:"npNav__register--TRzjA",loginImg:"npNav__loginImg--enWyA","vip-flag":"npNav__vip-flag--26-Xy",userNameContainer:"npNav__userNameContainer--k-NCe",userName:"npNav__userName--2eHPY",userImg:"npNav__userImg--39rdF","user-container":"npNav__user-container--2wVls","logined-menu":"npNav__logined-menu--3t73U",userNameDiv:"npNav__userNameDiv--3rV1t",shared:"npNav__shared--PiPCn","read-only":"npNav__read-only--3XtzM",privated:"npNav__privated--2uKIa","own-only":"npNav__own-only--10zQ3",quality:"npNav__quality--C0cbH",jurisdiction:"npNav__jurisdiction--GdepQ",cooperate:"npNav__cooperate--3XGwv"},e.exports=t},function(e,t,n){var i=n(0).widthTitleName,a=n(1),s=n(9),o=function(e,t,n){this.pubcategories=e,this.parent=t,this.language=n,this.treeCates=[],this.$el=$('<div style="display: flex;flex-direction: column;height:100%;"></div>')};o.prototype={renderTree:function(e){this.zTree=$.fn.zTree.init(this.$tree,{check:{enable:!0,chkboxType:{Y:"",N:""}},data:{simpleData:{enable:!0,idKey:"id"}},view:{nameIsHTML:!0},callback:{onCheck:function(e,t,n){n.checked?this.parent.addRelations(n.id):this.parent.removeRelations(n.id)}.bind(this)}},function e(t,n){for(var i,a=[],s=0;i=t[s];s++)a.push({id:i.id,name:i.name,checked:-1!==n.indexOf(i.id),nocheck:i.children&&i.children.length>0,children:i.children&&i.children.length>0?e(i.children,n):[]});return a}(e,this.parent.getRelationCateIDs()))},updateTree:function(){this.renderTree(this.treeCates);for(var e=this.zTree.getNodes()[0];e&&e.isParent;)this.zTree.expandNode(e,!0,!1,null,null),e=e.children[0]},updateRelations:function(){if(this.zTree){for(var e,t=this.parent.getRelationCateIDs(),n=this.zTree.getCheckedNodes(!0),i=0;e=t[i];i++){(a=this.zTree.getNodeByParam("id",e,null))&&-1===n.indexOf(a)?(a.checked=!0,this.zTree.updateNode(a)):n.splice(n.indexOf(a),1)}var a;for(i=0;a=n[i];i++)a.checked=!1,this.zTree.updateNode(a)}}};var r=function(e,t,n){o.call(this,e,t,n),this.navCates=[],this.$nav=$('<span class="'+a["rel-cate-details"]+'"></span>'),this.$el.append($('<div class="'+a["rel-cate-nav"]+'"><span class="'+a["rel-cate-name"]+'">'+this.language.academicDiscipline+"：</span></div>").append(this.$nav)),this.$tree=$('<div class="ztree" style="min-height:60px;flex:1;overflow: auto;border: 1px solid #979797;"></div>'),this.$el.append(this.$tree),this.pubcategories.fetchCategories(function(e){this.navCates=e[0].children,this.treeCates=this.navCates[0].children,d(this.navCates,this.$nav),this.updateTree()}.bind(this)),this.navEvents()};$.extend(r.prototype,o.prototype,{navEvents:function(){this.$nav.on("click","span",function(e){-1===e.target.className.indexOf(a["rel-second-nav-active"])&&(this.$nav.find("span").removeClass(a["rel-second-nav-active"]),e.target.className=a["rel-second-nav"]+" "+a["rel-second-nav-active"],this.treeCates=this.navCates[e.target.getAttribute("name")].children,this.updateTree())}.bind(this))}});var l=function(e,t,n){o.call(this,e,t,n),this.firstCates=[],this.secondCates=[],this.thirdCates=[],this.$firstCates=$('<span class="'+a["rel-cate-details"]+'"></span>'),this.$secondCates=$('<span class="'+a["rel-cate-details"]+'"></span>'),this.$thirdCates=$('<span class="'+a["rel-cate-details"]+'"></span>'),this.$tree=$('<div class="ztree" style="min-height:60px;flex:1;overflow: auto;border: 1px solid #979797;flex: 1;"></div>'),this.$el.append($('<div class="'+a["rel-cate-nav"]+'"><span class="'+a["rel-cate-name"]+'">'+this.language.academicDiscipline+"：</span></div>").append(this.$firstCates)).append($('<div class="'+a["rel-cate-nav"]+'"><span class="'+a["rel-cate-name"]+'">'+this.language.version+"：</span></div>").append(this.$secondCates)).append($('<div class="'+a["rel-cate-nav"]+'"><span class="'+a["rel-cate-name"]+'">'+this.language.textbooks+"：</span></div>").append(this.$thirdCates)).append($('<div class="'+a["rel-cate-nav"]+'" style="flex:1;overflow: auto;"><span class="'+a["rel-cate-name"]+'">'+this.language.chapter+"：</span></div>").append(this.$tree)),this.pubcategories.fetchCategories(function(e){this.firstCates=e[2].children,this.secondCates=this.firstCates[0].children,this.thirdCates=this.secondCates[0].children,this.treeCates=this.thirdCates[0].children,d(this.firstCates,this.$firstCates),d(this.secondCates,this.$secondCates),d(this.thirdCates,this.$thirdCates),this.updateTree()}.bind(this)),this.navEvents()};$.extend(l.prototype,o.prototype,{navEvents:function(){this.$firstCates.on("click","span",function(e){-1===e.target.className.indexOf(a["rel-second-nav-active"])&&(this.$firstCates.find("span").removeClass(a["rel-second-nav-active"]),e.target.className=a["rel-second-nav"]+" "+a["rel-second-nav-active"],this.secondCates=this.firstCates[e.target.getAttribute("name")].children,this.thirdCates=this.secondCates[0].children,this.treeCates=this.thirdCates[0].children,d(this.secondCates,this.$secondCates),d(this.thirdCates,this.$thirdCates),this.updateTree())}.bind(this)),this.$secondCates.on("click","span",function(e){-1===e.target.className.indexOf(a["rel-second-nav-active"])&&(this.$secondCates.find("span").removeClass(a["rel-second-nav-active"]),e.target.className=a["rel-second-nav"]+" "+a["rel-second-nav-active"],this.thirdCates=this.secondCates[e.target.getAttribute("name")].children,this.treeCates=this.thirdCates[0].children,d(this.thirdCates,this.$thirdCates),this.updateTree())}.bind(this)),this.$thirdCates.on("click","span",function(e){-1===e.target.className.indexOf(a["rel-second-nav-active"])&&(this.$thirdCates.find("span").removeClass(a["rel-second-nav-active"]),e.target.className=a["rel-second-nav"]+" "+a["rel-second-nav-active"],this.treeCates=this.thirdCates[e.target.getAttribute("name")].children,this.updateTree())}.bind(this))}});var c=function(e,t,n){o.call(this,e,t,n),this.$tree=$('<div class="ztree" style="min-height:60px;flex:1;overflow: auto;border: 1px solid #979797;"></div>'),this.$el.append(this.$tree),this.pubcategories.fetchCategories(function(e){this.treeCates=e[1].children,this.updateTree()}.bind(this))};function d(e,t){for(var n,i='<span name="0" class="'+a["rel-second-nav"]+" "+a["rel-second-nav-active"]+'">'+e[0].name+"</span>",s=1;n=e[s];s++)i+='<span name="'+s+'" class="'+a["rel-second-nav"]+'">'+n.name+"</span>";t.html(i)}$.extend(c.prototype,o.prototype);var u={0:r,1:c,2:l},h=function(e,t,n,i){this.updateRelations=n,this.pubcategories=e,this.relations=t.slice(0),this.language=i,this.$el=$('<div style="background: #ffffff;user-select: none;margin-top:10px;width: 710px;padding: 0 12px;"></div>'),this.$relationed=$('<div style="display: flex;line-height: 26px;"><span class="total" style="margin-right: 6px;">'+this.language.choosed+"(0)：</span></div>"),this.$rootCate=$('<div style="display: flex"><div name="0" class="'+a["rel-root-nav"]+'">'+this.language.knowledge+'</div><div name="1" class="'+a["rel-root-nav"]+'">'+this.language.topic+'</div><div name="2" class="'+a["rel-root-nav"]+" "+a["rel-root-nav-active"]+'">'+this.language.textbooks+"</div></div>"),this.$cate=$('<div style="height:320px;margin-top:10px;"></div>'),this.$sureBtn=$('<button disabled class="'+a["blue-btn"]+'">'+this.language.sure+"</button>"),this.cateRel=new l(e,this,this.language),this.$cate.append(this.cateRel.$el),this.$el.append(this.$relationed).append(this.$rootCate).append(this.$cate).append($('<div style="text-align: center;margin: 10px;"></div>').append(this.$sureBtn)),this.relationeds=new s(this.pubcategories,this,this.relations),this.$relationed.append(this.relationeds.$el),this.renderRelations(),this.addEvent(),this.dialog()};h.prototype={renderRelations:function(){this.$relationed.find(".total").html("已选择("+this.relations.length+")："),this.relationeds.updateRelations(this.relations),this.cateRel.updateRelations(),this.$sureBtn.prop("disabled",!(this.relations.length>0))},getRelationCateIDs:function(){for(var e,t=[],n=0;e=this.relations[n];n++)t.push(e.cate_id);return t},removeRelations:function(e){for(var t,n=0;t=this.relations[n];n++)if(e===t.cate_id){this.relations.splice(n,1),this.renderRelations();break}},addRelations:function(e){for(var t,n=0;t=this.relations[n];n++)if(e===t.cate_id)return;this.relations.push({cate_id:e}),this.renderRelations()},addEvent:function(){this.$rootCate.on("click","."+a["rel-root-nav"],function(e){-1===e.target.className.indexOf(a["rel-root-nav-active"])&&(this.$rootCate.find("div").removeClass(a["rel-root-nav-active"]),e.target.className=a["rel-root-nav"]+" "+a["rel-root-nav-active"],this.cateRel=new(u[e.target.getAttribute("name")])(this.pubcategories,this,this.language),this.$cate.empty().append(this.cateRel.$el))}.bind(this)),this.$sureBtn.on("click",function(){this.updateRelations(this.relations),this.form.destroy(),this.$el.remove()}.bind(this))},dialog:function(){var e=this;this.form=i({title:"关联体系",el:this.$el[0],modal:!0,close:function(){e.form.destroy(),e.$el.remove()}})}},e.exports=h},function(e,t,n){var i=n(0).widthTitleName,a=n(1),s=n(10),o=function(e,t,n){this.package=e,this.parent=t,this.language=n,this.treeCates=[],this.$el=$('<div style="height:100%;width:100%;display: flex;flex-direction: column"></div>'),this.$back=$('<span style="cursor: pointer;height:26px;">'+this.language.return+"</span>"),this.$tree=$('<div class="ztree" style="min-height:60px;flex:1;overflow: auto;border: 1px solid #979797;flex: 1;"></div>'),this.$el.append($("<div></div>").append(this.$back)).append(this.$tree),this.$back.on("click",(function(){t.switchToPackages()})),this.package.fetchCategories(function(e){this.treeCates=e,this.updateTree()}.bind(this))};o.prototype={renderTree:function(e){this.zTree=$.fn.zTree.init(this.$tree,{check:{enable:!0,chkboxType:{Y:"",N:""}},data:{simpleData:{enable:!0,idKey:"id"}},view:{nameIsHTML:!0},callback:{onCheck:function(e,t,n){n.checked?this.parent.addRelations(this.package.getAttr().id,n.id):this.parent.removePackRelations(this.package.getAttr().id,n.id)}.bind(this)}},function e(t,n){for(var i,a=[],s=0;i=t[s];s++)a.push({id:i.id,name:i.name,checked:-1!==n.indexOf(i.id),children:i.children&&i.children.length>0?e(i.children,n):[]});return a}(e,this.parent.getRelationCateIDs()))},updateTree:function(){this.renderTree(this.treeCates);for(var e=this.zTree.getNodes()[0];e&&e.isParent;)this.zTree.expandNode(e,!0,!1,null,null),e=e.children[0]},updateRelations:function(){if(this.zTree){for(var e,t=this.parent.getRelationCateIDs(),n=this.zTree.getCheckedNodes(!0),i=0;e=t[i];i++){(a=this.zTree.getNodeByParam("id",e,null))&&-1===n.indexOf(a)?(a.checked=!0,this.zTree.updateNode(a)):n.splice(n.indexOf(a),1)}var a;for(i=0;a=n[i];i++)a.checked=!1,this.zTree.updateNode(a)}}};var r=function(e,t,n){this.packages=e,this.parent=t,this.language=n,this.$el=$('<div style="height:auto;width:100%;text-align: center;"></div>'),this.packages.getMyPackages(function(e){if(0===e.length)return this.$el.html('<div style="text-align: center">'+this.language.noResourcePackage+"</div>");for(var n,i=0;n=e[i];i++)n.create_at=n.create_at.slice(0,10),this.$el.append($('<div class="'+a["package-el"]+'"></div>').append(new PackageCard(n,{click:function(e){t.switchToCates(e.id)}}).el))}.bind(this))};r.prototype={updateRelations:function(){}};var l=function(e,t,n,i){this.updateRelations=n,this.packages=e,this.relations=t.slice(0),this.language=i,this.$el=$('<div style="background: #ffffff;user-select: none;margin-top:10px;width: 710px;padding: 0 12px;"></div>'),this.$relationed=$('<div style="display: flex;line-height: 26px;"><span class="total" style="margin-right: 6px;">'+this.language.choosed+"(0)：</span></div>"),this.$cate=$('<div style="height:340px;margin-top:10px;overflow: auto;"></div>'),this.$sureBtn=$('<button disabled class="'+a["blue-btn"]+'">'+this.language.sure+"</button>"),this.myPackages=new r(this.packages,this,this.language),this.relationeds=new s(this.packages,this,this.relations,this.language),this.$cate.append(this.myPackages.$el),this.$relationed.append(this.relationeds.$el),this.$el.append(this.$relationed).append(this.$cate).append($('<div style="text-align: center;margin: 10px;"></div>').append(this.$sureBtn)),this.renderRelations(),this.addEvent(),this.dialog()};l.prototype={switchToPackages:function(){this.packageCates&&this.packageCates.$el.remove(),this.cateRel=new r(this.packages),this.$cate.append(this.myPackages.$el)},switchToCates:function(e){this.myPackages.$el.detach(),this.packageCates=new o(this.packages.getPackage(e),this,this.language),this.$cate.append(this.packageCates.$el)},renderRelations:function(){this.$relationed.find(".total").html(this.language.choosed+"("+this.relations.length+")："),this.relationeds.updateRelations(this.relations),this.packageCates&&this.packageCates.updateRelations(),this.$sureBtn.prop("disabled",!(this.relations.length>0))},getRelationCateIDs:function(){for(var e,t=[],n=0;e=this.relations[n];n++)t.push(e.cate_id);return t},removePackRelations:function(e,t){for(var n,i=0;n=this.relations[i];i++)if(e===n.resourcepack_id&&t===n.cate_id){this.relations.splice(i,1),this.renderRelations();break}},addRelations:function(e,t){for(var n,i=0;n=this.relations[i];i++)if(e===n.resourcepack_id&&t===n.cate_id)return;this.relations.push({resourcepack_id:e,cate_id:t}),this.renderRelations()},addEvent:function(){this.$sureBtn.on("click",function(){this.updateRelations(this.relations),this.form.destroy(),this.$el.remove()}.bind(this))},dialog:function(){var e=this;this.form=i({title:this.language.relateResourcePackage,el:this.$el[0],modal:!0,close:function(){e.form.destroy(),e.$el.remove()}})}},e.exports=l},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=n(0).widthTitleName,p=n(1),g=function(){function e(t,n,i){c(this,e),this.netpadSVG=t,this.userModel=n,this.language=i,this.pageSize=24,this.pageNo=1,this.totalPage=1,this.type="myResourse",this.$el=$('<div style="padding: 0;width: 900px;" ></div>'),this.$nav=$('<div style="margin: 10px 0 0 10px;"><div name="myResourse" style="display: inline-block;padding: 4px 10px;cursor:pointer;background: #d3d3d3;color: #ffffff">'+this.language.myResource+'</div><div name="resoursePacks" style="display: inline-block;margin-left:10px;padding: 4px 10px;cursor:pointer;">'+this.language.resourePackage+"</div></div>"),this.$nav.on("mouseenter","div",function(e){$(e.target).css("background","#d3d3d3").css("color","#ffffff")}.bind(this)),this.$nav.on("mouseleave","div",function(e){e.target.getAttribute("name")!=this.type&&$(e.target).css("background","").css("color","")}.bind(this)),this.$nav.on("click","div",function(e){this.$nav.find("div").css("background","").css("color",""),$(e.target).css("background","#d3d3d3").css("color","#ffffff"),"myResourse"==e.target.getAttribute("name")?this.switchToResourses():this.switchToPacks()}.bind(this)),this.$content=$("<div></div>"),this.$el.append(this.$nav).append(this.$content),$("body").append(this.$el),this.switchToResourses(),this.render()}return u(e,[{key:"render",value:function(){var e=this;this.form=h({title:this.language.myFile,el:this.$el[0],modal:!0,close:function(){e.form.destroy(),e.$el.remove()}})}},{key:"switchToResourses",value:function(){this.packages&&this.packages.$el.detach(),this.resourses||(this.resourses=new v(this,this.userModel,this.language)),this.$content.append(this.resourses.$el),this.type="myResourse"}},{key:"switchToPacks",value:function(){this.resourses&&this.resourses.$el.detach(),this.packages||(this.packages=new m(this,this.userModel,this.language)),this.$content.append(this.packages.$el),this.type="resoursePacks"}},{key:"openFile",value:function(e){this.netpadSVG.restoreByID(e),this.form.destroy(),this.$el.remove()}}]),e}(),f=function(){function e(t,n,i){c(this,e),this.parent=t,this.userModel=n,this.pageSize=16,this.pageNo=1,this.totalPage=1,this.keywords="",this.sort="update_at,desc",this.openFileEvent=this.openFile.bind(this),this.language=i,this.$el=$('<div style="padding: 0;width: 100%" ></div>'),this.$search=$('<div style="text-align: center;position: relative"><div style="display: inline-block;width:200px;position: relative"><input class="search-box" placeholder="'+this.language.searchKey+'" style="display: inline-block;width: 100%;height: 32px;font-size: 12px;border:1px solid #dcdee2;color: #515a6e;border-radius: 5px;padding: 0 7px;"><span class="npsvg-iconfont" style="position: absolute;right:0;width: 32px;height: 32px;text-align: center;color: #808695;line-height: 32px;cursor: pointer">&#xe7c4;</span></div><div style="position: absolute;right: 10px;top: 0;z-index: 2;"><div style="text-align: right;"><span class="npsvg-iconfont sort-btn" style="cursor: pointer;">&#xe6f3;</span></div><ul style="text-align: center;min-width: 120px;line-height:26px;background: #fff;border: 1px solid rgba(0,0,0,.15);border-radius: 4px;box-shadow: 0 6px 12px rgba(0,0,0,.175);padding: 4px 10px;margin: 2px;display: none;"><li class="sort" name="" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.default+'&emsp;&emsp;&ensp;</li><li class="sort" name="update_at,desc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;">&#xe23e;</span>'+this.language.updateTime+'↓</li><li class="sort" name="update_at,asc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.updateTime+'↑</li><li class="sort" name="create_at,desc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.creatTime+'↓</li><li class="sort" name="create_at,asc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.creatTime+'↑</li><li class="sort" name="browse,desc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.browse+'↓</li><li class="sort" name="browse,asc" style="cursor: pointer;list-style: none;"><span class="npsvg-iconfont" style="margin-right:4px;opacity: 0;">&#xe23e;</span>'+this.language.browse+"↑</li></ul></div></div>"),this.$content=$('<div style="height: 350px;overflow: auto;"></div>'),this.$more=$('<div style="text-align: center;padding: 10px"><button style="outline:0;">'+this.language.loadMore+"</button></div>"),this.$el.append(this.$search).append(this.$content).append(this.$more),this.$content.on("click","button",this.openFile.bind(this)),this.$more.on("click","button",this.renderMore.bind(this)),this.$el.on("click",".search-btn",this.onSearch.bind(this)),this.$el.on("keydown",".search-box",function(e){13!=e.keyCode&&"Enter"!=e.key||this.onSearch()}.bind(this)),this.$el.on("click",".sort",function(e){this.onSort(e.target.getAttribute("name")),this.fetchResourse()}.bind(this)),this.$el.on("click",".sort-btn",function(e){this.$el.find("ul")[0].style.display="none"===this.$el.find("ul")[0].style.display?"block":"none"}.bind(this))}return u(e,[{key:"fetchResourse",value:function(){var e=this;this.userModel.getAuthorID((function(t){if(!t)return e.totalPage=0,e.renderResourseList=[],void e.$more.html(e.language.noMore);$.ajax({type:"GET",dataType:"JSON",url:e.url,data:e.getParams(t),beforeSend:function(t){t.setRequestHeader("code",e.userModel.get("code"))},success:function(t){e.totalPage=t.last_page,e.renderResourseList(t.data),e.pageNo>=e.totalPage&&e.$more.html(e.language.noMore)}})}))}},{key:"renderResourseList",value:function(e){for(var t,n=this.$content,i=0;t=e[i];i++)n.append(this.renderSingleFileEL(t));this.$content[0].scrollTop=380*(this.pageNo-1)}},{key:"renderSingleFileEL",value:function(e){return $('<div style="margin:10px 0 0 10px;display: inline-block"></div>').append(new this.ResourceCard(b(e),{click:this.openFileEvent}).el)}},{key:"renderMore",value:function(){this.pageNo++,this.pageNo>=this.totalPage&&this.$more.html(this.language.noMore),this.fetchResourse()}},{key:"onSearch",value:function(){this.keywords=this.$el.find("input").val().trim(),this.reset(),this.fetchResourse(!0)}},{key:"onSort",value:function(e){this.sort=e,this.reset(),this.$el.find("ul").find("span").css("opacity",0),this.$el.find('li[name="'+this.sort+'"]').find("span").css("opacity",1),this.$el.find("ul").hide()}},{key:"reset",value:function(){this.pageNo=1,this.totalPage=1,this.$content.empty()}}]),e}(),v=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return c(this,n),(s=t.call(this,e,i,a)).ResourceCard=ResourceCard,s.fetchResourse(!0),s}return u(n,[{key:"onSearch",value:function(){this.keywords=this.$el.find("input").val().trim(),this.sort&&this.onSort(""),this.reset(),this.fetchResourse(!0)}},{key:"getParams",value:function(){var e={source:"course",sort:this.sort,current_page:this.pageNo,per_page:this.pageSize};return this.keywords&&(e.keywords=this.keywords),e}},{key:"openFile",value:function(e){this.parent.openFile(e.source_id)}},{key:"fetchResourse",value:function(e){var t=this;this.userModel.getAuthorID((function(n){if(!n)return t.totalPage=0,t.renderResourseList=[],void t.$more.html(t.language.noMore);$.ajax({type:"GET",dataType:"JSON",url:"/resourceAdmin/es_resources/authors/".concat(n,"/resources"),data:t.getParams(),beforeSend:function(e){e.setRequestHeader("code",t.userModel.get("code"))},success:function(e){t.renderResourseList(e),t.renderPage()}}),e&&$.ajax({type:"GET",dataType:"JSON",url:"/resourceAdmin/es_resources/authors/".concat(n,"/resources/count"),data:t.getParams(),beforeSend:function(e){e.setRequestHeader("code",t.userModel.get("code"))},success:function(e){t.totalPage=Math.ceil(e/t.pageSize),t.renderPage()}})}))}},{key:"renderPage",value:function(){this.$more.html(this.pageNo>=this.totalPage?this.language.noMore:'<div style="text-align: center;padding: 10px"><button style="outline:0;">'.concat(this.language.loadMore,"</button></div>"))}}]),n}(f),m=function(e){a(n,e);var t=o(n);function n(e,i,a){var s;return c(this,n),(s=t.call(this,e,i,a)).ResourceCard=PackageCard,s.url="/resourceAdmin/resourcepacks",s.fetchResourse(),s}return u(n,[{key:"getParams",value:function(e){var t={sort:this.sort,current_page:this.pageNo,per_page:this.pageSize,owner_id:e};return this.keywords&&(t.keywords=this.keywords),t}},{key:"openFile",value:function(e){this.$search.detach(),this.$content.detach(),this.$more.detach(),this.$el.append(new y(e,this,this.userModel,this.language).$el)}},{key:"showPackages",value:function(){this.$el.empty().append(this.$search).append(this.$content).append(this.$more)}}]),n}(f),y=function(){function e(t,n,i,a){var s=this;c(this,e),this.pack=t,this.parent=n,this.userModel=i,this.pageSize=12,this.pageNo=1,this.totalPage=1,this.keywords="",this.sort="update_at,desc",this.openFileEvent=this.openFile.bind(this),this.language=a,this.$el=$('<div style="padding: 0;width: 100%;" ><div style="margin: 10px 0 0 10px;">'+t.name+'<button class="'+p.btn+" "+p["blue-btn"]+' return" style="margin-left: 20px;">返回</button></div><div name="left" style="float:left;width:200px;height:360px;border:1px solid #999;margin:10px 0 0 10px;"></div><div name="right" style="float:left;width: 680px;"></div></div>'),this.$catalogs=$('<ul class="ztree" style="height:calc(100% - 24px);width: 100%;overflow: auto;"></ul>'),this.$content=$('<div style="overflow: auto;height: 380px;">'+this.language.loading+"</div>"),this.$more=$('<div style="text-align: center;padding: 10px"><button style="outline:0;">'+this.language.loadMore+"</button></div>"),this.$return=this.$el.find(".return"),this.$el.find("div[name=left]").append(this.$catalogs),this.$el.find("div[name=right]").append(this.$content).append(this.$more),this.$content.on("click","button",this.openFile.bind(this)),this.$more.on("click","button",this.renderMore.bind(this)),this.$return.on("click",(function(){s.parent.showPackages()})),this.fetchCatalogs()}return u(e,[{key:"fetchCatalogs",value:function(){this.$content.empty(),$.ajax({type:"GET",dataType:"JSON",url:"/resourceAdmin/resourcepacks/"+this.pack.id+"/categories",beforeSend:function(e){e.setRequestHeader("code",this.userModel.get("code"))}.bind(this),success:function(e){this.renderCatalogs(e),this.cate_id=e.id,this.fetchCatalogsResourse()}.bind(this)})}},{key:"fetchCatalogsResourse",value:function(){$.ajax({type:"GET",dataType:"JSON",url:"/resourceAdmin/resourcepacks/"+this.pack.id+"/categories/"+this.cate_id+"/resources?containNode=true&source=course&per_page="+this.pageSize+"&current_page="+this.pageNo,beforeSend:function(e){e.setRequestHeader("code",this.userModel.get("code"))}.bind(this),success:function(e){this.renderResourseList(e.data),this.totalPage=e.last_page,this.$more.html(this.pageNo>=this.totalPage?this.language.noMore:'<button style="outline:0;">'+this.language.loadMore+"</button>")}.bind(this)})}},{key:"renderCatalogs",value:function(e){e.open=!0;var t=this,n=$.fn.zTree.init(this.$catalogs,{view:{showIcon:!1,showTitle:!1,autoCancelSelected:!1,selectedMulti:!1},callback:{onClick:function(e,n,i){t.cate_id=i.id,t.$content.empty(),t.fetchCatalogsResourse()}}},[e]),i=n.getNodes();i.length>0&&n.selectNode(i[0])}},{key:"renderResourseList",value:function(e){for(var t,n=this.$content,i=0;t=e[i];i++)n.append(this.renderSingleFileEL(t));this.$content[0].scrollTop=380*(this.pageNo-1)}},{key:"renderSingleFileEL",value:function(e){return $('<div style="margin:10px 0 0 10px;display: inline-block"></div>').append(new ResourceCard(b(e),{click:this.openFileEvent}).el)}},{key:"renderMore",value:function(){this.pageNo++,this.pageNo>=this.totalPage&&this.$more.html(this.language.noMore),this.fetchCatalogsResourse()}},{key:"openFile",value:function(e){this.parent.parent.openFile(e.source_id)}}]),e}();function b(e){return e.create_at=e.create_at.slice(0,10),e}e.exports=g},function(e,t,n){var i=n(0).widthTitleName,a=n(1),s=function(e,t){this.dynamicMath=e.dynamicMath,this.language=t,this.$el=$('<div style="background: #ffffff;user-select: none;margin-top:20px;padding: 0 12px;width: 280px;"><div style="margin-top:10px;"><span style="display:inline-block;font-weight: bold;font-size: 14px;width:50px;text-align: right;margin-right:10px;"><span style="color:#f00;">*</span>'+this.language.title+':</span><input type="text" name="heading" style="width: 180px"></div><div style="text-align: center;margin:30px 0;"><button disabled class="'+a["blue-btn"]+'">'+this.language.sure+"</button></div></div>"),$("body").append(this.$el),this.render(e),this.$el.on("click","."+a["blue-btn"],this.saveFile.bind(this)),this.$el.find("input").on("change",this.canSubmit.bind(this)),this.$el.find("input").on("input",this.canSubmit.bind(this))};s.prototype={canSubmit:function(){this.$el.find("."+a["blue-btn"]).prop("disabled",!this.$el.find("input[name=heading]").val())},render:function(e){var t=this;this.callback=e.callback,this.$el.find("input[name=heading]").val(e.fileData.heading),this.form=i({title:e.title,el:this.$el[0],modal:!0,close:function(){t.form.destroy(),t.$el.remove()}}),this.canSubmit()},saveFile:function(){var e=this.$el.find("input[name=heading]").val()||this.language.unnamed;this.form.destroy(),this.$el.remove(),this.callback({heading:e})}},e.exports=function(e,t){return new s(e,t)}},function(e,t,n){(t=n(3)(!1)).push([e.i,"\n.npNav__dropDownBtn--1FzBL{\n    display:inline-block;\n    position: relative;\n}\n\n.npNav__drop-btn--2l59Y{\n    padding: 5px 10px;\n    cursor: pointer;\n    \n}\n.npNav__divider--119ox{\n    height: 1px;\n    border-bottom: 1px solid #e6e6e6;\n    margin:2px 0\n}\n\n.npNav__disable--NbnnX{\n    cursor:not-allowed !important;\n}\n\n.npNav__menu-li--1OShs{\n    display: flex;\n    height: 26px;\n    line-height: 26px;\n    position: relative;\n    cursor: pointer;\n}\n\n.npNav__menu-li--1OShs:hover{\n    background: #F7F8F9;\n}\n\n.npNav__menu-li-disable---xkpu{\n    display: flex;\n    height: 26px;\n    line-height: 26px;\n    position: relative;\n    color: #d8d8d8;\n}\n\n.npNav__li-icon--138qt{\n    width:30px;\n    text-align: center;\n}\n.npNav__menu-label--202y9{\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.npNav__sub-icon--24WQW{\n    width: 30px;\n    text-align: right;\n}\n\n\n\n.npNav__menu-container-right--39n3d{\n    position: absolute;\n    right: -210px;\n    top: 0;\n    display: none;\n}\n\n.npNav__menu-body--2hTiJ{\n    background-color: #fff;\n    box-shadow: 2px 2px 4px 0 rgba(0,0,0,.2);\n    padding: 6px;\n    min-width: 200px;\n    max-width: 300px;\n    box-sizing: border-box;\n}\n.npNav__menu-body-sub--8ged8{\n    background-color: #fff;\n    box-shadow: 2px 2px 4px 0 rgba(0,0,0,.2);\n    padding: 6px;\n    min-width: 200px;\n    max-width: 300px;\n    margin-left: 30px;\n    box-sizing: border-box;\n}\n\n.npNav__menu-container-bottom--Ppy0K{\n    position: absolute;\n    left: 0;\n    top: -4;\n    display: none;\n    z-index: 1;\n    color:rgba(0,0,0,0.68);\n}\n\n\n.npNav__tip--1TmFB{\n    position: absolute;\n    top: 40px;\n    z-index: 1;\n    min-width: 70px;\n    text-align: center;\n    background: rgb(0, 0, 0);\n    box-shadow: 1px 2px 5px 0 rgba(0,0,0,0.21);\n    border-radius: 2px;\n    display: none;\n    color: rgb(255, 255, 255);\n    border-radius: 4px;\n}",""]),t.locals={dropDownBtn:"npNav__dropDownBtn--1FzBL","drop-btn":"npNav__drop-btn--2l59Y",divider:"npNav__divider--119ox",disable:"npNav__disable--NbnnX","menu-li":"npNav__menu-li--1OShs","menu-li-disable":"npNav__menu-li-disable---xkpu","li-icon":"npNav__li-icon--138qt","menu-label":"npNav__menu-label--202y9","sub-icon":"npNav__sub-icon--24WQW","menu-container-right":"npNav__menu-container-right--39n3d","menu-body":"npNav__menu-body--2hTiJ","menu-body-sub":"npNav__menu-body-sub--8ged8","menu-container-bottom":"npNav__menu-container-bottom--Ppy0K",tip:"npNav__tip--1TmFB"},e.exports=t},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(0).widthTitleName,s=n(39),o=683,r=384;e.exports=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dynamicMath=t,this.language=n,this.$el=$('<div style="padding:20px; user-select: none; min-height: 480px;min-width: 730px;" ></div>'),this._x=0,this._y=0,this._width=200,this._height=200,this.name="",this._mousedownEvent_=this.__mousedown__.bind(this),this._mousemoveEvent_=this.__mousemove__.bind(this),this._mouseupEvent_=this.__mouseup__.bind(this),this.initHandleEL(),this.initResizeEl(),this.dialog()}var t,n,l;return t=e,(n=[{key:"initResizeEl",value:function(){var e=this.dynamicMath.netpadPreview.paper.get("width"),t=this.dynamicMath.netpadPreview.paper.get("height");o=.5*e,r=.5*t,this.$webshotEl=$('<div style="position:relative;width:'.concat(o,"px;height:").concat(r,'px; overflow: hidden;margin: 0 auto;"></div>')).append(this.getHtmlContent(.5)).append($('<div class="'+s["cropper-shader"]+'"></div>')),this.$resizeEl=$('<div style="position:absolute;top:'.concat(this._y,"px;left:").concat(this._x,'px;width:200px;height: 200px;">')+'<span style="overflow: hidden;width:100%;height: 100%;position:absolute;top:0;left:0;pointer-events: none;background: #fff;"></span><span name="move" class="'+s["cropper-move"]+'"></span><span name="nw" class="'+s["cropper-point"]+" "+s["cropper-nw"]+'"></span><span name="n" class="'+s["cropper-point"]+" "+s["cropper-n"]+'"></span><span name="ne" class="'+s["cropper-point"]+" "+s["cropper-ne"]+'"></span><span name="w" class="'+s["cropper-point"]+" "+s["cropper-w"]+'"></span><span name="e" class="'+s["cropper-point"]+" "+s["cropper-e"]+'"></span><span name="sw" class="'+s["cropper-point"]+" "+s["cropper-sw"]+'"></span><span name="s" class="'+s["cropper-point"]+" "+s["cropper-s"]+'"></span><span name="se" class="'+s["cropper-point"]+" "+s["cropper-se"]+'"></span></div>'),this.$preview=$('<div style="pointer-events:none;transform-origin: 0 0;transform:translate(-240px,-92px) scale(0.5)"></div>').append(this.dynamicMath.exportPaperHTML()),this.$resizeEl.children().first().append(this.$preview),this.$webshotEl.append(this.$resizeEl),this.$el.prepend(this.$webshotEl),this.$resizeEl.on("mousedown","span",this._mousedownEvent_)}},{key:"initHandleEL",value:function(){this.$handle=$('<div style="margin-top: 14px;">\n                <div>\n                <input type="checkbox" style="margin-right:4px;">'.concat(this.language.bgTransparency,'\n                    <span style="margin:0 30px;">').concat(this.language.quality,'\n                        <select style="margin-left:4px;width: 56px;">\n                            <option>1</option>\n                            <option>2</option>\n                            <option>3</option>\n                            <option>4</option>\n                            <option>5</option>\n                        </select>\n                    </span>\n                    ').concat(this.language.pictureSize,'：<span name="px" style="color:#666;">400*400').concat(this.language.pixel,'</span>\n                </div>\n                <div style="text-align: right;">\n                    <button name="webShotToPng" class="').concat(s["cropper-blue-btn"],'">').concat(this.language.exportPng,'</button>\n                    <button name="webShotToPdf" class="').concat(s["cropper-blue-btn"],'">').concat(this.language.exportPdf,'</button>\n                    <button name="webShotToSvg" class="').concat(s["cropper-blue-btn"],'">').concat(this.language.exportSvg,'</button>\n                    <button name="cancle" class="').concat(s["cropper-btn"],'">').concat(this.language.cancel,"</button>\n            </div></div>")),this.$handle.on("change","select",function(){this.$handle.find("span[name=px]").html(2*this._width*this.getScale()+"*"+2*this._height*this.getScale()+this.language.pixel)}.bind(this)),this.$handle.on("click","button",function(e){"cancle"!==e.target.name&&this.webshot(e.target.name),this.form.destroy(),this.$el.remove()}.bind(this)),this.$el.append(this.$handle)}},{key:"dialog",value:function(){var e=this;this.form=a({title:this.language.exportPicture,el:this.$el[0],modal:!0,close:function(){e.form.destroy(),e.$el.remove()}})}},{key:"__mousedown__",value:function(e){var t=this.getScreenXYOfEvt(e);this.name=e.target.getAttribute("name"),this._posX=t.x,this._posY=t.y,this.$resizeEl.off("mousedown"),document.addEventListener("mousemove",this._mousemoveEvent_),document.addEventListener("mouseup",this._mouseupEvent_)}},{key:"__updateX__",value:function(e){e>this._width-10&&(e=this._width-10);var t=this._x+e;return t<0?0:t}},{key:"__updateY__",value:function(e){e>this._height-10&&(e=this._height-10);var t=this._y+e;return t<0?0:t}},{key:"__updateWidth__",value:function(e){var t=this._width+e;return this._x+t>o&&(t=o-this._x),t>10?t:10}},{key:"__updateHeight__",value:function(e){var t=this._height+e;return this._y+t>r&&(t=r-this._y),t>10?t:10}},{key:"__mousemove__",value:function(e){var t=this.name,n=this.getScreenXYOfEvt(e),i=n.x,a=n.y,s=i-this._posX,l=a-this._posY;if("move"===t)return(c=this._x+s)<0&&(c=0),(d=this._y+l)<0&&(d=0),c>o-this._width&&(c=o-this._width),d>r-this._height&&(d=r-this._height),this.updateResize(c,d,this._width,this._height);if("nw"===t){var c=this.__updateX__(s),d=this.__updateY__(l),u=this._width+this._x-c,h=this._height+this._y-d;return this.updateResize(c,d,u,h)}return"n"===t?(d=this.__updateY__(l),h=this._height+this._y-d,this.updateResize(this._x,d,this._width,h)):"ne"===t?(d=this.__updateY__(l),u=this.__updateWidth__(s),h=this._height+this._y-d,this.updateResize(this._x,d,u,h)):"w"===t?(c=this.__updateX__(s),u=this._width+this._x-c,this.updateResize(c,this._y,u,this._height)):"e"===t?this.updateResize(this._x,this._y,this.__updateWidth__(s),this._height):"sw"===t?(c=this.__updateX__(s),u=this._width+this._x-c,h=this.__updateHeight__(l),this.updateResize(c,this._y,u,h)):"s"===t?this.updateResize(this._x,this._y,this._width,this.__updateHeight__(l)):"se"===t?this.updateResize(this._x,this._y,this.__updateWidth__(s),this.__updateHeight__(l)):void 0}},{key:"__mouseup__",value:function(e){this.$resizeEl.on("mousedown","span",this._mousedownEvent_),document.removeEventListener("mousemove",this._mousemoveEvent_),document.removeEventListener("mouseup",this._mouseupEvent_),this.__mousemove__(e),this._x=this.movePOS.x,this._y=this.movePOS.y,this._width=this.movePOS.width,this._height=this.movePOS.height}},{key:"getScreenXYOfEvt",value:function(e){var t=this.$webshotEl[0].getBoundingClientRect();return{x:parseInt(e.pageX-t.left),y:parseInt(e.pageY-t.top)}}},{key:"getScale",value:function(){var e=Math.abs(this.$handle.find("select").val()||1);return parseInt(e>5?5:e)}},{key:"updateResize",value:function(e,t,n,i){this.movePOS={x:e,y:t,width:n,height:i},this.$resizeEl.css("left",e+"px").css("top",t+"px").css("width",n+"px").css("height",i+"px"),this.$preview.css("transform","translate("+-e+"px,"+-t+"px) scale(0.5)"),this.$handle.find("span[name=px]").html(2*n*this.getScale()+"*"+2*i*this.getScale()+"像素")}},{key:"getHtmlContent",value:function(e,t){return'<div style="pointer-events:none;transform: scale('+e+","+e+");-webkit-transform:scale("+e+","+e+');transform-origin: 0 0;-webkit-transform-origin:0 0;">'+this.dynamicMath.netpadPreview.exportPaperHTML(t)+"</div>"}},{key:"webshot",value:function(e){var t=layer.msg(this.language.exporting,{icon:0,time:0}),n=this.getScale()||1,i=this;$.ajax({type:"POST",url:"/shot/".concat(e),contentType:"application/json",data:JSON.stringify({id:Math.random(),htmlContent:this.getHtmlContent(n,this.$handle.find("input[type=checkbox]")[0].checked),x:this._x*n*2,y:this._y*n*2,width:this._width*n*2,height:this._height*n*2,scale:1}),success:function(e){var n,a,s;layer.close(t),layer.msg(i.language.exportSuccess,{icon:1}),n="/shot/".concat(e.path),a=e.path,(s=document.createElement("a")).setAttribute("href",n),s.setAttribute("download",a),s.click()},error:function(){layer.close(t),layer.msg(i.language.exportFaild,{icon:5})}})}}])&&i(t.prototype,n),l&&i(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){var i=n(2),a=n(40);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};i(a,s);e.exports=a.locals||{}},function(e,t,n){(t=n(3)(!1)).push([e.i,".npNav__cropper-shader--1f9ZU {\n    background: #000;\n    opacity: 0.3;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    pointer-events: none;\n}\n\n.npNav__cropper-move--7CFrr {\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    border: 1px solid #f0f;\n    height: 100%;\n    width: 100%;\n    cursor: move;\n}\n\n.npNav__cropper-point--1l_O6 {\n    display: block;\n    position: absolute;\n    background: #FFFFFF;\n    border: 1px solid #979797;\n    height: 6px;\n    width: 6px;\n}\n\n.npNav__cropper-nw--2vXXI {\n    cursor: nwse-resize;\n    left: -3px;\n    top: -3px;\n}\n\n.npNav__cropper-n--2kaMr {\n    cursor: ns-resize;\n    left: 50%;\n    margin-left: -3px;\n    top: -3px;\n}\n\n.npNav__cropper-ne--1uy2M {\n    cursor: nesw-resize;\n    right: -3px;\n    top: -3px;\n}\n\n.npNav__cropper-w--3Uo9f {\n    cursor: ew-resize;\n    left: -3px;\n    margin-top: -3px;\n    top: 50%;\n}\n\n.npNav__cropper-e--2KyjS {\n    cursor: ew-resize;\n    right: -3px;\n    margin-top: -3px;\n    top: 50%;\n}\n\n.npNav__cropper-sw--3cdgD {\n    cursor: nesw-resize;\n    left: -3px;\n    bottom: -3px;\n}\n\n.npNav__cropper-s--1Mvfl {\n    cursor: ns-resize;\n    left: 50%;\n    margin-left: -3px;\n    bottom: -3px;\n}\n\n.npNav__cropper-se--1RoD1 {\n    cursor: nwse-resize;\n    right: -3px;\n    bottom: -3px;\n}\n\n.npNav__cropper-btn--2_xp_ {\n    width: 72px;\n    padding: 4px 0;\n    line-height: 1;\n    border-radius: 4px;\n    color: #888;\n    border: 1px solid #888;\n    background: #fff;\n    cursor: pointer;\n    outline: 0;\n}\n\n.npNav__cropper-btn--2_xp_:hover {\n    color: #000;\n    border: 1px solid #000;\n}\n\n.npNav__cropper-blue-btn--38ZK7 {\n    width: 72px;\n    padding: 4px 0;\n    line-height: 1;\n    border: 1px solid #409eff;\n    border-radius: 4px;\n    color: #fff;\n    background: #409eff;\n    cursor: pointer;\n    outline: 0;\n    margin-right: 10px;\n}\n\n.npNav__cropper-blue-btn--38ZK7:hover {\n    color: #fff;\n    background: #0966ac;\n    border: 1px solid #0966ac;\n}",""]),t.locals={"cropper-shader":"npNav__cropper-shader--1f9ZU","cropper-move":"npNav__cropper-move--7CFrr","cropper-point":"npNav__cropper-point--1l_O6","cropper-nw":"npNav__cropper-nw--2vXXI","cropper-n":"npNav__cropper-n--2kaMr","cropper-ne":"npNav__cropper-ne--1uy2M","cropper-w":"npNav__cropper-w--3Uo9f","cropper-e":"npNav__cropper-e--2KyjS","cropper-sw":"npNav__cropper-sw--3cdgD","cropper-s":"npNav__cropper-s--1Mvfl","cropper-se":"npNav__cropper-se--1RoD1","cropper-btn":"npNav__cropper-btn--2_xp_","cropper-blue-btn":"npNav__cropper-blue-btn--38ZK7"},e.exports=t},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(1);e.exports=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userModel=t,this.userModel.on("change:is_locked",(function(){n.render()}))}var t,n,s;return t=e,(n=[{key:"render",value:function(){if("1"===this.userModel.get("is_locked")){var e=document.createElement("div");e.style.cssText="position: fixed;background: rgba(0,0,0,0.2);top: 0;right: 0;left: 0;bottom: 0;display: flex;align-items: center;justify-content: center;font-size: 12px;",e.innerHTML='<div style="color: #000;background: #fff;width: 430px;padding: 0 10px;">\n            <div style="position: relative;border-bottom: 1px solid #ccc;height: 30px;line-height: 30px;font-weight: bold;font-size: 14px;">\n                账号锁定\n                <span\n                class="npsitefont npsiteremove"\n                style="font-size: 16px;float: right;font-weight: normal;cursor: pointer;"\n                //@click="close"\n                ></span>\n            </div>\n            <div style="display: flex;justify-content: space-between;margin: 16px 10px 12px;align-items: center;">\n                <span\n                class="npsitefont npsitelock"\n                style="font-size: 40px;color: rgb(250, 112, 74);margin-right: 16px;"\n                ></span>\n                <div style="width: 200px;color: #969696;flex: 1;line-height: 22px;text-align: left;">\n                因违反平台规定，您的网络画板账号“'.concat(this.userModel.get("user_name"),"”已被系统管理员锁定！锁定截止日期：").concat(this.userModel.get("unlock_time"),'。锁定期间该账号不能登录。\n                如有疑问请联系客服QQ：<a\n                    href="http://wpa.qq.com/msgrd?V=3&uin=1105632289&site=qq&menu=yes"\n                    target="_blank"\n                    style="word-break: break-all;"\n                >1105632289</a>。\n                </div>\n            </div>\n        \n            <div style="text-align: center;margin: 10px 0 20px;">\n            <button class="').concat(a["blue-btn"],'">确定</button>\n            </div>\n        </div>'),this.userModel.exit(),e.addEventListener("click",(function(t){"npsitefont npsiteremove"!==t.target.className&&"BUTTON"!==t.target.nodeName||e.parentNode&&e.parentNode.removeChild(e)})),document.body.appendChild(e)}}}])&&i(t.prototype,n),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){var i=n(43),a=function(e){this._packagesMap={},this._currentUser=e};$.extend(a.prototype,np.EventDispatcher.prototype,{getMyPackages:function(e){var t=this;this._currentUser.getAuthorID((function(n){if(!n)return e&&e([]);$.ajax({type:"GET",dataType:"JSON",url:"/resourceAdmin/resourcepacks?owner_id="+n+"&per_page=1000&current_page=1",beforeSend:function(e){e.setRequestHeader("code",t._currentUser.get("code"))},success:function(n){for(var a,s=n.data,o=0;a=s[o];o++)t._packagesMap[a.id]=new i(a.id,t._currentUser);e&&e(s)}})}))},getPackage:function(e){if(this._packagesMap[e])return this._packagesMap[e];var t=new i(e,this._currentUser);return this._packagesMap[e]=t,t}}),e.exports=a},function(e,t){var n=function(e,t){this._attributes={id:e},this._categories=[],this._categoriesMap={},this._currentUser=t,this._isLoadInfoed=!1,this._isLoadCatesed=!1};$.extend(n.prototype,np.EventDispatcher.prototype,{fetchInfo:function(e,t){if(this._isLoadInfoed)e&&e(this.getAttr());else{var n=this;$.ajax({type:"GET",url:"/resourceAdmin/resourcepacks/"+this._attributes.id,dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))},success:function(t){n._isLoadInfoed=!0,n._attributes=t,e&&e(n.getAttr())},error:t})}},getAttr:function(){return $.extend({},this._attributes)},fetchCategories:function(e,t){if(this._isLoadCatesed)e&&e(this.getCategories());else{var n=this;$.ajax({type:"GET",url:"/resourceAdmin/resourcepacks/"+this._attributes.id+"/categories",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",n._currentUser.get("code"))},success:function(t){n._isLoadCatesed=!0,n._categories=[t],n.updateCateMap(n._categories),e&&e(n.getCategories())},error:t})}},updateCateMap:function(e){for(var t,n=0;t=e[n];n++)this._categoriesMap[t.id]=t,t.children&&t.children.length>0&&this.updateCateMap(t.children)},getCategoryByID:function(e){return this._categoriesMap[e]},getCategories:function(){return this._categories.slice(0)},getPathNameByCate:function(e,t){for(var n=this.getCategoryByID(e),i=[];n&&(i.push(n.name),n.parent_id);)n=this.getCategoryByID(n.parent_id);n?t&&t(i.reverse()):$.ajax({type:"GET",url:"/resourceAdmin/resourcepacks/"+this._attributes.id+"/categories/"+e+"/path",dataType:"json",contentType:"application/json",beforeSend:function(e){e.setRequestHeader("code",this._currentUser.get("code"))}.bind(this),success:function(e){var n=[];e.forEach((function(e){n.push(e.name)})),t&&t(n)}})}}),e.exports=n},function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=n(4).isForceEdit,r=n(1),l=n(45),c=n(11),d=n(49),u=n(50),h={share:"otherShareFileSave","read-only":"otherReadOnlyFileForbidSave",quality:"otherQualityFileForbidSave","own-only":"otherOwnonlyOnlyFileForbidSave",privated:"otherPrivatedFileForbidSave"},p=function(){function e(t,n,a){var s=this;i(this,e),this.parent=t,this.fileModel=n,this.language=a,this.$el=$('<div class="files" style="display:flex;"></div>'),this.$el.on("click","li",(function(e){$(e.currentTarget).hasClass("disabled")||s.parent[$(e.currentTarget).attr("name")]&&s.parent[$(e.currentTarget).attr("name")]()}))}return s(e,[{key:"update",value:function(e,t){if(this.$el.html(""),this.fileModel.isFromLocal()&&k(e.jurisdiction))return this.__update__(!1,!1,!1,!0);if(this.fileModel.isNewFile())return this.__update__(!0,!1,!1,!0);if(this.fileModel.isMyFile()||o())return this.__update__(!0,!0,!0,!0);if(t){var n=this.fileModel.editStatusIsTrue();this.__update__(n,"shared"==e.jurisdiction,n,!0)}else"shared"==e.jurisdiction?this.__update__(!1,!0,!1,!0):this.__update__(!1,!1,!1,!1)}},{key:"__update__",value:function(e,t,n,i){var a=this;this.$el.append(new d({label:'<span  class="npsvg-iconfont">&#xe724;</span>',text:this.language.file,data:[[{icon:'<span  class="npsvg-iconfont">&#xe686;</span>',label:this.language.newFile,callback:function(){a.parent.openNewFile()}},{icon:'<span  class="npsvg-iconfont">&#xe702;</span>',label:this.language.save,disable:!e,callback:function(){a.parent.save()}},{icon:'<span  class="npsvg-iconfont">&#xe606;</span>',label:this.language.saveAs,disable:!t,callback:function(){a.parent.saveAsNewFile()}},{icon:'<span  class="npsvg-iconfont">&#xe984;</span>',label:this.language.attr,disable:!n,callback:function(){a.parent.reName()}}],[{icon:'<span  class="npsvg-iconfont">&#xe652;</span>',label:this.language.open,child:[{icon:"",label:this.language.myFile,callback:function(){a.parent.fileList()}},{icon:"",label:this.language.localFile,callback:function(){a.parent.nativeFile()}}]},{icon:'<span  class="npsvg-iconfont">&#xe605;</span>',label:this.language.export,child:[{icon:"",label:this.language.sourceFile,disable:!i,callback:function(){a.parent.downloadFile()}},{icon:"",label:this.language.hdPicture,callback:function(){a.parent.downloadImg()}}]}]]}).el)}}]),e}(),g=function(){function e(t,n,a){i(this,e),this.parent=t,this.fileModel=n,this.language=a,this.$el=$('<div name="save" style="color: #fff;"></div>')}return s(e,[{key:"update",value:function(e,t){this.$el.html("").append(this.__getSaveEl__(e,t))}},{key:"__getSaveEl__",value:function(e,t){var n=this;return this.fileModel.isFromLocal()&&k(e.jurisdiction)?new c({label:'<span class="npsvg-iconfont" style="color:#6E6F71;">&#xe606;</span>',tip:'<div style="display:flex;width:210px">\n                        <div style="width:40px"><span class="npsvg-iconfont" style="font-size: 24px;color: #FAAD14;margin-right: 10px;">&#xe64b;</span></div>\n                        <div style="text-align:left;line-height: 24px;">'.concat(this.language.QualityOwnonlyForbidReSave,"</div>\n                        </div>"),backgroundColor:"#fff",color:"#000",disable:!0}).el:o()||this.fileModel.isNewFile()||this.fileModel.isMyFile()?new c({label:'<span class="npsvg-iconfont">&#xe702;</span>',tip:this.language.save,callback:function(){n.parent.save()}}).el:t?this.fileModel.editStatusIsTrue()?new c({label:'<span class="npsvg-iconfont">&#xe702;</span>',tip:'<div style="display:flex;width:200px;">\n                        <div style="width:40px"><span class="npsvg-iconfont" style="font-size: 24px;color: #05CFA4;margin-right: 10px;">&#xe632;</span></div>\n                        <div style="text-align:left;font-size:14px;line-height: 24px;">'.concat(this.language.editModeSave,"</div>\n                        </div>"),backgroundColor:"#fff",color:"#000",callback:function(){n.parent.save()}}).el:new c({label:'<span class="npsvg-iconfont" style="color:#6E6F71;">&#xe606;</span>',tip:'<div style="display:flex;width:210px">\n                            <div style="width:40px"><span class="npsvg-iconfont" style="font-size: 24px;color: #FAAD14;margin-right: 10px;">&#xe64b;</span></div>\n                            <div style="text-align:left;line-height: 24px;">'.concat(this.language.readForbidSave,"</div>\n                            </div>"),backgroundColor:"#fff",color:"#000",disable:!0}).el:"shared"==e.jurisdiction?new c({label:'<span class="npsvg-iconfont">&#xe606;</span>',tip:'<div style="display:flex;width:200px;">\n                    <div style="width:40px"><span class="npsvg-iconfont" style="font-size: 24px;color: #05CFA4;margin-right: 10px;">&#xe632;</span></div>\n                    <div style="text-align:left;font-size:14px;line-height: 24px;">'.concat(this.language.otherShareFileSave,"</div>\n                    </div>"),backgroundColor:"#fff",color:"#000",callback:function(){n.parent.saveAsNewFile()}}).el:new c({label:'<span class="npsvg-iconfont" style="color:#6E6F71;">&#xe606;</span>',tip:'<div style="display:flex;width:200px">\n                <div style="width:40px"><span class="npsvg-iconfont" style="font-size: 24px;color: #FAAD14;margin-right: 10px;">&#xe64b;</span></div>\n                <div style="text-align:left;line-height: 24px;">'.concat(this.language[h[e.jurisdiction]],"</div>\n                </div>"),backgroundColor:"#fff",color:"#000",disable:!0}).el}}]),e}(),f=function(){function e(t,n,a,s){i(this,e),this.parent=t,this.userModel=n,this.themeService=a,this.language=s,this.$el=$('<div class="settings" style="display:flex;"></div>')}return s(e,[{key:"update",value:function(){this.$el.empty().append(new d({label:'<span  class="npsvg-iconfont">&#xe672;</span>',text:this.language.setting,data:[this.list()]}).el)}},{key:"list",value:function(){var e=this,t=this.themeService.getDefaultTheme(),n=[{icon:t?"":'<span  class="npsvg-iconfont">&#xe23e;</span>',label:this.language.systemTheme,disable:!t,callback:function(){_.call(e,(function(){e.themeService.ungeneral()}))}}];return t&&n.push({icon:'<span  class="npsvg-iconfont">&#xe23e;</span>',label:t.getAttr().name,disable:!!t}),n.push({icon:"",label:this.language.moreTheme,callback:function(){if(!e.parent.__illegelUser__())return!1;new l(e.parent.dynamicMath,e.themeService,e.language)}}),n.push({icon:"",label:this.language.language,child:[{icon:"",label:this.language.zh_cn,callback:function(){e.parent.netpadSVG.switchLanguage("zh_cn")}},{icon:"",label:this.language.en,callback:function(){e.parent.netpadSVG.switchLanguage("en")}}]}),n}}]),e}(),v=function(){function e(t,n,a){i(this,e),this.parent=t,this.fileModel=n,this.language=a,this.$el=$('<div class="title" style="padding: 0 10px;font-size: 16px;line-height: 1;"></div>')}return s(e,[{key:"update",value:function(e,t){if(this.$el.html(""),!w(e)){var n=$('<div style="display:inline-flex;align-items: center;height: 34px;"></div>'),i=$("<div>"+(e.heading||this.language.unnamed)+"</div>");if(n.append(i),t){var a=$('<input style="width:200px;display:none;color:#000" value="'+e.heading+'"/>');n.append(a),i.on("click",(function(){a.val(e.heading),i.css("display","none"),a.css("display","block"),a.focus()}));var s=this;a.on("blur",(function(e){i.html(e.target.value),a.css("display","none"),i.css("display","block"),s.parent.__updateFileInfo__({heading:e.target.value})})),a.on("keydown",(function(e){13==e.keyCode&&(i.html(e.target.value),a.css("display","none"),i.css("display","block"),s.parent.__updateFileInfo__({heading:e.target.value}))}))}if(!this.fileModel.isMyFile()){var o=e.owner,r=$('<a style="color:#fff;cursor:pointer;text-decoration: none;" target="_blank" href="/zone_web/'.concat(o.source_from,"/#/").concat(o.source_id,'">(').concat(o.name,")</a>"));n.append(r)}this.$el.append(n)}}}]),e}(),m=function(){function e(t){i(this,e),this.language=t,this.el=document.createElement("span")}return s(e,[{key:"update",value:function(e){if(w(e))return this.el.innerHTML="",void(this.el.className="");this.el.innerHTML=this.language.jurisdiction[e.jurisdiction],this.el.className=r.jurisdiction+" "+r[e.jurisdiction]}}]),e}(),y=function(){function e(t,n){i(this,e),this.fileModel=t,this.language=n,this.el=document.createElement("span"),this.el.innerHTML=this.language.cooperate,this.el.className=r.cooperate}return s(e,[{key:"update",value:function(e,t){this.el.style.display=t&&this.fileModel.editStatusIsTrue()?"":"none"}}]),e}(),b=function(){function e(t,n,a,s){i(this,e),this.userModel=t,this.fileModel=n,this.sharedResourceService=a,this.language=s,this.el=document.createElement("span")}return s(e,[{key:"update",value:function(e){var t=this;this.el.innerHTML="",w(e)||!this.fileModel.isMyFile()&&!o()?this.el.appendChild(new c({label:'<span class="npsvg-iconfont" style="color:#6E6F71;">&#xe68f;</span>',tip:this.language.share,disable:!0}).el):this.el.appendChild(new c({label:'<span class="npsvg-iconfont">&#xe68f;</span>',tip:this.language.share,callback:function(){new u(t.userModel,t.sharedResourceService,t.language)}}).el)}}]),e}(),x=function(){function e(t){i(this,e),this.language=t,this.isFullscreen=!1,this.btn=new c({label:'<span class="npsvg-iconfont">&#xe62a;</span>',tip:this.language.fullScreen,callback:this.fullscreen.bind(this)}),this.el=this.btn.el}return s(e,[{key:"fullscreen",value:function(){if(this.isFullscreen)document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}},{key:"update",value:function(){this.isFullscreen=document.fullscreenElement,this.btn.update({label:'<span class="npsvg-iconfont">'+(this.isFullscreen?"&#xe79d;":"&#xe62a;")+"</span>",tip:this.language.fullScreen})}}]),e}();function _(e){layer.open({type:1,title:this.language.switchThemeTitle,area:["500"],content:'<div style="width: 500px;padding: 20px;text-align: center;"><div style="font-weight: bold;">'+this.language.switchThemeTitle+'</div><div style="margin: 16px 0;font-size: 13px;">'+this.language.switchThemeTip+"</div></div>",btn:[this.language.sure,this.language.cancel],btn1:function(){e&&e()}.bind(this),btn2:function(e){layer.close(e)}})}function w(e){return!e.id}function k(e){return"own-only"===e||"quality"===e}e.exports={FileUl:p,SaveSaveAsUl:g,SettingUl:f,TitleUl:v,JurisdictionUl:m,EditStatusUl:y,ShareUl:b,FullscreenUl:x}},function(e,t,n){var i=n(5),a=n(47),s=n(48),o=n(0).widthTitleName,r=function(e,t,n){this.dynamicMath=e,this.themeService=t,this.language=n,this.$el=$('<div style="width: 710px;height: 420px;display: flex;overflow: auto;flex-flow: wrap;align-content: flex-start;user-select: none;padding: 14px 12px 0;"></div>'),this.themeList=[],this.renderThemes(),this.dialog(),this.$el.on("click",".add-theme-btn",function(){new c(e,t,null,n)}.bind(this)),this.$el.on("click","."+i["del-theme"],function(e){e.stopPropagation(),layer.open({type:1,title:this.language.delTheme,area:["500"],content:'<div style="width: 500px;padding: 20px">'+this.language.delThemeWindow+"</div>",btn:[this.language.sure,this.language.cancel],btn1:function(){this.themeService.delTheme(e.target.parentNode.getAttribute("name"),(function(){e.target.parentNode.parentNode.removeChild(e.target.parentNode)}))}.bind(this),btn2:function(e){layer.close(e)}})}.bind(this)),this.$el.on("click","."+i["general-theme"],function(e){e.stopPropagation(),layer.open({type:1,title:this.language.switchTheme,area:["500"],content:'<div style="width: 500px;padding: 20px;text-align: center;"><div style="font-weight: bold;">'+this.language.switchThemeTitle+'</div><div style="margin: 16px 0;font-size: 13px;">'+this.language.switchThemeTip+"</div></div>",btn:[this.language.sure,this.language.cancel],btn1:function(){this.themeService.general(e.target.parentNode.getAttribute("name"))}.bind(this),btn2:function(e){layer.close(e)}})}.bind(this)),this.$el.on("click",".theme-name",function(n){for(var i,a=n.target.parentNode.parentNode.getAttribute("name"),s=0;i=this.themeList[s];s++)if(i.theme.getID()===a)return new c(e,t,i.theme,this.language)}.bind(this)),this.generalChange=this.general_change.bind(this),this.addTheme=this.add_theme.bind(this),this.themeService.addEventListener("general_change",this.generalChange),this.themeService.addEventListener("add_theme",this.addTheme)};r.prototype={dialog:function(){var e=this;this.form=o({title:this.language.myTheme+("3D"===this.dynamicMath.mode?"(3D)":"(2D)"),el:this.$el[0],modal:!0,close:function(){e.form.destroy(),e.themeService.removeEventListener("general_change",e.generalChange),e.themeService.removeEventListener("add_theme",e.addTheme)}})},renderThemes:function(){this.addThemeEL(),this.themeService.fetchThemes(function(e){this.$el.empty();for(var t,n=0;t=e[n];n++){var i=new l(this.dynamicMath,this.themeService,t,this.language);this.themeList.push(i),this.general_change(),this.$el.append(i.$el)}this.addThemeEL()}.bind(this))},general_change:function(){for(var e,t=this.themeService.getDefaultTheme(),n=0;e=this.themeList[n];n++)e.isActiveTheme(e.theme===t)},add_theme:function(e){var t=new l(this.dynamicMath,this.themeService,e.theme,this.language);this.themeList.push(t),this.$el.prepend(t.$el)},addThemeEL:function(e){this.$el.append('<div class="'+i["add-theme"]+'"><div style="margin-top:24px;"><span class="npsvg-iconfont add-theme-btn" style="cursor: pointer;font-size: 26px;cursor: pointer">&#xe644;</span></div><div>'+this.language.newFile+"</div></div>")}};var l=function(e,t,n,a){this.dynamicMath=e,this.themeService=t,this.theme=n,this.language=a,this.isActive=!1,this.$el=$('<div class="'+i["theme-box"]+'" name="'+n.getID()+'"></div>'),n.addEventListener("change",function(){this.render(),this.isActive&&this.renderActive(!0)}.bind(this)),this.render()};l.prototype={render:function(){var e=this.theme.getAttr();this.$el.html('<div class="'+i["theme-name"]+'"><span class="theme-name" style="cursor: pointer;">'+e.name+'</span></div><div class="'+i["general-theme"]+'">'+this.language.setAsDefault+'</div><span class="npsvg-iconfont '+i["del-theme"]+'">&#xe610;</span>')},isActiveTheme:function(e){this.isActive!==e&&(this.isActive=e,this.renderActive(e))},renderActive:function(e){if(e?this.$el.find("."+i["general-theme"]).addClass(i["not-allowed"]):this.$el.find("."+i["general-theme"]).removeClass(i["not-allowed"]),!e)return this.$el.find("."+i["active-theme"]).remove();0===this.$el.find("."+i["active-theme"]).length&&this.$el.append('<span class="npsvg-iconfont '+i["active-theme"]+'">&#xe620;</span>')}};var c=function(e,t,n,o){this.dynamicMath=e,this.themeService=t,this.theme=n,this.language=o,this.$el=$('<div style="position: relative;overflow: visible;width: 710px;height: 420px;padding: 0 12px"></div>'),this.$name=$('<span class="'+i["title-div"]+'">'+this.language.myTheme+"</span>"),this.$nameInput=$('<input maxlength="10" type="text" style="position:absolute;bottom: 103%;width: 140px;">'),this.$summary=$('<div class="'+i["summary-div"]+'">'+this.language.themeDescript+"</div>"),this.$summaryInput=$('<textarea maxlength="50" type="text" rows="3" style="position:absolute;top:-2px;left:40px;width:640px;"></textarea>'),n&&(this.$name.html(n.getAttr().name),this.$summary.html(n.getAttr().summary)),this.$el.append(this.$name).append($('<div style="display:flex;height: 30px;width:100%;align-content: flex-start;margin-top:10px;"><div style="display: inline-block;width:40px;white-space: nowrap;">'+this.language.descript+"：</div></div>").append(this.$summary)),this.themeService.getThemeConfig(this.theme?this.theme.getID():null,function(e){this.environment="3D"===this.dynamicMath.mode?new s(this,e,this.language):new a(this,e,this.language),this.$saveAsButton=$('<button class="'+i["theme-btn"]+'" style="margin-right:10px;">'+this.language.saveAs+"</button>"),this.$saveButton=$('<button class="'+i["theme-btn"]+'">'+this.language.save+"</button>"),this.$el.append(this.environment.$el).append($('<div style="text-align: right;margin-top: 6px;"></div>').append(this.$saveAsButton).append(this.$saveButton)),this.theme||this.$saveAsButton.detach(),this.addEvents()}.bind(this)),this.dialog()};c.prototype={addEvents:function(){this.$saveButton.on("click",this.save.bind(this)),this.$saveAsButton.on("click",this.saveAs.bind(this)),this.$name.on("click",function(){this.$el.append(this.$nameInput),this.$nameInput.val(this.$name.html()),this.$nameInput.focus()}.bind(this)),this.$nameInput.on("keyup",function(e){"Enter"===e.key&&this.$nameInput.blur()}.bind(this)),this.$nameInput.on("blur",function(){this.$nameInput.detach();var e=this.$nameInput.val()||this.language.myTheme;this.$name.html(e)}.bind(this)),this.$summary.on("click",function(){this.$el.append(this.$summaryInput),this.$summaryInput.val(this.$summary.html()),this.$summaryInput.focus()}.bind(this)),this.$summaryInput.on("keyup",function(e){"Enter"===e.key&&this.$summaryInput.blur()}.bind(this)),this.$summaryInput.on("blur",function(){this.$summaryInput.detach();var e=this.$summaryInput.val()||this.language.themeDescript;this.$summary.html(e)}.bind(this))},getValue:function(){return{name:this.$name.html(),content:JSON.stringify(this.environment.getValue()),summary:this.$summary.html()}},save:function(){if(this.environment.validate()){if(!this.theme)return this.saveAs();this.theme.update(this.getValue()),this.themeService.getDefaultTheme()===this.theme&&this.dynamicMath.netpadPreview.setEnvironmentConfig(this.environment.getValue()),this.form.destroy()}},saveAs:function(){this.environment.validate()&&(this.themeService.addTheme(this.getValue()),this.form.destroy())},dialog:function(){var e=this;this.form=o({title:"",el:this.$el[0],modal:!0,close:function(){e.form.destroy()}})},fire_change:function(){var e=this.environment.validate();this.$saveAsButton.prop("disabled",!e),this.$saveButton.prop("disabled",!e)}},e.exports=r},function(e,t,n){(t=n(3)(!1)).push([e.i,'.npNav__theme-btn--VSXJD {\n    width: 72px;\n    height: 24px;\n    border-radius: 4px;\n    color: #888;\n    border: 1px solid #888;\n    background: #fff;\n    cursor: pointer;\n}\n\n.npNav__theme-btn--VSXJD:hover {\n    color: #000;\n    border: 1px solid #000;\n}\n\n.npNav__title-div--2AZcI {\n    position: absolute;\n    bottom: 100%;\n    height: 36px;\n    cursor: pointer;\n    user-select: none;\n    font-size: 16px;\n    font-weight: bold;\n}\n\n.npNav__summary-div--16GDU {\n    display: inline-block;\n    width: 640px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    cursor: pointer;\n    user-select: none;\n}\n\n.npNav__theme-btn--VSXJD:disabled {\n    color: #aaa;\n    border: 1px solid #aaa;\n    cursor: not-allowed;\n}\n\n.npNav__add-theme--3SDjx {\n    position: relative;\n    background: rgba(255, 255, 255, 0.37);\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.50);\n    width: 200px;\n    height: 120px;\n    color: #A6ABB1;\n    font-size: 14px;\n    text-align: center;\n    margin: 0 18px 14px 0;\n}\n\n.npNav__theme-box--qQdzN {\n    position: relative;\n    background: rgba(0, 0, 0, 0.10);\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.50);\n    width: 200px;\n    height: 120px;\n    text-align: center;\n    font-size: 14px;\n    margin: 0 18px 14px 0;\n}\n\n.npNav__theme-name--3DaAE {\n    color: #000;\n    margin: 28px auto 12px;\n    font-weight: bold;\n    width: 180px;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    height: 40px;\n    line-height: 20px;\n}\n\n.npNav__general-theme--3lmk3 {\n    margin: auto;\n    background: #000;\n    cursor: pointer;\n    color: #fff;\n    width: 104px;\n    height: 23px;\n    line-height: 23px;\n    word-spacing: 20px;\n}\n\n.npNav__not-allowed--2JeFV {\n    background: #aaa;\n    cursor: not-allowed;\n    pointer-events: none;\n}\n\n.npNav__del-theme--2nQe6 {\n    position: absolute;\n    right: 2px;\n    top: 2px;\n    color: #6D7278;\n    font-size: 18px;\n    cursor: pointer;\n}\n\n.npNav__active-theme--aHtWg {\n    position: absolute;\n    left: 0;\n    top: -4px;\n    color: #f00;\n    font-size: 30px;\n}\n\n.npNav__check-input--3-923 {\n    display: none;\n}\n\n.npNav__check-input--3-923+label {\n    width: 18px;\n    height: 18px;\n    cursor: pointer;\n    background: #fff;\n    display: inline-block;\n    margin: 0;\n}\n\n.npNav__check-input--3-923+label::before {\n    content: "\\2714";\n    display: block;\n    width: 18px;\n    height: 18px;\n    border: 1px solid #000;\n    text-align: center;\n    color: #fff;\n    font-size: 12px;\n    border-radius: 3px;\n}\n\n.npNav__check-input--3-923:checked+label::before {\n    color: #000;\n}\n\n.npNav__number-input--1vq-W {\n    width: 104px;\n    height: 23px;\n}\n\n.npNav__line-label-div--3r5gZ {\n    width: 80px;\n    height: 23px;\n    text-align: center;\n    cursor: pointer;\n}\n\n.npNav__line-label-div--3r5gZ>div {\n    pointer-events: none;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAAeCAYAAAAFOQOpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAGYktHRAD/AP8A/6C9p5MAAAKBSURBVHhe7dzPjjFBFAXwQoKIheew8hyewErwDhIrC0sPgUewtLaytPIcIoLEn++bW6nOSE81t1vVuKPOL6lMu61nTjo5o3ti5P59UQDw0fLmKwB8MBQdIAAoOkAAUHSAAKDoAAFA0QECgKIDBABFBwgAig4QgKCKvlwuVb/fV5vNxkwAwuCs6Llczmwl4zzHp+v1qjNMJhM1HA5FF77T6ah2u20eyWHLJSErN9dvZ30ll8uszopOb5l/VGTa9+631VOGfD6vqtWqfiy58LVaTS9pbLkkZOXmss184mbgzrJyeumeVHYJJY/7K4UHcMH5PXq87JJKXiqVzNY3qYUvl8t6SWPLJSErN5dt5hM3A3eW1dN/U+12u6kvHxqNhr6/ILPZTK3Xa73Ntd1u1XQ6NY8eS5OPTlqxWLRedURut5s6Ho/qcrmYyU++8kUo52Kx0FmazaY6nU5mD4/P8xfPlSWr63zcXNysrvK9kutR1jT5Ik9f0ekHZVkR2z7O4rId+2gllZz2HQ4Htdvt1Pl8/nFcfHHZjuUuymqbcxaX7dhny5YrbVYu27FJi5uLk5XLdmx8vZIrKWtaXj54gsJF3/Z++91Wq5Waz+f6t2WEThoVvFKpqFarper1utnzXoPBQGcbj8dmIoMtl4Ss3Fy/nfWVXC6zOr9Hjxebtmkmwf3lD53A/X6vt3u9nhqNRmJKTijrfV4pbLkkZOXmss184mbgzrJyWvSkV28pZacc0gsO4IOzoj+7RJdQ9kKhoHP8hYLTH1xoSWPLJSErN5dt5hM3A3eWFT4cEiAAzu/RAUAeFB0gACg6QABQdIAAoOgAAUDRAQKAogMEAEUH+HhK/QdhVL7UG6X4PwAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    background-position-y: -5px;\n    width: 40px;\n    height: 100%;\n    margin: auto;\n}\n\n.npNav__angle-label-div--16tHV {\n    width: 80px;\n    height: 23px;\n    text-align: center;\n    cursor: pointer;\n}\n\n.npNav__angle-label-div--16tHV>div {\n    pointer-events: none;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAAAZCAYAAAAmGVxfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAGYktHRAD/AP8A/6C9p5MAAAjdSURBVGhD7Zp5VFTnGcafmWFVGFQWFWUNAQR10FhjokY054h1rZpg3BUjEa1N3dCWWE9yojFtNJqYRCvu67FUcYNjjWioYkBRYUBAZZNNUfZlgFnefndJ6hbAEIb7x/w4w/3uc+/c+873Pe+33BkZMWDChBGQi1sTJtqdDjNbZSWwaBEg5X71zBlg61ZxR6KsWgXcvy/uSJDkZCFGjg4xG9eAM2cC8+YBMpkoSoiSEiG+uDhgwQJRlBjR0UBgIDB0KODqKooSQqsFli8HNm8Gli0TRW7OZizi44nefpto1y5RkCDr1xNNmECUkSEKEiMzk2jiRKJPPxUFCcK176hRRHFxoiBiFLM9fEgUEkK0dCmRRiOKEuP0aSERjhwRBYlhMBCFhxMFBxMVFIiixEhOJgoKItq6VRSeod3NtnEj0bhxRLduiYLEyMsjmjKFaO1aUZAghw4JPUVsrChIjMpKorAwooULicrKRPEFtJvZYmIElx84IAoShDMYZ7TcXFGQGFyCconKJaxU+eY7oZ2vXBGFZvjNzcZ18dOmEa1aRaTXi6LE4IZKbsjkhk4pomkUphzz5wtTECkSn8AStf8d2raxRlRa5jd9qLthA5CYCHz+OeDrK4oSIisLCA8HBg8GIiJEUWLs3a3DiYMarPjEFm8NE0UJUV4J/G1xOSzcu2HWwHQ03ivCG2tGi0dbgLdcGzlxgmjECKLjx0VBYjRpiVZHEM2YSVRcLIoSI+kmW2VOJdq8vJC+//CYqEqLbdvZsM5i3Dctiqpvsckup43ZRo1VrCtuBW0y2930Jpr6rsQn1wf1NCbIQF8MkObzlkdFWgpbRjTLP5FSj6Tx2r7Z++jx7cd8WQrEntZS0ESidb77+f260iraPV6oz/iTl+nqpqt8uSV+ldlqq4k+HnaBQqy2U7ZgcMlx9V+ltMB2D308LpHf/88nZyj7XDZflgrbQ5JpLrZR3Dkdv79zNOs6GBm3MilmBVthdTA5N+tpqcsx+pOXMGSlRV+jK5su8+U9i/fSY/VjqqFa+nbkt7zWEi/9DcKRNZkIc9iBHqFVGLtDiaZ4tXhEGlSVElb7x+Lo309gapoL3M1u8fqAsNeREJnAlzuai7uLMFu+G/WedzD5Yi9YJv3A606BPZF3Lg++Kh9kXmMTzA5Cz2bxm8YnYMPYvRhxxg6DRpeh5l4F/CcNQvLpG/w5fd/1h/p4KmzQGXKVAsx4vN4crTbb9ZNlCFUexr2yRLxf1xeq2T3hGOyCqwevi2d0PJGhKfjQawf6fNyIWUkqdHW1gdkEW6h3q+Hg4IAqqkZTRaN4tvEpuduEZR6nEXMwBnMeemJohDu6M4OlXBaM1W9af6hjhOR1+L0j8s/n82VjcvKzHMy32AmLwAKEFg9Ar/5K2M3pgcQdyfxxh2EOKL1WCv9Af6RdTOc110AXFCQU8OXmaNFsNeXA2kHnseevUZh43QljdvpCrgWa6vQwszID+cpa5er25NK+Esw134typRofVKvg8053aOp00Gp06DGpJ1JPpfLneY17BbkX8viysflyciI+ejMSQyJleC9OBWulORpZHerJALtJXXDn33fg4emOe+ps/nzvIa/ifrLxzHY3sRahdseQnPID5j3yweCVbmhg8WnZy+F1e2TfFOLyG+uP2+fSYc3+zLzMoSnUwPsNb+Rez+WPN0ezZjvw53Qscf4OHitqMT89AF09OrEAdGD1w0Osv7UdaYvipGJBMDIPc7UI9zmLU7vOYnqOKwK/8IKu3gBdnRgg21g5WKPeWgPSENwHeKAg1bg/kYjdch9zzCIhH5yH0EcD4TrSHvV1WpBOOE5NhC7DuiI/STCWw2uOqMyqgLvKHUUZ7V+v2iZg/ah4/CN4P8ZeUmLiUT9YWCn4zuQnCDJYv9kJ5Snl8PydB/JvCnXoHOCMkpQSeDh54sHdEl5rjhea7ceoR5hvuR8Fhhv4oEEFv+k9+J7CwCrmSUjHzNZHicLUQlExHl/PSMaagEgEfGXArPj+sHWy4nsKVjNPwZZAsPSxQKm6FF4qL+SrjRNr9vU6hDlG4fKl85hX5o0hf3FDU70eOo2YCCJ8wvrZojBFiMu9rytKMx+he1cn1oAPeK29OLo6CyG2O9AtuBTv5w+EUz8l3870f58JsBgtfC1QdKMQtma2qKmv5WW3Pm54mF3KTCSDzEkBanj6sz3LU2YrK9Ljo4BYRG06gRnZvTD2K28otKy5Gg0wM8PzLwWhs7M56suEmxuD+L1FCLGMBPXJwpKqAHgHOaCxUcs+CL0wRnOmW/lYor6oEgp2lq6iXrxS+8BV99bJCdj0zn4Ene2M4Oi+6GyjgKGRTTsUz8fHaVYK1lCdhRbu/aoj6h9X8eVuzkr2/9mWbzvq85VYYn8IOZU/YrHGH4MX9WIdiR4yZqrn4uNjZAnR2xqN1ULdOXbvwm+727MFYpXQ9r16O0JXW8eXf4mfv0E4vC4D0RvPwWVdT/QLcYamVAs9M1pLyJQKVIy5Cb+vl0FbI4rNoGPDh0rFVjN9ReElmGNzGDK/CvTb7IUuzqwnq2RZ2EKIMks5amMLYZ/lB/vpryF94T/htyUU2gZ28Bfe28COcb9n4yr6ZfjvsQf4ctpR9PxjNwwId4Oumg3pLWQ7h5yrw7lqeC9dirrMfFRn5MB10UhkLT8I95Xvsc/A5sZPXMbAyvb2wOhWPrh/kpWDvkdJWRq8NrwCt6FKNJTp2fWar0SZQgbt/WoYtgCeEX9AzsZoOE14C3KWKcVRF+AVMQXZnzFt/HBYutjzUwTu92zDh7Pez028CONns6UlVON2kRIW5swQL5n8cmb01hiNoy1mO/RNFWw87aBn9zKIc57WILNk57MexMAWomwUYBnIxGbq99eaLTtTi6REOTp1U/D3aCkRnkTOOjGdhmtY9mL31bOymQ3bsrZ40mgcbTHbqQNV0He1A1hd6F9iYc7FxNYEvDfMOrH3srkeh8Liae2nuWizZjNhor1p9XM2EybaislsJoyGyWwmjATwP+7qglz/htrtAAAAAElFTkSuQmCC);\n    background-repeat: no-repeat;\n    background-position-y: -2px;\n    width: 40px;\n    height: 100%;\n    margin: auto;\n}\n\n.npNav__menu-list--CsZBN {\n    position: absolute;\n    z-index: 10000;\n    background: #fff;\n    list-style: none;\n    width: 100%;\n    border: 1px solid #ddd;\n    padding: 0;\n    display: none;\n}\n\n.npNav__theme-setting--3GdXF {\n    font-size: 14px;\n    color: #000;\n    user-select: none;\n    height: calc(100% - 70px);\n    display: flex;\n    border: 1px solid #ccc;\n}\n\n.npNav__theme-setting--3GdXF hr {\n    margin: 10px 14px;\n    border-top: 1px solid #ddd;\n}\n\n.npNav__setting-box--2g6Gq {}\n\n.npNav__setting-element--1l2qx {\n    color: #000;\n    margin-left: 14px;\n    line-height: 28px;\n    font-weight: bold;\n}\n\n.npNav__setting-row--3oXdv {\n    display: flex;\n    margin: 6px 0;\n    align-items: center;\n}\n\n.npNav__setting-title--21Wk2 {\n    text-align: right;\n    width: 150px;\n    margin-right: 8px;\n}\n\n.npNav__setting-content--VdGjx {}\n\n.npNav__elements-list--3A7k- {\n    width: 220px;\n    height: 100%;\n    overflow: auto;\n}\n\n.npNav__element-list-single--3He7T {\n    line-height: 24px;\n    padding: 0 10px;\n    cursor: pointer;\n}\n\n.npNav__element-list-single--3He7T:hover {\n    background: #E5E5E5;\n}\n\n.npNav__element-list-active--2EOEQ {\n    background: #E5E5E5;\n}\n\n.npNav__element-config--3IxJ0 {\n    width: 400px;\n    flex: 1;\n    height: 100%;\n    border-left: 1px solid #ccc;\n    overflow: auto;\n    padding-top: 10px;\n}\n\n.npNav__edit-font--15X1r {\n    width: 90%;\n    height: 22px;\n    fill: currentColor;\n    overflow: hidden;\n}',""]),t.locals={"theme-btn":"npNav__theme-btn--VSXJD","title-div":"npNav__title-div--2AZcI","summary-div":"npNav__summary-div--16GDU","add-theme":"npNav__add-theme--3SDjx","theme-box":"npNav__theme-box--qQdzN","theme-name":"npNav__theme-name--3DaAE","general-theme":"npNav__general-theme--3lmk3","not-allowed":"npNav__not-allowed--2JeFV","del-theme":"npNav__del-theme--2nQe6","active-theme":"npNav__active-theme--aHtWg","check-input":"npNav__check-input--3-923","number-input":"npNav__number-input--1vq-W","line-label-div":"npNav__line-label-div--3r5gZ","angle-label-div":"npNav__angle-label-div--16tHV","menu-list":"npNav__menu-list--CsZBN","theme-setting":"npNav__theme-setting--3GdXF","setting-box":"npNav__setting-box--2g6Gq","setting-element":"npNav__setting-element--1l2qx","setting-row":"npNav__setting-row--3oXdv","setting-title":"npNav__setting-title--21Wk2","setting-content":"npNav__setting-content--VdGjx","elements-list":"npNav__elements-list--3A7k-","element-list-single":"npNav__element-list-single--3He7T","element-list-active":"npNav__element-list-active--2EOEQ","element-config":"npNav__element-config--3IxJ0","edit-font":"npNav__edit-font--15X1r"},e.exports=t},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=n(5),g=n(13),f=g.EnvironmentConfig,v=g.CompBase,m=g.CheckBox,y=g.Stroke,b=g.Fill,x=g.Font,_=g.Arrow,w=g.Calculation,k=g.CustomFunction,S=g.Animation,C=g.Action,A=g.Variable,P=g.DynamicText,T=g.Label,N=NetpadEditor.components.NumberInput,E=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.pointSize+'</div><div class="'+p["setting-content"]+'"><div name="size" class="'+p["number-input"]+'"></div></div></div></div>'),o.size=new N(u(o),{allowNagetive:!1}),o.size.setValue(i.size),o.stroke=new y(u(o),i.stroke,o.language),o.fill=new b(u(o),i.fill,o.language),o.size.addEventListener("blur",o.fire_change.bind(u(o))),o.$el.find("div[name=size]").append(o.size.el),o.$el.append(o.stroke.$el),o.$el.append(o.fill.$el),o}return o(n,[{key:"getValue",value:function(){return{size:this.size.getValue(),stroke:this.stroke.getValue(),fill:this.fill.getValue()}}},{key:"validate",value:function(){return this.size.validate()&&this.stroke.validate()}}]),n}(v),R={0:"无",1:'<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1122"></use></svg>',2:'<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1121"></use></svg>',3:'<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1120"></use></svg>',4:'<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1124"></use></svg>',5:'<svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1123"></use></svg>',6:'<span style="transform: scale(-1,1);display: inline-block;"><svg class="'+p["edit-font"]+'" aria-hidden="true"><use xlink:href="#netpad-1121"></use></svg></span>'},L=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.fillColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height:20px;"></div></div></div><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.fillTexture+'</div><div name="fill" class="'+p["setting-content"]+'" style="position: relative"><div name="texture" class="'+p["number-input"]+'" style="border: 1px solid #d3d3d3;text-align: center;cursor: pointer;">'+o.language.none+"</div></div></div></div>"),o.colorPick=new npColorPick({color:i}),o.$el.find("div[name=color]").append(o.colorPick.$el),o.texture=i.texture,o.$textureList=$('<ul class="'+p["menu-list"]+'"></ul>').append(o.addLi(0)).append(o.addLi(1)).append(o.addLi(2)).append(o.addLi(6)).append(o.addLi(3)).append(o.addLi(4)).append(o.addLi(5)),o.$el.find("div[name=fill]").append(o.$textureList),o.$el.find("div[name=texture]").on("click",function(){"block"===this.$textureList[0].style.display?this.$textureList.hide():this.$textureList.show()}.bind(u(o))),o.$textureList.on("click","li",function(e){var t=e.currentTarget.getAttribute("name");this.texture=t,this.$el.find("div[name=texture]")[0].innerHTML=R[t],this.$textureList.hide(),e.stopPropagation()}.bind(u(o))),o.$textureList.on("mouseleave",function(){this.$textureList.hide()}.bind(u(o))),o.$el.find("div[name=texture]")[0].innerHTML=R[i.texture],o}return o(n,[{key:"addLi",value:function(e){return $('<li style="cursor: pointer;text-align:center" name="'+e+'">'+R[e]+"</li>")}},{key:"getValue",value:function(){var e=this.colorPick.getColor();return{texture:this.texture,color:e.color,opacity:e.opacity}}}]),n}(v),M={"-1":-3,0:-44,1:-84,2:-124,3:-164,4:-204},F={1:0,2:-40,3:-80,4:-120},D={Global:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.globalSetting),o.check=new m(u(o),i.AutoNamePoint,o.language.AutoNamePoint),o.$el.append(o.check.$el),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.digitalPrecision+'</div><div class="'+p["setting-content"]+'"><select style="width:104px;height: 23px;border: 1px solid #D3D3D3;"><option value="0">0</option><option value="1">0.0</option><option value="2">0.00</option><option value="3">0.000</option><option value="4">0.0000</option><option value="5">0.00000</option><option value="6">0.000000</option></select></div></div>'),o.addDivider(),o.addTitle(o.language.scene),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.paperColor+'</div><div class="'+p["setting-content"]+'"><div  name="color" style="height:20px;"></div></div></div>'),o.colorPick=new npColorPick({color:{color:i.Paper.backgroundColor,opacity:i.Paper.backgroundOpacity}}),o.$el.find("div[name=color]").append(o.colorPick.$el),o.$el.find("select").val(i.VarisAccuracy),o}return o(n,[{key:"getValue",value:function(){var e=this.colorPick.getColor();return{AutoNamePoint:this.check.getValue(),VarisAccuracy:this.$el.find("select").val(),Paper:{backgroundColor:e.color,backgroundOpacity:e.opacity}}}}]),n}(v),GlobalGrid:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.axisOfCoor),o.stroke=new y(u(o),i.GlobalAxis.AxisLine.stroke,o.language),o.$el.append(o.stroke.$el),o.font=new x(u(o),i.GlobalAxis.AxisLine.font,o.language),o.$el.append(o.font.$el),o.addDivider(),o.addTitle(o.language.grid),o.gridStroke=new y(u(o),i.GlobalAxis.Grid.stroke,o.language),o.$el.append(o.gridStroke.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()&&this.gridStroke.validate()}},{key:"getValue",value:function(){return{GlobalAxis:{AxisLine:{stroke:this.stroke.getValue(),font:this.font.getValue()},Grid:{stroke:this.gridStroke.getValue()}}}}}]),n}(v),CustomizedAxis:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.axisOfCoor),o.stroke=new y(u(o),i.CustomizedAxis.AxisLine.stroke,o.language),o.$el.append(o.stroke.$el),o.font=new x(u(o),i.CustomizedAxis.AxisLine.font,o.language),o.$el.append(o.font.$el),o.addDivider(),o.addTitle(o.language.axisControlPoint),o.controlPoint=new E(u(o),i.CustomizedAxis.ControlPoint,o.language),o.$el.append(o.controlPoint.$el),o.addDivider(),o.addTitle(o.language.unitControlPoint),o.unitPoint=new E(u(o),i.CustomizedAxis.UnitPoint,o.language),o.$el.append(o.unitPoint.$el),o.addDivider(),o.addTitle(o.language.grid),o.gridStroke=new y(u(o),i.CustomizedAxis.Grid.stroke,o.language),o.$el.append(o.gridStroke.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.font.validate()&&this.controlPoint.validate()&&this.unitPoint.validate()&&this.gridStroke.validate()}},{key:"getValue",value:function(){return{CustomizedAxis:{AxisLine:{stroke:this.stroke.getValue(),font:this.font.getValue()},ControlPoint:this.controlPoint.getValue(),UnitPoint:this.unitPoint.getValue(),Grid:{stroke:this.gridStroke.getValue()}}}}}]),n}(v),Point:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.fPoint),o.freePoint=new E(u(o),i.FreePoint,o.language),o.$el.append(o.freePoint.$el),o.addDivider(),o.addTitle(o.language.hfPoint),o.hfPoint=new E(u(o),i.HalfPoint,o.language),o.$el.append(o.hfPoint.$el),o.addDivider(),o.addTitle(o.language.cPoint),o.constraintPoint=new E(u(o),i.ConstraintPoint,o.language),o.$el.append(o.constraintPoint.$el),o}return o(n,[{key:"validate",value:function(){return this.freePoint.validate()&&this.hfPoint.validate()&&this.constraintPoint.validate()}},{key:"getValue",value:function(){return{FreePoint:this.freePoint.getValue(),HalfPoint:this.hfPoint.getValue(),ConstraintPoint:this.constraintPoint.getValue()}}}]),n}(v),Line:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.segment+"/"+o.language.straight+"/"+o.language.radial),o.stroke=new y(u(o),i.Line.stroke,o.language),o.$el.append(o.stroke.$el),o.arrow=new _(u(o),i.Line.arrow,o.language),o.$el.append(o.arrow.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Line:{stroke:this.stroke.getValue(),arrow:this.arrow.getValue()}}}}]),n}(v),Circle:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.circle),o.stroke=new y(u(o),i.Circle.stroke,o.language),o.$el.append(o.stroke.$el),o.fill=new L(u(o),i.Circle.fill,o.language),o.$el.append(o.fill.$el),o.addDivider(),o.addTitle(o.language.arc),o.arcStroke=new y(u(o),i.Arc.stroke,o.language),o.$el.append(o.arcStroke.$el),o.arcFill=new L(u(o),i.Arc.fill,o.language),o.$el.append(o.arcFill.$el),o.arrow=new _(u(o),i.Arc.arrow,o.language),o.$el.append(o.arrow.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.arcStroke.validate()}},{key:"getValue",value:function(){return{Circle:{stroke:this.stroke.getValue(),fill:this.fill.getValue()},Arc:{stroke:this.arcStroke.getValue(),fill:this.arcFill.getValue(),arrow:this.arrow.getValue()}}}}]),n}(v),Polygon:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.polygon+"/"+o.language.ruledSurface),o.stroke=new y(u(o),i.Polygon.stroke,o.language),o.$el.append(o.stroke.$el),o.fill=new L(u(o),i.Polygon.fill,o.language),o.$el.append(o.fill.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Polygon:{stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}}]),n}(v),Conic:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.conic),o.stroke=new y(u(o),i.Conic.stroke,o.language),o.$el.append(o.stroke.$el),o.fill=new L(u(o),i.Conic.fill,o.language),o.$el.append(o.fill.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Conic:{stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}}]),n}(v),Curve:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.curvesPath+"/"+o.language.path+"/"+o.language.locusPath),o.stroke=new y(u(o),i.Curve.stroke,o.language),o.$el.append(o.stroke.$el),o.fill=new L(u(o),i.Curve.fill,o.language),o.$el.append(o.fill.$el),o.arrow=new _(u(o),i.Curve.arrow,o.language),o.$el.append(o.arrow.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Curve:{stroke:this.stroke.getValue(),fill:this.fill.getValue(),arrow:this.arrow.getValue()}}}}]),n}(v),Marker:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).lineLabel=i.LineMarker.labelStyle,o.angleLabel=i.AngleMarker.labelStyle,o.$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.lineLabel),o.lineStroke=new y(u(o),i.LineMarker.stroke,o.language),o.$el.append(o.lineStroke.$el),o.addLineStyles(),o.addDivider(),o.addTitle(o.language.angleLabel),o.angleStroke=new y(u(o),i.AngleMarker.stroke,o.language),o.$el.append(o.angleStroke.$el),o.angleFill=new b(u(o),i.AngleMarker.fill,o.language),o.$el.append(o.angleFill.$el),o.addAngleStyles(),o.addDivider(),o.addTitle(o.language["2PointLabel"]),o.pointsStroke=new y(u(o),i.PointsMarker.stroke,o.language),o.$el.append(o.pointsStroke.$el),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.type+'</div><div class="'+p["setting-content"]+'"><select name="lengthLabel" style="width:80px;height: 23px;border: 1px solid #D3D3D3;"><option value="0">'+o.language.arrow+'</option><option value="1">'+o.language.braces+"</option></select></div></div>"),o.$el.find("select[name=lengthLabel]").val(i.PointsMarker.lengthStyle),o}return o(n,[{key:"addLineStyles",value:function(){this.$lineStyle=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+this.language.type+'</div><div class="'+p["setting-content"]+'"><div name="style" class="'+p["line-label-div"]+'" style="position: relative;border: 1px solid #D3D3D3"><div name="lineLabel" style="background-position-x: '+M[this.lineLabel]+'px"></div></div></div></div>'),this.$lineStyleList=$('<ul class="'+p["menu-list"]+'">'+this.LineStyleLi(-1)+this.LineStyleLi(0)+this.LineStyleLi(1)+this.LineStyleLi(2)+this.LineStyleLi(3)+this.LineStyleLi(4)+"</ul>"),this.$lineStyle.find("div[name=style]").on("click",function(){"block"===this.$lineStyleList[0].style.display?this.$lineStyleList.hide():this.$lineStyleList.show()}.bind(this)),this.$lineStyleList.on("click","li",function(e){var t=e.target.getAttribute("name");this.lineLabel=t,this.$lineStyle.find("div[name=lineLabel]").css("background-position-x",M[this.lineLabel]+"px"),this.$lineStyleList.hide(),e.stopPropagation()}.bind(this)),this.$lineStyleList.on("mouseleave",function(){this.$lineStyleList.hide()}.bind(this)),this.$el.append(this.$lineStyle),this.$lineStyle.find("div[name=style]").append(this.$lineStyleList)}},{key:"addAngleStyles",value:function(){this.$angleLabel=$('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+this.language.type+'</div><div class="'+p["setting-content"]+'"><div name="style" class="'+p["angle-label-div"]+'" style="position: relative;border: 1px solid #D3D3D3"><div name="labelStyle" style="background-position-x: '+F[this.angleLabel]+'px"></div></div></div></div>'),this.$angleLabelList=$('<ul class="'+p["menu-list"]+'" style="display: none">'+this.AngleStyleLi(1)+this.AngleStyleLi(2)+this.AngleStyleLi(3)+this.AngleStyleLi(4)+"</ul>"),this.$angleLabel.find("div[name=style]").on("click",function(){"none"===this.$angleLabelList[0].style.display?this.$angleLabelList.show():this.$angleLabelList.hide()}.bind(this)),this.$angleLabelList.on("click","li",function(e){var t=e.target.getAttribute("name");this.angleLabel=t,this.$angleLabel.find("div[name=labelStyle]").css("background-position-x",F[this.angleLabel]+"px"),this.$angleLabelList.hide(),e.stopPropagation()}.bind(this)),this.$angleLabelList.on("mouseleave",function(){this.$angleLabelList.hide()}.bind(this)),this.$el.append(this.$angleLabel),this.$angleLabel.find("div[name=style]").append(this.$angleLabelList)}},{key:"LineStyleLi",value:function(e){return'<li name="'+e+'" class="'+p["line-label-div"]+'"><div style="background-position-x: '+M[e]+'px"></div></li>'}},{key:"AngleStyleLi",value:function(e){return'<li name="'+e+'" class="'+p["angle-label-div"]+'"><div style="background-position-x: '+F[e]+'px"></div></li>'}},{key:"validate",value:function(){return this.lineStroke.validate()&&this.angleStroke.validate()&&this.pointsStroke.validate()}},{key:"getValue",value:function(){return{LineMarker:{labelStyle:this.lineLabel,stroke:this.lineStroke.getValue()},AngleMarker:{labelStyle:this.angleLabel,stroke:this.angleStroke.getValue(),fill:this.angleFill.getValue()},PointsMarker:{lengthStyle:this.$el.find("select[name=lengthLabel]").val(),stroke:this.pointsStroke.getValue()}}}}]),n}(v),Calculation:w,CustomFunction:k,Animation:S,Action:C,Variable:A,DynamicText:P,Label:T};e.exports=function(e){r(n,e);var t=c(n);function n(e,i,s){return a(this,n),t.call(this,e,i,s)}return o(n,[{key:"ElementListConfig",get:function(){return D}},{key:"renderElementList",value:function(){var e=this.$elementList,t=p["element-list-single"];e.append('<div name="Global" class="'+t+" "+p["element-list-active"]+'">'+this.language.globalSetting+"</div>"),e.append('<div name="GlobalGrid" class="'+t+'">'+this.language.globalAxis+"</div>"),e.append('<div name="CustomizedAxis" class="'+t+'">'+this.language.UscAxis+"</div>"),e.append('<div name="Point" class="'+t+'">'+this.language.point+"</div>"),e.append('<div name="Line" class="'+t+'">'+this.language.segment+"/"+this.language.straight+"/"+this.language.radial+"</div>"),e.append('<div name="Circle" class="'+t+'">'+this.language.circle+"/"+this.language.circularArc+"</div>"),e.append('<div name="Polygon" class="'+t+'">'+this.language.polygon+"/"+this.language.ruledSurface+"</div>"),e.append('<div name="Conic" class="'+t+'">'+this.language.conic+"</div>"),e.append('<div name="Curve" class="'+t+'">'+this.language.curvesPath+"/"+this.language.path+"/"+this.language.locusPath+"</div>"),e.append('<div name="Marker" class="'+t+'">'+this.language.lengthStyle+"</div>"),e.append('<div name="Calculation" class="'+t+'">'+this.language.measure+"/"+this.language.calculate+"</div>"),e.append('<div name="CustomFunction" class="'+t+'">'+this.language.UscFun+"</div>"),e.append('<div name="Animation" class="'+t+'">'+this.language.animation+"</div>"),e.append('<div name="Action" class="'+t+'">'+this.language.actionBtn+"</div>"),e.append('<div name="Variable" class="'+t+'">'+this.language.var+"</div>"),e.append('<div name="DynamicText" class="'+t+'">'+this.language.fontStyle+"</div>"),e.append('<div name="Label" class="'+t+'">'+this.language.label+"</div>")}}]),n}(f)},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=n(5),g=n(13),f=g.EnvironmentConfig,v=g.CompBase,m=g.CheckBox,y=g.Stroke,b=g.Fill,x=g.Arrow,_=g.Calculation,w=g.CustomFunction,k=g.Animation,S=g.Action,C=g.Variable,A=g.DynamicText,P=g.Label,T=NetpadEditor.components.NumberInput,N=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"><div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.pointSize+'</div><div class="'+p["setting-content"]+'"><div name="size" class="'+p["number-input"]+'"></div></div></div></div>'),o.size=new T(u(o),{allowNagetive:!1}),o.size.setValue(i.size),o.fill=new b(u(o),i.fill,o.language),o.size.addEventListener("blur",o.fire_change.bind(u(o))),o.$el.find("div[name=size]").append(o.size.el),o.$el.append(o.fill.$el),o}return o(n,[{key:"getValue",value:function(){return{size:this.size.getValue(),fill:this.fill.getValue()}}},{key:"validate",value:function(){return this.size.validate()}}]),n}(v),E=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.stroke=new y(u(o),i.stroke,o.language),o.blocking=new m(u(o),i.blocking,o.language.blocking),o.arrow=new x(u(o),i.arrow,o.language),o.$el.append(o.stroke.$el),o.$el.append(o.blocking.$el),o.$el.append(o.arrow.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{blocking:this.blocking.getValue(),stroke:this.stroke.getValue(),arrow:this.arrow.getValue()}}}]),n}(v),R=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.stroke=new y(u(o),i.stroke,o.language),o.fill=new b(u(o),i.fill,o.language),o.blocking=new m(u(o),i.blocking,o.language.blocking),o.$el.append(o.stroke.$el),o.$el.append(o.fill.$el),o.$el.append(o.blocking.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{blocking:this.blocking.getValue(),stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}]),n}(v),L=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.globalSetting),o.check=new m(u(o),i.AutoNamePoint,o.language.AutoNamePoint),o.$el.append(o.check.$el),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.digitalPrecision+'</div><div class="'+p["setting-content"]+'"><select style="width:104px;height: 23px;border: 1px solid #D3D3D3;"><option value="0">0</option><option value="1">0.0</option><option value="2">0.00</option><option value="3">0.000</option><option value="4">0.0000</option><option value="5">0.00000</option><option value="6">0.000000</option></select></div></div>'),o.addDivider(),o.addTitle(o.language.scene),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.sceneColor+'</div><div class="'+p["setting-content"]+'"><div name="color" style="height:20px;"></div></div></div>'),o.colorPick=new npColorPick({color:{color:i.Paper.backgroundColor,opacity:i.Paper.backgroundOpacity}}),o.$el.find("div[name=color]").append(o.colorPick.$el),o.grid=new m(u(o),i.Paper.grid,o.language.ShowGrid),o.antialias=new m(u(o),i.Paper.antialias,o.language.antialias),o.fog=new m(u(o),i.Paper.fog,o.language.fog),o.$el.append(o.grid.$el),o.$el.append(o.antialias.$el),o.$el.append(o.fog.$el),o.$el.append('<div class="'+p["setting-row"]+'"><div class="'+p["setting-title"]+'">'+o.language.perspective+'</div><div class="'+p["setting-content"]+'"><div  name="perspective" class="'+p["number-input"]+'"></div></div></div>'),o.perspective=new T({allowFloat:!1,allowNagetive:!1,max:64}),o.perspective.setValue(i.Paper.perspective),o.$el.find("select").val(i.VarisAccuracy),o.$el.find("div[name=perspective]").append(o.perspective.el),o}return o(n,[{key:"validate",value:function(){return this.perspective.validate()}},{key:"getValue",value:function(){var e=this.colorPick.getColor();return{AutoNamePoint:this.check.getValue(),VarisAccuracy:this.$el.find("select").val(),Paper:{backgroundColor:e.color,backgroundOpacity:e.opacity,fog:this.fog.getValue(),antialias:this.antialias.getValue(),grid:this.grid.getValue(),perspective:this.perspective.getValue()}}}}]),n}(v),M=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.axisControlPoint),o.constrolPoint=new N(u(o),i.GlobalAxis.ControlPoint,o.language),o.$el.append(o.constrolPoint.$el),o.addDivider(),o.addTitle("x"+o.language.axisOfCoor),o.xAxisLine=new E(u(o),i.GlobalAxis.XAxisLine,o.language),o.$el.append(o.xAxisLine.$el),o.addDivider(),o.addTitle("y"+o.language.axisOfCoor),o.yAxisLine=new E(u(o),i.GlobalAxis.YAxisLine,o.language),o.$el.append(o.yAxisLine.$el),o.addDivider(),o.addTitle("z"+o.language.axisOfCoor),o.zAxisLine=new E(u(o),i.GlobalAxis.ZAxisLine,o.language),o.$el.append(o.zAxisLine.$el),o.addDivider(),o.addTitle("xoy"+o.language.plane),o.xoyPlane=new R(u(o),i.GlobalAxis.XOYPlane,o.language),o.$el.append(o.xoyPlane.$el),o.addDivider(),o.addTitle("xoz"+o.language.plane),o.xozPlane=new R(u(o),i.GlobalAxis.XOZPlane,o.language),o.$el.append(o.xozPlane.$el),o.addDivider(),o.addTitle("yoz"+o.language.plane),o.yozPlane=new R(u(o),i.GlobalAxis.YOZPlane,o.language),o.$el.append(o.yozPlane.$el),o}return o(n,[{key:"validate",value:function(){return this.constrolPoint.validate()&&this.xAxisLine.validate()&&this.yAxisLine.validate()&&this.zAxisLine.validate()&&this.xoyPlane.validate()&&this.xozPlane.validate()&&this.yozPlane.validate()}},{key:"getValue",value:function(){return{GlobalAxis:{ControlPoint:this.constrolPoint.getValue(),XAxisLine:this.xAxisLine.getValue(),YAxisLine:this.yAxisLine.getValue(),ZAxisLine:this.zAxisLine.getValue(),XOYPlane:this.xoyPlane.getValue(),XOZPlane:this.xozPlane.getValue(),YOZPlane:this.yozPlane.getValue()}}}}]),n}(v),F=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.fPoint),o.freePoint=new N(u(o),i.FreePoint,o.language),o.$el.append(o.freePoint.$el),o.addDivider(),o.addTitle(o.language.hfPoint),o.hfPoint=new N(u(o),i.HalfPoint,o.language),o.$el.append(o.hfPoint.$el),o.addDivider(),o.addTitle(o.language.cPoint),o.constraintPoint=new N(u(o),i.ConstraintPoint,o.language),o.$el.append(o.constraintPoint.$el),o}return o(n,[{key:"validate",value:function(){return this.freePoint.validate()&&this.hfPoint.validate()&&this.constraintPoint.validate()}},{key:"getValue",value:function(){return{FreePoint:this.freePoint.getValue(),HalfPoint:this.hfPoint.getValue(),ConstraintPoint:this.constraintPoint.getValue()}}}]),n}(v),D=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.segment+"/"+o.language.straight+"/"+o.language.radial),o.line=new E(u(o),i.Line,o.language),o.$el.append(o.line.$el),o}return o(n,[{key:"validate",value:function(){return this.line.validate()}},{key:"getValue",value:function(){return{Line:this.line.getValue()}}}]),n}(v),O=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.circle),o.stroke=new y(u(o),i.Circle.stroke,o.language),o.blocking=new m(u(o),i.Circle.blocking,o.language.blocking),o.$el.append(o.stroke.$el),o.$el.append(o.blocking.$el),o.addDivider(),o.addTitle(o.language.arc),o.arcStroke=new y(u(o),i.Arc.stroke,o.language),o.arcBlocking=new m(u(o),i.Arc.blocking,o.language.blocking),o.$el.append(o.arcStroke.$el),o.$el.append(o.arcBlocking.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()&&this.arcStroke.validate()}},{key:"getValue",value:function(){return{Circle:{stroke:this.stroke.getValue(),blocking:this.blocking.getValue()},Arc:{blocking:this.arcBlocking.getValue(),stroke:this.arcStroke.getValue()}}}}]),n}(v),V=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.curvesPath+"/"+o.language.tranformPath+"/"+o.language.locusPath),o.stroke=new y(u(o),i.Curve.stroke,o.language),o.blocking=new m(u(o),i.Curve.blocking,o.language.blocking),o.$el.append(o.stroke.$el),o.$el.append(o.blocking.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Curve:{blocking:this.blocking.getValue(),stroke:this.stroke.getValue()}}}}]),n}(v),j=function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.plane+"/"+o.language.polygon),o.stroke=new y(u(o),i.Plane.stroke,o.language),o.fill=new b(u(o),i.Plane.fill,o.language),o.blocking=new m(u(o),i.Plane.blocking,o.language.blocking),o.$el.append(o.stroke.$el),o.$el.append(o.fill.$el),o.$el.append(o.blocking.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Plane:{blocking:this.blocking.getValue(),stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}}]),n}(v),U=function(e){r(n,e);var t=c(n);function n(e,i,s,o){var r;return a(this,n),(r=t.call(this,e,o)).$el=$('<div class="'+p["setting-box"]+'"></div>'),r.addTitle(s),r.fill=new b(u(r),i.fill,r.language),r.blocking=new m(u(r),i.blocking,r.language.blocking),r.wireframe=new m(u(r),i.wireframe,r.language.wireframe),r.colorful=new m(u(r),i.colorful,r.language.colorful),r.$el.append(r.fill.$el),r.$el.append(r.blocking.$el),r.$el.append(r.wireframe.$el),r.$el.append(r.colorful.$el),r}return o(n,[{key:"getValue",value:function(){return{blocking:this.blocking.getValue(),wireframe:this.wireframe.getValue(),colorful:this.colorful.getValue(),fill:this.fill.getValue()}}}]),n}(v),B={Global:L,GlobalGrid:M,Point:F,Line:D,Circle:O,Curve:V,Plane:j,Surface:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).geometry=new U(u(o),i.Surface,o.language.surface,o.language),o.$el=o.geometry.$el,o}return o(n,[{key:"getValue",value:function(){return{Surface:this.geometry.getValue()}}}]),n}(v),Sphere:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).geometry=new U(u(o),i.Sphere,o.language.ball,o.language),o.$el=o.geometry.$el,o}return o(n,[{key:"getValue",value:function(){return{Sphere:this.geometry.getValue()}}}]),n}(v),Cylinder:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).geometry=new U(u(o),i.Cylinder,o.language.frustum+"/"+o.language.prism,o.language),o.$el=o.geometry.$el,o}return o(n,[{key:"getValue",value:function(){return{Cylinder:this.geometry.getValue()}}}]),n}(v),ConvexHull:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).geometry=new U(u(o),i.ConvexHull,o.language.convex,o.language),o.$el=o.geometry.$el,o}return o(n,[{key:"getValue",value:function(){return{ConvexHull:this.geometry.getValue()}}}]),n}(v),Polyhedron:function(e){r(n,e);var t=c(n);function n(e,i,s){var o;return a(this,n),(o=t.call(this,e,s)).$el=$('<div class="'+p["setting-box"]+'"></div>'),o.addTitle(o.language.polyhedron),o.stroke=new y(u(o),i.Polyhedron.stroke,o.language),o.fill=new b(u(o),i.Polyhedron.fill,o.language),o.blocking=new m(u(o),i.Polyhedron.blocking,o.language.blocking),o.wireframe=new m(u(o),i.Polyhedron.wireframe,o.language.wireframe),o.colorful=new m(u(o),i.Polyhedron.colorful,o.language.colorful),o.$el.append(o.stroke.$el),o.$el.append(o.fill.$el),o.$el.append(o.blocking.$el),o.$el.append(o.wireframe.$el),o.$el.append(o.colorful.$el),o}return o(n,[{key:"validate",value:function(){return this.stroke.validate()}},{key:"getValue",value:function(){return{Polyhedron:{blocking:this.blocking.getValue(),wireframe:this.wireframe.getValue(),colorful:this.colorful.getValue(),stroke:this.stroke.getValue(),fill:this.fill.getValue()}}}}]),n}(v),Calculation:_,CustomFunction:w,Animation:k,Action:S,Variable:C,DynamicText:A,Label:P};e.exports=function(e){r(n,e);var t=c(n);function n(e,i,s){return a(this,n),t.call(this,e,i,s)}return o(n,[{key:"ElementListConfig",get:function(){return B}},{key:"renderElementList",value:function(){var e=this.$elementList,t=p["element-list-single"];e.append('<div name="Global" class="'+t+" "+p["element-list-active"]+'">'+this.language.globalSetting+"</div>"),e.append('<div name="GlobalGrid" class="'+t+'">'+this.language.globalAxis+"</div>"),e.append('<div name="Point" class="'+t+'">'+this.language.point+"</div>"),e.append('<div name="Line" class="'+t+'">'+this.language.segment+"/"+this.language.straight+"/"+this.language.radial+"</div>"),e.append('<div name="Circle" class="'+t+'">'+this.language.circle+"/"+this.language.circularArc+"</div>"),e.append('<div name="Plane" class="'+t+'">'+this.language.plane+"/"+this.language.polygon+"</div>"),e.append('<div name="Curve" class="'+t+'">'+this.language.curve+"</div>"),e.append('<div name="Sphere" class="'+t+'">'+this.language.ball+"</div>"),e.append('<div name="Cylinder" class="'+t+'">'+this.language.frustum+"/"+this.language.prism+"</div>"),e.append('<div name="ConvexHull" class="'+t+'">'+this.language.convex+"</div>"),e.append('<div name="Polyhedron" class="'+t+'">'+this.language.polyhedron+"</div>"),e.append('<div name="Surface" class="'+t+'">'+this.language.surface+"</div>"),e.append('<div name="Calculation" class="'+t+'">'+this.language.measure+"/"+this.language.calculate+"</div>"),e.append('<div name="CustomFunction" class="'+t+'">'+this.language.UscFun+"</div>"),e.append('<div name="Animation" class="'+t+'">'+this.language.animation+"</div>"),e.append('<div name="Action" class="'+t+'">'+this.language.actionBtn+"</div>"),e.append('<div name="Variable" class="'+t+'">'+this.language.var+"</div>"),e.append('<div name="DynamicText" class="'+t+'">'+this.language.fontStyle+"</div>"),e.append('<div name="Label" class="'+t+'">'+this.language.label+"</div>")}}]),n}(f)},function(e,t,n){var i=n(12),a=function(){var e=function(e){var t=this;for(var n in this.option={label:"",text:"",disable:!1,backgroundColor:"#000",color:"#fff",callback:null,data:[]},e)this.option.hasOwnProperty(n)&&(this.option[n]=e[n]);this.el=document.createElement("div"),this.el.setAttribute("class",i.dropDownBtn);var a=document.createElement("div");a.innerHTML=e.label,this.el.appendChild(a),this.dropBtn=a,this.tip=document.createElement("div"),this.tip.setAttribute("class",i.tip),this.tip.style.backgroundColor=this.option.backgroundColor,this.tip.style.color=this.option.color,this.tipContent=document.createElement("div"),this.tipContent.setAttribute("style","padding:5px"),this.tipContent.innerHTML=e.text,this.tip.appendChild(this.tipContent);var s=document.createElement("div");s.setAttribute("style","border-top: 5px transparent dashed;\n        border-left: 5px transparent dashed;\n        border-right: 5px transparent dashed;\n        border-bottom: 5px ".concat(this.option.backgroundColor," solid;    width: 10px;\n        position: absolute;\n        top: -10px;\n        left: 10px;")),this.tip.appendChild(s),this.el.appendChild(this.tip),a.addEventListener("mouseenter",(function(){t.tip.style.display="block"})),a.addEventListener("mouseleave",(function(){t.tip.style.display="none"})),this.disable=this.option.disable,this.disable?a.setAttribute("class",i["drop-btn"]):(a.setAttribute("class",i["drop-btn"]),a.addEventListener("click",(function(){t.disable||(t.el.getElementsByClassName(i["menu-container-bottom"])[0].style.display="block")})),this.el.addEventListener("mouseleave",(function(){this.getElementsByClassName(i["menu-container-bottom"])[0].style.display="none"})),this.createMenu(e.data))};function t(e){var n=document.createElement("div"),a=document.createElement("div");a.setAttribute("class",i["li-icon"]),e.icon&&(a.innerHTML=e.icon);var s=document.createElement("div");if(s.setAttribute("class",i["menu-label"]),e.label&&(s.innerHTML=e.label),n.appendChild(a),n.appendChild(s),e.disable)return n.setAttribute("class",i.disable+" "+i["menu-li-disable"]),n;if(n.setAttribute("class",i["menu-li"]),!e.child||!e.child.length)return n.addEventListener("click",(function(){e.callback&&e.callback()})),n;n.addEventListener("mouseenter",(function(){this.getElementsByClassName(i["menu-container-right"])[0].style.display="block"})),n.addEventListener("mouseleave",(function(){this.getElementsByClassName(i["menu-container-right"])[0].style.display="none"}));var o=document.createElement("div");o.setAttribute("class",i["sub-icon"]),o.innerHTML='<span class="npsvg-iconfont" style="font-size:12px">&#xe600;</span>',n.appendChild(o);var r=function(){var e=document.createElement("div");return e.setAttribute("class",i["menu-container-right"]),e}();n.appendChild(r);var l=function(){var e=document.createElement("div");return e.setAttribute("class",i["menu-body-sub"]),e}();r.appendChild(l);for(var c=0;c<e.child.length;c++)l.appendChild(t(e.child[c]));return n}function n(){var e=document.createElement("div");return e.setAttribute("class",i.divider),e}return e.prototype.updateDisable=function(e){e?this.dropBtn.setAttribute("class",i["drop-btn"]+" "+i.disable):this.dropBtn.setAttribute("class",i["drop-btn"]),this.disable=e},e.prototype.createMenu=function(e){if(e&&e.length){var a=document.createElement("div");a.setAttribute("class",i["menu-container-bottom"]);var s=function(){var e=document.createElement("div");return e.setAttribute("class",i["menu-body"]),e}();a.appendChild(s);for(var o=0;o<e.length;o++){for(var r=0;r<e[o].length;r++)s.appendChild(t(e[o][r]));if(o==e.length-1)break;s.appendChild(n())}this.el.appendChild(a)}else console.error("menu list is empty")},e}();e.exports=a},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(0).widthTitleName,s=function(){function e(t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userModel=t,this.sharedResourceService=n,this.language=i,this.previewUrl="",this.editUrl="",this.previewShared=null,this.editShared=null;var s=document.createElement("div");this.el=s,s.style.padding="0 20px",s.style.minHeight="238px",s.innerHTML='<div style="margin: 0 auto;box-sizing: border-box;width:440px;padding:20px 0;border-top: 1px dashed #979797;">\n                <div style="display:flex;justify-content: space-around;">\n                    <div class="sharePreviewBtn" style="text-align:center;border-bottom:2px solid #979797;cursor:pointer">\n                    <span class="npsvg-iconfont" style="margin-right:5px">&#xe61e;</span>'.concat(this.language.sharePreviewUrl,'</div>\n                    <div class="shareEditBtn" style="text-align:center;cursor:pointer">\n                    <span class="npsvg-iconfont" style="margin-right:5px">&#xe823;</span>').concat(this.language.shareEditUrl,'</div>\n                </div>\n                <div class="sharePreview" style=""></div>\n                <div class="shareEdit" style="display:none;"></div>\n                </div>'),this.sharePreview=s.getElementsByClassName("sharePreview")[0],this.shareEdit=s.getElementsByClassName("shareEdit")[0],this.sharedResourceService.fetchSharedResource("access",(function(e){a.renderPreviewUl(e)})),this.sharedResourceService.fetchSharedResource("edit",(function(e){a.renderEditUl(e)})),this.createTipUl(),this.addEvents(),this.dialogEl()}var t,n,s;return t=e,(n=[{key:"renderPreviewUl",value:function(e){this.previewShared===e&&e?this.sharePreview.getElementsByClassName("expiredTip")[0].innerHTML=this.language.expiredDateTip(e.expired_day):(this.previewShared=e,this.previewUrl=e?"".concat(o(),"/presentationEditor/presentationPlay.html#share/").concat(e.id):null,this.sharePreview.innerHTML=this.renderSharedUl("Preview",e,this.previewUrl),e&&this.renderQrcode(this.sharePreview.getElementsByClassName("qrcode")[0],this.previewUrl))}},{key:"renderEditUl",value:function(e){this.editShared===e&&e?this.shareEdit.getElementsByClassName("expiredTip")[0].innerHTML=this.language.expiredDateTip(e.expired_day):(this.editShared=e,this.editUrl=e?"".concat(o(),"/svg.html#share/").concat(e.id):null,this.shareEdit.innerHTML=this.renderSharedUl("Edit",e,this.editUrl),e&&this.renderQrcode(this.shareEdit.getElementsByClassName("qrcode")[0],this.editUrl))}},{key:"renderSharedUl",value:function(e,t,n){if(!t)return'<div>\n            <p style="line-height: 30px;">'.concat(this.language["open"+e+"Url"],'</p>\n            <div style="text-align: center;">\n            <div class="openShareUrl" style="display: inline-block;background: #0091FF;color: #fff;width:104px;height:30px;line-height:30px;border-radius:2px;cursor: pointer;">\n                <span class="npsvg-iconfont openShareUrl" style="margin-right:5px">&#xe61e;</span>').concat(this.language.openShareUrl,"\n            </div>\n            </div>\n            </div>");var i=0;if(this.userModel.isVip()){var a=(new Date).getTime(),s=this.userModel.get("expired_time")||"",o=new Date(s.replace(/-/g,"/")).getTime();i=parseInt((o-a)/864e5)}return"<div>\n        <p>".concat(this.language["share"+e+"Tip"],'</p>       \n        <div>\n            <div style="display:flex;height:30px;line-height:30px;margin-top:10px;background: #F5F7FA;border: 1px solid #E3E7EC;border-radius: 2px;">\n                <div style="width:280px;overflow:hidden;padding:0 5px;flex: 1;">\n                <input type="text" class="Url" readonly style="width: 100%;border: none;background: #f5f7fa;outline:none;color: #3e4363;box-shadow: none;" value=\'').concat(n,'\'/>\n                </div>\n                <div class="copyUrl" style="width:120px;padding:0 5px;text-align:center;cursor:pointer;border-left: 1px solid #E3E7EC;overflow: hidden;">').concat(this.language["copy"+e+"Url"],'</div>\n            </div> \n            <div class="expiredTip" style="color: #FA6400;font-size: 12px;line-height: 16px;margin: 6px 0;">').concat(this.language.expiredDateTip(t.expired_day),'</div>         \n            <div style="height: 30px;margin-bottom: 14px;position: relative;">\n                <div style="display: flex;align-items: center;height: 30px;float: left;line-height: 1;">\n                    <div>').concat(this.language.expiredDate,'</div>\n                    <div><input class="refresh" style="margin: 0 4px 0 10px;" name="expired_').concat(e,'" type="radio" value="7" checked>7天</div>\n                    <div><input class="refresh" style="margin: 0 4px 0 14px;" name="expired_').concat(e,'" type="radio" value="30">30天</div>\n                    ').concat(this.userModel.isVip()?'<div><input class="refresh" style="margin: 0 4px 0 14px;" name="expired_'.concat(e,'" type="radio" value="').concat(i,'">').concat(i,'天<span style="color: #f00;font-size: 10px;">(VIP剩余天数)</span></div>'):"",'\n                </div>             \n                <div class="refresh" style="position: absolute;right: 0;text-align: center;background: #6DD400;color: #fff;width:84px;height:30px;line-height:30px;border-radius:2px;cursor: pointer;">\n                    <span class="npsvg-iconfont refresh" style="margin-right: 5px">&#xe725;</span>').concat(this.language.refresh,'\n                </div>\n            </div>\n            <div style="height: 100px;border-top: 1px dashed #979797;align-items: center;display: flex;">\n                <div class="qrcode" style="width: 80px;height: 80px;"></div>\n                <div style="color: #888;margin-left: 10px;flex: 1;">').concat(this.language.qrcode,'</div>\n                <div class="closeShareUrl" style="display: inline-block;text-align: center;background: #0091FF;color: #fff;width:104px;height:30px;line-height:30px;border-radius:2px;cursor: pointer;">\n                    <span class="npsvg-iconfont closeShareUrl" style="margin-right:5px">&#xe624;</span>').concat(this.language.closeShareUrl,"</div>\n            </div>\n        </div></div>")}},{key:"createTipUl",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.top=0,e.style.textAlign="center",e.style.pointerEvents="none",e.style.width="100%",e.style.display="none",e.innerHTML='<span style="background-color:#5DA304;color:#fff;font-size:14px;padding:5px 10px;border-radius:4px">'+this.language.copySuccess+"</span>",this.el.appendChild(e),this.tip=e}},{key:"addEvents",value:function(){var e=this;this.el.getElementsByClassName("sharePreviewBtn")[0].addEventListener("click",(function(){e.el.getElementsByClassName("sharePreviewBtn")[0].style["border-bottom"]="2px solid #979797",e.el.getElementsByClassName("shareEditBtn")[0].style["border-bottom"]="none",e.shareEdit.style.display="none",e.sharePreview.style.display="block"})),this.el.getElementsByClassName("shareEditBtn")[0].addEventListener("click",(function(){e.el.getElementsByClassName("shareEditBtn")[0].style["border-bottom"]="2px solid #979797",e.el.getElementsByClassName("sharePreviewBtn")[0].style["border-bottom"]="none",e.sharePreview.style.display="none",e.shareEdit.style.display="block"})),this.sharePreview.addEventListener("click",(function(t){switch(t.target.className){case"npsvg-iconfont openShareUrl":case"openShareUrl":e.sharedResourceService.openSharedResource("access",(function(t){e.renderPreviewUl(t)}));break;case"npsvg-iconfont closeShareUrl":case"closeShareUrl":e.previewShared.closeSharedResource((function(){e.renderPreviewUl(null)}));break;case"npsvg-iconfont refresh":case"refresh":e.previewShared.updateSharedResource($(e.sharePreview).find("input[type='radio']:checked").val(),(function(t){e.renderPreviewUl(t)}));break;case"copyUrl":e.copyByClassName(e.sharePreview.getElementsByClassName("Url")[0])}})),this.shareEdit.addEventListener("click",(function(t){switch(t.target.className){case"npsvg-iconfont openShareUrl":case"openShareUrl":e.sharedResourceService.openSharedResource("edit",(function(t){e.renderEditUl(t)}));break;case"npsvg-iconfont closeShareUrl":case"closeShareUrl":e.editShared.closeSharedResource((function(){e.renderEditUl(null)}));break;case"npsvg-iconfont refresh":case"refresh":e.editShared.updateSharedResource($(e.shareEdit).find("input[type='radio']:checked").val(),(function(t){e.renderEditUl(t)}));break;case"copyUrl":e.copyByClassName(e.shareEdit.getElementsByClassName("Url")[0])}}))}},{key:"dialogEl",value:function(){var e=this;this.form=a({title:this.language.share,el:this.el,modal:!0,close:function(){e.form.destroy(),e.el.parentNode&&e.el.parentNode.removeChild(e.el)}})}},{key:"copyByClassName",value:function(e){var t=this;e.select(),document.execCommand("Copy"),this.tip.style.display="block",setTimeout((function(){t.tip.style.display="none"}),3e3)}},{key:"renderQrcode",value:function(e,t){new QRCode(e,{text:t,width:80,height:80,correctLevel:QRCode.CorrectLevel.M})}}])&&i(t.prototype,n),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}e.exports=s},function(e,t,n){n(8).language;var i=n(0),a=i.widthTitleName,s=(i.msgForm,{course:{name:"素材",color:"#6236FF"},presentation:{name:"活页",color:"#FA6400"}}),o={re_creation:{name:"再创",color:"#B620E0"},original:{name:"原创",color:"#388E3C"}};function r(e,t){return $('<div style="position:absolute;top: 50%;margin-top: '.concat(t?-200:-150,'px; width: 100%; text-align: center">\n                <div>\n                <img src="../../images/netPad_img/tree.png" style="width: 240px;height: 240px;">\n                </div>\n                <p style="margin-block-start: 0;width:100%;font-size: 20px;line-height: 30px;font-weight: bold;">').concat(e.shareLinkError(t),"!</p>\n                      ").concat(t?function(e){return'<div style="width: 240px; margin: 0 auto; border: solid 1px #000;padding-top: 1em;">\n            <p style="font-size: 16px;line-height: 20px;width: 200px; margin: 0 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">\n                    <span style=" padding: 0 2px;color: '.concat(s[e.source].color,";border: solid 1px ").concat(s[e.source].color,'; height: 18px; font-size: 12px;">').concat(s[e.source].name,'</span>\n                    <span style=" padding: 0 2px;color: ').concat(o[e.source_type].color,";border: solid 1px ").concat(o[e.source_type].color,'; height: 18px; font-size: 12px;">').concat(o[e.source_type].name,'</span>\n                    <b id="shareLink">').concat(e.heading,'</b>\n            </p>\n            <p style="font-size: 15px;line-height: 18px;">(ID:').concat(e.source_id,")</p>\n            </div>")}(t):"",'             \n                <div style="margin-top: 25px;">\n                      <div onclick="window.location.href=\'/resource_web/#/\'" style="background: #FA6400;color: #fff;width:104px;height:30px;line-height: 30px;border-radius:2px;font-size: 14px;display: inline-flex;align-items: center;justify-content: center;cursor: pointer;">\n                      <span class="npsvg-iconfont" style="margin-right:5px">&#xe60b;</span>').concat(e.more," \n               </div></div>\n            </div>"))}function l(e,t){var n=a({modal:!0,title:t.share,el:e,close:function(){n.destroy()}})}e.exports={linkExpired:function(e,t,n){$.ajax({type:"GET",url:"/resourceAdmin/resources/".concat(t,"/").concat(n),success:function(t){var n=document.createElement("div"),i=r(e,t);$(n).css({width:"800px",height:"550px"}).append(i),"privated"!==t.jurisdiction&&"own-only"!==t.jurisdiction&&i.find("#shareLink").addClass("shareLink").click((function(){window.location.href="/resource_web/".concat(t.source,"/#/").concat(t.source_id)})),npLoadingStatus.remove(),l(n,e)},error:function(e){console.log(e)}})},linkClose:function(e){var t=document.createElement("div"),n=r(e);$(t).css({width:"800px",height:"450px"}).append(n),npLoadingStatus.remove(),l(t,e)}}},function(e,t,n){var i=n(4).isForceEdit;e.exports=Backbone.Router.extend({routes:{"":"defaultRouter","posts/:id":"getPost","posts/:id/:force":"getPost","posts/:id/:force/:force":"getPost",path:"refreshPath","share/:id":"restoreShareById"},initialize:function(e,t,n){this.userModel=e,this.fileModel=t,this.netpadSVG=n,Backbone.history.start(),this.fileModel.addEventListener("reset",function(){if(!this.fileModel.getAttr().source_id)return this.navigate("",{trigger:!1});this.navigate("posts/"+this.fileModel.getAttr().source_id+(i()?"?forceEdit=true":""),{trigger:!1})}.bind(this))},getPost:function(e,t){(e=parseInt(e))&&!isNaN(e)?this.netpadSVG.restoreByID(e,0==t||i()):this.navigate("",{trigger:!0})},refreshPath:function(){this.navigate("",{trigger:!0}),window.location.reload()},defaultRouter:function(){this.netpadSVG.restoreByID(0)},restoreShareById:function(e){this.netpadSVG.restoreByShareID(e)}})}]);