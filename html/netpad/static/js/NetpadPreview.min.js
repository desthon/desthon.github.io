!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NetpadPreview=e():t.NetpadPreview=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=566)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(138),r=n(52),o=n(240);i||r(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){var i=n(29),r=n(59),o=n(85),s=n(238),a=n(152),u=n(41),c=n(35),l=n(80),f=n(17),h=r("Reflect","construct"),p=Object.prototype,d=[].push,y=f((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),v=!f((function(){h((function(){}))})),_=y||v;i({target:"Reflect",stat:!0,forced:_,sham:_},{construct:function(t,e){a(t),u(e);var n=arguments.length<3?t:a(arguments[2]);if(v&&!y)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return o(d,i,e),new(o(s,t,i))}var r=n.prototype,f=l(c(r)?r:p),_=o(t,f,e);return c(_)?_:f}})},function(t,e,n){var i=n(241);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(86).default,r=n(12);t.exports=function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(29),r=n(55).map;i({target:"Array",proto:!0,forced:!n(113)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(234))},,function(t,e,n){"use strict";var i=n(0);n(3),n(49),n(87),n(431),n(115),n(132),n(22),n(286),n(27),n(8);var r=i(n(28)),o=i(n(1)),s=i(n(2)),a=n(704),u=Math.PI/180,c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;(0,o.default)(this,t),this.element=e,this.inputs=e.inputs||[],this.algebraic=n&&n.algebraic,this.elementsRepository=n&&n.elementsRepository,this.dataRepository=n&&n.dataRepository,this.paper=n&&n.paper,this.axisTransFormer=n&&n.paper&&n.paper.axisTransformer,this._attributes=r,this.removeVaris=s,this.canBindAction&&(this._attributes.bindAction=new a(this.elementsRepository)),this.setAttr(i)}return(0,s.default)(t,[{key:"toJSON3",value:function(){return{type:this.type,parents:this._getParentsID(),attr:this.getAttr()}}},{key:"calculate",value:function(){return{}}},{key:"getAttr",value:function(){var t={};for(var e in this._attributes)t[e]=this._attributes[e].get();return t}},{key:"setAttr",value:function(t){var e={};for(var n in t)this._attributes[n]&&this._attributes[n].toString()!=t[n]&&(e[n]={old:this._attributes[n].get(),new:t[n]},this._attributes[n].set(t[n]));this._attributes.outVais&&t.hasOwnProperty("outVais")&&(this.element.outVais=this._attributes.outVais.data),this._attrChanged(e,t)}},{key:"getCustomFuns",value:function(){var t=new Set;for(var e in this._attributes)this._attributes[e].getCustomFuns&&this._attributes[e].getCustomFuns().forEach((function(e){return t.add(e)}));return Array.from(t)}},{key:"getParentsDataName",value:function(){var t={};for(var e in this._attributes)this._attributes[e].getVaris&&(0,r.default)(t,this._attributes[e].getVaris());return this.removeVaris&&this.removeVaris.forEach((function(e){delete t[e]})),t}},{key:"getChildrenDataName",value:function(){return this.element.outVais?[this.element.outVais.name]:[]}},{key:"_getParentsID",value:function(){return this.inputs.map((function(t){return t.get("id")}))}},{key:"play",value:function(){this.canBindAction&&this._attributes.bindAction.play()}},{key:"_attrChanged",value:function(t,e){}},{key:"__getExpressValues__",value:function(t){var e={};for(var n in this._attributes)if(!t||!t[n]){if(this._attributes[n].isExpress){var i=this._attributes[n].calcu();if(!isFinite(i))return;e[n]=i}if(this._attributes[n].isRange){var r=this._attributes[n].calcu();if(!isFinite(r.s)||!isFinite(r.e))return;e[n]=r}}return e}},{key:"__angleToArc__",value:function(t,e){return 1==e?t:t*u}},{key:"_getParentOutputs",value:function(){return this.inputs.map((function(t){return t.output_Model}))}},{key:"parentsIsUgly",value:function(){if(!this.inputs)return!1;for(var t,e=0;t=this.inputs[e];e++)if(t.isUgly)return!0;return!1}}]),t}();c.prototype.type="Constraint",c.prototype.canCopy=!0,c.prototype.canBindAction=!0,t.exports=c},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(89),r=Function.prototype,o=r.bind,s=r.call,a=i&&o.bind(s,s);t.exports=i?function(t){return t&&a(t)}:function(t){return t&&function(){return s.apply(t,arguments)}}},,function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2)),s=i(n(19));t.exports=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";(0,r.default)(this,t),(0,s.default)(this,"isExpress",!0),this.algebraic=e,this.exp=e.createAlgeObjByStr(n)}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.exp=this.algebraic.createAlgeObjByStr(t))}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.exp.toString()}},{key:"validate",value:function(t){return!!t&&this.algebraic.testSyntax(t)}},{key:"getVaris",value:function(){return this.exp.getVaris()}},{key:"getCustomFuns",value:function(){return this.exp.getCustomFuns()}},{key:"calcu",value:function(){return this.exp.calcu()}},{key:"toTex",value:function(){return this.exp.toTex()}},{key:"isPower0",value:function(t){try{return this.exp.isPower0(t)}catch(t){return!1}}},{key:"isPower1",value:function(t){try{return this.exp.isPower1(t)}catch(t){return!1}}},{key:"isPower2",value:function(t){try{return this.exp.isPower2(t)}catch(t){return!1}}}]),t}()},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(129),s=n(119),a=n(35),u=n(78),c=n(46),l=n(60),f=n(120),h=n(25),p=n(113),d=n(95),y=p("slice"),v=h("species"),_=r.Array,g=Math.max;i({target:"Array",proto:!0,forced:!y},{slice:function(t,e){var n,i,r,h=l(this),p=c(h),y=u(t,p),m=u(void 0===e?p:e,p);if(o(h)&&(n=h.constructor,(s(n)&&(n===_||o(n.prototype))||a(n)&&null===(n=n[v]))&&(n=void 0),n===_||void 0===n))return d(h,y,m);for(i=new(void 0===n?_:n)(g(m-y,0)),r=0;y<m;y++,r++)y in h&&f(i,r,h[y]);return i.length=r,i}})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;(0,r.default)(this,t),this.value=e,this.min=n,this.max=i}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=parseFloat(t))}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(t){return(t=parseFloat(t))-this.min>=0&&this.max-t>=0}}]),t}()},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(17),s=n(129),a=n(35),u=n(47),c=n(46),l=n(120),f=n(154),h=n(113),p=n(25),d=n(94),y=p("isConcatSpreadable"),v=r.TypeError,_=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),g=h("concat"),m=function(t){if(!a(t))return!1;var e=t[y];return void 0!==e?!!e:s(t)};i({target:"Array",proto:!0,forced:!_||!g},{concat:function(t){var e,n,i,r,o,s=u(this),a=f(s,0),h=0;for(e=-1,i=arguments.length;e<i;e++)if(m(o=-1===e?s:arguments[e])){if(h+(r=c(o))>9007199254740991)throw v("Maximum allowed index exceeded");for(n=0;n<r;n++,h++)n in o&&l(a,h,o[n])}else{if(h>=9007199254740991)throw v("Maximum allowed index exceeded");l(a,h++,o)}return a.length=h,a}})},function(t,e,n){"use strict";var i=n(29),r=n(55).find,o=n(172),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){var i=n(9),r=n(244),o=n(245),s=n(303),a=n(61),u=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in r)r[c]&&u(i[c]&&i[c].prototype);u(o)},,,function(t,e,n){var i=n(9),r=n(126),o=n(39),s=n(117),a=n(143),u=n(168),c=r("wks"),l=i.Symbol,f=l&&l.for,h=u?l:l&&l.withoutSetter||s;t.exports=function(t){if(!o(c,t)||!a&&"string"!=typeof c[t]){var e="Symbol."+t;a&&o(l,t)?c[t]=l[t]:c[t]=u&&f?f(e):h(e)}return c[t]}},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var i=n(42),r=n(105).EXISTS,o=n(13),s=n(44).f,a=Function.prototype,u=o(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(c.exec);i&&!r&&s(a,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(9),r=n(103).f,o=n(61),s=n(52),a=n(135),u=n(181),c=n(137);t.exports=function(t,e){var n,l,f,h,p,d=t.target,y=t.global,v=t.stat;if(n=y?i:v?i[d]||a(d,{}):(i[d]||{}).prototype)for(l in e){if(h=e[l],f=t.noTargetGet?(p=r(n,l))&&p.value:n[l],!c(y?l:d+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof h==typeof f)continue;u(h,f)}(t.sham||f&&f.sham)&&o(h,"sham",!0),s(n,l,h,t)}}},,function(t,e,n){"use strict";var i,r,o,s=n(260),a=n(42),u=n(9),c=n(26),l=n(35),f=n(39),h=n(88),p=n(111),d=n(61),y=n(52),v=n(44).f,_=n(71),g=n(162),m=n(122),x=n(25),P=n(117),w=u.Int8Array,M=w&&w.prototype,b=u.Uint8ClampedArray,R=b&&b.prototype,S=w&&g(w),k=M&&g(M),E=Object.prototype,A=u.TypeError,C=x("toStringTag"),T=P("TYPED_ARRAY_TAG"),L=P("TYPED_ARRAY_CONSTRUCTOR"),B=s&&!!m&&"Opera"!==h(u.opera),V=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},D=function(t){if(!l(t))return!1;var e=h(t);return f(O,e)||f(N,e)};for(i in O)(o=(r=u[i])&&r.prototype)?d(o,L,r):B=!1;for(i in N)(o=(r=u[i])&&r.prototype)&&d(o,L,r);if((!B||!c(S)||S===Function.prototype)&&(S=function(){throw A("Incorrect invocation")},B))for(i in O)u[i]&&m(u[i],S);if((!B||!k||k===E)&&(k=S.prototype,B))for(i in O)u[i]&&m(u[i].prototype,k);if(B&&g(R)!==k&&m(R,k),a&&!f(k,C))for(i in V=!0,v(k,C,{get:function(){return l(this)?this[T]:void 0}}),O)u[i]&&d(u[i],T,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:V&&T,aTypedArray:function(t){if(D(t))return t;throw A("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!m||_(S,t)))return t;throw A(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,i){if(a){if(n)for(var r in O){var o=u[r];if(o&&f(o.prototype,t))try{delete o.prototype[t]}catch(n){try{o.prototype[t]=e}catch(t){}}}k[t]&&!n||y(k,t,n?e:B&&M[t]||e,i)}},exportTypedArrayStaticMethod:function(t,e,n){var i,r;if(a){if(m){if(n)for(i in O)if((r=u[i])&&f(r,t))try{delete r[t]}catch(t){}if(S[t]&&!n)return;try{return y(S,t,n?e:B&&S[t]||e)}catch(t){}}for(i in O)!(r=u[i])||r[t]&&!n||y(r,t,e)}},isView:function(t){if(!l(t))return!1;var e=h(t);return"DataView"===e||f(O,e)||f(N,e)},isTypedArray:D,TypedArray:S,TypedArrayPrototype:k}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(86)),o=i(n(1)),s=i(n(2)),a=n(18);t.exports=function(){function t(e){(0,o.default)(this,t),this.left=new a,this.top=new a,this.set(e)}return(0,s.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.left.set(t.left),this.top.set(t.top))}},{key:"get",value:function(){return{left:this.left.toString(),top:this.top.toString()}}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return"object"===(0,r.default)(t)&&isFinite(t.left)&&isFinite(t.top)}}]),t}()},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164);t.exports=i.extend({defaults:{show:!0,measureStyle:0,unit:1},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.fontModel=new s,this.initializeBase(),this.on("change:labelStyle",(function(){this.set({measureStyle:this.get("labelStyle")})})),this.on("change:size",(function(){this.fontModel.set({size:this.get("size"),color:this.get("color"),opacity:void 0===this.get("opacity")?1:this.get("opacity")})}))},getAttr:function(){var t=this.getAttrBase();return t.measureStyle=this.get("measureStyle"),t.unit=this.get("unit"),t}})},,function(t,e,n){var i=n(26);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(e,n){var i=this;(0,r.default)(this,t),this.elementsRepository=e.elementsRepository,this.paper=e.paper,this.element=n,this.bindPoint=null,this.originPoint_output_Model=null,this._updatePosition=function(){if(!i.bindPoint.get("isDeleted")){var t=i.bindPoint.output_Model;if(!t.isUgly){var e=i.paper.transGTS(t),n=i.paper.transGTS(i.originPoint_output_Model),r=i.element.constraint.getPosition(),o={left:r.left+e.x-n.x,top:r.top+e.y-n.y};i.element._setConstraintAttr({position:o}),i.originPoint_output_Model=t}}}}return(0,o.default)(t,[{key:"set",value:function(t){var e=this;if(this._unbindPoint(),""!=t){var n=this.elementsRepository.get(t);if(n)return this._bindPoint(n);this.elementsRepository.on("add",(function n(i){i.get("id")==t&&(e.elementsRepository.off("add",n),e._bindPoint(i))}))}}},{key:"_bindPoint",value:function(t){t.output_Model.isPoint&&(this.bindPoint=t,this.originPoint_output_Model=this.bindPoint.output_Model,this.bindPoint.on("OUTPUT_CHANGE",this._updatePosition))}},{key:"_unbindPoint",value:function(){this.bindPoint&&(this.bindPoint.off("OUTPUT_CHANGE",this._updatePosition),this.bindPoint=null,this.originPoint_output_Model=null)}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.bindPoint&&!this.bindPoint.get("isDeleted")?this.bindPoint.get("id"):""}},{key:"validate",value:function(){return!0}}]),t}()},,function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.value=!!t}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(){return!0}}]),t}()},function(t,e,n){var i=n(13),r=n(47),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},function(t,e,n){var i=n(89),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},function(t,e,n){var i=n(9),r=n(35),o=i.String,s=i.TypeError;t.exports=function(t){if(r(t))return t;throw s(o(t)+" is not an object")}},function(t,e,n){var i=n(17);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var i=n(315),r=n(316),o=n(275),s=n(317);t.exports=function(t,e){return i(t)||r(t,e)||o(t,e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(9),r=n(42),o=n(169),s=n(170),a=n(41),u=n(104),c=i.TypeError,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor;e.f=r?s?function(t,e,n){if(a(t),e=u(e),a(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var i=f(t,e);i&&i.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:i.configurable,enumerable:"enumerable"in n?n.enumerable:i.enumerable,writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(a(t),e=u(e),a(n),o)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";n(130),n(51);var i=Backbone.Model.extend({defaults:{show:!0},initializeBase:function(){var t=this;this.on("change:bArrow",(function(e){t.setAttr({arrow:{bArrow:e.get("bArrow")}})})),this.on("change:eArrow",(function(e){t.setAttr({arrow:{eArrow:e.get("eArrow")}})}))},getAttrBase:function(){var t={};return this.fillModel&&(t.fill=this.fillModel.toJSON()),this.strokeModel&&(t.stroke=this.strokeModel.toJSON()),this.arrowModel&&(t.arrow=this.arrowModel.toJSON()),this.textureModel&&(t.texture=this.textureModel.toJSON()),this.fontModel&&(t.font=this.fontModel.toJSON()),this.iconModel&&(t.icon=this.iconModel.toJSON()),t.show=this.get("show"),t},getAttr:function(){return this.getAttrBase()},setAttrBase:function(t){t.fill&&this.fillModel&&this.fillModel.set(t.fill),t.stroke&&this.strokeModel&&this.strokeModel.set(t.stroke),t.arrow&&this.arrowModel&&this.arrowModel.set(t.arrow),t.texture&&this.textureModel&&this.textureModel.set(t.texture),t.font&&this.fontModel&&this.fontModel.set(t.font),t.icon&&this.iconModel&&this.iconModel.set(t.icon),null!=t.show&&this.set({show:t.show})},setAttr:function(t){this.setAttrBase(t),this.set(t)},toJSON3:function(){return this.getAttr()}});t.exports=i},function(t,e,n){var i=n(79);t.exports=function(t){return i(t.length)}},function(t,e,n){var i=n(9),r=n(74),o=i.Object;t.exports=function(t){return o(r(t))}},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(78),s=n(64),a=n(46),u=n(47),c=n(154),l=n(120),f=n(113)("splice"),h=r.TypeError,p=Math.max,d=Math.min;i({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,i,r,f,y,v,_=u(this),g=a(_),m=o(t,g),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=g-m):(n=x-2,i=d(p(s(e),0),g-m)),g+n-i>9007199254740991)throw h("Maximum allowed length exceeded");for(r=c(_,i),f=0;f<i;f++)(y=m+f)in _&&l(r,f,_[y]);if(r.length=i,n<i){for(f=m;f<g-i;f++)v=f+n,(y=f+i)in _?_[v]=_[y]:delete _[v];for(f=g;f>g-i+n;f--)delete _[f-1]}else if(n>i)for(f=g-i;f>m;f--)v=f+n-1,(y=f+i-1)in _?_[v]=_[y]:delete _[v];for(f=0;f<n;f++)_[f+m]=arguments[f+2];return _.length=g-i+n,r}})},function(t,e,n){"use strict";var i=n(13),r=n(105).PROPER,o=n(52),s=n(41),a=n(71),u=n(53),c=n(17),l=n(183),f=RegExp.prototype,h=f.toString,p=i(l),d=c((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),y=r&&"toString"!=h.name;(d||y)&&o(RegExp.prototype,"toString",(function(){var t=s(this),e=u(t.source),n=t.flags;return"/"+e+"/"+u(void 0===n&&a(f,t)&&!("flags"in f)?p(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var i=n(73);t.exports=i.extend({defaults:{color:"#0000ff",opacity:1,style:"solid",width:1},toJSON:function(){return{color:this.get("color"),opacity:this.get("opacity"),style:this.get("style"),width:this.get("width")}}})},function(t,e,n){var i=n(29),r=n(193),o=n(172);i({target:"Array",proto:!0},{fill:r}),o("fill")},function(t,e,n){var i=n(9),r=n(26),o=n(39),s=n(61),a=n(135),u=n(118),c=n(63),l=n(105).CONFIGURABLE,f=c.get,h=c.enforce,p=String(String).split("String");(t.exports=function(t,e,n,u){var c,f=!!u&&!!u.unsafe,d=!!u&&!!u.enumerable,y=!!u&&!!u.noTargetGet,v=u&&void 0!==u.name?u.name:e;r(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==v)&&s(n,"name",v),(c=h(n)).source||(c.source=p.join("string"==typeof v?v:""))),t!==i?(f?!y&&t[e]&&(d=!0):delete t[e],d?t[e]=n:s(t,e,n)):d?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return r(this)&&f(this).source||u(this)}))},function(t,e,n){var i=n(9),r=n(88),o=i.String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50);t.exports=i.extend({defaults:{show:!0,traced:!1,size:4,twinkle:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.size=this.get("size"),t.twinkle=this.get("twinkle"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}})},function(t,e,n){var i=n(81),r=n(13),o=n(109),s=n(47),a=n(46),u=n(154),c=r([].push),l=function(t){var e=1==t,n=2==t,r=3==t,l=4==t,f=6==t,h=7==t,p=5==t||f;return function(d,y,v,_){for(var g,m,x=s(d),P=o(x),w=i(y,v),M=a(P),b=0,R=_||u,S=e?R(d,M):n||h?R(d,0):void 0;M>b;b++)if((p||b in P)&&(m=w(g=P[b],b,x),t))if(e)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return b;case 2:c(S,g)}else switch(t){case 4:return!1;case 7:c(S,g)}return f?-1:r||l?l:S}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=parseInt(t))}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(t){return 0==t||1==t}}]),t}()},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(149),h=n(165).valToTex,p=npGeo.Utils.ANGLE_PER_ARC,d=n(461),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,s)).inputs[0]&&a.inputs[0].on("change:name",(function(t){return a.element.outPutNeedUpdate=!0})),a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=NaN,e="?";return this.parentsIsUgly()||(t=this._calcVal(),this._attributes.unit&&0==this._attributes.unit.get()&&(t*=p),e=h(t,this._attributes.accuracy.get())),new d({unit:this._attributes.unit?this._attributes.unit.get():1,value:t,description:this._description(),val:e,position:this._attributes.position.get()})}},{key:"_calcVal",value:function(){return 0}},{key:"_description",value:function(){return""}}]),n}(l);y.prototype.isMeasureValue=!0,t.exports=f(y)},,function(t,e,n){var i=n(9),r=n(26),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},function(t,e,n){var i=n(109),r=n(74);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(42),r=n(44),o=n(84);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(e,n){(0,r.default)(this,t),this.value=e,this.range=n}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=t)}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(t){return this.range.hasOwnProperty(t)}},{key:"getValue",value:function(){return this.range[this.value]}}]),t}()},function(t,e,n){var i,r,o,s=n(236),a=n(9),u=n(13),c=n(35),l=n(61),f=n(39),h=n(134),p=n(128),d=n(112),y=a.TypeError,v=a.WeakMap;if(s||h.state){var _=h.state||(h.state=new v),g=u(_.get),m=u(_.has),x=u(_.set);i=function(t,e){if(m(_,t))throw new y("Object already initialized");return e.facade=t,x(_,t,e),e},r=function(t){return g(_,t)||{}},o=function(t){return m(_,t)}}else{var P=p("state");d[P]=!0,i=function(t,e){if(f(t,P))throw new y("Object already initialized");return e.facade=t,l(t,P,e),e},r=function(t){return f(t,P)?t[P]:{}},o=function(t){return f(t,P)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}}}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){var e=+t;return e!=e||0===e?0:(e>0?i:n)(e)}},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(59),s=n(85),a=n(40),u=n(13),c=n(91),l=n(42),f=n(143),h=n(17),p=n(39),d=n(129),y=n(26),v=n(35),_=n(71),g=n(116),m=n(41),x=n(47),P=n(60),w=n(104),M=n(53),b=n(84),R=n(80),S=n(145),k=n(92),E=n(280),A=n(151),C=n(103),T=n(44),L=n(153),B=n(150),V=n(95),O=n(52),N=n(126),D=n(128),G=n(112),F=n(117),I=n(25),U=n(255),z=n(281),H=n(98),$=n(63),j=n(55).forEach,X=D("hidden"),Y=I("toPrimitive"),W=$.set,q=$.getterFor("Symbol"),J=Object.prototype,Z=r.Symbol,K=Z&&Z.prototype,Q=r.TypeError,tt=r.QObject,et=o("JSON","stringify"),nt=C.f,it=T.f,rt=E.f,ot=B.f,st=u([].push),at=N("symbols"),ut=N("op-symbols"),ct=N("string-to-symbol-registry"),lt=N("symbol-to-string-registry"),ft=N("wks"),ht=!tt||!tt.prototype||!tt.prototype.findChild,pt=l&&h((function(){return 7!=R(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=nt(J,e);i&&delete J[e],it(t,e,n),i&&t!==J&&it(J,e,i)}:it,dt=function(t,e){var n=at[t]=R(K);return W(n,{type:"Symbol",tag:t,description:e}),l||(n.description=e),n},yt=function(t,e,n){t===J&&yt(ut,e,n),m(t);var i=w(e);return m(n),p(at,i)?(n.enumerable?(p(t,X)&&t[X][i]&&(t[X][i]=!1),n=R(n,{enumerable:b(0,!1)})):(p(t,X)||it(t,X,b(1,{})),t[X][i]=!0),pt(t,i,n)):it(t,i,n)},vt=function(t,e){m(t);var n=P(e),i=S(n).concat(xt(n));return j(i,(function(e){l&&!a(_t,n,e)||yt(t,e,n[e])})),t},_t=function(t){var e=w(t),n=a(ot,this,e);return!(this===J&&p(at,e)&&!p(ut,e))&&(!(n||!p(this,e)||!p(at,e)||p(this,X)&&this[X][e])||n)},gt=function(t,e){var n=P(t),i=w(e);if(n!==J||!p(at,i)||p(ut,i)){var r=nt(n,i);return!r||!p(at,i)||p(n,X)&&n[X][i]||(r.enumerable=!0),r}},mt=function(t){var e=rt(P(t)),n=[];return j(e,(function(t){p(at,t)||p(G,t)||st(n,t)})),n},xt=function(t){var e=t===J,n=rt(e?ut:P(t)),i=[];return j(n,(function(t){!p(at,t)||e&&!p(J,t)||st(i,at[t])})),i};(f||(O(K=(Z=function(){if(_(K,this))throw Q("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?M(arguments[0]):void 0,e=F(t),n=function(t){this===J&&a(n,ut,t),p(this,X)&&p(this[X],e)&&(this[X][e]=!1),pt(this,e,b(1,t))};return l&&ht&&pt(J,e,{configurable:!0,set:n}),dt(e,t)}).prototype,"toString",(function(){return q(this).tag})),O(Z,"withoutSetter",(function(t){return dt(F(t),t)})),B.f=_t,T.f=yt,L.f=vt,C.f=gt,k.f=E.f=mt,A.f=xt,U.f=function(t){return dt(I(t),t)},l&&(it(K,"description",{configurable:!0,get:function(){return q(this).description}}),c||O(J,"propertyIsEnumerable",_t,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Z}),j(S(ft),(function(t){z(t)})),i({target:"Symbol",stat:!0,forced:!f},{for:function(t){var e=M(t);if(p(ct,e))return ct[e];var n=Z(e);return ct[e]=n,lt[n]=e,n},keyFor:function(t){if(!g(t))throw Q(t+" is not a symbol");if(p(lt,t))return lt[t]},useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),i({target:"Object",stat:!0,forced:!f,sham:!l},{create:function(t,e){return void 0===e?R(t):vt(R(t),e)},defineProperty:yt,defineProperties:vt,getOwnPropertyDescriptor:gt}),i({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:mt,getOwnPropertySymbols:xt}),i({target:"Object",stat:!0,forced:h((function(){A.f(1)}))},{getOwnPropertySymbols:function(t){return A.f(x(t))}}),et)&&i({target:"JSON",stat:!0,forced:!f||h((function(){var t=Z();return"[null]"!=et([t])||"{}"!=et({a:t})||"{}"!=et(Object(t))}))},{stringify:function(t,e,n){var i=V(arguments),r=e;if((v(e)||void 0!==t)&&!g(t))return d(e)||(e=function(t,e){if(y(r)&&(e=a(r,this,t,e)),!g(e))return e}),i[1]=e,s(et,null,i)}});if(!K[Y]){var Pt=K.valueOf;O(K,Y,(function(t){return a(Pt,this)}))}H(Z,"Symbol"),G[X]=!0},function(t,e,n){"use strict";var i=n(29),r=n(42),o=n(9),s=n(13),a=n(39),u=n(26),c=n(71),l=n(53),f=n(44).f,h=n(181),p=o.Symbol,d=p&&p.prototype;if(r&&u(p)&&(!("description"in d)||void 0!==p().description)){var y={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(d,this)?new p(t):void 0===t?p():p(t);return""===t&&(y[e]=!0),e};h(v,p),v.prototype=d,d.constructor=v;var _="Symbol(test)"==String(p("test")),g=s(d.toString),m=s(d.valueOf),x=/^Symbol\((.*)\)[^)]+$/,P=s("".replace),w=s("".slice);f(d,"description",{configurable:!0,get:function(){var t=m(this),e=g(t);if(a(y,t))return"";var n=_?w(e,7,-1):P(e,x,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:v})}},function(t,e,n){"use strict";var i=Math.min,r=Math.max,o=npGeo,s=o.Vector2,a=o.Line2,u=function(t,e,n){return t.x<n.x&&e.x>n.x&&t.y<n.y&&e.y>n.y};t.exports={segmentSelectByPos:function(t,e,n){return!(t.x+n<i(e.sp.x,e.ep.x)||t.x-n>r(e.sp.x,e.ep.x)||t.y+n<i(e.sp.y,e.ep.y)||t.y-n>r(e.sp.y,e.ep.y))&&s.isEqual(t,e.foot(t),n)},pointsSelectByPos:function(t,e,n){for(var i,r=0;i=e[r];r++)for(var o,a=0;o=i[a];a++)if(s.isEqual(t,o,n))return!0;return!1},pointInRect:u,segmentInRect:function(t,e,n,i){if(u(t,e,n))return!0;if(u(t,e,i))return!0;var r=t,o=new s(e.x,t.y),c=new s(t.x,e.y),l=e,f=new a(n,i);return!!s.isSegments_has_intersection(new a(r,o),f)||(!!s.isSegments_has_intersection(new a(o,l),f)||(!!s.isSegments_has_intersection(new a(r,c),f)||s.isSegments_has_intersection(new a(c,l),f)))},pointsInRect:function(t,e,n){for(var i,r=0;i=n[r];r++)for(var o,s=0;o=i[s];s++)if(u(t,e,o))return!0;return!1},createSVGEle:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}},,function(t,e,n){var i=n(9),r=n(26),o=n(111),s=i.TypeError;t.exports=function(t){if(r(t))return t;throw s(o(t)+" is not a function")}},function(t,e,n){"use strict";var i=n(29),r=n(55).filter;i({target:"Array",proto:!0,forced:!n(113)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(13);t.exports=i({}.isPrototypeOf)},function(t,e,n){"use strict";var i=n(0)(n(86));n(216),n(75),n(49),n(20),n(16),n(121),n(93),n(195);var r={num:new RegExp("^-?[0-9]+\\.?[0-9]*$"),RGBcolor:/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/};function o(t){var e={};for(var n in t)e[n]="object"===(0,i.default)(t[n])?o(t[n]):t[n];return e}t.exports={transFromNum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(t.toFixed(e))},colorRgbA:function(t,e){if(!t||"none"==t)return"RGBA(0,0,0,0)";var n=t.toLowerCase();if(!r.RGBcolor.test(n))return n;if(4===n.length){for(var i="#",o=1;o<4;o+=1)i+=n.slice(o,o+1).concat(n.slice(o,o+1));n=i}var s=[];for(o=1;o<7;o+=2)s.push(parseInt("0x"+n.slice(o,o+2)));return"RGBA("+s.join(",")+","+e+")"},deepCopy:function t(e,n){for(var r in n)e.hasOwnProperty(r)?e[r]="object"===(0,i.default)(n[r])?t(e[r],n[r]):n[r]:e[r]="object"===(0,i.default)(n[r])?o(n[r]):n[r];return e},deepToJSON:o,createUUID:function(t,e){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(e=e||n.length,t)for(var r=0;r<t;r++)i[r]=n[0|Math.random()*e];else{var o;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(var s=0;s<36;s++)i[s]||(o=0|16*Math.random(),i[s]=n[19==s?3&o|8:o])}return i.join("")}}},function(t,e,n){"use strict";var i=n(72).colorRgbA;t.exports=Backbone.Model.extend({defaults:{color:"#ff0000",opacity:1},getRGBA:function(){return{color:this.get("color"),opacity:this.get("opacity")}},toJSON:function(){return this.getRGBA()},toRgbaString:function(){return i(this.get("color"),this.get("opacity"))}})},function(t,e,n){var i=n(9).TypeError;t.exports=function(t){if(null==t)throw i("Can't call method on "+t);return t}},function(t,e,n){"use strict";var i=n(29),r=n(155);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},,function(t,e,n){var i=n(13),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},function(t,e,n){var i=n(64),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},function(t,e,n){var i=n(64),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i,r=n(41),o=n(153),s=n(136),a=n(112),u=n(182),c=n(127),l=n(128),f=l("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e;y="undefined"!=typeof document?document.domain&&i?d(i):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):d(i);for(var n=s.length;n--;)delete y.prototype[s[n]];return y()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=r(t),n=new h,h.prototype=null,n[f]=t):n=y(),void 0===e?n:o.f(n,e)}},function(t,e,n){var i=n(13),r=n(69),o=n(89),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i=n(29),r=n(13),o=n(69),s=n(47),a=n(46),u=n(53),c=n(17),l=n(187),f=n(156),h=n(246),p=n(247),d=n(94),y=n(248),v=[],_=r(v.sort),g=r(v.push),m=c((function(){v.sort(void 0)})),x=c((function(){v.sort(null)})),P=f("sort"),w=!c((function(){if(d)return d<70;if(!(h&&h>3)){if(p)return!0;if(y)return y<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)v.push({k:e+i,v:n})}for(v.sort((function(t,e){return e.v-t.v})),i=0;i<v.length;i++)e=v[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:m||!x||!P||!w},{sort:function(t){void 0!==t&&o(t);var e=s(this);if(w)return void 0===t?_(e):_(e,t);var n,i,r=[],c=a(e);for(i=0;i<c;i++)i in e&&g(r,e[i]);for(l(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:u(e)>u(n)?1:-1}}(t)),n=r.length,i=0;i<n;)e[i]=r[i++];for(;i<c;)delete e[i++];return e}})},function(t,e,n){"use strict";var i=n(45),r=n(73);t.exports=i.extend({defaults:{show:!0,traced:!1,traceLength:5,size:.5},initialize:function(){this.fillModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.size=this.get("size"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(89),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(60),r=n(172),o=n(140),s=n(63),a=n(44).f,u=n(219),c=n(91),l=n(42),f=s.set,h=s.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){f(this,{type:"Array Iterator",target:i(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");var p=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!c&&l&&"values"!==p.name)try{a(p,"name",{value:"values"})}catch(t){}},function(t,e,n){var i=n(9),r=n(138),o=n(26),s=n(77),a=n(25)("toStringTag"),u=i.Object,c="Arguments"==s(function(){return arguments}());t.exports=r?s:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=u(t),a))?n:c?s(e):"Object"==(i=s(e))&&o(e.callee)?"Arguments":i}},function(t,e,n){var i=n(17);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,e,n){var i=n(59);t.exports=i("navigator","userAgent")||""},function(t,e){t.exports=!1},function(t,e,n){var i=n(171),r=n(136).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(13),s=n(64),a=n(278),u=n(318),c=n(17),l=r.RangeError,f=r.String,h=Math.floor,p=o(u),d=o("".slice),y=o(1..toFixed),v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},_=function(t,e,n){for(var i=-1,r=n;++i<6;)r+=e*t[i],t[i]=r%1e7,r=h(r/1e7)},g=function(t,e){for(var n=6,i=0;--n>=0;)i+=t[n],t[n]=h(i/e),i=i%e*1e7},m=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var i=f(t[e]);n=""===n?i:n+p("0",7-i.length)+i}return n};i({target:"Number",proto:!0,forced:c((function(){return"0.000"!==y(8e-5,3)||"1"!==y(.9,0)||"1.25"!==y(1.255,2)||"1000000000000000128"!==y(0xde0b6b3a7640080,0)}))||!c((function(){y({})}))},{toFixed:function(t){var e,n,i,r,o=a(this),u=s(t),c=[0,0,0,0,0,0],h="",y="0";if(u<0||u>20)throw l("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return f(o);if(o<0&&(h="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*v(2,69,1))-69)<0?o*v(2,-e,1):o/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(_(c,0,n),i=u;i>=7;)_(c,1e7,0),i-=7;for(_(c,v(10,i,1),0),i=e-1;i>=23;)g(c,1<<23),i-=23;g(c,1<<i),_(c,1,1),g(c,2),y=m(c)}else _(c,0,n),_(c,1<<-e,0),y=m(c)+p("0",u);return y=u>0?h+((r=y.length)<=u?"0."+p("0",u-r)+y:d(y,0,r-u)+"."+d(y,r-u)):h+y}})},function(t,e,n){var i,r,o=n(9),s=n(90),a=o.process,u=o.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(r=(i=l.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},function(t,e,n){var i=n(13);t.exports=i([].slice)},function(t,e,n){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function u(t,e){for(var n={},i=[],r=0;r<t.length;r++){var o=t[r],u=e.base?o[0]+e.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var f=a(l),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(h)):s.push({identifier:l,updater:v(h,e),references:1}),i.push(l)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var l,f=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=f(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function p(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var d=null,y=0;function v(t,e){var n,i,r;if(e.singleton){var o=y++;n=d||(d=c(e)),i=h.bind(null,n,o,!1),r=h.bind(null,n,o,!0)}else n=c(e),i=p.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=u(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=a(n[i]);s[r].references--}for(var o=u(t,e),c=0;c<n.length;c++){var l=a(n[c]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(s=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([r]).join("\n")}var s,a,u;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);i&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){var i=n(44).f,r=n(39),o=n(25)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!r(t,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2)),s=i(n(19));t.exports=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,r.default)(this,t),(0,s.default)(this,"isData",!0),this.dataRepository=e,this.set(n)}return(0,o.default)(t,[{key:"set",value:function(t){this.dataName=t||"",this.data=t?this.dataRepository.getDataByName(this.dataName):null}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.dataName}},{key:"validate",value:function(){return!0}},{key:"setValue",value:function(t,e){this.data&&this.data.setValue(t,e)}},{key:"addValue",value:function(t,e){this.data&&this.data.addValue(t,{silent:e})}}]),t}()},,,,function(t,e,n){var i=n(42),r=n(40),o=n(150),s=n(84),a=n(60),u=n(104),c=n(39),l=n(169),f=Object.getOwnPropertyDescriptor;e.f=i?f:function(t,e){if(t=a(t),e=u(e),l)try{return f(t,e)}catch(t){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},function(t,e,n){var i=n(211),r=n(116);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},function(t,e,n){var i=n(42),r=n(39),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),u=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},function(t,e,n){"use strict";var i=n(29),r=n(144).includes,o=n(172);i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(149),h=n(461),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return new h({description:this._description(),val:this._calcLatex(),position:this._attributes.position.get()})}},{key:"_calcLatex",value:function(){return""}},{key:"_description",value:function(){return""}}]),n}(l);t.exports=f(p)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r,s){return(0,o.default)(this,n),e.call(this,t,i,r,s)}return(0,r.default)(n)}(n(11));l.prototype.isPoint=!0,t.exports=l},function(t,e,n){var i=n(9),r=n(13),o=n(17),s=n(77),a=i.Object,u=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?u(t,""):a(t)}:a},function(t,e,n){var i=n(69);t.exports=function(t,e){var n=t[e];return null==n?void 0:i(n)}},function(t,e,n){var i=n(9).String;t.exports=function(t){try{return i(t)}catch(t){return"Object"}}},function(t,e){t.exports={}},function(t,e,n){var i=n(17),r=n(25),o=n(94),s=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){"use strict";var i=n(0);n(21),n(3),n(51);var r=i(n(1)),o=i(n(2)),s=n(67).createSVGEle,a=n(72).colorRgbA,u={1:n(638),2:n(639),3:n(640),4:n(641),5:n(642),6:n(643)},c=n(146).isPc?5:6,l=function(){function t(e,n){(0,r.default)(this,t),this._axisTransformer=e,this._paper=n,this._isSelected=!1,this._isHighlight=!1,this._isTraced=!1,this._width=1,this._isShow=!0,this._isFilled=!1,this._geoEl=s("g"),this._geoEl.style.pointerEvents="visiblepainted",this.$_geoEl=$(this._geoEl),this._svgEl=s("svg"),this.$_svgEl=$(this._svgEl).css("width",this._paper.get("width")).css("height",this._paper.get("height")).css("position","absolute").css("left","0").css("top","0").css("font-family","Arial").css("font-weight","300").css("pointer-events","none").css("fill-rule","evenodd"),this._svgEl.appendChild(this._geoEl),this.$el=this.$_svgEl,this.el=this._svgEl}return(0,o.default)(t,[{key:"selectedByTarget",value:function(t){return this.$el.find(t).length>0}},{key:"selectedByPos",value:function(t,e,n){return this.selectedByTarget(n)}},{key:"isInRect",value:function(t,e){return!1}},{key:"update_geo",value:function(){}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill)}},{key:"updateFontDisplay",value:function(t){this.el.style.fontSize=t.size+"px",this.el.style.color=a(t.color,t.opacity)}},{key:"updateTrace",value:function(t){this._isTraced=t,this._isTraced||this.clearTrace()}},{key:"clearTrace",value:function(){this._tracedEl&&(this._svgEl.removeChild(this._tracedEl),this._tracedEl=null)}},{key:"updateShow",value:function(t){this._isShow!==!!t&&(this._isShow=!!t,this.__updateShow__())}},{key:"__updateShow__",value:function(){this._isShow?(this._geoEl.style.display="block",this._assistEl&&(this._assistEl.style.display="block")):(this._geoEl.style.display="none",this._assistEl&&(this._assistEl.style.display="none"))}},{key:"updateDeleted",value:function(t){this.updateShow(!t)}},{key:"updateAssist",value:function(t,e){if(this._isHighlight=t,this._isSelected=e,!t&&!e)return this._assistEl&&this._svgEl.removeChild(this._assistEl),void(this._assistEl=null);this.__updateAssistEl__()}},{key:"destory",value:function(){this.$el.remove()}},{key:"_trace",value:function(){this._isTraced&&this._isShow&&(this._tracedEl||(this._tracedEl=s("g"),this.$_svgEl.prepend(this._tracedEl)),this._tracedEl.appendChild(this._geoEl.cloneNode(!0)))}},{key:"getTraceEl",value:function(){return this._tracedEl}},{key:"setTraceEl",value:function(t){this._tracedEl=t,this.$_svgEl.prepend(t)}},{key:"__updateAssistEl__",value:function(){this._assistEl&&this._svgEl.removeChild(this._assistEl),this._assistEl=this._geoEl.cloneNode(!0),this._assistEl.style.display="block",this._assistEl.setAttributeNS(null,"fill","none"),this._assistEl.setAttributeNS(null,"stroke","#ff00ff"),this._assistEl.setAttributeNS(null,"stroke-opacity",1),this._assistEl.setAttributeNS(null,"stroke-width",this._width+c),this._isHighlight?this._assistEl.setAttributeNS(null,"stroke-dasharray","15,5"):this._assistEl.removeAttributeNS(null,"stroke-dasharray"),this.$_svgEl.prepend(this._assistEl)}},{key:"__updateStroke__",value:function(t){if(t){this._geoEl.setAttributeNS(null,"stroke-width",t.width),this._geoEl.setAttributeNS(null,"stroke",t.color),this._geoEl.setAttributeNS(null,"stroke-opacity",t.opacity),this._width=parseFloat(t.width),this._assistEl&&this._assistEl.setAttributeNS(null,"stroke-width",this._width+c),this._arrowView&&this._arrowView.style(t);var e=t.style;"solid"!=e?this._geoEl.setAttributeNS(null,"stroke-dasharray","dashed1"==e?"10,10":"10,5,10"):this._geoEl.removeAttributeNS(null,"stroke-dasharray")}}},{key:"__updateFill__",value:function(t){if(t){this._isFilled=0!=t.opacity,this._geoEl.setAttributeNS(null,"fill-opacity",t.opacity);var e=parseInt(t.texture);e?(this._defsEl||(this._defsEl=s("defs")),this._pattern&&this._defsEl.removeChild(this._pattern.el),this._pattern=new u[e]({color:t.color,opacity:t.opacity}),this._defsEl.appendChild(this._pattern.el),this._svgEl.appendChild(this._defsEl),this._geoEl.setAttributeNS(null,"fill","url(#"+this._pattern.getId()+")")):this._geoEl.setAttributeNS(null,"fill",0==t.opacity?"none":t.color)}}},{key:"__uglyGeo__",value:function(){}},{key:"_onBlickChange",value:function(){console.warn("_onBlickChange need be override.")}},{key:"resize",value:function(t,e){this.$_svgEl.css("width",t).css("height",e)}}]),t}();t.exports=l},function(t,e,n){"use strict";var i=n(186).charAt,r=n(53),o=n(63),s=n(219),a=o.set,u=o.getterFor("String Iterator");s(String,"String",(function(t){a(this,{type:"String Iterator",string:r(t),index:0})}),(function(){var t,e=u(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=i(n,r),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var i=n(9),r=n(59),o=n(26),s=n(71),a=n(168),u=i.Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&s(e.prototype,u(t))}},function(t,e,n){var i=n(13),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},function(t,e,n){var i=n(13),r=n(26),o=n(134),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},function(t,e,n){var i=n(13),r=n(17),o=n(26),s=n(88),a=n(59),u=n(118),c=function(){},l=[],f=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=i(h.exec),d=!h.exec(c),y=function(t){if(!o(t))return!1;try{return f(c,l,t),!0}catch(t){return!1}},v=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(h,u(t))}catch(t){return!0}};v.sham=!0,t.exports=!f||r((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?v:y},function(t,e,n){"use strict";var i=n(104),r=n(44),o=n(84);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},function(t,e,n){"use strict";var i=n(29),r=n(13),o=n(109),s=n(60),a=n(156),u=r([].join),c=o!=Object,l=a("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return u(s(this),void 0===t?",":t)}})},function(t,e,n){var i=n(13),r=n(41),o=n(305);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var i=n(9),r=n(71),o=i.TypeError;t.exports=function(t,e){if(r(e,t))return t;throw o("Incorrect invocation")}},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(178),s=i.extend({defaults:{show:!0,traced:!1},initialize:function(){this.strokeModel=new r,this.arrowModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t}});t.exports=s},,function(t,e,n){var i=n(91),r=n(134);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,e,n){var i=n(9),r=n(35),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,n){var i=n(126),r=n(117),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e,n){var i=n(77);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(29),r=n(40);i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return r(URL.prototype.toString,this)}})},function(t,e,n){"use strict";var i=n(29),r=n(13),o=n(571),s=n(74),a=n(53),u=n(572),c=r("".indexOf);i({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(9),r=n(244),o=n(245),s=n(87),a=n(61),u=n(25),c=u("iterator"),l=u("toStringTag"),f=s.values,h=function(t,e){if(t){if(t[c]!==f)try{a(t,c,f)}catch(e){t[c]=f}if(t[l]||a(t,l,e),r[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var p in r)h(i[p]&&i[p].prototype,p);h(o,"DOMTokenList")},,function(t,e,n){var i=n(9),r=n(135),o=i["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=o},function(t,e,n){var i=n(9),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var i=n(17),r=n(26),o=/#|\.prototype\./,s=function(t,e){var n=u[a(t)];return n==l||n!=c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},function(t,e,n){var i={};i[n(25)("toStringTag")]="z",t.exports="[object z]"===String(i)},function(t,e,n){var i=n(9),r=n(78),o=n(46),s=n(120),a=i.Array,u=Math.max;t.exports=function(t,e,n){for(var i=o(t),c=r(e,i),l=r(void 0===n?i:n,i),f=a(u(l-c,0)),h=0;c<l;c++,h++)s(f,h,t[c]);return f.length=h,f}},function(t,e){t.exports={}},function(t,e,n){var i=n(88),r=n(110),o=n(140),s=n(25)("iterator");t.exports=function(t){if(null!=t)return r(t,s)||r(t,"@@iterator")||o[i(t)]}},,function(t,e,n){var i=n(94),r=n(17);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},function(t,e,n){var i=n(60),r=n(78),o=n(46),s=function(t){return function(e,n,s){var a,u=i(e),c=o(u),l=r(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){var i=n(171),r=n(136);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";n(75),n(185);var i,r,o,s,a,u,c,l=(i=navigator.userAgent,r=/(?:Windows Phone)/.test(i),o=/(?:SymbianOS)/.test(i)||r,s=/(?:Android)/.test(i),a=/(?:Firefox)/.test(i),u=/(?:iPad|PlayBook)/.test(i)||s&&!/(?:Mobile)/.test(i)||a&&/(?:Tablet)/.test(i),c=/(?:iPhone)/.test(i)&&!u,u?"pad":s||c||o?screen.width>1e3||screen.height>1e3?"pad":"phone":"pc");t.exports={userAgent:l,isPc:"pc"===l,isPad:"pad"===l,isPhone:"phone"===l,isIOS:!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||"pc"!==l}},function(t,e,n){"use strict";n(87);var i=n(29),r=n(9),o=n(59),s=n(40),a=n(13),u=n(265),c=n(52),l=n(173),f=n(98),h=n(257),p=n(63),d=n(123),y=n(26),v=n(39),_=n(81),g=n(88),m=n(41),x=n(35),P=n(53),w=n(80),M=n(84),b=n(157),R=n(141),S=n(191),k=n(25),E=n(187),A=k("iterator"),C=p.set,T=p.getterFor("URLSearchParams"),L=p.getterFor("URLSearchParamsIterator"),B=o("fetch"),V=o("Request"),O=o("Headers"),N=V&&V.prototype,D=O&&O.prototype,G=r.RegExp,F=r.TypeError,I=r.decodeURIComponent,U=r.encodeURIComponent,z=a("".charAt),H=a([].join),$=a([].push),j=a("".replace),X=a([].shift),Y=a([].splice),W=a("".split),q=a("".slice),J=/\+/g,Z=Array(4),K=function(t){return Z[t-1]||(Z[t-1]=G("((?:%[\\da-f]{2}){"+t+"})","gi"))},Q=function(t){try{return I(t)}catch(e){return t}},tt=function(t){var e=j(t,J," "),n=4;try{return I(e)}catch(t){for(;n;)e=j(e,K(n--),Q);return e}},et=/[!'()~]|%20/g,nt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},it=function(t){return nt[t]},rt=function(t){return j(U(t),et,it)},ot=h((function(t,e){C(this,{type:"URLSearchParamsIterator",iterator:b(T(t).entries),kind:e})}),"Iterator",(function(){var t=L(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n}),!0),st=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===z(t,0)?q(t,1):t:P(t)))};st.prototype={type:"URLSearchParams",bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,i,r,o,a,u,c=R(t);if(c)for(n=(e=b(t,c)).next;!(i=s(n,e)).done;){if(o=(r=b(m(i.value))).next,(a=s(o,r)).done||(u=s(o,r)).done||!s(o,r).done)throw F("Expected sequence with length 2");$(this.entries,{key:P(a.value),value:P(u.value)})}else for(var l in t)v(t,l)&&$(this.entries,{key:l,value:P(t[l])})},parseQuery:function(t){if(t)for(var e,n,i=W(t,"&"),r=0;r<i.length;)(e=i[r++]).length&&(n=W(e,"="),$(this.entries,{key:tt(X(n)),value:tt(H(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],i=0;i<e.length;)t=e[i++],$(n,rt(t.key)+"="+rt(t.value));return H(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var at=function(){d(this,ut);var t=arguments.length>0?arguments[0]:void 0;C(this,new st(t))},ut=at.prototype;if(l(ut,{append:function(t,e){S(arguments.length,2);var n=T(this);$(n.entries,{key:P(t),value:P(e)}),n.updateURL()},delete:function(t){S(arguments.length,1);for(var e=T(this),n=e.entries,i=P(t),r=0;r<n.length;)n[r].key===i?Y(n,r,1):r++;e.updateURL()},get:function(t){S(arguments.length,1);for(var e=T(this).entries,n=P(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){S(arguments.length,1);for(var e=T(this).entries,n=P(t),i=[],r=0;r<e.length;r++)e[r].key===n&&$(i,e[r].value);return i},has:function(t){S(arguments.length,1);for(var e=T(this).entries,n=P(t),i=0;i<e.length;)if(e[i++].key===n)return!0;return!1},set:function(t,e){S(arguments.length,1);for(var n,i=T(this),r=i.entries,o=!1,s=P(t),a=P(e),u=0;u<r.length;u++)(n=r[u]).key===s&&(o?Y(r,u--,1):(o=!0,n.value=a));o||$(r,{key:s,value:a}),i.updateURL()},sort:function(){var t=T(this);E(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=T(this).entries,i=_(t,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new ot(this,"keys")},values:function(){return new ot(this,"values")},entries:function(){return new ot(this,"entries")}},{enumerable:!0}),c(ut,A,ut.entries,{name:"entries"}),c(ut,"toString",(function(){return T(this).serialize()}),{enumerable:!0}),f(at,"URLSearchParams"),i({global:!0,forced:!u},{URLSearchParams:at}),!u&&y(O)){var ct=a(D.has),lt=a(D.set),ft=function(t){if(x(t)){var e,n=t.body;if("URLSearchParams"===g(n))return e=t.headers?new O(t.headers):new O,ct(e,"content-type")||lt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(t,{body:M(0,P(n)),headers:M(0,e)})}return t};if(y(B)&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return B(t,arguments.length>1?ft(arguments[1]):{})}}),y(V)){var ht=function(t){return d(this,N),new V(t,arguments.length>1?ft(arguments[1]):{})};N.constructor=ht,ht.prototype=N,i({global:!0,forced:!0},{Request:ht})}}t.exports={URLSearchParams:at,getState:T}},function(t,e,n){"use strict";var i=n(0)(n(28));n(130),n(3),n(22),t.exports=function(t,e){var n,r,o,s;if(e)return t._attributes.isSegmentColor&&!t._attributes.isSegmentColor.get()?(n=t.element,r=e,o=n.displayModel.strokeModel.toJSON(),s=n.displayModel.fillModel.toJSON(),r.forEach((function(t){t.userData.dis=(0,i.default)(t.userData.dis,{stroke:o,fill:s})})),r):e}},function(t,e,n){"use strict";var i=n(0)(n(28));t.exports=function(t){return(0,i.default)(t.prototype,{isFreeAssist:!0,canAlign:!0,getPosition:function(){return this._attributes.position.get()},moveToPos:function(t){var e={left:t.x,top:t.y};this.element.fromJSON3({def:{attr:{position:e}}})}}),t}},function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(9),r=n(119),o=n(111),s=i.TypeError;t.exports=function(t){if(r(t))return t;throw s(o(t)+" is not a constructor")}},function(t,e,n){var i=n(42),r=n(170),o=n(44),s=n(41),a=n(60),u=n(145);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=u(e),c=r.length,l=0;c>l;)o.f(t,n=r[l++],i[n]);return t}},function(t,e,n){var i=n(239);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},function(t,e,n){"use strict";var i,r,o=n(40),s=n(13),a=n(53),u=n(183),c=n(184),l=n(126),f=n(80),h=n(63).get,p=n(242),d=n(243),y=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,_=v,g=s("".charAt),m=s("".indexOf),x=s("".replace),P=s("".slice),w=(r=/b*/g,o(v,i=/a/,"a"),o(v,r,"a"),0!==i.lastIndex||0!==r.lastIndex),M=c.BROKEN_CARET,b=void 0!==/()??/.exec("")[1];(w||b||M||p||d)&&(_=function(t){var e,n,i,r,s,c,l,p=this,d=h(p),R=a(t),S=d.raw;if(S)return S.lastIndex=p.lastIndex,e=o(_,S,R),p.lastIndex=S.lastIndex,e;var k=d.groups,E=M&&p.sticky,A=o(u,p),C=p.source,T=0,L=R;if(E&&(A=x(A,"y",""),-1===m(A,"g")&&(A+="g"),L=P(R,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==g(R,p.lastIndex-1))&&(C="(?: "+C+")",L=" "+L,T++),n=new RegExp("^(?:"+C+")",A)),b&&(n=new RegExp("^"+C+"$(?!\\s)",A)),w&&(i=p.lastIndex),r=o(v,E?n:p,L),E?r?(r.input=P(r.input,T),r[0]=P(r[0],T),r.index=p.lastIndex,p.lastIndex+=r[0].length):p.lastIndex=0:w&&r&&(p.lastIndex=p.global?r.index+r[0].length:i),b&&r&&r.length>1&&o(y,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&k)for(r.groups=c=f(null),s=0;s<k.length;s++)c[(l=k[s])[0]]=r[l[1]];return r}),t.exports=_},function(t,e,n){"use strict";var i=n(17);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},function(t,e,n){var i=n(9),r=n(40),o=n(69),s=n(41),a=n(111),u=n(141),c=i.TypeError;t.exports=function(t,e){var n=arguments.length<2?u(t):e;if(o(n))return s(r(n,t));throw c(a(t)+" is not iterable")}},function(t,e,n){var i=n(41),r=n(152),o=n(25)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[o])?e:r(n)}},function(t,e,n){"use strict";var i=n(29),r=n(274).trim;i({target:"String",proto:!0,forced:n(314)("trim")},{trim:function(){return r(this)}})},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=n(217),a=s.isInRect,u=s.viewStyle,c=n(197),l=n(146).userAgent,f=function(){function t(e,n,i,o,s,a){var u=this;(0,r.default)(this,t),this._$parentEL=e,this.model=n,this.displayModel=n.displayModel,this.paper=i,this.paperView=s,this.beforeLoading=a,this._forceRender=!1,this.heightLight=!1,this._isExist=!0,this.model.on("BLICK",(function(t){return u._onBlickChange})),this.div_el=document.createElement("div"),this.div_el.className=c["assist-view"]+" "+(c[l]||""),this.$div_el=$(this.div_el),this.el=this.__createElement__("div",o),this.$el=$(this.el),this.__renderEl__(),this.__baseEvents__(),this.__addEvents__(),this.div_el.appendChild(this.el)}return(0,o.default)(t,[{key:"isDeleted",value:function(){return this.model.get("isDeleted")}},{key:"onRender",value:function(t){if(!(t=t||this.model).get("isDeleted"))return t.calculateShow&&t.calculateShow(),t.calculateGeo&&t.calculateGeo(),t.innerCalculate&&t.innerCalculate(),this.isRender()&&(t.calculateStroke&&t.calculateStroke(),t.calculateFill&&t.calculateFill(),this.setBenchmarkPointPosition()),this.div_el}},{key:"isRender",value:function(){return!this.isDeleted()&&!!(this.model.displayModel.get("show")||this._forceRender||this.heightLight)}},{key:"forceRender",value:function(t){this._forceRender=t,this.outPutNeedUpdate=!0,this.onStatusChange()}},{key:"updateHighlight",value:function(t){this.heightLight=t,this.isRender()&&(this.outPutNeedUpdate=!0),this.onStatusChange(),this.onSelectedChange()}},{key:"updateSelected",value:function(t){this.selected=t,this.onSelectedChange()}},{key:"onSelectedChange",value:function(){this.div_el.style.boxShadow=this.heightLight?"0px 0px 0px 2px #f0f":this.selected?"0px 0px 5px #f0f":""}},{key:"onStatusChange",value:function(){return this.outPutNeedUpdate=!0,this.isRender()&&this._isExist?(this.updateShow(),!0):(this.hide(),!1)}},{key:"hide",value:function(){this.div_el.style.display="none"}},{key:"updateShow",value:function(){this.div_el.style.display="block"}},{key:"selectedByTarget",value:function(t){return!!this.isRender()&&this._selectedByTarget(t)}},{key:"_selectedByTarget",value:function(t){return this.div_el.contains(t)}},{key:"selectedByPos",value:function(t,e,n){return!!this.isRender()&&this._selectedByTarget(n)}},{key:"isInRect",value:function(t,e){if(!this.isRender())return!1;var n=this.model.output_Model.position,i=this.div_el.clientWidth,r=this.div_el.clientHeight;return a(t,e,n.left,n.top,i,r)}},{key:"getWidthAndHeight",value:function(){return{width:this.div_el.clientWidth,height:this.div_el.clientHeight}}},{key:"setBenchmarkPointPosition",value:function(){var t=this.model.output_Model.position,e=t.left,n=t.top,i=this.div_el.clientWidth,r=this.div_el.clientHeight;this.benchmark={top:{x:e+i/2,y:n},right:{x:e+i,y:n+r/2},bottom:{x:e+i/2,y:n+r},left:{x:e,y:n+r/2}}}},{key:"getBenchmarkPointPosition",value:function(){return this.benchmark}},{key:"__createElement__",value:function(t,e,n){var i=document.createElement(t);return e&&(i.className=e),n&&(i.innerHTML=n),i}},{key:"detach",value:function(){this.$div_el.detach()}},{key:"append",value:function(){this._$parentEL.append(this.$div_el)}},{key:"__detach__",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"__renderEl__",value:function(){}},{key:"__baseEvents__",value:function(){var t=this;this.model.on("change:isDeleted",(function(){t.onStatusChange()})),this.model.displayModel.on("change:show",(function(){t.onStatusChange()})),this.model.on("change:zIndex",(function(){t.onZIndexChange(t.model)})),this.model.on("OUTPUT_CHANGE",(function(){t.onOutputChange(t.model)})),this.onStatusChange(),this.onZIndexChange(this.model),this.onOutputChange(this.model),this.displayModel.fillModel&&(this.displayModel.fillModel.on("change",(function(e){t.onFillChange(e)})),this.onFillChange(this.model.displayModel.fillModel)),this.displayModel.strokeModel&&(this.displayModel.strokeModel.on("change:color",(function(e){t.onStrokeCChange(e)})),this.displayModel.strokeModel.on("change:opacity",(function(e){t.onStrokeCChange(e)})),this.displayModel.strokeModel.on("change:width",(function(e){t.onStrokeWChange(e)})),this.displayModel.strokeModel.on("change:style",(function(e){t.onStrokeSChange(e)})),this.onStrokeWChange(this.model.displayModel.strokeModel),this.onStrokeSChange(this.model.displayModel.strokeModel),this.onStrokeCChange(this.model.displayModel.strokeModel))}},{key:"__addEvents__",value:function(){}},{key:"_onRender",value:function(){}},{key:"onZIndexChange",value:function(t){this.div_el.style.zIndex=t.get("zIndex")}},{key:"onStrokeWChange",value:function(t){this.el.style.borderWidth=t.get("width")+"px"}},{key:"onStrokeSChange",value:function(t){this.el.style.borderStyle=u[t.get("style")]}},{key:"onStrokeCChange",value:function(t){this.el.style.borderColor=t.toRgbaString()}},{key:"onFillChange",value:function(t){this.el.style.backgroundColor=t.toRgbaString()}},{key:"onOutputChange",value:function(t){this.onPositionChange(t.output_Model)}},{key:"onPositionChange",value:function(t){var e=t.position;this.div_el.style.left=e.left+"px",this.div_el.style.top=e.top+"px"}},{key:"_onBlickChange",value:function(){var t=this,e=5,n=!0;this.updateHighlight(n);var i=setInterval((function(r){0!==e?(n=!n,t.updateHighlight(n),n||e--):clearInterval(i)}),500)}}]),t}();t.exports=f},function(t,e,n){"use strict";function i(t,e){if(0===t.length)return null;var n=t.filter(e);return 0==n.length?null:n}n(70),n(3),t.exports={canDelete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(t,(function(t){return t.canBeDelete()}))},canHide:function(t){return i(t,(function(t){return t.displayModel.get("show")}))},canShow:function(t){return i(t,(function(t){return!t.displayModel.get("show")}))},canHideLabels:function(t){return i(t,(function(t){return t.nameModel&&t.get("name")&&t.nameModel.get("callShow")}))},canShowLabels:function(t){return i(t,(function(t){return t.nameModel&&!(t.get("name")&&t.nameModel.get("callShow"))}))},hasColor:function(t){for(var e,n=0;e=t[n];n++)for(var i,r=0;i=e[r];r++)if(!i.userData||!i.userData.dis)return!1;return!0}}},function(t,e,n){var i=n(9),r=n(39),o=n(26),s=n(47),a=n(128),u=n(321),c=a("IE_PROTO"),l=i.Object,f=l.prototype;t.exports=u?l.getPrototypeOf:function(t){var e=s(t);if(r(e,c))return e[c];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof l?f:null}},function(t,e,n){var i=n(31),r=n(158),o=i.TYPED_ARRAY_CONSTRUCTOR,s=i.aTypedArrayConstructor;t.exports=function(t){return s(r(t,t[o]))}},function(t,e,n){"use strict";n(130);var i=n(73).extend({defaults:{size:20,color:"#fff",opacity:1},initialize:function(){},toJSON3:function(){return this.toJSON()},toJSON:function(){return{size:this.get("size"),color:this.get("color"),opacity:this.get("opacity")}}});t.exports=i},function(t,e,n){"use strict";n(93),n(20);var i=npGeo.Utils.isZero,r=Math.sqrt,o=Math.abs,s=math.gcd,a=["x","y",""],u=["x^2","xy","y^2","x","y",""];function c(t){for(var e=0,n=0,r=0;r<t.length;r++)if(!i(t[r])){e=t[r],n=r;break}if(e>0)return t;for(var o=n;o<t.length;o++)t[o]=-t[o];return t}function l(t,e){return e&&1==t?"":e?"".concat(t/1):1==t?" + ":-1==t?" - ":t>0?" + ".concat(t/1):" - ".concat(-t)}function f(t){return t>0?"+"+t:t}function h(t,e){for(var n=!0,r="",o=0;o<t.length-1;o++)i(t[o])||(r+=l(t[o],n)+e[o],n=!1);return i(t[t.length-1])||(r+=f(t[t.length-1])),r?r+" = 0":"?"}function p(t,e){return i(e)?t+"^2":"("+t+f(-e)+")^2"}function d(t,e,n){var r=2;return e<0&&(r=-2,e=-e),i(n)?r+" \\cdot "+e+" \\cdot "+t:r+" \\cdot "+e+" \\cdot ("+t+f(-n)+")"}function y(t,e,n){return"\\frac{"+p(t,e)+"}{"+n+"^2}"}t.exports={lineGeneralToTex:function(t,e){return!t||isNaN(t.A)||isNaN(t.B)||isNaN(t.C)?"?":h(function(t){for(var e=[],n=0;n<t.length;n++){if(t[n]%1!=0)return t;e.push(parseInt(t[n]))}for(var i=s.apply(null,e),r=0;r<t.length;r++)t[r]=t[r]/i;return t}(c([t.A.toFixed(e),t.B.toFixed(e),t.C.toFixed(e)])),a)},conicGeneralToTex:function(t,e){if(!t)return"?";var n=t.a11,i=t.a12,r=t.a22,o=t.a13,s=t.a23,a=t.a33;return isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||isNaN(s)||isNaN(a)?"?":h(c([n.toFixed(e),2*i.toFixed(e),r.toFixed(e),2*o.toFixed(e),2*s.toFixed(e),a.toFixed(e)]),u)},parabolaStandardToTex:function(t,e){if(!t)return"?";var n=t.a11,r=t.a12,o=t.a13,s=t.a22,a=t.a23,u=t.a33;if(isNaN(n)||isNaN(r)||isNaN(o)||isNaN(s)||isNaN(a)||isNaN(u))return"?";var c="";if(i(n))l=(l=((f=-a/s)*f+u)*s/2/o).toFixed(e),c+=p("y",f=f.toFixed(e))+"="+d("x",-(o/s).toFixed(e),l);else if(i(s)){var l,f=((l=-o/n)*l-u)*n/2/a;l=l.toFixed(e),f=f.toFixed(e),c+=p("x",l)+"="+d("y",-(a/n).toFixed(e),f)}return c},ellipseStandardToTex:function(t,e){if(!t)return"?";var n=t.a11,i=t.a12,s=t.a13,a=t.a22,u=t.a23,c=t.a33;if(isNaN(n)||isNaN(i)||isNaN(s)||isNaN(a)||isNaN(u)||isNaN(c))return"?";var l="",f=r(o((c-s*s/n-u*u/a)/n)),h=r(o((c-s*s/n-u*u/a)/a)),p=-(s/n).toFixed(e),d=-(u/a).toFixed(e);return f>h?(f=f.toFixed(e),h=h.toFixed(e),l=y("x",p,f)+"+"+y("y",d,h)+"=1"):(f=f.toFixed(e),l=y("y",d,h=h.toFixed(e))+"+"+y("x",p,f)+"=1"),l},circleStandardToTex:function(t,e){if(!t)return"?";var n=t.a11,o=t.a13,s=t.a22,a=t.a23,u=t.a33;if(isNaN(n)||isNaN(s)||isNaN(u)||i(n)&&i(s)&&i(u))return"?";var c=-o/n,l=-a/s,f=r(c*c+l*l-u/n).toFixed(e);return c=c.toFixed(e),l=l.toFixed(e),p("x",c)+"+"+p("y",l)+"="+f+"^2"},circle00StandardToTex:function(t,e,n){return isNaN(t.x)||isNaN(t.y)||isNaN(e)?"?":p("x",t.x.toFixed(n))+"+"+p("y",t.y.toFixed(n))+"="+e.toFixed(n)+"^2"},hyperbolaStandardToTex:function(t,e){if(!t)return"?";var n=t.a11,i=t.a12,s=t.a13,a=t.a22,u=t.a23,c=t.a33;if(isNaN(n)||isNaN(i)||isNaN(s)||isNaN(a)||isNaN(u)||isNaN(c))return"?";var l=c-s*s/n-u*u/a,f=r(o(l/n)).toFixed(e),h=r(o(l/a)).toFixed(e),p=-(s/n).toFixed(e),d=-(u/a).toFixed(e);return l*n>0?y("y",d,h)+"-"+y("x",p,f)+"=1":y("x",p,f)+"-"+y("y",d,h)+"=1"},coorToStr:function(t,e){return!t||isNaN(t.x)||isNaN(t.y)?"?":"(".concat(t.x.toFixed(e)/1,", ").concat(t.y.toFixed(e)/1,")")},valToTex:function(t,e){return null==t||isNaN(t)||!t.toFixed?"?":(t=Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)/1}}},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(294),a=i.extend({defaults:{show:!0,traced:!1,traceLength:5,thickness:0,blocking:!0},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.textureModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.thickness=this.get("thickness"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=a},,function(t,e,n){var i=n(143);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var i=n(42),r=n(17),o=n(127);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(42),r=n(17);t.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,e,n){var i=n(13),r=n(39),o=n(60),s=n(144).indexOf,a=n(112),u=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,l=[];for(n in i)!r(a,n)&&r(i,n)&&u(l,n);for(;e.length>c;)r(i,n=e[c++])&&(~s(l,n)||u(l,n));return l}},function(t,e,n){var i=n(25),r=n(80),o=n(44),s=i("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},function(t,e,n){var i=n(52);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(59),r=n(44),o=n(25),s=n(42),a=o("species");t.exports=function(t){var e=i(t),n=r.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t)}return(0,o.default)(n,[{key:"createFreePointByPos",value:function(t,e){var n=this.undoRedo.constructFreePoint(this.transSTG(this.bindEvents.getCapture()?this.changePosByCapture(t):t),e);return this._isNewMacro=!1,n}},{key:"createPointOnElement",value:function(t,e,n){var i=this.transSTG(t),r=this.undoRedo.constructHFPoint(e.output_Model.isGeoList?"OnIterPoint":"OnElementPoint",[e.get("id")],e.output_Model.valueOn(i),n);return this._isNewMacro=!1,r}},{key:"moveOnElement",value:function(t,e){this.willManager.setSingleElementWillPointOn(e);var n=e.output_Model.valueOn(this.transSTG(t));t=e.output_Model.pointOn(n);var i=this.transGTS(t);return this.assistManager.setPoint(i),i}},{key:"changePosByCapture",value:function(t){return this.bindEvents.getCapture()&&(t=this.bindEvents.changeToGridPos(t),this.assistManager.setPoint(t)),t}}]),n}(n(409));t.exports=l},function(t,e,n){"use strict";var i=THREE.CanvasTexture;t.exports={zoomPoints:function(t,e,n){for(var i,r=[],o=0;i=t[o];o++)r.push(i.zoom(e,n));return r},__texture__:function(t,e){if(!t||!t.isTexture||!t.imageURL)return e(null),void(this.hasTexture=!1);var n=document.createElement("canvas");if(n.getContext){this.hasTexture=!0,n.width=1024,n.height=1024;var r=n.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.src=t.imageURL,o.onload=function(){r.drawImage(o,0,0,1024,1024),e(new i(n))}}}}},function(t,e,n){"use strict";n(115);var i,r=n(29),o=n(42),s=n(265),a=n(9),u=n(81),c=n(13),l=n(153).f,f=n(52),h=n(123),p=n(39),d=n(357),y=n(285),v=n(139),_=n(186).codeAt,g=n(359),m=n(53),x=n(98),P=n(191),w=n(147),M=n(63),b=M.set,R=M.getterFor("URL"),S=w.URLSearchParams,k=w.getState,E=a.URL,A=a.TypeError,C=a.parseInt,T=Math.floor,L=Math.pow,B=c("".charAt),V=c(/./.exec),O=c([].join),N=c(1..toString),D=c([].pop),G=c([].push),F=c("".replace),I=c([].shift),U=c("".split),z=c("".slice),H=c("".toLowerCase),$=c([].unshift),j=/[a-z]/i,X=/[\d+-.a-z]/i,Y=/\d/,W=/^0x/i,q=/^[0-7]+$/,J=/^\d+$/,Z=/^[\da-f]+$/i,K=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Q=/[\0\t\n\r #/:<>?@[\\\]^|]/,tt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,et=/[\t\n\r]/g,nt=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)$(e,t%256),t=T(t/256);return O(e,".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e}(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=N(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},it={},rt=d({},it,{" ":1,'"':1,"<":1,">":1,"`":1}),ot=d({},rt,{"#":1,"?":1,"{":1,"}":1}),st=d({},ot,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),at=function(t,e){var n=_(t,0);return n>32&&n<127&&!p(e,t)?t:encodeURIComponent(t)},ut={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ct=function(t,e){var n;return 2==t.length&&V(j,B(t,0))&&(":"==(n=B(t,1))||!e&&"|"==n)},lt=function(t){var e;return t.length>1&&ct(z(t,0,2))&&(2==t.length||"/"===(e=B(t,2))||"\\"===e||"?"===e||"#"===e)},ft=function(t){return"."===t||"%2e"===H(t)},ht={},pt={},dt={},yt={},vt={},_t={},gt={},mt={},xt={},Pt={},wt={},Mt={},bt={},Rt={},St={},kt={},Et={},At={},Ct={},Tt={},Lt={},Bt=function(t,e,n){var i,r,o,s=m(t);if(e){if(r=this.parse(s))throw A(r);this.searchParams=null}else{if(void 0!==n&&(i=new Bt(n,!0)),r=this.parse(s,null,i))throw A(r);(o=k(new S)).bindURL(this),this.searchParams=o}};Bt.prototype={type:"URL",parse:function(t,e,n){var r,o,s,a,u,c=this,l=e||ht,f=0,h="",d=!1,_=!1,g=!1;for(t=m(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=F(t,tt,"")),t=F(t,et,""),r=y(t);f<=r.length;){switch(o=r[f],l){case ht:if(!o||!V(j,o)){if(e)return"Invalid scheme";l=dt;continue}h+=H(o),l=pt;break;case pt:if(o&&(V(X,o)||"+"==o||"-"==o||"."==o))h+=H(o);else{if(":"!=o){if(e)return"Invalid scheme";h="",l=dt,f=0;continue}if(e&&(c.isSpecial()!=p(ut,h)||"file"==h&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=h,e)return void(c.isSpecial()&&ut[c.scheme]==c.port&&(c.port=null));h="","file"==c.scheme?l=Rt:c.isSpecial()&&n&&n.scheme==c.scheme?l=yt:c.isSpecial()?l=mt:"/"==r[f+1]?(l=vt,f++):(c.cannotBeABaseURL=!0,G(c.path,""),l=Ct)}break;case dt:if(!n||n.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==o){c.scheme=n.scheme,c.path=v(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Lt;break}l="file"==n.scheme?Rt:_t;continue;case yt:if("/"!=o||"/"!=r[f+1]){l=_t;continue}l=xt,f++;break;case vt:if("/"==o){l=Pt;break}l=At;continue;case _t:if(c.scheme=n.scheme,o==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=v(n.path),c.query=n.query;else if("/"==o||"\\"==o&&c.isSpecial())l=gt;else if("?"==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=v(n.path),c.query="",l=Tt;else{if("#"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=v(n.path),c.path.length--,l=At;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=v(n.path),c.query=n.query,c.fragment="",l=Lt}break;case gt:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=At;continue}l=Pt}else l=xt;break;case mt:if(l=xt,"/"!=o||"/"!=B(h,f+1))continue;f++;break;case xt:if("/"!=o&&"\\"!=o){l=Pt;continue}break;case Pt:if("@"==o){d&&(h="%40"+h),d=!0,s=y(h);for(var x=0;x<s.length;x++){var P=s[x];if(":"!=P||g){var w=at(P,st);g?c.password+=w:c.username+=w}else g=!0}h=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(d&&""==h)return"Invalid authority";f-=y(h).length+1,h="",l=wt}else h+=o;break;case wt:case Mt:if(e&&"file"==c.scheme){l=kt;continue}if(":"!=o||_){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==h)return"Invalid host";if(e&&""==h&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(h))return a;if(h="",l=Et,e)return;continue}"["==o?_=!0:"]"==o&&(_=!1),h+=o}else{if(""==h)return"Invalid host";if(a=c.parseHost(h))return a;if(h="",l=bt,e==Mt)return}break;case bt:if(!V(Y,o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||e){if(""!=h){var M=C(h,10);if(M>65535)return"Invalid port";c.port=c.isSpecial()&&M===ut[c.scheme]?null:M,h=""}if(e)return;l=Et;continue}return"Invalid port"}h+=o;break;case Rt:if(c.scheme="file","/"==o||"\\"==o)l=St;else{if(!n||"file"!=n.scheme){l=At;continue}if(o==i)c.host=n.host,c.path=v(n.path),c.query=n.query;else if("?"==o)c.host=n.host,c.path=v(n.path),c.query="",l=Tt;else{if("#"!=o){lt(O(v(r,f),""))||(c.host=n.host,c.path=v(n.path),c.shortenPath()),l=At;continue}c.host=n.host,c.path=v(n.path),c.query=n.query,c.fragment="",l=Lt}}break;case St:if("/"==o||"\\"==o){l=kt;break}n&&"file"==n.scheme&&!lt(O(v(r,f),""))&&(ct(n.path[0],!0)?G(c.path,n.path[0]):c.host=n.host),l=At;continue;case kt:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!e&&ct(h))l=At;else if(""==h){if(c.host="",e)return;l=Et}else{if(a=c.parseHost(h))return a;if("localhost"==c.host&&(c.host=""),e)return;h="",l=Et}continue}h+=o;break;case Et:if(c.isSpecial()){if(l=At,"/"!=o&&"\\"!=o)continue}else if(e||"?"!=o)if(e||"#"!=o){if(o!=i&&(l=At,"/"!=o))continue}else c.fragment="",l=Lt;else c.query="",l=Tt;break;case At:if(o==i||"/"==o||"\\"==o&&c.isSpecial()||!e&&("?"==o||"#"==o)){if(".."===(u=H(u=h))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||G(c.path,"")):ft(h)?"/"==o||"\\"==o&&c.isSpecial()||G(c.path,""):("file"==c.scheme&&!c.path.length&&ct(h)&&(c.host&&(c.host=""),h=B(h,0)+":"),G(c.path,h)),h="","file"==c.scheme&&(o==i||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)I(c.path);"?"==o?(c.query="",l=Tt):"#"==o&&(c.fragment="",l=Lt)}else h+=at(o,ot);break;case Ct:"?"==o?(c.query="",l=Tt):"#"==o?(c.fragment="",l=Lt):o!=i&&(c.path[0]+=at(o,it));break;case Tt:e||"#"!=o?o!=i&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":at(o,it)):(c.fragment="",l=Lt);break;case Lt:o!=i&&(c.fragment+=at(o,rt))}f++}},parseHost:function(t){var e,n,i;if("["==B(t,0)){if("]"!=B(t,t.length-1))return"Invalid host";if(!(e=function(t){var e,n,i,r,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return B(t,f)};if(":"==h()){if(":"!=B(t,1))return;f+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(e=n=0;n<4&&V(Z,h());)e=16*e+C(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;for(i=0;h();){if(r=null,i>0){if(!("."==h()&&i<4))return;f++}if(!V(Y,h()))return;for(;V(Y,h());){if(o=C(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;f++}u[c]=256*u[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!=c)return;return u}(z(t,1,-1))))return"Invalid host";this.host=e}else if(this.isSpecial()){if(t=g(t),V(K,t))return"Invalid host";if(null===(e=function(t){var e,n,i,r,o,s,a,u=U(t,".");if(u.length&&""==u[u.length-1]&&u.length--,(e=u.length)>4)return t;for(n=[],i=0;i<e;i++){if(""==(r=u[i]))return t;if(o=10,r.length>1&&"0"==B(r,0)&&(o=V(W,r)?16:8,r=z(r,8==o?1:2)),""===r)s=0;else{if(!V(10==o?J:8==o?q:Z,r))return t;s=C(r,o)}G(n,s)}for(i=0;i<e;i++)if(s=n[i],i==e-1){if(s>=L(256,5-e))return null}else if(s>255)return null;for(a=D(n),i=0;i<n.length;i++)a+=n[i]*L(256,3-i);return a}(t)))return"Invalid host";this.host=e}else{if(V(Q,t))return"Invalid host";for(e="",n=y(t),i=0;i<n.length;i++)e+=at(n[i],it);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(ut,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&ct(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,s=t.path,a=t.query,u=t.fragment,c=e+":";return null!==r?(c+="//",t.includesCredentials()&&(c+=n+(i?":"+i:"")+"@"),c+=nt(r),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+O(s,"/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},setHref:function(t){var e=this.parse(t);if(e)throw A(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Vt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+nt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(m(t)+":",ht)},getUsername:function(){return this.username},setUsername:function(t){var e=y(m(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=at(e[n],st)}},getPassword:function(){return this.password},setPassword:function(t){var e=y(m(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=at(e[n],st)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?nt(t):nt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,wt)},getHostname:function(){var t=this.host;return null===t?"":nt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Mt)},getPort:function(){var t=this.port;return null===t?"":m(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=m(t))?this.port=null:this.parse(t,bt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Et))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=m(t))?this.query=null:("?"==B(t,0)&&(t=z(t,1)),this.query="",this.parse(t,Tt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=m(t))?("#"==B(t,0)&&(t=z(t,1)),this.fragment="",this.parse(t,Lt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Vt=function(t){var e=h(this,Ot),n=P(arguments.length,1)>1?arguments[1]:void 0,i=b(e,new Bt(t,!1,n));o||(e.href=i.serialize(),e.origin=i.getOrigin(),e.protocol=i.getProtocol(),e.username=i.getUsername(),e.password=i.getPassword(),e.host=i.getHost(),e.hostname=i.getHostname(),e.port=i.getPort(),e.pathname=i.getPathname(),e.search=i.getSearch(),e.searchParams=i.getSearchParams(),e.hash=i.getHash())},Ot=Vt.prototype,Nt=function(t,e){return{get:function(){return R(this)[t]()},set:e&&function(t){return R(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&l(Ot,{href:Nt("serialize","setHref"),origin:Nt("getOrigin"),protocol:Nt("getProtocol","setProtocol"),username:Nt("getUsername","setUsername"),password:Nt("getPassword","setPassword"),host:Nt("getHost","setHost"),hostname:Nt("getHostname","setHostname"),port:Nt("getPort","setPort"),pathname:Nt("getPathname","setPathname"),search:Nt("getSearch","setSearch"),searchParams:Nt("getSearchParams"),hash:Nt("getHash","setHash")}),f(Ot,"toJSON",(function(){return R(this).serialize()}),{enumerable:!0}),f(Ot,"toString",(function(){return R(this).serialize()}),{enumerable:!0}),E){var Dt=E.createObjectURL,Gt=E.revokeObjectURL;Dt&&f(Vt,"createObjectURL",u(Dt,E)),Gt&&f(Vt,"revokeObjectURL",u(Gt,E))}x(Vt,"URL"),r({global:!0,forced:!s,sham:!o},{URL:Vt})},function(t,e,n){"use strict";t.exports=Backbone.Model.extend({defaults:{bArrow:!1,eArrow:!1},toJSON:function(){return{bArrow:this.get("bArrow"),eArrow:this.get("eArrow")}}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Vector3,p=f.Line3,d=f.Utils.isZero,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"_attrChanged",value:function(){this.cal_sp_ep=this[this._attributes.lineType.getValue()]}},{key:"seg_sp_ep",value:function(t,e){return t.isUgly||e.isUgly?p.createUgly():new p(t,e)}},{key:"ral_sp_ep",value:function(t,e,n){return t.isUgly||e.isUgly?p.createUgly():this.__ray_sp_direction__(t,h.createByPoints(t,e),n)}},{key:"straight_sp_ep",value:function(t,e,n){return t.isUgly||e.isUgly?p.createUgly():this.__straight_sp_direction__(h.midPoint(t,e),h.createByPoints(t,e),n)}},{key:"__ray_sp_direction__",value:function(t,e,n){return t.isUgly||d(n)?p.createUgly():new p(t,t.translate(e.normalize().multiplyScalar(n)))}},{key:"__straight_sp_direction__",value:function(t,e,n){if(t.isUgly||d(n))return p.createUgly();var i=t.translate(e.normalize().multiplyScalar(n/2));return new p(i.centroSymmetric(t),i)}}]),n}(l);y.prototype.isLine=!0,t.exports=y},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=i.extend({defaults:{show:!0,traced:!1,traceLength:5,wireframe:!1,colorful:!1,blocking:!0},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.wireframe=this.get("wireframe"),t.colorful=this.get("colorful"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},function(t,e,n){var i=n(39),r=n(237),o=n(103),s=n(44);t.exports=function(t,e,n){for(var a=r(e),u=s.f,c=o.f,l=0;l<a.length;l++){var f=a[l];i(t,f)||n&&i(n,f)||u(t,f,c(e,f))}}},function(t,e,n){var i=n(59);t.exports=i("document","documentElement")},function(t,e,n){"use strict";var i=n(41);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(17),r=n(9).RegExp,o=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=o||i((function(){return!r("a","y").sticky})),a=o||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},function(t,e,n){"use strict";var i=n(40),r=n(212),o=n(41),s=n(79),a=n(53),u=n(74),c=n(110),l=n(213),f=n(214);r("match",(function(t,e,n){return[function(e){var n=u(this),r=null==e?void 0:c(e,t);return r?i(r,e,n):new RegExp(e)[t](a(n))},function(t){var i=o(this),r=a(t),u=n(e,i,r);if(u.done)return u.value;if(!i.global)return f(i,r);var c=i.unicode;i.lastIndex=0;for(var h,p=[],d=0;null!==(h=f(i,r));){var y=a(h[0]);p[d]=y,""===y&&(i.lastIndex=l(r,s(i.lastIndex),c)),d++}return 0===d?null:p}]}))},function(t,e,n){var i=n(13),r=n(64),o=n(53),s=n(74),a=i("".charAt),u=i("".charCodeAt),c=i("".slice),l=function(t){return function(e,n){var i,l,f=o(s(e)),h=r(n),p=f.length;return h<0||h>=p?t?"":void 0:(i=u(f,h))<55296||i>56319||h+1===p||(l=u(f,h+1))<56320||l>57343?t?a(f,h):i:t?c(f,h,h+2):l-56320+(i-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},function(t,e,n){var i=n(139),r=Math.floor,o=function(t,e){var n=t.length,u=r(n/2);return n<8?s(t,e):a(t,o(i(t,0,u),e),o(i(t,u),e),e)},s=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},a=function(t,e,n,i){for(var r=e.length,o=n.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?i(e[s],n[a])<=0?e[s++]:n[a++]:s<r?e[s++]:n[a++];return t};t.exports=o},function(t,e,n){"use strict";var i,r,o,s,a=n(29),u=n(91),c=n(9),l=n(59),f=n(40),h=n(304),p=n(52),d=n(173),y=n(122),v=n(98),_=n(174),g=n(69),m=n(26),x=n(35),P=n(123),w=n(118),M=n(249),b=n(190),R=n(158),S=n(251).set,k=n(306),E=n(309),A=n(310),C=n(253),T=n(311),L=n(312),B=n(63),V=n(137),O=n(25),N=n(313),D=n(192),G=n(94),F=O("species"),I="Promise",U=B.getterFor(I),z=B.set,H=B.getterFor(I),$=h&&h.prototype,j=h,X=$,Y=c.TypeError,W=c.document,q=c.process,J=C.f,Z=J,K=!!(W&&W.createEvent&&c.dispatchEvent),Q=m(c.PromiseRejectionEvent),tt=!1,et=V(I,(function(){var t=w(j),e=t!==String(j);if(!e&&66===G)return!0;if(u&&!X.finally)return!0;if(G>=51&&/native code/.test(t))return!1;var n=new j((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};return(n.constructor={})[F]=i,!(tt=n.then((function(){}))instanceof i)||!e&&N&&!Q})),nt=et||!b((function(t){j.all(t).catch((function(){}))})),it=function(t){var e;return!(!x(t)||!m(e=t.then))&&e},rt=function(t,e){var n,i,r,o=e.value,s=1==e.state,a=s?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{a?(s||(2===e.rejection&&ct(e),e.rejection=1),!0===a?n=o:(l&&l.enter(),n=a(o),l&&(l.exit(),r=!0)),n===t.promise?c(Y("Promise-chain cycle")):(i=it(n))?f(i,n,u,c):u(n)):c(o)}catch(t){l&&!r&&l.exit(),c(t)}},ot=function(t,e){t.notified||(t.notified=!0,k((function(){for(var n,i=t.reactions;n=i.get();)rt(n,t);t.notified=!1,e&&!t.rejection&&at(t)})))},st=function(t,e,n){var i,r;K?((i=W.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),c.dispatchEvent(i)):i={promise:e,reason:n},!Q&&(r=c["on"+t])?r(i):"unhandledrejection"===t&&A("Unhandled promise rejection",n)},at=function(t){f(S,c,(function(){var e,n=t.facade,i=t.value;if(ut(t)&&(e=T((function(){D?q.emit("unhandledRejection",i,n):st("unhandledrejection",n,i)})),t.rejection=D||ut(t)?2:1,e.error))throw e.value}))},ut=function(t){return 1!==t.rejection&&!t.parent},ct=function(t){f(S,c,(function(){var e=t.facade;D?q.emit("rejectionHandled",e):st("rejectionhandled",e,t.value)}))},lt=function(t,e,n){return function(i){t(e,i,n)}},ft=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,ot(t,!0))},ht=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Y("Promise can't be resolved itself");var i=it(e);i?k((function(){var n={done:!1};try{f(i,e,lt(ht,n,t),lt(ft,n,t))}catch(e){ft(n,e,t)}})):(t.value=e,t.state=1,ot(t,!1))}catch(e){ft({done:!1},e,t)}}};if(et&&(X=(j=function(t){P(this,X),g(t),f(i,this);var e=U(this);try{t(lt(ht,e),lt(ft,e))}catch(t){ft(e,t)}}).prototype,(i=function(t){z(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:0,value:void 0})}).prototype=d(X,{then:function(t,e){var n=H(this),i=J(R(this,j));return n.parent=!0,i.ok=!m(t)||t,i.fail=m(e)&&e,i.domain=D?q.domain:void 0,0==n.state?n.reactions.add(i):k((function(){rt(i,n)})),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i,e=U(t);this.promise=t,this.resolve=lt(ht,e),this.reject=lt(ft,e)},C.f=J=function(t){return t===j||t===o?new r(t):Z(t)},!u&&m(h)&&$!==Object.prototype)){s=$.then,tt||(p($,"then",(function(t,e){var n=this;return new j((function(t,e){f(s,n,t,e)})).then(t,e)}),{unsafe:!0}),p($,"catch",X.catch,{unsafe:!0}));try{delete $.constructor}catch(t){}y&&y($,X)}a({global:!0,wrap:!0,forced:et},{Promise:j}),v(j,I,!1,!0),_(I),o=l(I),a({target:I,stat:!0,forced:et},{reject:function(t){var e=J(this);return f(e.reject,void 0,t),e.promise}}),a({target:I,stat:!0,forced:u||et},{resolve:function(t){return E(u&&this===o?j:this,t)}}),a({target:I,stat:!0,forced:nt},{all:function(t){var e=this,n=J(e),i=n.resolve,r=n.reject,o=T((function(){var n=g(e.resolve),o=[],s=0,a=1;M(t,(function(t){var u=s++,c=!1;a++,f(n,e,t).then((function(t){c||(c=!0,o[u]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=J(e),i=n.reject,r=T((function(){var r=g(e.resolve);M(t,(function(t){f(r,e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},function(t,e,n){var i=n(25),r=n(140),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},function(t,e,n){var i=n(25)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var i=n(9).TypeError;t.exports=function(t,e){if(t<e)throw i("Not enough arguments");return t}},function(t,e,n){var i=n(77),r=n(9);t.exports="process"==i(r.process)},function(t,e,n){"use strict";var i=n(47),r=n(78),o=n(46);t.exports=function(t){for(var e=i(this),n=o(e),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:r(u,n);c>a;)e[a++]=t;return e}},function(t,e,n){var i=n(26),r=n(35),o=n(122);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},function(t,e,n){"use strict";var i=n(85),r=n(40),o=n(13),s=n(212),a=n(215),u=n(41),c=n(74),l=n(158),f=n(213),h=n(79),p=n(53),d=n(110),y=n(139),v=n(214),_=n(155),g=n(184),m=n(17),x=g.UNSUPPORTED_Y,P=Math.min,w=[].push,M=o(/./.exec),b=o(w),R=o("".slice);s("split",(function(t,e,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var o=p(c(this)),s=void 0===n?4294967295:n>>>0;if(0===s)return[];if(void 0===t)return[o];if(!a(t))return r(e,o,t,s);for(var u,l,f,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=new RegExp(t.source,d+"g");(u=r(_,g,o))&&!((l=g.lastIndex)>v&&(b(h,R(o,v,u.index)),u.length>1&&u.index<o.length&&i(w,h,y(u,1)),f=u[0].length,v=l,h.length>=s));)g.lastIndex===u.index&&g.lastIndex++;return v===o.length?!f&&M(g,"")||b(h,""):b(h,R(o,v)),h.length>s?y(h,0,s):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:r(e,this,t,n)}:e,[function(e,n){var i=c(this),s=null==e?void 0:d(e,t);return s?r(s,e,i,n):r(o,p(i),e,n)},function(t,i){var r=u(this),s=p(t),a=n(o,r,s,i,o!==e);if(a.done)return a.value;var c=l(r,RegExp),d=r.unicode,y=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(x?"g":"y"),_=new c(x?"^(?:"+r.source+")":r,y),g=void 0===i?4294967295:i>>>0;if(0===g)return[];if(0===s.length)return null===v(_,s)?[s]:[];for(var m=0,w=0,M=[];w<s.length;){_.lastIndex=x?0:w;var S,k=v(_,x?R(s,w):s);if(null===k||(S=P(h(_.lastIndex+(x?w:0)),s.length))===m)w=f(s,w,d);else{if(b(M,R(s,m,w)),M.length===g)return M;for(var E=1;E<=k.length-1;E++)if(b(M,k[E]),M.length===g)return M;w=m=S}}return b(M,R(s,m)),M}]}),!!m((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),x)},function(t,e,n){"use strict";n(48);var i=npGeo,r=i.Vector2,o=i.Circle2,s=i.Utils,a=s.ANGLE_PER_ARC,u=s.ARC_PER_ANGLE,c=Math.abs,l=[];!function(){(l=[]).push(new r(1,0));for(var t=new o(new r(0,0),1),e=0;e<360;)e+=15,l.push(t.pointOn(u*e))}();t.exports={getPosBy:function(t,e){for(var n,i,o=r.createByPoints(t,e),s=o.length(),u=0;i=l[u];u++)if(a*o.directionAngleWith(i)<=7.5){n=i;break}return n?{x:n.x*s+t.x,y:n.y*s+t.y}:e},getScaleForMouse:function(t){var e=t.wheelDelta||t.detail;return e<-500?e=-500:e>500&&(e=500),1+e/1e3},hasPointInArr:function(t){for(var e,n=t.length-1;e=t[n];n--)if(e.output_Model.isPoint)return e;return!1},hasLabelLineInArr:function(t){for(var e,n=t.length-1;e=t[n];n--)if(e.output_Model.isLinear)return e;return!1},getThreePointModels:function(t){if(!t)return!1;for(var e,n=[],i=t.length-1;e=t[i];i--)e.output_Model.isPoint&&n.push(e);return n.length>2&&n.splice(0,3)},isInallowedBand:function(t,e,n){return c(e.x-t.x)<(n||10)&&c(e.y-t.y)<(n||10)}}},function(t,e,n){var i=n(96),r=n(626);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={injectType:"singletonStyleTag",attributes:{name:"NetpadDynamicMath"},insert:"head",singleton:!0};i(r,o);t.exports=r.locals||{}},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(19)),a=THREE.Group,u=function(){function t(e,n){(0,r.default)(this,t),(0,s.default)(this,"_isSelected",!1),(0,s.default)(this,"_isHighlight",!1),(0,s.default)(this,"_isTraced",!1),(0,s.default)(this,"_traceLength",1),(0,s.default)(this,"_tracedGroup",null),(0,s.default)(this,"_highLightMesh",null),(0,s.default)(this,"_assistMesh",null),(0,s.default)(this,"_selectedMesh",null),this._scene=e,this._paper=n,this._group=new a,this._geoGroup=new a,this._group.add(this._geoGroup),this._scene.add(this._group)}return(0,o.default)(t,[{key:"update_geo",value:function(t){console.warn("Must be override ...")}},{key:"updateMaterial",value:function(t){console.warn("Must be override ...")}},{key:"updateTrace",value:function(t,e){this._isTraced=t,this._traceLength=e,this._isTraced?this._traceWithoutPush(e):this.clearTrace()}},{key:"clearTrace",value:function(){this._tracedGroup&&(this._disposeChild(this._tracedGroup),this._tracedGroup=null)}},{key:"updateShow",value:function(t){var e=t?"add":"remove";this._group[e](this._geoGroup),this._tracedGroup&&this._group[e](this._tracedGroup)}},{key:"updateDeleted",value:function(t){t?this._scene.remove(this._group):this._scene.add(this._group)}},{key:"raycaster",value:function(t){return this._selectableMesh.updateMatrixWorld(!0),t.intersectObject(this._selectableMesh,!0)[0]}},{key:"updateAssist",value:function(t,e){this._isHighlight=t,this._isSelected=e,t||e?(this._assistMesh.material.setValues({color:t?16711680:16711935}),this._geoGroup.add(this._assistMesh)):this._geoGroup.remove(this._assistMesh)}},{key:"destory",value:function(){this._disposeChild(this._geoGroup),this._tracedGroup&&this._disposeChild(this._tracedGroup)}},{key:"_updateSelectMesh",value:function(t){this._selectableMesh=t}},{key:"_disposeChild",value:function(t){this._group.remove(t),t.traverse((function(t){t.isMesh&&t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&t.material.dispose&&t.material.dispose()}))}},{key:"_trace",value:function(){this._isTraced&&(this._traceWithoutPush(this._traceLength),this._tracedGroup.add(this._geoMesh.clone()))}},{key:"_traceWithoutPush",value:function(t){if(!this._tracedGroup)return this._tracedGroup=new a,void this._group.add(this._tracedGroup);for(;this._tracedGroup.children.length>t;){var e=this._tracedGroup.children.shift();this._disposeChild(e)}}},{key:"_updateMaterialStroke",value:function(t,e){"solid"==t.style?(e.dashed=!1,delete e.defines.USE_DASH):(e.dashed=!0,e.defines.USE_DASH="",e.dashSize="dashed1"==t.style?.1:.2,e.gapSize=.1),e.setValues({color:t.color,opacity:t.opacity,linewidth:t.width/500}),e.needsUpdate=!0}}]),t}();t.exports=u},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(220),p=n(176).zoomPoints,d=THREE,y=d.Group,v=(d.Geometry,d.FrontSide),_=d.BackSide,g=d.Mesh,m=d.MeshStandardMaterial,x=d.MeshNormalMaterial,P={transparent:!0,side:v,roughness:1,metalness:.2},w={transparent:!0,side:_,roughness:1,metalness:.2},M=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"_flatShading",!0),o._initWireframeMesh(o._wireframeGeometry),o}return(0,o.default)(n,[{key:"_initSurfaceMesh",value:function(t){var e=new m(P),n=new m(w);this._frontSideMesh=new g(t,e),this._backSideMesh=new g(t,n),this._geoMesh=new y,this._geoMesh.add(this._frontSideMesh),this._geoMesh.add(this._backSideMesh),this._updateSelectMesh(this._geoMesh),this._geoGroup.add(this._geoMesh)}},{key:"update_geo",value:function(t){var e;e=t.centre?p(t.vertices,t.centre,.996):t.vertices;var n=this._createSurfaceGeometryByNPGeo(t,e);this._updateSurfaceGeometry(n),this._updateWireframeGeometry(t.wireframePosition),this._trace()}},{key:"updateMaterial",value:function(t){var e=t.colorful,n=t.wireframe,i=t.blocking,r=t.fill,o=t.stroke,s=t.texture;this._updateSurfaceMaterial(e,n,s,r.color,r.opacity),this._updateWireframeMaterial(i,n,o.color,o.opacity,o.width/500),this._updateDepthMaterial(i,o.color,o.opacity,o.width/600),this._assistMesh.material.setValues({linewidth:o.width/300}),this._updateRenderOrder(i)}},{key:"_updateWireframeMaterial",value:function(t,e,n,i,r){e&&this._updateSurfaceMaterial00(n,0),this._wireframeMesh.material.setValues({color:n,opacity:i,linewidth:r})}},{key:"_updateDepthMaterial",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;t?(this._depthMesh||this._initDepthMesh(this._wireframeGeometry),this._depthMesh.material.setValues({color:e,opacity:n,linewidth:i})):this._depthMesh&&(this._geoMesh.remove(this._depthMesh),this._depthMesh.material.dispose(),this._depthMesh=null)}},{key:"_updateColorful",value:function(t,e){var n,i;(e&&(t=!1),this._colorful!=t)&&(this._colorful=t,t?(n=new x({transparent:!0,side:v,depthTest:!0,flatShading:this._flatShading}),i=new x({transparent:!0,side:_,depthTest:!0,flatShading:this._flatShading})):(n=new m(P),i=new m(w)),this._frontSideMesh.material=n,this._backSideMesh.material=i)}}]),n}(h);t.exports=M},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(220),f=n(176).zoomPoints,h=npGeo.Vector3,p=THREE,d=p.Geometry,y=p.Mesh,v=p.Vector3,_=p.Face3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){return(0,r.default)(this,n),e.call(this,t,i)}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e;if(this._wireframe){var n=h.midPoint(t.topSideCentre,t.underSideCentre);e=f(t.vertices,n,.996)}else e=t.vertices;var i=this._createSurfaceGeometryByNPGeo(t,e);this._updateSurfaceGeometry(i),this._updateWireframeGeometry(t.wireframePosition),this._updateUndersideGeometry(e,t),this._trace()}},{key:"updateMaterial",value:function(t){var e=t.underside,n=t.colorful,i=t.blocking,r=t.wireframe,o=t.texture,s=t.fill,a=s.color,u=s.opacity;this._updateSurfaceMaterial(n,r,o,a,u),this._updateUnderSideMaterial(e),this._updateWireframeMaterial(i,r,a,u),this._updateDepthMaterial(i,r,a,u),this._updateRenderOrder(i)}},{key:"_updateUnderSideMaterial",value:function(t){if(t){if(this._undersideFrontSideMesh)return this._undersideFrontSideMesh.material=this._frontSideMesh.material,void(this._undersideBackSideMesh.material=this._backSideMesh.material);var e=new d;this._undersideFrontSideMesh=new y(e,this._frontSideMesh.material),this._undersideBackSideMesh=new y(e,this._backSideMesh.material),this._geoMesh.add(this._undersideFrontSideMesh),this._geoMesh.add(this._undersideBackSideMesh)}else this._undersideFrontSideMesh&&(this._geoMesh.remove(this._undersideFrontSideMesh),this._geoMesh.remove(this._undersideBackSideMesh),this._undersideFrontSideMesh.geometry.dispose(),this._undersideFrontSideMesh=null,this._undersideBackSideMesh=null)}},{key:"_updateUndersideGeometry",value:function(t,e){if(this._undersideFrontSideMesh){for(var n,i=e.column,r=[],o=[],s=0;n=t[s];s++)o.push(new v(n.x,n.y,n.z));o.push(new v(e.underSideCentre.x,e.underSideCentre.y,e.underSideCentre.z)),o.push(new v(e.topSideCentre.x,e.topSideCentre.y,e.topSideCentre.z));for(var a=o.length-1,u=a-1,c=0;c<i-1;c++)r.push(new _(c,c+1,u)),r.push(new _(c+i,c+i+1,a));t[0]&&t[i-1]&&!h.isEqual(t[0],t[i-1])&&(r.push(new _(i-1,u,a)),r.push(new _(a,2*i-1,i-1)),r.push(new _(u,0,a)),r.push(new _(a,0,i)));var l=new d;l.vertices=o,l.faces=r,l.computeFaceNormals(),l.uvsNeedUpdate=!0,l.verticesNeedUpdate=!0,l.elementsNeedUpdate=!0,l.normalsNeedUpdate=!0,l.computeBoundingBox(),l.computeBoundingSphere(),l.computeVertexNormals(),this._undersideBackSideMesh.geometry.dispose(),this._undersideFrontSideMesh.geometry=l,this._undersideBackSideMesh.geometry=l}}}]),n}(l);t.exports=g},function(t,e,n){"use strict";var i=n(0);n(82),n(8),n(16),n(48),n(27);var r=i(n(1)),o=i(n(2)),s=n(222),a=Math.abs,u={silent:!0},c=function(){function t(e,n){(0,r.default)(this,t),this.inputs=[e,n],this.sObj=n,this.eObj=e,this.dirty=!0}return(0,o.default)(t,[{key:"getCustomTransform",value:function(){if(this.dirty){var t=f(this.sObj).children;t.sort((function(t,e){return t.get("id")-e.get("id")})),this.rs=function(t,e){for(var n=0;n<t.length;n++)l(t[n],e,[])||(t.splice(n,1),n--);return t}(t,this.eObj)}return this.rs}},{key:"tranformPoint",value:function(t){this.rs=this.getCustomTransform(),this.__recordPosition__();var e=this.__calculatePos__(t,this.sObj,this.eObj);return this.__restorePosition__(),e}},{key:"tranformPoints",value:function(t,e,n){this.rs=this.getCustomTransform(),this.__recordPosition__(),this._getGeoByElement=n?this.__segmentColor__:this.__notSegmentColor__;for(var i,r=[],o=this.sObj,s=this.eObj,u=0;i=t[u];u++){var c=this.__calculatePos__(i,o,s);c.isUgly||r.push(this._getGeoByElement(s,c))}var l=[],f=r[0],h=[f];l.push(h);var p;for(u=1;p=r[u];u++)p.isUgly||(a(p.x-f.x)>e||a(p.y-f.y)>e?(h=[p],l.push(h)):h.push(p),f=p);return this.__restorePosition__(),l}},{key:"tranformByGridMesh",value:function(t){var e=this;this.rs=this.getCustomTransform(),this.__recordPosition__();var n=this.sObj,i=this.eObj,r=t.map((function(t){return e.__calculatePos__(t,n,i)}));return this.__restorePosition__(),r}},{key:"__recordPosition__",value:function(){this.record={sPosition:this.sObj.getValue(),ePosition:this.eObj.getValue()}}},{key:"__restorePosition__",value:function(){var t=this.record;this.sObj.setValue(t.sPosition,u);for(var e=0;e<this.rs.length;e++)this.rs[e].calculate(!0);this.eObj.setValue(t.ePosition,u)}},{key:"__calculatePos__",value:function(t,e,n){e.setValue(t,u);for(var i=0;i<this.rs.length;i++)this.rs[i].calculate(!0);return n.getValue()}},{key:"__segmentColor__",value:function(t,e){return e.userData={dis:t.forceCalulateDynamicDisplay()},e}},{key:"__notSegmentColor__",value:function(t,e){return e}}],[{key:"isLegal",value:function(e,n){if(e.output_Model&&e.output_Model.isPoint&&n.output_Model&&n.output_Model.isPoint){var i=e,r=n;i.get("id")>r.get("id")&&(i=n,r=e);var o,a,u,c=f(i),l=f(r);if(-1!=c.children.indexOf(r)?(o=i,a=r,u=c):-1!=l.children.indexOf(i)&&(o=r,a=i,u=l),o&&a){var p=s.isLegal(i,r);if(p){for(var d,y=p.getCustomTransform(),v=!1,_=0;d=y[_];_++){var g=d.inputs&&d.inputs.slice(1)||[];if(h(u.children,g)||h(u.datas,d.element.inputsData||[])){v=!0;break}}return v?new t(a,o):null}return new t(a,o)}return null}return null}}]),t}();function l(t,e,n){if(t==e)return!0;if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++)if(l(t.children[i],e,n))return!0;if(t.outputsData)for(var r=t.outputsData,o=0;o<r.length;o++)if(-1==n.indexOf(r[o].name)){n.push(r[o].name);var s=!1;if(r[o].traverseChildren((function(t){l(t,e,n)&&(s=!0)})),s)return!0}return!1}function f(t){var e=[],n=[],i=function i(r){if(-1==e.indexOf(r)&&r!==t&&(e.push(r),r.outputsData))for(var o=0;o<r.outputsData.length;o++)n.push(r.outputsData[o]),r.outputsData[o].traverseChildren(i)};if(t.traverseChildren(i),t.outputsData)for(var r=0;r<t.outputsData.length;r++)n.push(t.outputsData[r]),t.outputsData[r].traverseChildren(i);return{children:e,datas:n}}function h(t,e){for(var n=!1,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i])){n=!0;break}return n}t.exports=c},function(t,e,n){"use strict";var i=n(73);t.exports=i.extend({defaults:{color:"#ff0000",opacity:1,texture:0},toJSON:function(){return{color:this.get("color"),opacity:this.get("opacity"),texture:this.get("texture")}}})},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=i.extend({defaults:{show:!0,traced:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t}});t.exports=s},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=n(178),a=i.extend({defaults:{show:!0,traced:!1,drawPoint:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.arrowModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.drawPoint=this.get("drawPoint"),t}});t.exports=a},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Circle3,p=f.Plane3,d=f.Utils,y=d.PI,v=d.DOUBLE_PI,_=Math.atan,g=Math.sqrt,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"__vertices_rectangle__",value:function(t,e,n){var i=n.width,r=n.height,o=n.corner,s=g(i*i+r*r)/2,a=new h(t,s,e),u=_(i/r);return o=this.__angleToArc__(o,this._attributes.unit.get()),new p([a.pointOn(o+u),a.pointOn(o+y-u),a.pointOn(o+y+u),a.pointOn(o+(v-u))],[[0,1,3],[3,1,2]])}}]),n}(l);m.prototype.isPlane=!0,t.exports=m},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(178),s=i.extend({defaults:{show:!0,traced:!1,traceLength:5,blocking:!1},initialize:function(){this.strokeModel=new r,this.arrowModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(294),s=i.extend({defaults:{show:!0,traced:!1,traceLength:5,wireframe:!1,colorful:!1,blocking:!0},initialize:function(t){this.fillModel=new r,this.textureModel=new o,this.initializeBase(t)},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.wireframe=this.get("wireframe"),t.colorful=this.get("colorful"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},,,,function(t,e,n){var i=n(9),r=n(40),o=n(35),s=n(116),a=n(110),u=n(235),c=n(25),l=i.TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!o(t)||s(t))return t;var n,i=a(t,f);if(i){if(void 0===e&&(e="default"),n=r(i,t,e),!o(n)||s(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},function(t,e,n){"use strict";n(75);var i=n(13),r=n(52),o=n(155),s=n(17),a=n(25),u=n(61),c=a("species"),l=RegExp.prototype;t.exports=function(t,e,n,f){var h=a(t),p=!s((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),d=p&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!p||!d||n){var y=i(/./[h]),v=e(h,""[t],(function(t,e,n,r,s){var a=i(t),u=e.exec;return u===o||u===l.exec?p&&!s?{done:!0,value:y(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));r(String.prototype,t,v[0]),r(l,h,v[1])}f&&u(l[h],"sham",!0)}},function(t,e,n){"use strict";var i=n(186).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){var i=n(9),r=n(40),o=n(41),s=n(26),a=n(77),u=n(155),c=i.TypeError;t.exports=function(t,e){var n=t.exec;if(s(n)){var i=r(n,t,e);return null!==i&&o(i),i}if("RegExp"===a(t))return r(u,t,e);throw c("RegExp#exec called on incompatible receiver")}},function(t,e,n){var i=n(35),r=n(77),o=n(25)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(42),r=n(9),o=n(13),s=n(137),a=n(194),u=n(61),c=n(44).f,l=n(92).f,f=n(71),h=n(215),p=n(53),d=n(183),y=n(184),v=n(52),_=n(17),g=n(39),m=n(63).enforce,x=n(174),P=n(25),w=n(242),M=n(243),b=P("match"),R=r.RegExp,S=R.prototype,k=r.SyntaxError,E=o(d),A=o(S.exec),C=o("".charAt),T=o("".replace),L=o("".indexOf),B=o("".slice),V=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,N=/a/g,D=new R(O)!==O,G=y.MISSED_STICKY,F=y.UNSUPPORTED_Y,I=i&&(!D||G||w||M||_((function(){return N[b]=!1,R(O)!=O||R(N)==N||"/a/i"!=R(O,"i")})));if(s("RegExp",I)){for(var U=function(t,e){var n,i,r,o,s,c,l=f(S,this),d=h(t),y=void 0===e,v=[],_=t;if(!l&&d&&y&&t.constructor===U)return t;if((d||f(S,t))&&(t=t.source,y&&(e="flags"in _?_.flags:E(_))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),_=t,w&&"dotAll"in O&&(i=!!e&&L(e,"s")>-1)&&(e=T(e,/s/g,"")),n=e,G&&"sticky"in O&&(r=!!e&&L(e,"y")>-1)&&F&&(e=T(e,/y/g,"")),M&&(t=(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,u=!1,c=0,l="";i<=n;i++){if("\\"===(e=C(t,i)))e+=C(t,++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:A(V,B(t,i+1))&&(i+=2,u=!0),r+=e,c++;continue;case">"===e&&u:if(""===l||g(s,l))throw new k("Invalid capture group name");s[l]=!0,o[o.length]=[l,c],u=!1,l="";continue}u?l+=e:r+=e}return[r,o]}(t))[0],v=o[1]),s=a(R(t,e),l?this:S,U),(i||r||v.length)&&(c=m(s),i&&(c.dotAll=!0,c.raw=U(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=C(t,i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+C(t,++i);return r}(t),n)),r&&(c.sticky=!0),v.length&&(c.groups=v)),t!==_)try{u(s,"source",""===_?"(?:)":_)}catch(t){}return s},z=function(t){t in U||c(U,t,{configurable:!0,get:function(){return R[t]},set:function(e){R[t]=e}})},H=l(R),$=0;H.length>$;)z(H[$++]);S.constructor=U,U.prototype=S,v(r,"RegExp",U)}x("RegExp")},function(t,e,n){"use strict";var i=Math.abs;t.exports={isInRect:function(t,e,n,r,o,s){return i(e.x+t.x-2*n-o)<o+(e.x-t.x)&&i(e.y+t.y-2*r-s)<s+(e.y-t.y)},rectSelectByPos:function(t,e,n,i,r,o){return t.x+o>e&&t.x-o<e+i&&t.y+o>n&&t.y-o<n+r},viewStyle:{solid:"solid",dashed1:"dashed",dashed2:"dotted"}}},function(t,e,n){"use strict";n(3),n(49);var i=0;t.exports={genetateID:function(t){return t+"_"+(i++).toString()}}},function(t,e,n){"use strict";var i=n(29),r=n(40),o=n(91),s=n(105),a=n(26),u=n(257),c=n(162),l=n(122),f=n(98),h=n(61),p=n(52),d=n(25),y=n(140),v=n(258),_=s.PROPER,g=s.CONFIGURABLE,m=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,P=d("iterator"),w=function(){return this};t.exports=function(t,e,n,s,d,v,M){u(n,e,s);var b,R,S,k=function(t){if(t===d&&L)return L;if(!x&&t in C)return C[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",A=!1,C=t.prototype,T=C[P]||C["@@iterator"]||d&&C[d],L=!x&&T||k(d),B="Array"==e&&C.entries||T;if(B&&(b=c(B.call(new t)))!==Object.prototype&&b.next&&(o||c(b)===m||(l?l(b,m):a(b[P])||p(b,P,w)),f(b,E,!0,!0),o&&(y[E]=w)),_&&"values"==d&&T&&"values"!==T.name&&(!o&&g?h(C,"name","values"):(A=!0,L=function(){return r(T,this)})),d)if(R={values:k("values"),keys:v?L:k("keys"),entries:k("entries")},M)for(S in R)(x||A||!(S in C))&&p(C,S,R[S]);else i({target:e,proto:!0,forced:x||A},R);return o&&!M||C[P]===L||p(C,P,L,{name:d}),y[e]=L,R}},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(198),p=n(176).__texture__,d=THREE,y=d.Group,v=d.Geometry,_=d.FrontSide,g=d.BackSide,m=d.Vector2,x=d.Vector3,P=d.Face3,w=d.Mesh,M=d.MeshNormalMaterial,b=d.MeshStandardMaterial,R=(d.MeshPhongMaterial,d.LineSegmentsGeometry),S=d.LineMaterial,k=d.LineSegments2,E={transparent:!0,side:_,roughness:1,metalness:.2,flatShading:!1},A={transparent:!0,side:g,roughness:1,metalness:.2,flatShading:!1},C=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"_colorful",!1),(0,l.default)((0,s.default)(o),"_wireframe",!1),(0,l.default)((0,s.default)(o),"_flatShading",!1),(0,l.default)((0,s.default)(o),"__texture__",p),o.hasTexture=!1,o._geometry=new v,o._initSurfaceMesh(o._geometry),o._wireframeGeometry=new R,o._initAssistMesh(o._wireframeGeometry),o}return(0,o.default)(n,[{key:"_initSurfaceMesh",value:function(t){var e=new b(E),n=new b(A);this._frontSideMesh=new w(t,e),this._backSideMesh=new w(t,n),this._geoMesh=new y,this._geoMesh.add(this._frontSideMesh),this._geoMesh.add(this._backSideMesh),this._updateSelectMesh(this._geoMesh),this._geoGroup.add(this._geoMesh)}},{key:"_initWireframeMesh",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._wireframeMesh=new k(t,new S({transparent:!0,linewidth:.001})),this._wireframeMesh.material.depthTest=e,this._geoMesh.add(this._wireframeMesh)}},{key:"_initDepthMesh",value:function(t){this._depthMaterial=new S({depthTest:!1,transparent:!0}),this._depthMaterial.dashed=!0,this._depthMaterial.defines.USE_DASH="",this._depthMaterial.dashSize=.25,this._depthMaterial.gapSize=.15,this._depthMaterial.needsUpdate=!0,this._depthMaterial.linewidth=.001,this._depthMesh=new k(t,this._depthMaterial),this._geoMesh.add(this._depthMesh)}},{key:"_initAssistMesh",value:function(t){var e=new S({depthTest:!1,transparent:!0,color:16711935,linewidth:.0015});this._assistMesh=new k(t,e)}},{key:"update_geo",value:function(t){var e=this._createSurfaceGeometryByNPGeo(t);this._updateSurfaceGeometry(e),this._updateWireframeGeometry(t.wireframePosition),this._trace()}},{key:"updateMaterial",value:function(t){var e=t.colorful,n=t.blocking,i=t.wireframe,r=t.texture,o=t.fill,s=o.color,a=o.opacity;this._updateSurfaceMaterial(e,i,r,s,a),this._updateWireframeMaterial(n,i,s,a),this._updateDepthMaterial(n,i,s,a),this._updateRenderOrder(n)}},{key:"_updateSurfaceMaterial",value:function(t,e,n,i,r){var o=this;this._updateColorful(t,e),this._updateSurfaceMaterial00(i,r),this._colorful||this.__texture__(n,(function(t){o._frontSideMesh.material.setValues({map:t}),o._backSideMesh.material.setValues({map:t}),o._frontSideMesh.material.needsUpdate=!0,o._backSideMesh.material.needsUpdate=!0}))}},{key:"_updateWireframeMaterial",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;this._wireframe=e,e?(this._wireframeMesh||this._initWireframeMesh(this._wireframeGeometry),this._updateSurfaceMaterial00(n,0),this._wireframeMesh.material.depthTest=t,this._wireframeMesh.material.setValues({color:n,opacity:i,linewidth:r})):this._wireframeMesh&&(this._geoMesh.remove(this._wireframeMesh),this._wireframeMesh.material.dispose(),this._wireframeMesh=null)}},{key:"_updateSurfaceMaterial00",value:function(t,e){this._frontSideMesh.material.setValues({color:t,opacity:e}),this._backSideMesh.material.setValues({color:t,opacity:e})}},{key:"_updateColorful",value:function(t,e,n){var i,r;(e&&(t=!1),this._colorful!=t)&&(this._colorful=t,t?(i=new M({transparent:!0,side:_,depthTest:!0,flatShading:this._flatShading}),r=new M({transparent:!0,side:g,depthTest:!0,flatShading:this._flatShading})):(i=new b(E),r=new b(A)),this._frontSideMesh.material=i,this._backSideMesh.material=r)}},{key:"_updateDepthMaterial",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;e&&t?(this._depthMesh||this._initDepthMesh(this._wireframeGeometry),this._depthMesh.material.setValues({color:n,opacity:i,linewidth:r})):this._depthMesh&&(this._geoMesh.remove(this._depthMesh),this._depthMesh.material.dispose(),this._depthMesh=null)}},{key:"_updateRenderOrder",value:function(t){for(var e,n=t?1:0,i=0;e=this._geoMesh.children[i];i++)e.renderOrder=n;this._assistMesh.renderOrder=n}},{key:"_updateSurfaceGeometry",value:function(t){this._geometry.dispose(),this._geometry=t,this._frontSideMesh.geometry=this._geometry,this._backSideMesh.geometry=this._geometry}},{key:"_updateWireframeGeometry",value:function(t){var e=new R;e.setPositions(t),this._wireframeGeometry.dispose(),this._wireframeGeometry=e,this._assistMesh.geometry=e,this._wireframeMesh&&(this._wireframeMesh.geometry=e),this._depthMesh&&(this._depthMesh.geometry=e,this._depthMesh.computeLineDistances())}},{key:"_createSurfaceGeometryByNPGeo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.vertices;this._updateHelper(t);for(var n,i=[],r=[],o=new v,s=0;n=e[s];s++)r.push(new x(n.x,n.y,n.z));for(var a,u=t.vplanes,c=t.uglyVertexs,l=0;a=u[l];l++)c&&(c[a[0]]||c[a[1]]||c[a[2]])||i.push(new P(a[0],a[1],a[2]));if(this.hasTexture&&t.vertexUvs){for(var f,h=t.vertexUvs,p=[],d=0;f=h[d];d++)p.push(new m(f.x,f.y));for(var y,_=0;y=u[_];_++)o.faceVertexUvs[0].push([p[y[0]],p[y[1]],p[y[2]]]);o.uvsNeedUpdate=!0}return o.vertices=r,o.faces=i,o.verticesNeedUpdate=!0,o.elementsNeedUpdate=!0,o.normalsNeedUpdate=!0,o.computeFaceNormals(),t.isflatShading&&o.computeFlatVertexNormals(),!t.isflatShading&&o.computeVertexNormals(),o}},{key:"_updateHelper",value:function(t){}}]),n}(h);t.exports=C},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r,s){return(0,o.default)(this,n),e.call(this,t,i,r,s)}return(0,r.default)(n)}(n(11));l.prototype.isPolygon=!0,t.exports=l},function(t,e,n){"use strict";var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t),this.inputs=[e,n],this.sObj=n,this.eObj=e,this.dirty=!0}return(0,o.default)(t,[{key:"transform",value:function(t){for(var e,n=this.getCustomTransform(),i=t,r=0;e=n[r];r++)if((i=e.transformByOutput_Model(i)).isUgly)return i;return i}},{key:"getCustomTransform",value:function(){return this.dirty&&(this.customTransform=function t(e,n,i){if(e.constraint.isCustomTransform)return i=i.concat(t(e.constraint.inputs[1],e.constraint.inputs[2],[]));var r=e.constraint.inputs[0];return i.push(e.constraint),r==n?i:t(r,n,i)}(this.eObj,this.sObj,[]),this.customTransform.reverse(),this.dirty=!1),this.customTransform}}],[{key:"canTransform",value:function(t,e){return t.constraint.isTransform&&function t(e,n){if(e.constraint.isTransform&&!e.constraint.isCustomTransformSpecial){var i=e.constraint.inputs[0];return n===i||t(i,n)}}(t,e)}},{key:"isLegal",value:function(e,n){return t.canTransform(e,n)?new t(e,n):t.canTransform(n,e)?new t(n,e):void 0}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(85),r=n(40),o=n(13),s=n(212),a=n(17),u=n(41),c=n(26),l=n(64),f=n(79),h=n(53),p=n(74),d=n(213),y=n(110),v=n(363),_=n(214),g=n(25)("replace"),m=Math.max,x=Math.min,P=o([].concat),w=o([].push),M=o("".indexOf),b=o("".slice),R="$0"==="a".replace(/./,"$0"),S=!!/./[g]&&""===/./[g]("a","$0");s("replace",(function(t,e,n){var o=S?"$":"$0";return[function(t,n){var i=p(this),o=null==t?void 0:y(t,g);return o?r(o,t,i,n):r(e,h(i),t,n)},function(t,r){var s=u(this),a=h(t);if("string"==typeof r&&-1===M(r,o)&&-1===M(r,"$<")){var p=n(e,s,a,r);if(p.done)return p.value}var y=c(r);y||(r=h(r));var g=s.global;if(g){var R=s.unicode;s.lastIndex=0}for(var S=[];;){var k=_(s,a);if(null===k)break;if(w(S,k),!g)break;""===h(k[0])&&(s.lastIndex=d(a,f(s.lastIndex),R))}for(var E,A="",C=0,T=0;T<S.length;T++){for(var L=h((k=S[T])[0]),B=m(x(l(k.index),a.length),0),V=[],O=1;O<k.length;O++)w(V,void 0===(E=k[O])?E:String(E));var N=k.groups;if(y){var D=P([L],V,B,a);void 0!==N&&w(D,N);var G=h(i(r,void 0,D))}else G=v(L,a,B,V,N,r);B>=C&&(A+=b(a,C,B)+G,C=B+L.length)}return A+b(a,C)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!R||S)},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=i.extend({defaults:{show:!0,traced:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t}});t.exports=s},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(15),h=n(99),p=npGeo,d=p.Vector3,y=p.Line3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)}))._line=new y(a.inputs[0].output_Model,s),a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?this._line.ep.zoom(this._line.sp,t):d.createUgly()}},{key:"moveOffset",value:function(t,e,n,i){var r=i.output_Model;this.moveToPos({x:r.x+t,y:r.y+e,z:r.z+n},i)}},{key:"moveToPos",value:function(t,e,n){var i=this._line.valueOn(t);i<0&&(i=0),e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);v.prototype.isHFPoint=!0,v.prototype.isOnLinearPoint=!0,v.prototype.canCopy=!1,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Utils.isZero,p=f.Paths3,d=math.floor,y=Math.abs,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a,u){var c;return(0,r.default)(this,n),(c=e.call(this,t,i,o,s)).vari=a,c.ignores=u,c}return(0,o.default)(n,[{key:"calculate",value:function(t){var e=this.__getExpressValues__(this.ignores);if(!e||e.pNum<2)return p.createUgly();this.__setDisplayCallback__(t);var n=this.__calcMinMaxStep__(e);if(!n)return p.createUgly();for(var i=n.min,r=n.max,o=n.d,s=n.stepNum,a=this.vari,u=this.algebraic.get(a),c=[],l=[],f=i,d={x:1/0,y:1/0,z:1/0};;){f>r&&(f=r),this.algebraic.set(a,f);var v=this.__getCurrentSamplePoint__(),_=v.x,g=v.y,m=v.z;if(isFinite(_)&&isFinite(g)&&isFinite(m)?((y(v.x-d.x)>s||y(v.y-d.y)>s||y(v.z-d.z)>s)&&(l&&l.length>1&&c.push(l),l=[]),d=v,this.displayCallFun(v,t),l.push(v)):(l&&l.length>1&&c.push(l),l=[]),h(f-r))break;f+=o}return l&&l.length>1&&c.push(l),this.algebraic.set(a,u),new p(this.__closePaths__(c))}},{key:"__setDisplayCallback__",value:function(t){t.dynamicDisplay&&t.dynamicDisplay.stroke&&this.vari&&t.dynamicDisplay.stroke.isHasVari(this.vari)?(this.dynamicDisplay=t.dynamicDisplay,this.displayCallFun=this.__addDisplay__,this.isSegmentColor=!0):(this.displayCallFun=this.__defaultDisplay__,this.isSegmentColor=!1)}},{key:"__addDisplay__",value:function(t,e){var n=e.forceCalulateDynamicDisplay();return n.fill=n.stroke,t.userData={dis:n},t}},{key:"__defaultDisplay__",value:function(t){return t}},{key:"__closePaths__",value:function(t){if(!this._attributes.isClosed.get())return t;if(t&&0===t.length)return t;var e=t[0],n=t[t.length-1];return e.length>0&&n.push(e[0]),t}},{key:"__calcMinMaxStep__",value:function(t){var e=t.min,n=t.max,i=d(t.pNum)-1,r=t.stepNum,o=y(n-e)/i;if(!h(o)){var s;if(n<e)s=e,e=n,n=s;return{min:e,max:n,stepNum:r,d:o}}}},{key:"__getCurrentSamplePoint__",value:function(){}}]),n}(l);t.exports=v},function(t,e,n){"use strict";var i=n(45),r=n(73),o=(n(50),n(294)),s=i.extend({defaults:{show:!0,traced:!1,traceLength:5,wireframe:!1,colorful:!1,spherical:!1,blocking:!0},initialize:function(){this.fillModel=new r,this.textureModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.wireframe=this.get("wireframe"),t.colorful=this.get("colorful"),t.spherical=this.get("spherical"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},,,,,,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(9),r=n(40),o=n(26),s=n(35),a=i.TypeError;t.exports=function(t,e){var n,i;if("string"===e&&o(n=t.toString)&&!s(i=r(n,t)))return i;if(o(n=t.valueOf)&&!s(i=r(n,t)))return i;if("string"!==e&&o(n=t.toString)&&!s(i=r(n,t)))return i;throw a("Can't convert object to primitive value")}},function(t,e,n){var i=n(9),r=n(26),o=n(118),s=i.WeakMap;t.exports=r(s)&&/native code/.test(o(s))},function(t,e,n){var i=n(59),r=n(13),o=n(92),s=n(151),a=n(41),u=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?u(e,n(t)):e}},function(t,e,n){"use strict";var i=n(9),r=n(13),o=n(69),s=n(35),a=n(39),u=n(95),c=n(89),l=i.Function,f=r([].concat),h=r([].join),p={},d=function(t,e,n){if(!a(p,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";p[e]=l("C,a","return new C("+h(i,",")+")")}return p[e](t,n)};t.exports=c?l.bind:function(t){var e=o(this),n=e.prototype,i=u(arguments,1),r=function(){var n=f(i,u(arguments));return this instanceof r?d(e,n.length,n):e.apply(t,n)};return s(n)&&(r.prototype=n),r}},function(t,e,n){var i=n(9),r=n(129),o=n(119),s=n(35),a=n(25)("species"),u=i.Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===u||r(e.prototype))||s(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?u:e}},function(t,e,n){"use strict";var i=n(138),r=n(88);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,i)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(17),r=n(9).RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},function(t,e,n){var i=n(17),r=n(9).RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var i=n(127)("span").classList,r=i&&i.constructor&&i.constructor.prototype;t.exports=r===Object.prototype?void 0:r},function(t,e,n){var i=n(90).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},function(t,e,n){var i=n(90);t.exports=/MSIE|Trident/.test(i)},function(t,e,n){var i=n(90).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},function(t,e,n){var i=n(9),r=n(81),o=n(40),s=n(41),a=n(111),u=n(189),c=n(46),l=n(71),f=n(157),h=n(141),p=n(250),d=i.TypeError,y=function(t,e){this.stopped=t,this.result=e},v=y.prototype;t.exports=function(t,e,n){var i,_,g,m,x,P,w,M=n&&n.that,b=!(!n||!n.AS_ENTRIES),R=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),k=r(e,M),E=function(t){return i&&p(i,"normal",t),new y(!0,t)},A=function(t){return b?(s(t),S?k(t[0],t[1],E):k(t[0],t[1])):S?k(t,E):k(t)};if(R)i=t;else{if(!(_=h(t)))throw d(a(t)+" is not iterable");if(u(_)){for(g=0,m=c(t);m>g;g++)if((x=A(t[g]))&&l(v,x))return x;return new y(!1)}i=f(t,_)}for(P=i.next;!(w=o(P,i)).done;){try{x=A(w.value)}catch(t){p(i,"throw",t)}if("object"==typeof x&&x&&l(v,x))return x}return new y(!1)}},function(t,e,n){var i=n(40),r=n(41),o=n(110);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},function(t,e,n){var i,r,o,s,a=n(9),u=n(85),c=n(81),l=n(26),f=n(39),h=n(17),p=n(182),d=n(95),y=n(127),v=n(191),_=n(252),g=n(192),m=a.setImmediate,x=a.clearImmediate,P=a.process,w=a.Dispatch,M=a.Function,b=a.MessageChannel,R=a.String,S=0,k={};try{i=a.location}catch(t){}var E=function(t){if(f(k,t)){var e=k[t];delete k[t],e()}},A=function(t){return function(){E(t)}},C=function(t){E(t.data)},T=function(t){a.postMessage(R(t),i.protocol+"//"+i.host)};m&&x||(m=function(t){v(arguments.length,1);var e=l(t)?t:M(t),n=d(arguments,1);return k[++S]=function(){u(e,void 0,n)},r(S),S},x=function(t){delete k[t]},g?r=function(t){P.nextTick(A(t))}:w&&w.now?r=function(t){w.now(A(t))}:b&&!_?(s=(o=new b).port2,o.port1.onmessage=C,r=c(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!h(T)?(r=T,a.addEventListener("message",C,!1)):r="onreadystatechange"in y("script")?function(t){p.appendChild(y("script")).onreadystatechange=function(){p.removeChild(this),E(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:m,clear:x}},function(t,e,n){var i=n(90);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},function(t,e,n){"use strict";var i=n(69),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){var i=n(25);e.f=i},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).geoView=t.paperView.elementsV,i.globalGroup=i.geoView.globalGroup,i}return(0,o.default)(n,[{key:"transSTGByModel",value:function(t,e){return this.geoView.screenToWorldByModel(t,e)}},{key:"transSTGOnXOY",value:function(t){return this.geoView.screenToWorldOnXOY(t)}},{key:"createFreePointByPos",value:function(t,e){return this.undoRedo.constructFreePoint(this.transSTG(t),e)}},{key:"createPointOnElement",value:function(t,e,n){return this.undoRedo.constructHFPoint("OnElementPoint",[e.get("id")],e.output_Model.valueOn(this.transSTGByModel(t,e)),n)}},{key:"moveOnElement",value:function(t,e){this.willManager.setSingleElementWillPointOn(e);var n=e.output_Model.valueOn(this.transSTGByModel(t,e)),i=e.output_Model.pointOn(n);return this.assistManager.setPoint(i),i}},{key:"changePosByCapture",value:function(t){return this.assistManager.drawAssistLineByPos(this.transSTG(t)),t}}]),n}(n(409));t.exports=l},function(t,e,n){"use strict";var i=n(258).IteratorPrototype,r=n(80),o=n(84),s=n(98),a=n(140),u=function(){return this};t.exports=function(t,e,n,c){var l=e+" Iterator";return t.prototype=r(i,{next:o(+!c,n)}),s(t,l,!1,!0),a[l]=u,t}},function(t,e,n){"use strict";var i,r,o,s=n(17),a=n(26),u=n(80),c=n(162),l=n(52),f=n(25),h=n(91),p=f("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(r=c(c(o)))!==Object.prototype&&(i=r):d=!0),null==i||s((function(){var t={};return i[p].call(t)!==t}))?i={}:h&&(i=u(i)),a(i[p])||l(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},function(t,e,n){"use strict";var i=n(9),r=n(13),o=n(42),s=n(260),a=n(105),u=n(61),c=n(173),l=n(17),f=n(123),h=n(64),p=n(79),d=n(261),y=n(323),v=n(162),_=n(122),g=n(92).f,m=n(44).f,x=n(193),P=n(139),w=n(98),M=n(63),b=a.PROPER,R=a.CONFIGURABLE,S=M.get,k=M.set,E=i.ArrayBuffer,A=E,C=A&&A.prototype,T=i.DataView,L=T&&T.prototype,B=Object.prototype,V=i.Array,O=i.RangeError,N=r(x),D=r([].reverse),G=y.pack,F=y.unpack,I=function(t){return[255&t]},U=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},H=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},$=function(t){return G(t,23,4)},j=function(t){return G(t,52,8)},X=function(t,e){m(t.prototype,e,{get:function(){return S(this)[e]}})},Y=function(t,e,n,i){var r=d(n),o=S(t);if(r+e>o.byteLength)throw O("Wrong index");var s=S(o.buffer).bytes,a=r+o.byteOffset,u=P(s,a,a+e);return i?u:D(u)},W=function(t,e,n,i,r,o){var s=d(n),a=S(t);if(s+e>a.byteLength)throw O("Wrong index");for(var u=S(a.buffer).bytes,c=s+a.byteOffset,l=i(+r),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]};if(s){var q=b&&"ArrayBuffer"!==E.name;if(l((function(){E(1)}))&&l((function(){new E(-1)}))&&!l((function(){return new E,new E(1.5),new E(NaN),q&&!R})))q&&R&&u(E,"name","ArrayBuffer");else{(A=function(t){return f(this,C),new E(d(t))}).prototype=C;for(var J,Z=g(E),K=0;Z.length>K;)(J=Z[K++])in A||u(A,J,E[J]);C.constructor=A}_&&v(L)!==B&&_(L,B);var Q=new T(new A(2)),tt=r(L.setInt8);Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||c(L,{setInt8:function(t,e){tt(this,t,e<<24>>24)},setUint8:function(t,e){tt(this,t,e<<24>>24)}},{unsafe:!0})}else C=(A=function(t){f(this,C);var e=d(t);k(this,{bytes:N(V(e),0),byteLength:e}),o||(this.byteLength=e)}).prototype,L=(T=function(t,e,n){f(this,L),f(t,C);var i=S(t).byteLength,r=h(e);if(r<0||r>i)throw O("Wrong offset");if(r+(n=void 0===n?i-r:p(n))>i)throw O("Wrong length");k(this,{buffer:t,byteLength:n,byteOffset:r}),o||(this.buffer=t,this.byteLength=n,this.byteOffset=r)}).prototype,o&&(X(A,"byteLength"),X(T,"buffer"),X(T,"byteLength"),X(T,"byteOffset")),c(L,{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var e=Y(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Y(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return H(Y(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return H(Y(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return F(Y(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return F(Y(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){W(this,1,t,I,e)},setUint8:function(t,e){W(this,1,t,I,e)},setInt16:function(t,e){W(this,2,t,U,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){W(this,2,t,U,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){W(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){W(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){W(this,4,t,$,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){W(this,8,t,j,e,arguments.length>2?arguments[2]:void 0)}});w(A,"ArrayBuffer"),w(T,"DataView"),t.exports={ArrayBuffer:A,DataView:T}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var i=n(9),r=n(64),o=n(79),s=i.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw s("Wrong length or index");return n}},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(40),s=n(42),a=n(325),u=n(31),c=n(259),l=n(123),f=n(84),h=n(61),p=n(326),d=n(79),y=n(261),v=n(263),_=n(104),g=n(39),m=n(88),x=n(35),P=n(116),w=n(80),M=n(71),b=n(122),R=n(92).f,S=n(328),k=n(55).forEach,E=n(174),A=n(44),C=n(103),T=n(63),L=n(194),B=T.get,V=T.set,O=A.f,N=C.f,D=Math.round,G=r.RangeError,F=c.ArrayBuffer,I=F.prototype,U=c.DataView,z=u.NATIVE_ARRAY_BUFFER_VIEWS,H=u.TYPED_ARRAY_CONSTRUCTOR,$=u.TYPED_ARRAY_TAG,j=u.TypedArray,X=u.TypedArrayPrototype,Y=u.aTypedArrayConstructor,W=u.isTypedArray,q=function(t,e){Y(t);for(var n=0,i=e.length,r=new t(i);i>n;)r[n]=e[n++];return r},J=function(t,e){O(t,e,{get:function(){return B(this)[e]}})},Z=function(t){var e;return M(I,t)||"ArrayBuffer"==(e=m(t))||"SharedArrayBuffer"==e},K=function(t,e){return W(t)&&!P(e)&&e in t&&p(+e)&&e>=0},Q=function(t,e){return e=_(e),K(t,e)?f(2,t[e]):N(t,e)},tt=function(t,e,n){return e=_(e),!(K(t,e)&&x(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?O(t,e,n):(t[e]=n.value,t)};s?(z||(C.f=Q,A.f=tt,J(X,"buffer"),J(X,"byteOffset"),J(X,"byteLength"),J(X,"length")),i({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:Q,defineProperty:tt}),t.exports=function(t,e,n){var s=t.match(/\d+$/)[0]/8,u=t+(n?"Clamped":"")+"Array",c="get"+t,f="set"+t,p=r[u],_=p,g=_&&_.prototype,m={},P=function(t,e){O(t,e,{get:function(){return function(t,e){var n=B(t);return n.view[c](e*s+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,i){var r=B(t);n&&(i=(i=D(i))<0?0:i>255?255:255&i),r.view[f](e*s+r.byteOffset,i,!0)}(this,e,t)},enumerable:!0})};z?a&&(_=e((function(t,e,n,i){return l(t,g),L(x(e)?Z(e)?void 0!==i?new p(e,v(n,s),i):void 0!==n?new p(e,v(n,s)):new p(e):W(e)?q(_,e):o(S,_,e):new p(y(e)),t,_)})),b&&b(_,j),k(R(p),(function(t){t in _||h(_,t,p[t])})),_.prototype=g):(_=e((function(t,e,n,i){l(t,g);var r,a,u,c=0,f=0;if(x(e)){if(!Z(e))return W(e)?q(_,e):o(S,_,e);r=e,f=v(n,s);var h=e.byteLength;if(void 0===i){if(h%s)throw G("Wrong length");if((a=h-f)<0)throw G("Wrong length")}else if((a=d(i)*s)+f>h)throw G("Wrong length");u=a/s}else u=y(e),r=new F(a=u*s);for(V(t,{buffer:r,byteOffset:f,byteLength:a,length:u,view:new U(r)});c<u;)P(t,c++)})),b&&b(_,j),g=_.prototype=w(X)),g.constructor!==_&&h(g,"constructor",_),h(g,H,_),$&&h(g,$,u),m[u]=_,i({global:!0,forced:_!=p,sham:!z},m),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",s),"BYTES_PER_ELEMENT"in g||h(g,"BYTES_PER_ELEMENT",s),E(u)}):t.exports=function(){}},function(t,e,n){var i=n(9),r=n(327),o=i.RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw o("Wrong offset");return n}},function(t,e,n){var i=n(9),r=n(69),o=n(47),s=n(109),a=n(46),u=i.TypeError,c=function(t){return function(e,n,i,c){r(n);var l=o(e),f=s(l),h=a(l),p=t?h-1:0,d=t?-1:1;if(i<2)for(;;){if(p in f){c=f[p],p+=d;break}if(p+=d,t?p<0:h<=p)throw u("Reduce of empty array with no initial value")}for(;t?p>=0:h>p;p+=d)p in f&&(c=n(c,f[p],p,l));return c}};t.exports={left:c(!1),right:c(!0)}},function(t,e,n){var i=n(17),r=n(25),o=n(91),s=r("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=Math.floor,h=Math.min,p=Math.max,d=Math.abs,y={funStr:1},v=npGeo,_=v.Vector2,g=v.Paths2,m=v.Line2,x=v.LineType,P=v.Factory2,w=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a){var u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:y;return(0,r.default)(this,n),(u=e.call(this,t,i,o,s)).inVar=a,u.ignores=c,u.axis=u.inputs&&u.inputs[0],u}return(0,o.default)(n,[{key:"isSegmentColor",get:function(){if(!this.element.dynamicDisplay)return!1;var t=this.element.dynamicDisplay;return this.element.get("drawPoint")?t.stroke&&t.stroke.isHasVari(this.inVar)||t.fill&&t.fill.isHasVari(this.inVar):t.stroke&&t.stroke.isHasVari(this.inVar)}},{key:"isLimit",get:function(){return this.axis&&this._attributes.limit.get()}},{key:"isLine",get:function(){return!1}},{key:"isParabola1",get:function(){return!1}},{key:"isParabola0",get:function(){return!1}},{key:"isConic",get:function(){return!1}},{key:"calculate",value:function(){var t=this.__getExpressValues__(this.ignores),e=this.__calculateSamples__(t,this.__getLimitFun__(),this.__getSegmentColorFun__());return this.calcuGeo(new g(e))}},{key:"calcuGeo",value:function(t){if(t.isUgly)return t;if(this.isLine){var e=t.points,n=e[0],i=e[e.length-1];return new m(n[0],i[i.length-1],x.SEGMENT,t)}if(this.isParabola0){var r=t.pointOn(0),o=t.pointOn(.5),s=t.pointOn(1),a=P.normalParabolaBy3Points(r,o,s,0);return a.paths=t,a}if(this.isParabola1){var u=t.pointOn(0),c=t.pointOn(.5),l=t.pointOn(1),f=P.normalParabolaBy3Points(u,c,l,1);return f.paths=t,f}if(this.isConic){var h=t.pointOn(0),p=t.pointOn(.2),d=t.pointOn(.4),y=t.pointOn(.6),v=t.pointOn(.8),_=P.conicBy5Points(h,p,d,y,v);return _.paths=t,_}return t}},{key:"__calculateSamples__",value:function(t,e,n){if(!t||t.pNum<2)return[[]];var i=t.min,r=t.max,o=t.stepNum,s=t.pNum,a=this.__calcStep__(t);i=h(i,r),r=p(i,r);for(var u=[],c=[],l=this.algebraic.get(this.inVar),f=_.createUgly(),y=i,v=0;v<s;v++){this.algebraic.set(this.inVar,y);var g=this.__getCurrentSamplePoint__(y);g.isUgly?v==s-1?y=r:y+=a:(g=e(g,this.axis))?((d(g.x-f.x)>o||d(g.y-f.y)>o)&&(c.length>1&&u.push(c),c=[]),c.push(n(g,this.element)),f=g,v==s-1?y=r:y+=a):v==s-1?y=r:y+=a}return c.length>1&&u.push(c),this.algebraic.set(this.inVar,l),this.__closePaths__(u)}},{key:"__getSegmentColorFun__",value:function(){return this.isSegmentColor?this.__segmentColor__:this.__notSegmentColor__}},{key:"__getLimitFun__",value:function(){return this.isLimit?this.__isLimitPoint0__:this.__isLimitPoint1__}},{key:"__isLimitPoint0__",value:function(t,e){var n=e.transGTS(t);if(e.output_Model.justPointIn(n))return n}},{key:"__isLimitPoint1__",value:function(t,e){return e?e.transGTS(t):t}},{key:"__calcStep__",value:function(t){var e=t.pNum;return(t.max-t.min)/(f(e)-1)}},{key:"__segmentColor__",value:function(t,e){var n=e.forceCalulateDynamicDisplay();return n.show=!0,t.userData={dis:n},t}},{key:"__notSegmentColor__",value:function(t){return t}},{key:"__closePaths__",value:function(t){if(!this._attributes.isClosed.get())return t;if(t&&0===t.length)return t;var e=t[0][0];return t[t.length-1].push(e),t}},{key:"__getCurrentSamplePoint__",value:function(t){}}]),n}(l);w.prototype.isFunCurve=!0,t.exports=w},function(t,e,n){"use strict";var i=n(0);n(65),n(66),n(8),n(27);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=function(){function t(e,n){var i=this,o=n.elementsRepository;(0,r.default)(this,t),(0,s.default)(this,"name","ActionElementsItem"),this.elementsRepository=o,this.description=e.description,this.elements=[];var a=this._getMaxElementsIDbyActionList(e.destObjs);if(this.elementsRepository.get(a))this.elements=e.destObjs.map((function(t){return i.elementsRepository.get(t)}));else{this.elementsRepository.on("add",(function t(n){n.get("id")==a&&(i.elements=e.destObjs.map((function(t){return i.elementsRepository.get(t)})),i.elementsRepository.off("add",t))}))}}return(0,o.default)(t,[{key:"start",value:function(){for(var t,e=0;t=this.elements[e];e++)t.get("isDeleted")||this.action(t)}},{key:"toJSON",value:function(){for(var t,e=[],n=0;t=this.elements[n];n++)t.get("isDeleted")||e.push(t.get("id"));return{name:this.name,description:this.description,destObjs:e}}},{key:"action",value:function(t){}},{key:"_getMaxElementsIDbyActionList",value:function(t){for(var e=0,n=0;n<t.length;n++)isNaN(t[n])||(e=Math.max(e,t[n]));return e}}]),t}();t.exports=a},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=i.extend({defaults:{show:!0,traced:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t}});t.exports=s},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(270),f=n(15),h=n(56),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,{radius:new f(i.algebraic,"2"),corner:new f(i.algebraic),unit:new h})).OutputConstructor=s,a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return this.OutputConstructor.createUgly();var e=this.inputs[0].output_Model,n=this.__calculateNormalVector__();return this.OutputConstructor.createByNormalAndCorner(e,t.radius,n,this.__angleToArc__(t.corner,this._attributes.unit.get()))}}]),n}(l);p.prototype.isRegularPolyhedron=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"__calculateNormalVector__",value:function(){return this.inputs[1].output_Model.isPoint?this.__point__():this.inputs[1].output_Model.normalVector}},{key:"__point__",value:function(){return f.createByPoints(this.inputs[0].output_Model,this.inputs[1].output_Model).normalize()}}]),n}(l);h.prototype.isPolyhedron=!0,t.exports=h},function(t,e,n){"use strict";n(93),n(20);var i=npGeo.Utils.isZero;function r(t){return t>0?"+"+t:t}function o(t,e,n,o){return i(e)?i(n)?"":r((t*n).toFixed(o))+" \\cdot sin(t)":i(n)?r((t*e).toFixed(o))+" \\cdot cos(t)":r((t*n).toFixed(o))+" \\cdot sin(t)"+r((t*e).toFixed(o))+" \\cdot cos(t)"}t.exports={lineToStr:function(t,e,n){if(isNaN(t.x)||isNaN(t.y)||isNaN(e.x)||isNaN(e.y))return"?";var o="(x=";return i(e.x-t.x)||(o+=(e.x-t.x).toFixed(n)+" \\cdot t"),i(t.x)||(o+=r(t.x.toFixed(n))),o+=",y=",i(e.y-t.y)||(o+=(e.y-t.y).toFixed(n)+" \\cdot t"),i(t.z)||(o+=r(t.x.toFixed(n))),o+=",z=",i(e.z-t.z)||(o+=(e.z-t.z).toFixed(n)+" \\cdot t"),i(t.z)||(o+=r(t.z.toFixed(n))),o+")"},circleToStr:function(t,e,n,i,r){var s="x="+t.x.toFixed(r)/1+o(e,n.x,i.x,r);return s+=" ,y="+t.y.toFixed(r)/1+o(e,n.y,i.y,r),s+=" ,z="+t.z.toFixed(r)/1+o(e,n.z,i.z,r)},coorToStr:function(t,e){return!t||isNaN(t.x)||isNaN(t.y)||isNaN(t.z)?"?":"(".concat(t.x.toFixed(e)/1,", ").concat(t.y.toFixed(e)/1,", ").concat(t.z.toFixed(e)/1,")")},valToTex:function(t,e){return null==t||isNaN(t)||!t.toFixed?"?":(t=Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)/1}}},,,function(t,e,n){var i=n(13),r=n(74),o=n(53),s=n(254),a=i("".replace),u="["+s+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(t){return function(e){var n=o(r(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,l,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},function(t,e,n){var i=n(276);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(96),r=n(600);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={injectType:"singletonStyleTag",attributes:{name:"NetpadDynamicMath"},insert:"head",singleton:!0};i(r,o);t.exports=r.locals||{}},function(t,e,n){var i=n(13);t.exports=i(1..valueOf)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(196).getPosBy,p=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,o){var a;return(0,r.default)(this,n),(a=e.call(this,t)).elementType=i,a.defType=o,a._isNewMacro=!0,a.spDeletedCallback=function(t){this.__endDrawing__(),t.off("change:isDeleted",this.spDeletedCallback)}.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"initEvent",value:function(){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this),this.__up__=this.__up__.bind(this),this.startPoint=null,this.isMoved=!1}},{key:"addEvent",value:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1),this.el.addEventListener("mouseup",this.__up__,!1),this.el.addEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"removeEvent",value:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1),this.el.removeEventListener("mouseup",this.__up__,!1),this.el.removeEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"__endDrawing__",value:function(){this.startPoint&&this.startPoint.off("change:isDeleted",this.spDeletedCallback),this.startPoint=null,this.isMoved=!1,this._isNewMacro=!0,this.assistManager.resetAll()}},{key:"__down__",value:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),2===t.button)return this.bindEvents.bindSelect(),void t.stopPropagation();if(!this.startPoint){this.isMoved=!1;var n=this.getXYofEvt(t);this.downScreenPos=n,this.preScreenPos=n,this.downVector3Pos=this.transSTG(n),this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.startPoint=t},callback2:function(t){e.startPoint=e.getElementById(e.createInterPoint(t,e._isNewMacro))},callback3:function(t){e.startPoint=e.getElementById(e.createPointOnElement(n,t,e._isNewMacro))},defaultCallback:function(){e.startPoint=e.getElementById(e.createFreePointByPos(n,e._isNewMacro))}}),this.startPoint.on("change:isDeleted",this.spDeletedCallback)}}},{key:"__move__",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.getXYofEvt(t);this.__isMoved__(t,n,this.preScreenPos)&&(this.preScreenPos=n,this.isMoved=!0,this.willManager.reset(),this.assistManager.resetPoint(),this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.willManager.setSingleElementWillPointOn(t),e.createAssistElement(e.transGTS(t.output_Model))},callback2:function(t){e.willManager.setElementWillPointOn(t.parents),e.assistManager.setPoint(t.pos),e.createAssistElement(t.pos)},callback3:function(t){e.createAssistElement(e.moveOnElement(n,t))},defaultCallback:function(){n=e.changePosByCapture(n),n=e.changePosByShift(t.shiftKey,n),e.createAssistElement(n)}}))}},{key:"__up__",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.getXYofEvt(t);this.__isMoved__(t,n,this.downScreenPos)?this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.createElement(t.get("id"),e._isNewMacro)},callback2:function(t){e.createElement(e.createInterPoint(t,e._isNewMacro))},callback3:function(t){e.createElement(e.createPointOnElement(n,t,e._isNewMacro))},defaultCallback:function(){n=e.changePosByCapture(n),n=e.changePosByShift(t.shiftKey,n),e.__isMoved__(t,n,e.downVector3Pos)?e.createElement(e.createFreePointByPos(n,e._isNewMacro)):e.__endDrawing__()}}):this.isMoved&&this.__endDrawing__()}},{key:"changePosByShift",value:function(t,e){return t&&this.startPoint&&(e=h(this.transGTS(this.startPoint.output_Model),e),this.assistManager.setPoint(e)),e}},{key:"createElement",value:function(t,e){this.undoRedo.constructByJSON3({type:this.elementType,def:{type:this.defType,parents:[this.startPoint.get("id"),t]}},e),this.__endDrawing__()}},{key:"createAssistElement",value:function(t){this.startPoint&&this.__assistElement__(this.transGTS(this.startPoint.output_Model),t)}}]),n}(f);t.exports=p},function(t,e,n){var i=n(77),r=n(60),o=n(92).f,s=n(139),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==i(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(r(t))}},function(t,e,n){var i=n(319),r=n(39),o=n(255),s=n(44).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.segmentSelectByPos,p=l.segmentInRect,d=n(417),y=n(114),v=npGeo.Line2,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i))._arrowView=new d(o),s._sLine=v.createUgly(),s._svgLine=f("line"),g(s._svgLine,0,0,0,0),s._geoEl.appendChild(s._svgLine),s._geoEl.appendChild(s._arrowView.el),s}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this.__updateLineGeo__(t,e),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke)}},{key:"selectedByPos",value:function(t,e){return h(t,this._sLine,e)}},{key:"isInRect",value:function(t,e){return p(t,e,this._sLine.sp,this._sLine.ep)}},{key:"__updateLineGeo__",value:function(t,e){var n=this.__clipPoint__(t);this._sLine=n;var i=this._arrowView.update_geo(n,e),r=i.sp,o=i.ep;g(this._svgLine,r.x,r.y,o.x,o.y)}},{key:"__uglyGeo__",value:function(){g(this._svgLine,0,0,0,0)}},{key:"__clipPoint__",value:function(t){var e=t.applyMatrix(this._axisTransformer.matrix_GTS());return t.isSegment?e:v.clipByRect(e.sp,e.ep,0,this._paper.get("width"),0,this._paper.get("height"),t.lineType)}}]),n}(y);function g(t,e,n,i,r){e=isFinite(e)?e:0,n=isFinite(n)?n:0,i=isFinite(i)?i:0,r=isFinite(r)?r:0,t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",n),t.setAttributeNS(null,"x2",i),t.setAttributeNS(null,"y2",r)}t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(422),f=n(161).hasColor,h=THREE,p=h.LineSegmentsGeometry,d=h.Vector3,y=h.Color,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){return(0,r.default)(this,n),e.call(this,t,i)}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e;e=t.isPaths3?t.points:t.toPoints(200).points;for(var n,i=f(e),r=[],o=[],s=[],a=new y,u=0;n=e[u];u++)for(var c=0,l=n.length-1;c<l;c++){var h=n[c],v=n[c+1];r.push(h.x,h.y,h.z),r.push(v.x,v.y,v.z),o.push(new d(h.x,h.y,h.z)),o.push(new d(v.x,v.y,v.z)),i&&(a.set(h.userData.dis.stroke?h.userData.dis.stroke.color:h.userData.dis.fill.color),s.push(a.r,a.g,a.b),a.set(v.userData.dis.stroke?v.userData.dis.stroke.color:v.userData.dis.fill.color),s.push(a.r,a.g,a.b))}this._material.setValues({vertexColors:i?THREE.VertexColors:THREE.NoColors}),this._material.needsUpdate=!0;var _=new p;_.setPositions(r),_.setColors(s),this._updateSegmentsGeometry(_),this._updateSelectableGeometry(o),this._trace()}},{key:"_updateSegmentsGeometry",value:function(t){this._geometry.dispose(),this._geometry=t,this._assistMesh.geometry=t,this._geoMesh.geometry=t,this._geoMesh.computeLineDistances(),this._depthMesh&&(this._depthMesh.geometry=t,this._depthMesh.computeLineDistances())}},{key:"_getPoints",value:function(t){return t.isPaths||(t=t.toPoints()),t instanceof Array?t:t.points}}]),n}(l);t.exports=v},function(t,e,n){"use strict";n(8);var i=THREE,r=(i.Mesh,i.Group,i.Geometry,i.MeshPhongMaterial,i.BufferGeometry),o=i.LineSegments,s=i.LineBasicMaterial,a=i.LineDashedMaterial,u=i.Float32BufferAttribute;t.exports={_initWireframeMesh:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._wireframeGeometry=new r,this._wireframeMesh=new o(this._wireframeGeometry,new s({transparent:!0,color:16711680,linewidth:2})),this._wireframeMesh.material.depthTest=e,this._geoMesh.add(this._wireframeMesh)},_initDepthMesh:function(t){this._depthMaterial=new a({depthTest:!1,transparent:!0,color:16711680,linewidth:2,dashSize:.2,gapSize:.2}),this._depthMesh=new o(t,this._depthMaterial)},_updateClippingPlanes:function(t){var e=function(t,e){return t.map((function(t){return e.localToWorld(new THREE.Plane(new THREE.Vector3(t.normalVector.x,t.normalVector.y,t.normalVector.z),t.distance))}))}(t,this._scene);this._frontSideMesh.material.setValues({clippingPlanes:e}),this._backSideMesh.material.setValues({clippingPlanes:e}),this._depthMesh&&this._depthMesh.material.setValues({clippingPlanes:e}),this._wireframeMesh&&(this._wireframeMesh.material.clipping=!0,this._wireframeMesh.material.setValues({clippingPlanes:e})),this._assistMesh.material.setValues({clippingPlanes:e})},_updateWireframeGeometry:function(t){this._wireframeGeometry.addAttribute("position",new u(t,3)),this._depthMesh&&this._depthMesh.computeLineDistances()},_initAssistMesh:function(t){this._assistMesh=new o(t,new s({depthTest:!1,transparent:!0,color:16711935,linewidth:2}))}}},function(t,e,n){"use strict";var i=n(9),r=n(81),o=n(40),s=n(47),a=n(358),u=n(189),c=n(119),l=n(46),f=n(120),h=n(157),p=n(141),d=i.Array;t.exports=function(t){var e=s(t),n=c(this),i=arguments.length,y=i>1?arguments[1]:void 0,v=void 0!==y;v&&(y=r(y,i>2?arguments[2]:void 0));var _,g,m,x,P,w,M=p(e),b=0;if(!M||this==d&&u(M))for(_=l(e),g=n?new this(_):d(_);_>b;b++)w=v?y(e[b],b):e[b],f(g,b,w);else for(P=(x=h(e,M)).next,g=n?new this:[];!(m=o(P,x)).done;b++)w=v?a(x,y,[m.value,b],!0):m.value,f(g,b,w);return g.length=b,g}},function(t,e,n){var i=n(29),r=n(285);i({target:"Array",stat:!0,forced:!n(190)((function(t){Array.from(t)}))},{from:r})},function(t,e,n){"use strict";var i=n(164),r=n(72).deepToJSON,o=i.extend();o.defaultAttributes={size:20,color:"#000",opacity:1},o.Attributes=r(o.defaultAttributes),t.exports=o},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(18),p=n(38),d=npGeo.Vector2,y=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({index:new h(0)},function(t){for(var e,n=0;e=t[n];n++)if(e.output_Model.isLine)return!0;return!1}(t.inputs)?{inLine:new p}:{}))}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this.intersectionSet.getIntersection();if(!t)return d.createUgly();var e=Array.isArray(t)?t[this._attributes.index.get()]:t;return e?this._attributes.inLine&&this._attributes.inLine.get()&&!this.intersectionSet.isInline(e)?d.createUgly():e:d.createUgly()}}]),n}(f);y.prototype.isIntersectionPoint=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)})).pointType=s||"xR",a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();if(!isFinite(t))return p.createUgly();var e=this.inputs[0].getValue();return"xR"==this.pointType?new p(5*t+e.x,e.y):"xL"==this.pointType?new p(e.x-5*t,e.y):"yT"==this.pointType?new p(e.x,e.y+5*t):"yB"==this.pointType?new p(e.x,e.y-5*t):void 0}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i,n)}},{key:"moveToPos",value:function(t,e,n){var i=this.inputs[0].output_Model,r=0;"xR"==this.pointType?t.x>=i.x&&(r=(t.x-i.x)/5):"xL"==this.pointType?t.x<=i.x&&(r=(i.x-t.x)/5):"yT"==this.pointType?t.y>=i.y&&(r=(t.y-i.y)/5):"yB"==this.pointType&&t.y<=i.y&&(r=(i.y-t.y)/5),e.outVais&&e.outVais.setValue(r,n)}}]),n}(l);d.prototype.isHFPoint=!0,d.prototype.isAxisPoint=!0,t.exports=d},function(t,e,n){"use strict";var i=n(0);n(20);var r=i(n(28)),o=i(n(86)),s=i(n(1)),a=i(n(2)),u=i(n(19)),c=n(15);t.exports=function(){function t(e,n){(0,s.default)(this,t),(0,u.default)(this,"isRange",!0),this.algebraic=e,this.s=new c(e,"0"),this.e=new c(e,"1"),this.set(n)}return(0,a.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.s.set(t.s),this.e.set(t.e))}},{key:"get",value:function(){return{s:this.s.get(),e:this.e.get()}}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return"object"===(0,o.default)(t)&&t.hasOwnProperty("s")&&t.hasOwnProperty("e")}},{key:"getVaris",value:function(){return(0,r.default)({},this.s.getVaris(),this.e.getVaris())}},{key:"getCustomFuns",value:function(){return this.s.getCustomFuns().concat(this.e.getCustomFuns())}},{key:"calcu",value:function(){return{s:this.s.calcu(),e:this.e.calcu()}}}]),t}()},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=t)}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(t){return t+""}}]),t}()},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164);t.exports=i.extend({defaults:{show:!0},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.fontModel=new s,this.initializeBase()}})},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50);t.exports=i.extend({defaults:{show:!0,stroke:{color:"#000000",opacity:0,style:"solid",width:1},fill:{color:"#c9db93",opacity:0}},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.initializeBase()}})},function(t,e,n){"use strict";t.exports=Backbone.Model.extend({defaults:{isTexture:!1,imageFile:null,imageURL:null},toJSON:function(){return{isTexture:this.get("isTexture"),imageFile:this.get("imageFile"),imageURL:this.get("imageURL")}}})},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,traced:!1,traceLength:5,blocking:!1,drawPoint:!1},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.blocking=this.get("blocking"),t.drawPoint=this.get("drawPoint"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},,,,,,,,function(t,e,n){"use strict";var i=n(55).forEach,r=n(156)("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var i=n(9);t.exports=i.Promise},function(t,e,n){var i=n(9),r=n(26),o=i.String,s=i.TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw s("Can't set "+o(t)+" as a prototype")}},function(t,e,n){var i,r,o,s,a,u,c,l,f=n(9),h=n(81),p=n(103).f,d=n(251).set,y=n(252),v=n(307),_=n(308),g=n(192),m=f.MutationObserver||f.WebKitMutationObserver,x=f.document,P=f.process,w=f.Promise,M=p(f,"queueMicrotask"),b=M&&M.value;b||(i=function(){var t,e;for(g&&(t=P.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():o=void 0,t}}o=void 0,t&&t.enter()},y||g||_||!m||!x?!v&&w&&w.resolve?((c=w.resolve(void 0)).constructor=w,l=h(c.then,c),s=function(){l(i)}):g?s=function(){P.nextTick(i)}:(d=h(d,f),s=function(){d(i)}):(a=!0,u=x.createTextNode(""),new m(i).observe(u,{characterData:!0}),s=function(){u.data=a=!a})),t.exports=b||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,s()),o=e}},function(t,e,n){var i=n(90),r=n(9);t.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},function(t,e,n){var i=n(90);t.exports=/web0s(?!.*chrome)/i.test(i)},function(t,e,n){var i=n(41),r=n(35),o=n(253);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(9);t.exports=function(t,e){var n=i.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=n},function(t,e){t.exports="object"==typeof window},function(t,e,n){var i=n(105).PROPER,r=n(17),o=n(254);t.exports=function(t){return r((function(){return!!o[t]()||""!==""[t]()||i&&o[t].name!==t}))}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(9),r=n(64),o=n(53),s=n(74),a=i.RangeError;t.exports=function(t){var e=o(s(this)),n="",i=r(t);if(i<0||i==1/0)throw a("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){var i=n(9);t.exports=i},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=n(644),a=n(67).createSVGEle,u=npGeo,c=u.Vector2,l=u.Utils.ANGLE_PER_ARC;t.exports=function(){function t(e){(0,r.default)(this,t),this.environmentConfig=e,this.el=a("g"),this.el.setAttributeNS(null,"fill-opacity",1),this.bArrow_view=new s(e),this.eArrow_view=new s(e),this.bArrow_el=this.bArrow_view.el,this.eArrow_el=this.eArrow_view.el}return(0,o.default)(t,[{key:"bArrow",value:function(t){if(t)return this.el.appendChild(this.bArrow_el),void this.bArrow_view.position(this._getBeginArrowInfo());this.bArrow_el.parentNode&&this.bArrow_el.parentNode.removeChild(this.bArrow_el)}},{key:"eArrow",value:function(t){if(t)return this.el.appendChild(this.eArrow_el),void this.eArrow_view.position(this._getEndArrowInfo());this.eArrow_el.parentNode&&this.eArrow_el.parentNode.removeChild(this.eArrow_el)}},{key:"style",value:function(t){t&&(this.el.setAttributeNS(null,"fill",t.color),this.bArrow_view.updateWidth(t.width),this.eArrow_view.updateWidth(t.width))}},{key:"transGTS",value:function(t){return this.axisTransformer.transGTS(t)}},{key:"_getCorrectPos",value:function(t,e){var n=c.createByPoints(e,t);return n.isZero()?t:(n.normalize().multiplyScalar(-this.bArrow_view.getArrowLength()),t.translate(n))}},{key:"_getArrowGeo",value:function(t,e){return{position:t,angle:c.createByPoints(e,t).angle()*l+180}}}]),t}()},function(t,e,n){var i=n(17);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){"use strict";var i=n(29),r=n(13),o=n(17),s=n(259),a=n(41),u=n(78),c=n(79),l=n(158),f=s.ArrayBuffer,h=s.DataView,p=h.prototype,d=r(f.prototype.slice),y=r(p.getUint8),v=r(p.setUint8);i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new f(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(d&&void 0===e)return d(a(this),t);for(var n=a(this).byteLength,i=u(t,n),r=u(void 0===e?n:e,n),o=new(l(this,f))(c(r-i)),s=new h(this),p=new h(o),_=0;i<r;)v(p,_++,y(s,i++));return o}})},function(t,e,n){var i=n(9).Array,r=Math.abs,o=Math.pow,s=Math.floor,a=Math.log,u=Math.LN2;t.exports={pack:function(t,e,n){var c,l,f,h=i(n),p=8*n-e-1,d=(1<<p)-1,y=d>>1,v=23===e?o(2,-24)-o(2,-77):0,_=t<0||0===t&&1/t<0?1:0,g=0;for((t=r(t))!=t||t===1/0?(l=t!=t?1:0,c=d):(c=s(a(t)/u),t*(f=o(2,-c))<1&&(c--,f*=2),(t+=c+y>=1?v/f:v*o(2,1-y))*f>=2&&(c++,f/=2),c+y>=d?(l=0,c=d):c+y>=1?(l=(t*f-1)*o(2,e),c+=y):(l=t*o(2,y-1)*o(2,e),c=0));e>=8;)h[g++]=255&l,l/=256,e-=8;for(c=c<<e|l,p+=e;p>0;)h[g++]=255&c,c/=256,p-=8;return h[--g]|=128*_,h},unpack:function(t,e){var n,i=t.length,r=8*i-e-1,s=(1<<r)-1,a=s>>1,u=r-7,c=i-1,l=t[c--],f=127&l;for(l>>=7;u>0;)f=256*f+t[c--],u-=8;for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)n=256*n+t[c--],u-=8;if(0===f)f=1-a;else{if(f===s)return n?NaN:l?-1/0:1/0;n+=o(2,e),f-=a}return(l?-1:1)*n*o(2,f-e)}}},function(t,e,n){n(262)("Float32",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},function(t,e,n){var i=n(9),r=n(17),o=n(190),s=n(31).NATIVE_ARRAY_BUFFER_VIEWS,a=i.ArrayBuffer,u=i.Int8Array;t.exports=!s||!r((function(){u(1)}))||!r((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||r((function(){return 1!==new u(new a(2),1,void 0).length}))},function(t,e,n){var i=n(35),r=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(9),r=n(64),o=i.RangeError;t.exports=function(t){var e=r(t);if(e<0)throw o("The argument can't be less than 0");return e}},function(t,e,n){var i=n(81),r=n(40),o=n(152),s=n(47),a=n(46),u=n(157),c=n(141),l=n(189),f=n(31).aTypedArrayConstructor;t.exports=function(t){var e,n,h,p,d,y,v=o(this),_=s(t),g=arguments.length,m=g>1?arguments[1]:void 0,x=void 0!==m,P=c(_);if(P&&!l(P))for(y=(d=u(_,P)).next,_=[];!(p=r(y,d)).done;)_.push(p.value);for(x&&g>2&&(m=i(m,arguments[2])),n=a(_),h=new(f(v))(n),e=0;n>e;e++)h[e]=x?m(_[e],e):_[e];return h}},function(t,e,n){"use strict";var i=n(13),r=n(31),o=i(n(330)),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return o(s(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var i=n(47),r=n(78),o=n(46),s=Math.min;t.exports=[].copyWithin||function(t,e){var n=i(this),a=o(n),u=r(t,a),c=r(e,a),l=arguments.length>2?arguments[2]:void 0,f=s((void 0===l?a:r(l,a))-c,a-u),h=1;for(c<u&&u<c+f&&(h=-1,c+=f-1,u+=f-1);f-- >0;)c in n?n[u]=n[c]:delete n[u],u+=h,c+=h;return n}},function(t,e,n){"use strict";var i=n(31),r=n(55).every,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(40),o=n(193),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(t){var e=arguments.length;return r(o,s(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(55).filter,o=n(334),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("filter",(function(t){var e=r(s(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)}))},function(t,e,n){var i=n(335),r=n(163);t.exports=function(t,e){return i(r(t),e)}},function(t,e,n){var i=n(46);t.exports=function(t,e){for(var n=0,r=i(e),o=new t(r);r>n;)o[n]=e[n++];return o}},function(t,e,n){"use strict";var i=n(31),r=n(55).find,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(55).findIndex,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(55).forEach,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(t){r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(144).includes,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(144).indexOf,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(9),r=n(17),o=n(13),s=n(31),a=n(87),u=n(25)("iterator"),c=i.Uint8Array,l=o(a.values),f=o(a.keys),h=o(a.entries),p=s.aTypedArray,d=s.exportTypedArrayMethod,y=c&&c.prototype,v=!r((function(){y[u].call([1])})),_=!!y&&y.values&&y[u]===y.values&&"values"===y.values.name,g=function(){return l(p(this))};d("entries",(function(){return h(p(this))}),v),d("keys",(function(){return f(p(this))}),v),d("values",g,v||!_,{name:"values"}),d(u,g,v||!_,{name:"values"})},function(t,e,n){"use strict";var i=n(31),r=n(13),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=r([].join);s("join",(function(t){return a(o(this),t)}))},function(t,e,n){"use strict";var i=n(31),r=n(85),o=n(344),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return r(o,s(this),e>1?[t,arguments[1]]:[t])}))},function(t,e,n){"use strict";var i=n(85),r=n(60),o=n(64),s=n(46),a=n(156),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),h=l||!f;t.exports=h?function(t){if(l)return i(c,this,arguments)||0;var e=r(this),n=s(e),a=n-1;for(arguments.length>1&&(a=u(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},function(t,e,n){"use strict";var i=n(31),r=n(55).map,o=n(163),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("map",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(t))(e)}))}))},function(t,e,n){"use strict";var i=n(31),r=n(264).left,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return r(o(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=n(264).right,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return r(o(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(31),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var t,e=r(this).length,n=s(e/2),i=0;i<n;)t=this[i],this[i++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var i=n(9),r=n(40),o=n(31),s=n(46),a=n(263),u=n(47),c=n(17),l=i.RangeError,f=i.Int8Array,h=f&&f.prototype,p=h&&h.set,d=o.aTypedArray,y=o.exportTypedArrayMethod,v=!c((function(){var t=new Uint8ClampedArray(2);return r(p,t,{length:1,0:3},1),3!==t[1]})),_=v&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new f(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){d(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(v)return r(p,this,n,e);var i=this.length,o=s(n),c=0;if(o+e>i)throw l("Wrong length");for(;c<o;)this[e+c]=n[c++]}),!v||_)},function(t,e,n){"use strict";var i=n(31),r=n(163),o=n(17),s=n(95),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("slice",(function(t,e){for(var n=s(a(this),t,e),i=r(this),o=0,u=n.length,c=new i(u);u>o;)c[o]=n[o++];return c}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var i=n(31),r=n(55).some,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var i=n(9),r=n(13),o=n(17),s=n(69),a=n(187),u=n(31),c=n(246),l=n(247),f=n(94),h=n(248),p=i.Array,d=u.aTypedArray,y=u.exportTypedArrayMethod,v=i.Uint16Array,_=v&&r(v.prototype.sort),g=!(!_||o((function(){_(new v(2),null)}))&&o((function(){_(new v(2),{})}))),m=!!_&&!o((function(){if(f)return f<74;if(c)return c<67;if(l)return!0;if(h)return h<602;var t,e,n=new v(516),i=p(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,i[t]=t-2*e+3;for(_(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==i[t])return!0}));y("sort",(function(t){return void 0!==t&&s(t),m?_(this,t):a(d(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!m||g)},function(t,e,n){"use strict";var i=n(31),r=n(79),o=n(78),s=n(163),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(t,e){var n=a(this),i=n.length,u=o(t,i);return new(s(n))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,r((void 0===e?i:o(e,i))-u))}))},function(t,e,n){"use strict";var i=n(9),r=n(85),o=n(31),s=n(17),a=n(95),u=i.Int8Array,c=o.aTypedArray,l=o.exportTypedArrayMethod,f=[].toLocaleString,h=!!u&&s((function(){f.call(new u(1))}));l("toLocaleString",(function(){return r(f,h?a(c(this)):c(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!s((function(){u.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var i=n(31).exportTypedArrayMethod,r=n(17),o=n(9),s=n(13),a=o.Uint8Array,u=a&&a.prototype||{},c=[].toString,l=s([].join);r((function(){c.call({})}))&&(c=function(){return l(this)});var f=u.toString!=c;i("toString",c,f)},function(t,e,n){"use strict";n(4);var i=n(0);n(75),n(195),n(3),n(49);var r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(421),h=n(72).transFromNum,p=THREE,d=p.Geometry,y=p.LineSegments,v=p.MeshBasicMaterial,_=p.Vector3,g=npGeo.Utils,m=g.HALF_PI,x=g.isZero,P=Math.abs,w=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){var r;(0,o.default)(this,n),(r=e.call(this,t,i))._direction="x",r._axisTickGeo=new d,r._axisTickGeo.index=null,r._tickMaterial=new v({transparent:!0}),r._axisTickMesh=new y(r._axisTickGeo,r._tickMaterial);for(var s=0;s<100;s++)r._axisTickGeo.vertices.push(new _);return r._geoGroup.add(r._axisTickMesh),r}return(0,s.default)(n,[{key:"update_geo",value:function(t,e){this._updateDirection(t);var n=this._updateArrowMesh(t,e),i=(0,r.default)(n,2),o=i[0],s=i[1];this._updateLinePosition(o,s),this._updateAxis(t,e),this._trace()}},{key:"_updateDirection",value:function(t){return x(t.sp.x-t.ep.x)?x(t.sp.y-t.ep.y)?void(this._direction="z"):this._direction="y":this._direction="x"}},{key:"updateMaterial",value:function(t){var e=t.stroke;this._updateLineMaterial(t.stroke),this._updateDepthMaterial(t.blocking,e),this._updateAssistMaterial(e.width/300),this._updateArrowMaterial(e.color,e.opacity),this._tickMaterial.setValues({color:t.stroke.color,opacity:t.stroke.opacity})}},{key:"updateShow",value:function(t){if(t)return this._group.add(this._geoGroup),this._tracedGroup&&this._group.add(this._tracedGroup),void(this._numberLabelGroupDom&&(this._numberLabelGroupDom.style.display="block"));this._group.remove(this._geoGroup),this._tracedGroup&&this._group.remove(this._tracedGroup),this._numberLabelGroupDom&&(this._numberLabelGroupDom.style.display="none")}},{key:"_createTickText",value:function(t,e,n,i){if(0==t.number){var r=this._paper.worldToScreen(n);if(!(r.x<0||r.y<0)){var o=this._getTickText(t.PI2,e,i),s=document.createElement("p");s.style.position="absolute",s.style.margin="0px",s.style.fontSize="18px",s.style.color=t.stroke.color,s.style.left=r.x+"px",s.style.top=r.y+"px",s.innerHTML=katex.renderToString("\\footnotesize{"+o+"}"),this._numberLabelGroupDom.appendChild(s)}}}},{key:"_updateAxis",value:function(t,e){var n=t.sp,i=t.ep,r=e.step,o=e.PI2,s=e.tick,a=(e.number,(r.toString().split(".")[1]||"").length),u=o?r:r*m;this._axisTickMesh.visible=0==s,this._numberLabelGroupDom&&($(this._numberLabelGroupDom).remove(),this._numberLabelGroupDom=null),this._numberLabelGroupDom=document.createElement("div"),this._numberLabelGroupDom.style.pointerEvents="none";var c=n[this._direction],l=i[this._direction];c+=P(c%u),l-=P(l%u),this.count=0;for(var f=0,h=-u;h>=c;)f++,M.call(this,e,this._direction,this.count,h,-f,a),h-=u;for(f=0,h=u;h<=l;)f++,M.call(this,e,this._direction,this.count,h,f,a),h+=u;for(f=this.count;f<100;f++)this._axisTickGeo.vertices[f].set(0,0,0);this._axisTickGeo.verticesNeedUpdate=!0,this._paper.el.appendChild(this._numberLabelGroupDom)}},{key:"_getTickText",value:function(t,e,n){return 0==t?this._fracPI2(e):h(e,n)}},{key:"_fracPI2",value:function(t){var e=math.fraction(t/2);return(1===e.s?"":"-")+(1===e.d?"":"\\frac{")+(1===e.n?"":e.n)+""+(1===e.d?"":"}{"+e.d+"}")}}]),n}(f),M=function(t,e,n,i,r,o){this._axisTickGeo.vertices[n]&&this._axisTickGeo.vertices[n+1]&&("x"==e?(this._axisTickGeo.vertices[n].set(i,-.3,0),this._axisTickGeo.vertices[n+1].set(i,0,0)):"y"==e?(this._axisTickGeo.vertices[n].set(-.3,i,0),this._axisTickGeo.vertices[n+1].set(0,i,0)):(this._axisTickGeo.vertices[n].set(.3,0,i),this._axisTickGeo.vertices[n+1].set(0,0,i)),this._createTickText(t,r*t.step,this._axisTickGeo.vertices[n+1],o),this.count=this.count+2)};t.exports=w},function(t,e,n){"use strict";var i=n(42),r=n(13),o=n(40),s=n(17),a=n(145),u=n(151),c=n(150),l=n(47),f=n(109),h=Object.assign,p=Object.defineProperty,d=r([].concat);t.exports=!h||s((function(){if(i&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||"abcdefghijklmnopqrst"!=a(h({},e)).join("")}))?function(t,e){for(var n=l(t),r=arguments.length,s=1,h=u.f,p=c.f;r>s;)for(var y,v=f(arguments[s++]),_=h?d(a(v),h(v)):a(v),g=_.length,m=0;g>m;)y=_[m++],i&&!o(p,v,y)||(n[y]=v[y]);return n}:h},function(t,e,n){var i=n(41),r=n(250);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},function(t,e,n){"use strict";var i=n(9),r=n(13),o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",u=i.RangeError,c=r(s.exec),l=Math.floor,f=String.fromCharCode,h=r("".charCodeAt),p=r([].join),d=r([].push),y=r("".replace),v=r("".split),_=r("".toLowerCase),g=function(t){return t+22+75*(t<26)},m=function(t,e,n){var i=0;for(t=n?l(t/700):t>>1,t+=l(t/e);t>455;)t=l(t/35),i+=36;return l(i+36*t/(t+38))},x=function(t){var e,n,i=[],r=(t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=h(t,n++);if(r>=55296&&r<=56319&&n<i){var o=h(t,n++);56320==(64512&o)?d(e,((1023&r)<<10)+(1023&o)+65536):(d(e,r),n--)}else d(e,r)}return e}(t)).length,o=128,s=0,c=72;for(e=0;e<t.length;e++)(n=t[e])<128&&d(i,f(n));var y=i.length,v=y;for(y&&d(i,"-");v<r;){var _=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<_&&(_=n);var x=v+1;if(_-o>l((2147483647-s)/x))throw u(a);for(s+=(_-o)*x,o=_,e=0;e<t.length;e++){if((n=t[e])<o&&++s>2147483647)throw u(a);if(n==o){for(var P=s,w=36;;){var M=w<=c?1:w>=c+26?26:w-c;if(P<M)break;var b=P-M,R=36-M;d(i,f(g(M+b%R))),P=l(b/R),w+=36}d(i,f(g(P))),c=m(s,x,v==y),s=0,v++}}s++,o++}return p(i,"")};t.exports=function(t){var e,n,i=[],r=v(y(_(t),s,"."),".");for(e=0;e<r.length;e++)n=r[e],d(i,c(o,n)?"xn--"+x(n):n);return p(i,".")}},function(t,e,n){"use strict";n(4);var i=n(0);n(70),n(3),n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f={silent:!0},h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,r.default)(this,n),(o=e.call(this,t,i,s,a))._rs=null,o.elementsRepository.on("update",(function(){o._rs=null})),o}return(0,o.default)(n,[{key:"pNum",get:function(){var t=this._attributes.pNum.calcu();return isFinite(t)?t:0}},{key:"isSegmentColor",get:function(){return this._attributes.isSegmentColor&&this._attributes.isSegmentColor.get()}},{key:"varisMap",get:function(){return this._attributes.varis.getValue()}},{key:"rs",get:function(){if(this._rs)return this._rs;for(var t,e=[],n=this.varisMap,i=0;t=n[i];i++){this.dataRepository.getDataByName(t.varName).getChildren00(e)}var r=this.inputs[0];return this._rs=e.filter((function(t){return t._isMyParent(r)})),this._rs}},{key:"_attrChanged",value:function(){this._rs=null,this._getGeoByElement=this.isSegmentColor?this.__segmentColor__:this.__notSegmentColor__}},{key:"_calcuSamples",value:function(t){for(var e=[],n=this._preCalculate(t),i=this.inputs,r=t-2,o=i[i.length-1],s=0;s<t;s++)if(this._calculateRS(this.rs),e=this._handleArrByModel(e,o),s<r)for(var a,u=0;a=n[u];u++)a.data.addValue(a.step,f);else for(var c,l=0;c=n[l];l++)c.data.setValue(c.endVal,f);return this._restoreVaRs(n),e}},{key:"_handleArrByModel",value:function(t,e){return e.isUgly||t.push(this._getGeoByElement(e)),t}},{key:"_preCalculate",value:function(t){var e=this,n=this.varisMap.map((function(n){var i=n.startVal.calcu(),r=n.endVal.calcu(),o=(r-i)/(t-1),s=n.varName,a=e.dataRepository.getDataByName(s),u=e.algebraic.get(s);return a.setValue(i,f),{varName:s,data:a,step:o,oriVal:u,endVal:r}}));return this._calculateRS(this.rs),n}},{key:"_restoreVaRs",value:function(t){for(var e,n=0;e=t[n];n++)e.data.setValue(e.oriVal,f);this._calculateRS(this.rs)}},{key:"_calculateRS",value:function(t){for(var e,n=0;e=t[n];n++)e.calculate(!0)}}]),n}(l);h.prototype.isLocus=!0,t.exports=h},function(t,e,n){"use strict";var i=n(0);n(3),n(49),n(87),n(431),n(115),n(132),n(22),n(20),n(286);var r=i(n(28)),o=i(n(1)),s=i(n(2));t.exports=function(){function t(e){(0,o.default)(this,t),this.algebraic=e,this.varis=[]}return(0,s.default)(t,[{key:"set",value:function(t){for(var e,n=[],i=0;e=t[i];i++)n.push({varName:e.varName,startVal:this.algebraic.createAlgeObjByStr(e.startVal),endVal:this.algebraic.createAlgeObjByStr(e.endVal)});this.varis=n}},{key:"get",value:function(){for(var t,e=[],n=0;t=this.varis[n];n++)e.push({varName:t.varName,startVal:t.startVal.toString(),endVal:t.endVal.toString()});return e}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(){return!0}},{key:"getVaris",value:function(){for(var t,e={},n=0;t=this.varis[n];n++)(0,r.default)(e,t.startVal.getVaris(),t.endVal.getVaris());return e}},{key:"getCustomFuns",value:function(){for(var t,e=new Set,n=0;t=this.varis[n];n++)t.startVal.getCustomFuns().concat(t.endVal.getCustomFuns()).forEach((function(t){return e.add(t)}));return Array.from(e)}},{key:"getValue",value:function(){return this.varis}}]),t}()},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.call(this)}return(0,o.default)(n,[{key:"calculate",value:function(t){var e=this;this._once.calculate((function(n){return n?(e._currentTimes++,e._isTimesEnd()?(e.stop(),t(!0)):(e._once.play(e._direct),t(!1))):t(!1)}))}}]),n}(n(451));t.exports=l},function(t,e,n){var i=n(13),r=n(47),o=Math.floor,s=i("".charAt),a=i("".replace),u=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,f,h){var p=n+t.length,d=i.length,y=l;return void 0!==f&&(f=r(f),y=c),a(h,y,(function(r,a){var c;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,n);case"'":return u(e,p);case"<":c=f[u(a,1,-1)];break;default:var l=+a;if(0===l)return r;if(l>d){var h=o(l/10);return 0===h?r:h<=d?void 0===i[h-1]?s(a,1):i[h-1]+s(a,1):r}c=i[l-1]}return void 0===c?"":c}))}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=npGeo.Line3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return new f(this.inputs[0].output_Model,this.inputs[1].output_Model)}},{key:"_attrChanged",value:function(){}}]),n}(l);h.prototype.isAxisLine=!0,h.prototype.isAxisLine3D=!0,h.prototype.canCopy=!1,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=npGeo,h=f.Vector3,p=f.Plane3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0],e=this.inputs[1],n=t.output_Model.sp,i=t.output_Model.ep,r=e.output_Model.sp,o=e.output_Model.ep,s=[new h(n.x+r.x,n.y+r.y,n.z+r.z),new h(r.x+i.x,r.y+i.y,r.z+i.z),new h(i.x+o.x,i.y+o.y,i.z+o.z),new h(o.x+n.x,o.y+n.y,o.z+n.z)];return new p(s,[[0,1,3],[3,1,2]])}}]),n}(l);d.prototype.isAxisPlane=!0,d.prototype.canCopy=!1,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Sphere3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.__calculate__(t):f.createUgly()}},{key:"__getInfo__",value:function(t,e,n,i){this.radius=t;var r=this._attributes.unit.get();return f.createByNormalAndCorner(e,t,n,this.__angleToArc__(i.corner,r),this._attributes.roundness.get(),this.__angleToArc__(i.gapAngle,r))}}]),n}(l);h.prototype.isSphere=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.MarchCubesUtils,p=h.createCubes,d=h.marchCubes,y=f.SurfaceTriangle3,v=f.Vector3,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a){var u;return(0,r.default)(this,n),(u=e.call(this,t,i,o,s,a)).samplePoints=[],u.cubePoints=[],u.independentPoints=u.samplePoints,u}return(0,o.default)(n,[{key:"__calcFunStr__",value:function(){this.__updateSamplePoints();for(var t,e=d(this.cubePoints),n=e.vertices,i=e.vplanes,r=e.vedges,o=[],s=0;t=n[s];s++){var a=this.__getRightPoint__(t);o.push(new v(a.x,a.y,a.z))}return new y(o,i,r)}},{key:"__updateSamplePoints",value:function(){}},{key:"__calcSamplePoints__",value:function(){}},{key:"__getRightPoint__",value:function(t){}},{key:"__calcRestart__",value:function(t,e,n,i,r,o,s,a,u){var c=p(t,e,n,i,r,o,s,a,u),l=c.points,f=c.cubes;return this.samplePoints=l,this.cubePoints=f,this.__calcFunStr__()}},{key:"__isOnlyFunstrChange__",value:function(t,e,n,i,r,o,s,a,u){return this.minXValue===t&&this.maxXValue===e&&this.gridXValue===n&&this.minYValue===i&&this.maxYValue===r&&this.gridYValue===o&&this.minZValue===s&&this.maxZValue===a&&this.gridZValue===u||(this.minXValue=t,this.maxXValue=e,this.gridXValue=n,this.minYValue=i,this.maxYValue=r,this.gridYValue=o,this.minZValue=s,this.maxZValue=a,this.gridZValue=u,!1)}}]),n}(l);t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(493),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new f(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return h(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this.__getExpressValues__();return e?t.translate(this.getVector(e)):t.constructor.createUgly()}}]),n}(l);p.prototype.isTransform=!0,p.prototype.isTranslate=!0,t.exports=p},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(178);t.exports=i.extend({defaults:{show:!0,traced:!1,traceLength:5,blocking:!1,step:1,PI2:1,tick:0,number:1},initialize:function(){this.strokeModel=new r,this.arrowModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.blocking=this.get("blocking"),t.step=this.get("step"),t.PI2=this.get("PI2"),t.tick=this.get("tick"),t.number=this.get("number"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}})},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,traced:!1,traceLength:5,blocking:!1},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,traced:!1,traceLength:5,blocking:!1},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(294),s=i.extend({defaults:{show:!0,traced:!1,traceLength:5,wireframe:!1,colorful:!1,underside:!0,blocking:!0},initialize:function(){this.fillModel=new r,this.textureModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.traceLength=this.get("traceLength"),t.wireframe=this.get("wireframe"),t.colorful=this.get("colorful"),t.underside=this.get("underside"),t.blocking=this.get("blocking"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},,,,,,,,,,,,,,,,function(t,e,n){"use strict";n(4);var i=n(0);n(70),n(3),n(16),n(121);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(569),p=n(573),d=n(574),y=n(575),v=n(576),_=n(577),g=n(277).preview,m=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i;return(0,r.default)(this,n),i=e.call(this,t),(0,l.default)((0,s.default)(i),"Events",{ADD_ELEMENT:0,REMOVE_ELEMENT:1,RESET_ELEMENTS:2,ADD_ELEMENT_SELECT:3,REMOVE_ELEMENT_SELECT:4,UNDO_REDO:5,COPY_PASTE_CHANGE:6,PAPER_EVENT:7,PAPER_RESIZE:8,DOUBLE_CLICK_ON_ELEMENT:9,RIGHT_CLICK:10,CURRENT_AXIS:11,CAPTURE_GRID:12,HOVER_ELEMENT:13,STATUS:14,ADD_DATA:15,RESET_DATA:16}),i.algbraicSys=new npAlgebraic,i.dataRepository=new h(i.algbraicSys),i.elementsRepos=new p,i.nameConstructor=new d(i.elementsRepos),i.filter=new y(i.elementsRepos),i.selectManager=new v(i.elementsRepos),i.beforeLoading=new _,i._orientation="portrait",i._status="construct",i._initDOM(t),i}return(0,o.default)(n,[{key:"_initDOM",value:function(t){this.el=document.createElement("div"),this.el.className=g+" jzjy-preview",this.el.setAttribute("tabIndex","-1"),this.el.setAttribute("ondragstart","return false"),this.$el=$(this.el),t.innerHTML="",t.appendChild(this.el)}},{key:"_addEvents",value:function(){var t=this;this.selectManager.addEventListener(this.selectManager.Events.ADD_ELEMENT_SELECT,(function(e){t.dispatchEvent(t.Events.ADD_ELEMENT_SELECT,e)})),this.selectManager.addEventListener(this.selectManager.Events.REMOVE_ELEMENT_SELECT,(function(e){t.dispatchEvent(t.Events.REMOVE_ELEMENT_SELECT,e)})),this.undoRedo.on("UNDO_REDO",(function(e){t.dispatchEvent(t.Events.UNDO_REDO,{undo:0!==e.undo_length,redo:0!==e.redo_length})})),this.elementsRepos.on("add",(function(e){t.dispatchEvent(t.Events.ADD_ELEMENT,e),t.toggleStatus("construct")})),this.elementsRepos.on("reset",(function(e){t.dispatchEvent(t.Events.RESET_ELEMENTS,e)})),this.elementsRepos.on("update",(function(){t.toggleStatus("construct")})),this.dataRepository.addEventListener(this.dataRepository.Events.ADD,(function(e){t.dispatchEvent(t.Events.ADD_DATA,e)})),this.dataRepository.addEventListener(this.dataRepository.Events.RESET,(function(){t.dispatchEvent(t.Events.RESET_DATA)})),this.cov.on("PAPER_RESIZE",(function(e){t.dispatchEvent(t.Events.PAPER_RESIZE,e)})),this.bindEvents.addEventListener(this.bindEvents.Events.PAPER_EVENT,(function(e){t.dispatchEvent(t.Events.PAPER_EVENT,e)})),this.bindEvents.addEventListener(this.bindEvents.Events.DOUBLE_CLICK_ON_ELEMENT,(function(e){t.dispatchEvent(t.Events.DOUBLE_CLICK_ON_ELEMENT,e)})),this.bindEvents.addEventListener(this.bindEvents.Events.CONTEXTMENU,(function(e){t.dispatchEvent(t.Events.RIGHT_CLICK,e)})),this.bindEvents.addEventListener(this.bindEvents.Events.HOVER_ELEMENT,(function(e){t.dispatchEvent(t.Events.HOVER_ELEMENT,e)})),this.bindEvents.addEventListener(this.bindEvents.Events.TEXT_FORM,(function(e){t.dispatchEvent(t.Events.TEXT_FORM,e)})),this.copyPasteService.addEventListener(this.copyPasteService.Events.COPY_PASTE_CHANGE,(function(e){t.dispatchEvent(t.Events.COPY_PASTE_CHANGE,e)}))}},{key:"loadFromJSON",value:function(t){var e=this;try{this.selectManager.reset(),this.elementsRepos.reset(),this.algbraicSys.reset(),this.dataRepository.reset(),this.undoRedo.reset(),this.nameConstructor.reset()}catch(t){console.log("loadFromJSON reset error")}var n=this.environmentConfig.getEnvironmentConfig(),i=this.beforeLoading.convertToV3(t);this.beforeLoading.preprocessAudio(i,(function(t){e._formJSON3(t),e.paperView.updateForceRender(!1),e.environmentConfig.setEnvironmentConfig(n),e.toggleStatus("construct")}))}},{key:"_formJSON3",value:function(t){}},{key:"toJSON3",value:function(t){}},{key:"getDataList",value:function(){return this.dataRepository.getDataList()}},{key:"getSelectedModels",value:function(){return this.selectManager.getSelectedModels()}},{key:"getSelectedIds",value:function(){return this.selectManager.getSelected()}},{key:"clearSelected",value:function(){this.selectManager.clearSelected()}},{key:"selectByIds",value:function(t){this.selectManager.selectByIds(t)}},{key:"removeSelectedByIds",value:function(t){this.selectManager.removeByIds(t)}},{key:"canSelectParents",value:function(){return this.selectManager.canSelectParents()}},{key:"canSelectChildren",value:function(){return this.selectManager.canSelectChildren()}},{key:"selectParents",value:function(){this.selectManager.selectParents()}},{key:"selectChildren",value:function(){this.selectManager.selectChildren()}},{key:"pickElementById",value:function(t){if("bindPickUp"!==this.getPaperEvent())throw"Function pickElementById only work on bindPickUp Event!";this.bindEvents.pickElement(this.elementsRepos.get(t))}},{key:"filterElementById",value:function(t){return this.filter.filterElements(this.elementsRepos.get(t))}},{key:"highlightElementById",value:function(t,e){var n=this.elementsRepos.get(t);n&&n.elementView&&n.elementView.updateHighlight(e)}},{key:"undo",value:function(){this.undoRedo.undo()}},{key:"redo",value:function(){this.undoRedo.redo()}},{key:"canCopyElements",value:function(t){return this.copyPasteService.canCopy(t)}},{key:"copyElements",value:function(){this.copyPasteService.copyService()}},{key:"canPasteElements",value:function(){return this.copyPasteService.canPaste()}},{key:"pasteElements",value:function(){this.copyPasteService.pasteService()}},{key:"setCurrentUserAxisById",value:function(t){this.paperView.setCurrentUserAxis(t)}},{key:"getCurrentUserAxisId",value:function(){return this.paperView.getCurrentUserAxisID()}},{key:"getCurrentUserAxis",value:function(){return this.paperView.bindEvents.currentUserAxis}},{key:"getCaptureGrid",value:function(){return this.bindEvents.getCapture()}},{key:"setCaptureGrid",value:function(t){this.bindEvents.toggleCapture(t)}},{key:"setForceRender",value:function(t){this.paperView.updateForceRender(t)}},{key:"getForceRender",value:function(){return this.paperView.forceRender}},{key:"canClearTrace",value:function(){return this.paperView.canClearTrace()}},{key:"clearTrace",value:function(){this.paperView.clearTrace()}},{key:"resetPaper",value:function(){return this.cov.reset()}},{key:"setPaperEvent",value:function(t,e){this.bindEvents[t]&&this.bindEvents[t](e)}},{key:"getPaperEvent",value:function(){return this.bindEvents.getEventType()}},{key:"getNameByElement",value:function(t){return this.nameConstructor.getNameByElement(t)}},{key:"getElementById",value:function(t){return this.elementsRepos.get(t)}},{key:"getElements",value:function(){return this.elementsRepos.models.slice(0)}},{key:"getAutoDataName",value:function(){return this.dataRepository.getAutoDataName()}},{key:"isCanDriveStr",value:function(t,e){return this.dataRepository.isCanDriveStr(t,e)}},{key:"filterUnExistFreeVaribles",value:function(t){return this.elementsRepos.filterUnExistFreeVaribles(t)}},{key:"lock",value:function(t){this.cov.lock(t)}},{key:"exportPaperHTML",value:function(t){for(var e,n=document.querySelectorAll("style[name=NetpadDynamicMath]"),i=[],r=0;e=n[r];r++)i.push(e.outerHTML);return this.paperView.exportPaperHTML(t)+i.join("")}},{key:"getPaperThumbnail",value:function(){return this.paper.get("thumbnail")}},{key:"setPaperThumbnail",value:function(t){return this.paper.set({thumbnail:t})}},{key:"setEnvironmentConfig",value:function(t){this.environmentConfig.setEnvironmentConfig(t)}},{key:"getEnvironmentConfig",value:function(){return this.environmentConfig.getEnvironmentConfig()}},{key:"isChanged",value:function(){return this.undoRedo.get("isChanged")}},{key:"setOrientation",value:function(t){t!=this._orientation&&(this._orientation=t,this.cov.setOrientation(t))}},{key:"getNextAssistPosition",value:function(){return this.paperView.getNextAssistPosition()}},{key:"toggleStatus",value:function(t){this._status!==t&&(this._status="construct"===t?"construct":"steps",this.paperView.toggleStatus(this._status),this.dispatchEvent(this.Events.STATUS,{status:this._status}))}},{key:"appendById",value:function(t){this.paperView.appendById(t)}},{key:"detachById",value:function(t){this.paperView.detachById(t)}},{key:"startAnimationFrame",value:function(){this.cov.startAnimationFrame()}},{key:"stopAnimationFrame",value:function(){this.cov.stopAnimationFrame()}}]),n}(np.EventDispatcher);t.exports=m},function(t,e,n){"use strict";n(51),n(3),n(22);var i=["Action","Animation","Variable","Audio","Calculation","CustomFunction"],r=["rStrObj","entityHeight","pWidth","pHeight"],o=["radius","height","width","height"],s="#0064cd";function a(t){t.hasOwnProperty("font_color")&&(t.color=t.font_color),t.hasOwnProperty("font_opacity")&&(t.opacity=t.font_opacity),t.hasOwnProperty("font_size")&&(t.size=t.font_size)}t.exports=function(t){if("3.1"===t.version)return t;if("3.0"!==t.version)throw"version error!";return console.log("start converting! v3 data: "),console.log(JSON.stringify(t)),t.elements.forEach((function(e){var n;e.label&&e.label.font&&a(e.label.font),t.defaultTheme&&((n=t.defaultTheme).Action&&(n.Action.fill={color:"#337ab7",opacity:1},n.Action.stroke={color:"#ccc",opacity:1}),n.Animation&&(n.Animation.fill={color:"#337ab7",opacity:1},n.Animation.stroke={color:"#ccc",opacity:1},n.Animation.icon={color:"#fff",opacity:1},n.Animation.animationType="2"),n.Variable&&(n.Variable.fill={color:s,opacity:1},n.Variable.stroke={color:"#ccc",opacity:1},n.Variable.icon={color:s,opacity:1}),i.forEach((function(t){n[t]&&a(n[t].font)})),n.CustomizedAxis&&a(n.CustomizedAxis.AxisLine.font),n.GlobalAxis&&n.GlobalAxis.AxisLine&&a(n.GlobalAxis.AxisLine.font),a(n.Label));var u=t.defaultTheme&&t.defaultTheme.Audio?t.defaultTheme.Audio.font.color:s,c=t.defaultTheme&&t.defaultTheme.Audio?t.defaultTheme.Audio.font.opacity:1;e.dis&&(!function(t,e,n,i){t.font&&a(t.font),"AnimationButton"!==e.type&&"ActionButton"!==e.type||(t.fill={color:"#337ab7",opacity:1==t.btnStyle?0:1},t.stroke||(t.stroke={}),t.stroke.color="#ccc",t.stroke.opacity=1==t.btnStyle?0:1),"AnimationButton"===e.type&&(t.icon={color:"#fff",opacity:1},t.animationType="2"),"ActionButton"===e.type&&1==t.btnStyle&&(t.borderRadius=Math.floor(t.imgWidth/2)||4),"Variable"===e.type&&(t.fill={color:s,opacity:1},t.stroke||(t.stroke={}),t.stroke.color="#ccc",t.stroke.opacity=1,t.icon={color:s,opacity:1}),"Audio"===e.type&&(t.icon={color:t.font&&t.font.color?t.font.color:n,opacity:t.font&&t.font.hasOwnProperty("opacity")?t.font.opacity:i})}(e.dis,e,u,c),e.dis.angleRadius&&(e.def.attr||(e.def.attr={}),e.def.attr.angleLabelRadius=e.dis.angleRadius)),e.def&&e.def.attr&&function(t){"FreePicture"===t.type&&t.attr.hasOwnProperty("width")&&(t.attr.imgWidth=t.attr.width,t.attr.imgHeight=t.attr.height),"DynamicText"===t.type&&t.attr.width&&(t.attr.textWidth=t.attr.width),"Dilate"===t.type&&t.attr.hasOwnProperty("d")&&(t.attr.ratio=t.attr.d);for(var e,n=0;e=r[n];n++)t.attr.hasOwnProperty(e)&&(t.attr[o[n]]=t.attr[e])}(e.def)})),t.version="3.1",console.log(t),t}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Varible:function(t){var e=(0,i.default)(t,5),n=e[0];return{type:"Variable",name:n,outVais:n,def:{type:"VariableRuler",attr:{min:e[1],max:e[2],step:e[3],value:e[4]}}}},Text:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];try{n=decodeURI(n)}catch(t){}return{type:"HtmlText",def:{type:"DynamicText",attr:{text:n,position:r}}}},createTextArea:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.Text(r,{left:n.x,top:n.y})},Group:function(t){var e=(0,i.default)(t,2),n=e[0];e[1];return{type:"Group",def:{type:"Group",parents:n}}},InsertPic:function(t){var e=(0,i.default)(t,1)[0];return{type:"Picture",def:{type:"FreePicture",attr:{picPath:e?e.modelAttr.picPath:""}}}},InsertAudio:function(){return{type:"Audio",def:{type:"DynamicAudio"}}},AnimationVars:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2];return{type:"AnimationButton",attr:{name:e[3]},def:{type:"Animation",attr:{varObjs:n,aniType:r,quenceType:o,times:e[4]}}}},AnimationVar:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"AnimationButton",attr:{name:e[1]},def:{type:"Animation",varName:n}}},ButtonFun:function(){return{type:"ActionButton",def:{type:"Action"}}},CustomFunction:function(t){return{type:"CustomFunction",def:{type:"CustomFunction",attr:(0,i.default)(t,1)[0]}}},Combination_Point:function(t,e){var n=(0,i.default)(t,2),r=n[0],o=n[1];return"Picture"==e[o].type?{type:"Picture",def:{type:"CombinationPicture",parents:[r,o]}}:{type:"Text",def:{type:"CombinationText",parents:[r,o]}}}}},function(t,e,n){"use strict";var i=n(0);n(3),n(22),n(27),n(216),n(75),n(49),n(185);var r=i(n(43));t.exports={Iter:function(t){var e=(0,r.default)(t,5),n=e[0],i=e[1],o=e[2];e[3];return{type:"Iter",def:{type:"Iter",parents:n,attr:{spNum:i,num:o||3,rsHide:e[4]||[]}}}},PropElement:function(t,e){var n=(0,r.default)(t,2),i=n[0],o=n[1],s=e[i];for(var a in s.def.attr||(s.def.attr={}),"Iter"===s.type&&o.hasOwnProperty("showPoint")&&(s.dis||(s.dis={}),s.dis.showPoint=o.showPoint,delete o.showPoint),o)s.def.attr[a]=o[a];return"AnimationButton"===s.type&&o.hasOwnProperty("direct")&&(s.attr||(s.attr={}),s.attr.direct=o.direct,s.def.attr.hasOwnProperty("playExp")||(s.def.attr.playExp="1")),"Variable"===s.type&&o.hasOwnProperty("isPlay")&&(s.attr||(s.attr={}),s.attr.isPlay=o.isPlay),s},PointPar:function(t,e){var n=(0,r.default)(t,3),i=n[0],o=n[1],s=n[2],a=e[i];return a.outVais=s,a.def.attr||(a.def.attr={}),a.def.attr.inVais=o,a.def.attr.outVais=s,a},AnimationProp:function(t,e){var n=(0,r.default)(t,6),i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=e[i];l.def.attr||(l.def.attr={}),l.def.attr.aniType=c,l.def.attr.quenceType=0,l.def.attr.varObjs=[{varName:l.def.varName,s:a,e:u,timer:o,num:s}]},LocusRange:function(t,e){var n=(0,r.default)(t,3),i=n[0],o=n[1],s=n[2],a=e[i];return a.def.attr||(a.def.attr={}),a.def.attr.pNum=s,a.def.attr.varis.forEach((function(t,e){t.startVal=o[e][0],t.endVal=o[e][1]})),a},MeasureText:function(t,e){var n=(0,r.default)(t,4),i=n[0],o=n[1],s=n[2],a=n[3],u=e[i];if(u.name=u.name||a,u.outVais=a,u.def.attr||(u.def.attr={}),u.def.attr.unit=s,!o)return u;var c=new RegExp(/(toFixed\(.*?\))/g),l=o.match(c);if(!l)return u;var f=new RegExp(/\d+/),h=parseInt(f.exec(l.pop()));return isNaN(h)?void 0:(u.def.attr.accuracy=h,u)},PropMeasure:function(t,e){return this.PropElement(t,e)},PropLineLabel:function(t,e){return this.PropElement(t,e)},IterProp:function(t,e){return this.PropElement(t,e)},ButtonProp:function(t,e){return this.PropElement(t,e)},ArcProp:function(){}}},function(t,e,n){"use strict";n(27),n(51),n(3),n(22);var i={Variable:"Variable",HtmlText:"HtmlText",Picture:"Picture",Audio:"Audio",AnimationButton:"AnimationButton",ActionButton:"ActionButton",CustomFunction:"CustomFunction",Measure:"Measure"};function r(t,e){t.dis=e.private||{},e.penProp&&(e.penProp.stroke_color?t.dis.stroke={color:e.penProp.stroke_color,opacity:e.penProp.hasOwnProperty("stroke_opacity")?e.penProp.stroke_opacity:1,style:e.penProp.stroke_style,width:e.penProp.stroke_width}:t.dis.stroke=e.penProp),e.fillProp&&(e.fillProp.fillColor?t.dis.fill={color:e.fillProp.fillColor,opacity:e.fillProp.hasOwnProperty("fillOpacity")?e.fillProp.fillOpacity:1}:t.dis.fill=e.fillProp),e.fontProp&&(t.dis.font=e.fontProp),e.texture&&(t.dis.texture=e.texture),e.private&&function(t,e){t.attr||(t.attr={}),!t.name&&e.name&&(t.name=e.name,delete e.name),e.hasOwnProperty("selectable")&&(t.attr.selectable=e.selectable,delete e.selectable),e.hasOwnProperty("locked")&&(t.attr.locked=e.locked,delete e.locked),e.hasOwnProperty("zIndex")&&(t.attr.zIndex=e.zIndex,delete e.zIndex),e.hasOwnProperty("bArrow")&&(t.dis.arrow={bArrow:e.bArrow,eArrow:e.eArrow},delete e.bArrow,delete e.eArrow),t.def.attr||(t.def.attr={}),e.hasOwnProperty("shader")&&(t.def.attr.shader=e.shader,delete e.shader),e.hasOwnProperty("callShow")&&(t.label||(t.label={}),t.label.callShow=e.callShow,delete e.callShow,e.hasOwnProperty("nameVal")&&(t.label.nameVal=e.nameVal,delete e.nameVal)),i[t.type]&&(e.position&&(t.def.attr.position=e.position,delete e.position),e.affine&&(t.def.attr.affine=e.affine,delete e.affine),e.accuracy&&(t.def.attr.accuracy=e.accuracy,delete e.accuracy),e.hasOwnProperty("curStep")&&(t.def.attr.curStep=e.curStep,delete e.curStep),e.hasOwnProperty("offset")&&(t.def.attr.offset=e.offset,delete e.offset),"Picture"===t.type&&e.hasOwnProperty("picPath")&&(t.def.attr.picPath=e.picPath,delete e.picPath),e.hasOwnProperty("width")&&(t.def.attr.width=e.width,delete e.width),e.hasOwnProperty("height")&&(t.def.attr.height=e.height,delete e.height))}(t,e.private)}t.exports=function(t,e,n,i){try{var o=t.fun.shift(),s=o.name,a=o.arg,u=n[s](a,i);return u.id=e,i.push(u),t.label&&(u.label=t.label,t.label.fontProp&&(u.label.font=t.label.fontProp,delete t.label.fontProp)),t.display&&r(u,t.display),t.fun.forEach((function(t){var e=t.name,r=t.arg;n[e](r,i)})),u}catch(t){}}},function(t,e,n){"use strict";var i=n(0);n(3),n(188);var r=i(n(28)),o=i(n(1)),s=i(n(2)),a=math,u=a.matrix,c=a.multiply,l=a.inv,f=a.subset,h=a.index,p=a.dot,d=npGeo.Vector2,y=npGeo.Utils.isZero,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t),this.options={translateX:-400,translateY:-400,scaleX:.02,scaleY:-.02},this.reset(e)}return(0,s.default)(t,[{key:"reset",value:function(t){(0,r.default)(this.options,t);var e=u([[1,0,0],[0,1,0],[0,0,1]]),n=-this.options.translateX,i=-this.options.translateY,o=u([[1,0,0],[0,1,0],[n,i,1]]),s=this.options.scaleX,a=this.options.scaleY,f=u([[s,0,0],[0,a,0],[0,0,1]]);this._matrix_STG=c(c(e,o),f),this._matrix_GTS=l(this._matrix_STG),this._setVector()}},{key:"_setVector",value:function(){this._vector1_STG=u([f(this._matrix_STG,h(0,0)),f(this._matrix_STG,h(1,0)),f(this._matrix_STG,h(2,0))]),this._vector2_STG=u([f(this._matrix_STG,h(0,1)),f(this._matrix_STG,h(1,1)),f(this._matrix_STG,h(2,1))]),this._vector1_GTS=u([f(this._matrix_GTS,h(0,0)),f(this._matrix_GTS,h(1,0)),f(this._matrix_GTS,h(2,0))]),this._vector2_GTS=u([f(this._matrix_GTS,h(0,1)),f(this._matrix_GTS,h(1,1)),f(this._matrix_GTS,h(2,1))])}},{key:"matrix_STG",value:function(){return this._matrix_STG.toArray()}},{key:"matrix_GTS",value:function(){return this._matrix_GTS.toArray()}},{key:"transGTS",value:function(t){return this._trans(t,this._vector1_GTS,this._vector2_GTS)}},{key:"transSTG",value:function(t){return this._trans(t,this._vector1_STG,this._vector2_STG)}},{key:"getTranslateX",value:function(){return this.options.translateX}},{key:"getTranslateY",value:function(){return this.options.translateY}},{key:"isEqualRatio",value:function(){return y(this.options.scaleX-this.options.scaleY)}},{key:"getXScale",value:function(){return this.options.scaleX}},{key:"getYScale",value:function(){return this.options.scaleY}},{key:"_trans",value:function(t,e,n){var i=u([t.x,t.y,1]);return new d(p(i,e),p(i,n))}}]),t}();t.exports=v},function(t,e,n){"use strict";var i=npGeo.Vector2,r=function(t,e){this.inputs=[t,e],this.ele1=t,this.ele2=e,this.dirty=!0};r.isLegal=function(t,e){if(t.output_Model.isLinear&&e.output_Model.isLinear)return new r(t,e)},r.prototype={getIntersection:function(){var t=this.inputs[0],e=this.inputs[1];return this.dirty&&(this.intersections=i.intersections(t.output_Model,e.output_Model),this.dirty=!1),this.intersections},isInline:function(t){var e=this.ele1.output_Model,n=this.ele2.output_Model;return e.isLine&&n.isLine?e.justPointOn(t)&&n.justPointOn(t):e.isLine?e.justPointOn(t):!n.isLine||n.justPointOn(t)}};var o=[];t.exports={getIntersectionSets:function(t,e){if(t!=e){for(var n=0;n<o.length;n++){var i=o[n].inputs;if(i.indexOf(t)>-1&&i.indexOf(e)>-1)return o[n]}var s=r.isLegal(t,e);return s&&(o.push(s),t.intersectionSets||(t.intersectionSets=[]),t.intersectionSets.push(s),e.intersectionSets||(e.intersectionSets=[]),e.intersectionSets.push(s)),s}},reset:function(){o=[]}}},function(t,e,n){"use strict";var i=npGeo,r=i.Line2,o=i.Vector2,s=function(t,e,n){this.inputs=[t,e,n],this.point1=t,this.point2=e,this.ele=n,this.dirty=!0};s.isLegal=function(t,e,n){if(n.output_Model.isLinear)return new s(t,e,n)},s.prototype={is2PointsIntersection:!0,getIntersection:function(){if(this.dirty){var t=this.ele.output_Model,e=new r(this.inputs[0].output_Model,this.inputs[1].output_Model);this.intersections=o.intersections(e,t),this.dirty=!1}return this.intersections},isInline:function(t){var e=this.ele.output_Model;return e&&e.justPointOn(t)}};var a=[];t.exports={getIntersectionSets:function(t,e,n){if(t!=e){for(var i=0;i<a.length;i++){var r=a[i].inputs;if(r.indexOf(t)>-1&&r.indexOf(e)>-1&&r.indexOf(n)>-1)return a[i]}var o=s.isLegal(t,e,n);return o&&(a.push(o),t.intersectionSets_2Points||(t.intersectionSets_2Points=[]),t.intersectionSets_2Points.push(o),e.intersectionSets_2Points||(e.intersectionSets_2Points=[]),e.intersectionSets_2Points.push(o),n.intersectionSets_2Points||(n.intersectionSets_2Points=[]),n.intersectionSets_2Points.push(o)),o}},reset:function(){a=[]}}},function(t,e,n){"use strict";var i=[],r=npGeo,o=r.Line2,s=r.Vector2,a=function(t,e,n){this.inputs=[t,e,n],this.point=t,this.line=e,this.ele=n,this.dirty=!0};a.prototype={isParaIntersect:!0,getIntersection:function(){if(this.dirty){if(!this.line.output_Model.isLine)return this.dirty=!1,s.createUgly();var t=this.ele.output_Model,e=this.point.output_Model,n=e.translate(this.line.output_Model.toVector()),i=new o(e,n);this.intersections=s.intersections(i,t),this.dirty=!1}return this.intersections},isInline:function(t){var e=this.inputs[2].output_Model;return!e.isLine||e.justPointOn(t)}},t.exports={getIntersectionSets:function(t,e,n){if(e!=n&&t.output_Model.isPoint&&e.output_Model.isLine){for(var r=0;r<i.length;r++){var o=i[r].inputs;if(o.indexOf(t)>-1&&o.indexOf(e)>-1&&o.indexOf(n)>-1)return i[r]}var s;return n.output_Model.isLinear&&(s=new a(t,e,n)),s&&(i.push(s),t.intersectionSets_PV||(t.intersectionSets_PV=[]),t.intersectionSets_PV.push(s),e.intersectionSets_PV||(e.intersectionSets_PV=[]),e.intersectionSets_PV.push(s),n.intersectionSets_PV||(n.intersectionSets_PV=[]),n.intersectionSets_PV.push(s)),s}},reset:function(){i=[]}}},function(t,e,n){"use strict";var i=npGeo,r=i.Utils,o=i.Line2,s=i.Vector2,a=r.HALF_PI,u=[],c=function(t,e,n){this.inputs=[t,e,n],this.point=t,this.line=e,this.ele=n,this.dirty=!0};c.prototype={isParaIntersect:!0,getIntersection:function(){if(this.dirty){if(!this.line.output_Model.isLine)return this.dirty=!1,s.createUgly();var t=this.ele.output_Model,e=this.line.output_Model,n=this.point.output_Model,i=n.translate(e.rotate(e.sp,a).toVector()),r=new o(n,i);this.intersections=s.intersections(r,t),this.dirty=!1}return this.intersections},isInline:function(t){var e=this.inputs[2].output_Model;return!e.isLine||e.justPointOn(t)}},t.exports={getIntersectionSets:function(t,e,n){if(e!=n&&t.output_Model.isPoint&&e.output_Model.isLine){for(var i=0;i<u.length;i++){var r=u[i].inputs;if(r.indexOf(t)>-1&&r.indexOf(e)>-1&&r.indexOf(n)>-1)return u[i]}var o;return n.output_Model.isLinear&&(o=new c(t,e,n)),o&&(u.push(o),t.intersectionSets_PV||(t.intersectionSets_PV=[]),t.intersectionSets_PV.push(o),e.intersectionSets_PV||(e.intersectionSets_PV=[]),e.intersectionSets_PV.push(o),n.intersectionSets_PV||(n.intersectionSets_PV=[]),n.intersectionSets_PV.push(o)),o}},reset:function(){u=[]}}},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=npGeo.Line2,a=s.createUgly(),u=function(){function t(e,n){(0,r.default)(this,t),this.inputs=[e,n],this.circle1=e,this.circle2=n,this.dirty=!0}return(0,o.default)(t,[{key:"getTangent",value:function(){return this.dirty&&(this.dirty=!1,this.Tangents=s.tangent(this.circle1.output_Model,this.circle2.output_Model),this.dirty=!1),this.Tangents}}],[{key:"isLegal",value:function(e,n){if((e.output_Model.isCircle||e.output_Model.isArc)&&(n.output_Model.isCircle||n.output_Model.isArc))return new t(e,n)}}]),t}(),c=function(){function t(e,n){(0,r.default)(this,t),this.inputs=[e,n],this.point=e,this.element=n,this.dirty=!0}return(0,o.default)(t,[{key:"calcTangent",value:function(){this.point.output_Model.isUgly?this.Tangents=[a,a]:this.Tangents=s.tangent(this.inputs[0].output_Model,this.inputs[1].output_Model)}},{key:"getTangent",value:function(){return this.dirty&&(this.calcTangent(),this.dirty=!1),this.Tangents}}],[{key:"isLegal",value:function(e,n){return e.output_Model.isPoint&&(n.output_Model.isConic||n.output_Model.isCircle||n.output_Model.isArc||n.output_Model.isPaths)?new t(e,n):(e.output_Model.isConic||e.output_Model.isCircle||e.output_Model.isArc||e.output_Model.isPaths)&&n.output_Model.isPoint?new t(n,e):void 0}}]),t}();var l=[];t.exports={getTangentSets:function(t,e){if(t!=e){for(var n=0;n<l.length;n++){var i=l[n].inputs;if(i.indexOf(t)>-1&&i.indexOf(e)>-1)return l[n]}var r=u.isLegal(t,e)||c.isLegal(t,e);return r&&(l.push(r),t.tangentSets||(t.tangentSets=[]),t.tangentSets.push(r),e.tangentSets||(e.tangentSets=[]),e.tangentSets.push(r)),r}},reset:function(){l=[]}}},function(t,e,n){"use strict";var i=npGeo.Vector2,r=n(398),o=[],s=function(t,e){this.inputs=[t,e],this.point=t,this.conic=e,this.dirty=!0,this.tangentSet=r.getTangentSets(t,e)};s.prototype={getTangentPoints:function(){if(this.dirty){var t=this.tangentSet.getTangent(),e=[i.intersections(t[0],this.conic.output_Model)[0],i.intersections(t[1],this.conic.output_Model)[0]];this.dirty=!1,this.tangent=t,this.TangentPoints=e}return this.TangentPoints},getTangent:function(){return this.dirty&&this.getTangentPoints(),this.tangent}},t.exports={getTangentPointsSets:function(t,e){for(var n=0;n<o.length;n++){var i=o[n].inputs;if(i.indexOf(t)>-1&&i.indexOf(e)>-1)return o[n]}if(t.output_Model.isPoint&&(e.output_Model.isCircle||e.output_Model.isConic)){var r=new s(t,e);return o.push(r),t.tangentPointsSets||(t.tangentPointsSets=[]),t.tangentPointsSets.push(r),e.tangentPointsSets||(e.tangentPointsSets=[]),e.tangentPointsSets.push(r),r}},reset:function(){o=[]}}},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22),n(106),n(131),n(8),n(82);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=np.EventDispatcher,p=["DynamicText","Animation","Action"],d=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i,o=t.undoRedo,a=t.elementsRepos,u=t.selectManager,c=t.dataRepository,f=t.is3D,h=void 0!==f&&f,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,r.default)(this,n),i=e.call(this),(0,l.default)((0,s.default)(i),"Events",{COPY_PASTE_CHANGE:0}),(0,l.default)((0,s.default)(i),"_canPaste",!1),i.undoRedo=o,i.elementsRepos=a,i.selectManager=u,i.dataRepository=c,i.allowCopyCrossPages=p,i.is3D=h,i._checkFromLocalStorage(!0),window.addEventListener("storage",(function(t){"NPCopyElement"===t.key&&i._checkFromLocalStorage(!0)})),i}return(0,o.default)(n,[{key:"_checkFromLocalStorage",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._getPasteFromLocalStorage();if(t&&!e.allowCopyCrossPages)return console.warn("netpad: Copy Cross Pages is not allowed"),void this.setCanPaste(!1);this.pasteModel=e,this.setCanPaste(!0)}},{key:"_getPasteFromLocalStorage",value:function(){var t=localStorage.getItem("NPCopyElement");return t?JSON.parse(t):{}}},{key:"canCopy",value:function(t){if(!t||0==t.length)return!1;for(var e,n=0;e=t[n];n++)if(!e.canCopy||!e.canCopy())return!1;return!0}},{key:"canPaste",value:function(){return this._canPaste}},{key:"copyService",value:function(){var t=this.selectManager.getSelectedModels();if(this.canCopy(t)){for(var e,n=[],i=[],r=[],o=0;e=t[o];o++)y(e,n,i,r);var s=this.generatePasteModel(n,i,r);localStorage.setItem("NPCopyElement",JSON.stringify(s)),this._checkFromLocalStorage(!1)}}},{key:"setCanPaste",value:function(t){this._canPaste=t,this.dispatchEvent(this.Events.COPY_PASTE_CHANGE)}},{key:"pasteService",value:function(){var t=this;if(this.canPaste()){var e={},n=this._getPasteFromLocalStorage(),i=n.inputsData,r=n.freePointsJSON3,o=n.constrainELementJSON3;i.forEach((function(e){t.dataRepository.includes(e.paramName)||t.dataRepository.addByName(e.paramName,e.value)})),this._pasteFreePoint(e,r),this._pasteConstrainElements(e,o)}}},{key:"_pasteFreePoint",value:function(t,e){var n=this,i=!0;e.forEach((function(e){e.def.attr.position.x+=1;var r=e.id,o=n.undoRedo.constructByJSON3(e,i);i=!1,t[r]=o}))}},{key:"_pasteConstrainElements",value:function(t,e){var n=this;e.forEach((function(e){p.includes(e.def.type)&&(e.def.attr.position={top:e.def.attr.position.top+30,left:e.def.attr.position.left}),e.def.parents&&(e.def.parents=e.def.parents.map((function(e){return t[e]?t[e]:e}))),"Iter"===e.type&&(e.def.attr.inputs_id=e.def.attr.inputs_id.map((function(e){return t[e]?t[e]:e})),e.def.attr.rsHide=e.def.attr.rsHide.map((function(e){return t[e]?t[e]:e})));var i=e.id,r=n.undoRedo.constructByJSON3(e,!1);t[i]=r}))}},{key:"generatePasteModel",value:function(t,e,n){return{inputsData:n.map((function(t){return t.toJSONObj()})),freePointsJSON3:v(t.map((function(t){return t.toJSON3()}))),constrainELementJSON3:v(e.map((function(t){return t.toJSON3()}))),is3D:this.is3D,allowCopyCrossPages:this.allowCopyCrossPages}}}]),n}(h);function y(t,e,n,i){if(t.constraint.canCopy&&!t.get("isDeleted"))if(t.constraint&&t.constraint.isFreePoint){if(e.includes(t))return;e.push(t)}else if(-1==n.indexOf(t)){if(n.push(t),!t.inputs)return;t.inputsData&&t.inputsData.forEach((function(t){i.includes(t)||i.push(t)}));for(var r,o=0,s=t.inputs;r=s[o];o++)y(r,e,n,i)}}function v(t){return t.sort((function(t,e){return t.id-e.id})),t}t.exports=d},function(t,e,n){"use strict";var i=n(0);n(3),n(22);var r=i(n(19)),o=i(n(1)),s=i(n(2)),a=function(){function t(e,n,i){var r=this;(0,o.default)(this,t),this._isNewMacro=!0,this.div=new np.NPResize({item:i.elementView.$div_el,onlyShowse:"HtmlText"==i.output_Model.type,showCircle:!1,canDrag:!1,paperView:n,callback:function(t){var n=t.width>0?t.width:-t.width,o=t.height>0?t.height:-t.height,s={};s[i.get("id")]={def:{attr:{imgWidth:n,imgHeight:o,textWidth:n,position:{left:t.left,top:t.top},scale:{scaleX:t.scaleX,scaleY:t.scaleY}}}},e.updateElements(s,r._isNewMacro),r._isNewMacro=!1},up:function(){}}),this.toActive(!0)}return(0,s.default)(t,[{key:"toActive",value:function(t){this.div.toActive(t)}}]),t}(),u=(0,s.default)((function t(e){var n=this,i=e.undoRedo,s=e.elementsRepos,u=e.paperView,c=e.selectManager;(0,o.default)(this,t),(0,r.default)(this,"resizeDiv",[]),(0,r.default)(this,"resizeMap",{}),c.addEventListener(c.Events.ADD_ELEMENT_SELECT,(function(t){t.selected.forEach((function(t){var e=s.get(t);if((e.constraint.isPicture||e.constraint.isDynamicText)&&!e.get("locked")){-1===n.resizeDiv.indexOf(e)&&n.resizeDiv.push(e);var r=n.resizeDiv.indexOf(e);n.resizeMap[r]=new a(i,u,e)}}))})),c.addEventListener(c.Events.REMOVE_ELEMENT_SELECT,(function(t){t.selected.forEach((function(t){var e=s.get(t);-1!==n.resizeDiv.indexOf(e)&&n.resizeMap[n.resizeDiv.indexOf(e)].toActive(!1)}))})),s.on("reset",(function(){n.resizeDiv=[],n.resizeMap={}}))}));t.exports=u},function(t,e,n){"use strict";n(8);var i=n(605),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.paperView=t.paperView,this.elementsV=t.paperView.elementsV,this.selectManager=t.selectManager,this.undoRedo=t.undoRedo,this.bindEvents=t.bindEvents,this.elementsKeyFun=new i(t,n),this.forbidKeys=(e||[]).map((function(t){return t.toUpperCase()})),this.keyDownEvent=this.__commonKeyDown__.bind(this),this.keyUpEvents=this._keyUp.bind(this),this.addEvent()};r.prototype={dispose:function(){document.removeEventListener("keydown",this.keyDownEvent,!1),document.removeEventListener("keyup",this.keyUpEvents,!1)},addEvent:function(){document.addEventListener("keydown",this.keyDownEvent,!1),document.addEventListener("keyup",this.keyUpEvents,!1)},removeEvent:function(){document.removeEventListener("keydown",this.keyDownEvent,!1),document.removeEventListener("keyup",this.keyUpEvents,!1)},__commonKeyDown__:function(t){if(function(t){return!("input"==t.target.nodeName.toLocaleLowerCase()||"textarea"==t.target.nodeName.toLocaleLowerCase())}(t)&&-1===this.forbidKeys.indexOf(t.key.toUpperCase())){var e="down_";return t.ctrlKey&&(e+="ctrl_"),t.shiftKey&&(e+="shift_"),t.altKey&&(e+="alt_"),e+=t.keyCode,this.elementsKeyFun[e]?(t.preventDefault(),void this.elementsKeyFun[e](t)):void 0}},_keyUp:function(t){t.shiftKey||t.ctrlKey||this.elementsKeyFun.reset()}},t.exports=r},function(t,e,n){"use strict";n(27),n(21),n(3),n(159);var i=function(t,e){this.selectManager=t,this.bindEvents=e,this.isRender=!0,this.bindEvents.addEventListener(this.bindEvents.Events.PAPER_EVENT,function(t){this.isRender="bindSelect"==t.eventType,!this.isRender&&this.easyHandle&&this.easyHandle.dispose()}.bind(this)),this.$el=$('<div style="position:absolute;bottom: 20px;width: 100%;text-align: center;text-shadow: 0 2px 4px #000;transform: translateZ(1px)"></div>'),this.selectManager.addEventListener(this.selectManager.Events.ADD_ELEMENT_SELECT,this.__elementChange__.bind(this)),this.selectManager.addEventListener(this.selectManager.Events.REMOVE_ELEMENT_SELECT,this.__elementChange__.bind(this))};i.prototype={__elementChange__:function(){if(this.isRender){this.easyHandle&&this.easyHandle.dispose();var t=this.selectManager.getSelectedModels();if(!t||0!=t.length){var e=t[t.length-1];e.output_Model.isVariableRulerOutput?this.__renderByVariableRuler__(e):e.output_Model.isAnimationButtonOutput&&this.__renderByAnimation__(e)}}},__renderByAnimation__:function(t){this.easyHandle=new o(t),this.$el.append(this.easyHandle.$el)},__renderByVariableRuler__:function(t){this.easyHandle=new r(t),this.$el.append(this.easyHandle.$el)}};var r=function(t){this.model=t,this.$el=$('<div style="width: 285px;overflow: hidden;margin: auto; padding: 0 20px;background:rgba(0,0,0,0.1);color: #fff;font-size: 24px;border-radius:5px;"></div>');var e=$('<div style="display: flex;align-items:center;justify-content: center;height: 50px;"></div>');this.$playButton=$('<div style="height: 1em;"><svg class="font-icon" aria-hidden="true" style="margin-right: 20px;"><use xlink:href="#netpad-play"></use></svg></div>');var n=$('<div style="padding: 0 10px;min-width: 70px;display: inline-flex;background: rgba(255,255,255,0.5);"></div>');this.$value=$("<div></div>"),this.$valueInput=$('<input type="text" style="display: none;background: none;border: 0;outline: 0;text-shadow: 0 2px 4px #000;">'),this.$range=$('<input type="range" min="0" step="0.1" style="display: block;width:100%;"/>');var i=t.displayModel;i.get("showBtn")&&e.append(this.$playButton),e.append(n),i.get("showVariable")&&n.append("<span>"+t.outputsData[0].name+"=</span>"),n.append(this.$value).append(this.$valueInput),this.$el.append(e),i.get("showRuler")&&this.$el.append($('<div style="padding: 10px 0;"></div>').append(this.$range)),this.playOrStopFun=this.onPlayFun,this.onChangeEvent=this.onChange.bind(this),this.onIsPlayChangeEvent=this.onIsPlayChange.bind(this),this.$range.on("input",this.changeWanted.bind(this)),this.$range.on("change",this.changeWanted.bind(this)),this.$value.on("mousedown touchstart",function(t){this.$valueInput.val(t.currentTarget.innerText).show().css("width",this.$value.width()+30+"px").focus(),this.$value.hide()}.bind(this)),this.$valueInput.on("keydown",function(t){t.stopPropagation(),13==t.keyCode&&t.currentTarget.blur(t)}.bind(this)),this.$valueInput.on("blur",this.onVaisChange.bind(this)),this.$playButton.on("mousedown touchstart",this.onPlayOrStop.bind(this)),this.model.on("OUTPUT_CHANGE",this.onChangeEvent),this.model.on("change:isPlay",this.onIsPlayChangeEvent),this.onChange()};r.prototype={dispose:function(){this.model.off("OUTPUT_CHANGE",this.onChangeEvent),this.model.off("change:isPlay",this.onIsPlayChangeEvent),this.$el.remove()},onChange:function(){var t=this.model.getValue();this.onRangeChange(t),this.onValueChange(t),this.onIsPlayChange()},onRangeChange:function(t){this.$range.attr("min",t.min),this.$range.attr("max",t.max),this.$range.attr("step",t.step),this.$range.val(t.value)},onIsPlayChange:function(){this.model.get("isPlay")?(this.$playButton.find("svg").html('<use xlink:href="#netpad-pause"></use>'),this.playOrStopFun=this.onStopFun):(this.$playButton.find("svg").html('<use xlink:href="#netpad-play"></use>'),this.playOrStopFun=this.onPlayFun)},onVaisChange:function(t){if(t.currentTarget.style.display="none",this.$value.show(),""==(e=t.currentTarget.value.trim())||isNaN(e))this.onValueChange(this.model);else{var e,n=parseFloat(this.model.getValue().max),i=parseFloat(this.model.getValue().min);(e=parseFloat(e))<i?e=i:e>n&&(e=n),this.model.setValue(e),this.$value.html(e)}},onValueChange:function(t){this.$value.html(t.value)},changeWanted:function(t){var e=t.currentTarget.value,n=this.model.getValue();e<n.min?this.model.setValue(n.min):e>n.max?this.model.setValue(n.max):(this.model.setValue(e),t.stopPropagation())},onPlayOrStop:function(t){t.stopPropagation(),t.preventDefault(),this.playOrStopFun()},onPlayFun:function(){this.model.play()},onStopFun:function(){this.model.stop()}};var o=function(t){this.model=t,this.$el=$('<div style="display: inline-flex;background:rgba(0,0,0,0.1);padding: 10px 20px;align-items:center;font-size: 30px;color: #fff;border-radius:5px;"></div>'),this.$name=$('<span"></span>'),this.$playBtn=$('<div style="height: 1em;"><svg class="font-icon" aria-hidden="true" style="margin: 0 40px 0 20px;"><use xlink:href="#netpad-play"></use></svg></div>'),this.$antiBtn=$('<div style="height: 1em;"><svg class="font-icon" aria-hidden="true" style="margin-right: 20px;"><use xlink:href="#netpad-antiplay"></use></svg></div>'),this.$el.append(this.$name).append(this.$playBtn).append(this.$antiBtn),this.$playBtn.on("mousedown touchstart",this.playStatusChangeWanted.bind(this)),this.$antiBtn.on("mousedown touchstart",this.playStatusChangeWanted.bind(this)),this.onOutputChangeEvent=this.onOutputChange.bind(this),this.model.on("OUTPUT_CHANGE",this.onOutputChangeEvent),this.onNameChange(),this.onPlayStatusChange()};o.prototype={dispose:function(){this.model.off("OUTPUT_CHANGE",this.onOutputChangeEvent),this.$el.remove()},onOutputChange:function(){this.onNameChange(),this.onPlayStatusChange()},play:function(){this.$playBtn.attr("name","forwardPause"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-pause"></use>'),this.$antiBtn.attr("name","stop"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-stop"></use>')},continuePlay:function(){this.model.getValue().direct?(this.$playBtn.attr("name","pause"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-pause"></use>'),this.$antiBtn.attr("name","stop"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-stop"></use>')):(this.$playBtn.attr("name","stop"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-stop"></use>'),this.$antiBtn.attr("name","pause"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-pause"></use>'))},pause:function(){this.$playBtn.attr("name","stop"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-play2"></use>'),this.$antiBtn.attr("name","antiContinue"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-stop"></use>')},stop:function(){this.$playBtn.attr("name","play"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-play"></use>'),this.$antiBtn.attr("name","antiPlay"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-antiplay"></use>')},antiPlay:function(){this.$playBtn.attr("name","stop"),this.$playBtn.find("svg").html('<use xlink:href="#netpad-stop"></use>'),this.$antiBtn.attr("name","antiPause"),this.$antiBtn.find("svg").html('<use xlink:href="#netpad-pause"></use>')},onPlayStatusChange:function(){var t=this.model.output_Model.playStatus;t?1==t?this.play():-1==t?this.antiPlay():-2==t?this.pause():2==t&&this.continuePlay():this.stop()},playStatusChangeWanted:function(t){t.preventDefault(),t.stopPropagation(),this.model.constraint[t.currentTarget.getAttribute("name")](!0)},onNameChange:function(){this.model.get("name")||this.$name.text("");try{this.$name.html(katex.renderToString(this.model.get("name")))}catch(t){this.$name.text(this.model.get("name"))}}},t.exports=i},function(t,e,n){"use strict";var i=n(606),r=n(663),o=n(690),s=n(691),a=Backbone.View.extend({initialize:function(t){this.isLock=!1,this.isResize=!1,t.is3D?this.paperView=new r({model:t.paper},t,this):this.paperView=new i({model:t.paper},t,this),u.call(this),this.bindEvents=t.is3D?new s(this,this.paperView,t.undoRedo):new o(this,this.paperView,t.undoRedo)},render:function(){this.paperView.render()},lock:function(t){this.isLock=t},setOrientation:function(t){this.paperView.setOrientation(t),this.bindEvents.setOrientation(t),this.reset()},toggleScroll:function(t){this.$el.css("overflow",t?"auto":"hidden")},updateResize:function(t){this.isResize=t,this.trigger("PAPER_RESIZE",{isChanged:this.isResize})},reset:function(){this.bindEvents.resize(),this.updateResize(!1)},startAnimationFrame:function(){this.paperView.startAnimationFrame()},stopAnimationFrame:function(){this.paperView.stopAnimationFrame()}});function u(){this.$el=$("<div></div>").append(this.paperView.el).attr("ondragstart","return false").css("overflow","hidden").css("background","rgba(23, 19, 19, 0.63)").css("padding","0").css("width","100%").css("height","100%"),this.el=this.$el[0]}t.exports=a},function(t,e,n){"use strict";n(70),n(3);var i=npGeo.Vector2;t.exports=Backbone.View.extend({initialize_base:function(t){this.contentView=t,this.forceRender=!1,this.scale=1,this.isLandscape=!1,this.height=this.model.get("height"),this.getXYofEvtForMouse=this.portraitXYForMouse,this.getXYofEvtForTouch=this.portraitXYForTouch,this.listenTo(this.model,"clearTrace",this.clearTrace),this.listenTo(this.model,"change:width",this.onSizeChange),this.listenTo(this.model,"change:height",this.onSizeChange)},_initBindEvents:function(t,e){this.bindEvents=new t({preview:e,paperView:this,contentView:this.contentView,elementsV:this.elementsV,elementsRepos:e.elementsRepos,filter:e.filter,selectManager:e.selectManager,undoRedo:e.undoRedo,copyPasteService:e.copyPasteService,nameConstructor:e.nameConstructor})},setCursor:function(t){this.el.style.cursor=t?"url('https://comnp.netpad.net.cn/dynamicMath/images/public/"+t+".cur'),default":"default"},transformEl:function(t,e,n){this.scale=n;var i="translate("+t+"px,"+e+"px) scale("+this.scale+")",r="center center 0px";this.$el.css("-ms-transform",i).css("-webkit-transform",i).css("-moz-transform:",i).css("-o-transform",i).css("transform",i).css("-ms-transform-origin",r).css("-webkit-transform-origin",r).css("-moz-transform-origin",r).css("-o-transform-origin",r).css("transform-origin",r)},setOrientation:function(t){this.isLandscape="landscape"==t,this.isLandscape?(this.getXYofEvtForMouse=this.landscapeXYForMouse,this.getXYofEvtForTouch=this.landscapeXYForTouch):(this.getXYofEvtForMouse=this.portraitXYForMouse,this.getXYofEvtForTouch=this.portraitXYForTouch)},portraitXYForMouse:function(t){var e=this.el.getBoundingClientRect();return new i((t.pageX-e.left)/this.scale,(t.pageY-e.top)/this.scale)},portraitXYForTouch:function(t){var e=this.el.getBoundingClientRect();return new i((t.changedTouches[0].pageX-e.left)/this.scale,(t.changedTouches[0].pageY-e.top)/this.scale)},landscapeXYForMouse:function(t){var e=this.el.getBoundingClientRect();return new i((t.pageY-e.top)/this.scale,this.height-(t.pageX-e.left)/this.scale)},landscapeXYForTouch:function(t){var e=this.el.getBoundingClientRect();return new i((t.changedTouches[0].pageY-e.top)/this.scale,this.height-(t.changedTouches[0].pageX-e.left)/this.scale)},clearTrace:function(){if(this.canClearTrace())for(var t,e=this.elementsV.element_views,n=0;t=e[n];n++)t.model.displayModel.get("traced")&&t.clearTrace()},canClearTrace:function(){for(var t,e=this.elementsV.element_views,n=0;t=e[n];n++)if(t.model.displayModel.get("traced"))return!0;return!1},updateForceRender:function(t){t!=this.forceRender&&(this.forceRender=t,this.render(),this.trigger("forceRenderChange",this.forceRender))},render:function(){this.$el.append(this.elementsV.render(this.forceRender))},getNextAssistPosition:function(){return this.elementsV.getNextAssistPosition()},toggleStatus:function(t){this.elementsV.toggleStatus(t)},appendById:function(t){this.elementsV.appendById(t)},detachById:function(t){this.elementsV.detachById(t)},startAnimationFrame:function(){this.elementsV.startAnimationFrame()},stopAnimationFrame:function(){this.elementsV.stopAnimationFrame()},onSizeChange:function(){var t=this.model.get("width"),e=this.model.get("height");this.height=e,this.$el.css("width",t).css("height",e),this.elementsV.resize(t,e),this.contentView.reset()}})},function(t,e,n){"use strict";var i=n(0);n(70),n(3);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=np.EventDispatcher,u=function(){function t(e){(0,r.default)(this,t),(0,s.default)(this,"Events",{CAPTURE_GRID:0,PAPER_EVENT:1,CONTEXTMENU:2,DOUBLE_CLICK_ON_ELEMENT:3,OPEN_ATTR_FROM:4,CURRENT_AXIS:5,HOVER_ELEMENT:6,TEXT_FORM:7}),this.paperView=e.paperView,this.selectManager=e.selectManager,this.filter=e.filter,this.nameConstructor=e.nameConstructor,this.eventTypeManager={},this.eventType="bindSelect"}return(0,o.default)(t,[{key:"changeEvent",value:function(t){this.curFun&&this.curFun.removeEvent(),this.eventType=t,this.curFun=this.eventTypeManager[t],this.curFun.addEvent(),this.dispatchEvent(this.Events.PAPER_EVENT,{eventType:t})}},{key:"getEventType",value:function(){return this.eventType}},{key:"bindSelect",value:function(){this.paperView.setCursor(),this.changeEvent("bindSelect"),this.filter.addFilters(),this.filterCallback=null}},{key:"bindPickUp",value:function(t){this.changeEvent("bindPickUp"),this.filter.addFilters(t),t&&(this.filterCallback=t.callback,this.autoNamed=t.autoNamed)}},{key:"bindPoint",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindPoint")}},{key:"bindText",value:function(){this.changeEvent("bindText")}},{key:"bindSegment",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindSegment")}},{key:"bindCircle",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindCircle")}},{key:"pickElement",value:function(t){this.filterCallback?this.filter.filterElements(t)&&(this.autoNamed&&t&&t.nameModel&&!t.get("name")&&(t.set({name:this.nameConstructor.getNameByElement(t)}),t.nameModel.set({callShow:!1})),this.filterCallback(t)):this.selectManager.isSelected(t.get("id"))?this.selectManager.removeByIds([t.get("id")]):this.selectManager.selectByIds([t.get("id")])}}]),t}();$.extend(u.prototype,a.prototype),t.exports=u},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2));t.exports=function(){function t(){(0,r.default)(this,t),this.willElements=[]}return(0,o.default)(t,[{key:"reset",value:function(){for(var t;t=this.willElements.pop();){if(!t.elementView.updateHighlight)return;t.elementView.updateHighlight(!1)}}},{key:"setElementWillPointOn",value:function(t){for(var e=0,n=t.length;e<n;e++)this.setSingleElementWillPointOn(t[e])}},{key:"setSingleElementWillPointOn",value:function(t){t.elementView.updateHighlight&&(t.elementView.updateHighlight(!0),this.willElements.push(t))}},{key:"getWillElements",value:function(){return this.willElements}}]),t}()},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t),this.vLineEle=document.createElement("div"),this.vLineEle.style.zIndex="199409280",this.vLineEle.style.display="none",this.vLineEle.style.borderLeft="2px solid #00ff00",this.vLineEle.style.position="absolute",this.vLineEle.style.width="0",this.vLineEle.style.height="100%",this.hLineEle=document.createElement("div"),this.hLineEle.style.zIndex="199409280",this.hLineEle.style.display="none",this.hLineEle.style.borderTop="2px solid #00ff00",this.hLineEle.style.position="absolute",this.hLineEle.style.width="100%",this.hLineEle.style.height="0",e.on("UNDO_REDO",this.resetAll.bind(this)),n.addEventListener(n.Events.PAPER_EVENT,this.resetAll.bind(this))}return(0,o.default)(t,[{key:"setVLineEle",value:function(t){this.vLineEle.style.left=t+"px",this.vLineEle.style.display="block"}},{key:"resetVLineEle",value:function(){this.vLineEle.style.display="none"}},{key:"setHLineEle",value:function(t){this.hLineEle.style.top=t+"px",this.hLineEle.style.display="block"}},{key:"resetHLineEle",value:function(){this.hLineEle.style.display="none"}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=n(196).isInallowedBand,a=function(){function t(e){(0,r.default)(this,t),this.selectManager=e.selectManager,this.bindEvents=e.bindEvents,this.undoRedo=e.undoRedo,this.findElements=e.findElements,this.distinguishElements=e.distinguishElements,this.willManager=e.willManager,this.assistManager=e.assistManager,this.elementsRepos=e.elementsRepos,this.contentView=e.contentView,this.paperView=e.paperView,this.paper=e.paperView.model,this.el=e.paperView.bindEventsEl,this.preview=e,this.preScreenPos={x:0,y:0},this.initEvent(e)}return(0,o.default)(t,[{key:"transSTG",value:function(t){return this.paper.transSTG(t)}},{key:"transGTS",value:function(t){return this.paper.transGTS(t)}},{key:"isTouch",value:function(t){return t.changedTouches&&t.changedTouches[0]}},{key:"getXYofEvt",value:function(t){return this.isTouch(t)?this.paperView.getXYofEvtForTouch(t):this.paperView.getXYofEvtForMouse(t)}},{key:"__isMoved__",value:function(t,e,n){return!!n&&!s(e,n,void 0===t.pageX?10:5)}},{key:"getElementById",value:function(t){return this.elementsRepos.get(t)}},{key:"ElementByJSON3",value:function(t,e){var n=this.undoRedo.createCommand("CREATE",{fun:"ElementByJSON3",arg:[t]},e);return this.isNewMacro=!1,n}},{key:"createInterPoint",value:function(t,e){var n=this.undoRedo.constructByJSON3({type:"Point",def:{type:"IntersectionPoint",parents:[t.parents[0].get("id"),t.parents[1].get("id")],attr:{index:t.index||0}}},e);return this.isNewMacro=!1,n}}]),t}();t.exports=a},function(t,e,n){"use strict";var i=n(612);t.exports={initEvent:function(t){this.lastClickTime=0,this.align=new i(t),this._down=this._down.bind(this),this._move=this._move.bind(this),this._up=this._up.bind(this),this._dbClick=this._dbClick.bind(this),this.reset()},addEvent:function(){this.el.parentNode&&(this.el.parentNode.addEventListener("mousedown",this._down,!1),this.el.parentNode.addEventListener("touchstart",this._down,!1),this.el.parentNode.addEventListener("mousemove",this._move,!1),this.el.parentNode.addEventListener("touchmove",this._move,!1),this.el.parentNode.addEventListener("mouseup",this._up,!1),this.el.parentNode.addEventListener("touchend",this._up,!1),this.el.parentNode.addEventListener("dblclick",this._dbClick,!1))},removeEvent:function(){this.el.parentNode&&(this.el.parentNode.removeEventListener("mousedown",this._down,!1),this.el.parentNode.removeEventListener("touchstart",this._down,!1),this.el.parentNode.removeEventListener("mousemove",this._move,!1),this.el.parentNode.removeEventListener("touchmove",this._move,!1),this.el.parentNode.removeEventListener("mouseup",this._up,!1),this.el.parentNode.removeEventListener("touchend",this._up,!1),this.el.parentNode.removeEventListener("dblclick",this._dbClick,!1))},reset:function(){this.isFirstMove=!1,this.moveFun=this._moveNone,this.upFun=this._upNone},_down:function(t){var e=this.getXYofEvt(t);if(this.downScreenPos=e,this.preScreenPos=e,this.isTouch(t)){var n=(new Date).getTime();return 1==t.touches.length&&n-this.lastClickTime<300?this._dbClick(t):this._downLeft(t,e),void(this.lastClickTime=n)}return 2==t.button?(this.moveFun=this._moveNone,void(this.upFun=this._upRight)):this._downLeft(t,e)},_downLeft:function(t,e){this.isFirstMove=!1,this.isNewMaco=!0,this.downVector3Pos=this.transSTG(e),this.preVector3Pos=this.downVector3Pos,this.contentView.bindEvents.enable=!0,this._downLeftLabel(t)||this._downLeftElement(e,t)||(this.lastName=null,this.lastModel=null,this.moveFun=this.__move_rect__,this.upFun=this.__up_rect__)},_downLeftLabel:function(t){var e=this.findElements.findNameLabelByTarget(t.target);return!!e&&(this.contentView.bindEvents.enable=!1,t.stopPropagation(),t.preventDefault(),this.moveFun=this._moveLabel,this.upFun=this._upLabel,this.lastName=e,!0)},_downLeftElement:function(t,e){var n=this.distinguishElements.getSelectableMoldes(this.findElements.findElementsByPos(t,e));return 0!=n.length&&(this.contentView.bindEvents.enable=!1,e.stopPropagation(),e.preventDefault(),this.moveFun=this.__move_geo__,this.upFun=this.__up_geo__,this.__down_geo__(n),!0)},_move:function(t){t.preventDefault(),this.moveFun(t,this.getXYofEvt(t))},_up:function(t){this.upFun(t),this.clearStatus()},_moveNone:function(t,e){(this.preScreenPos=e,this.findElements.findNameLabelByTarget(t.target))?this.paperView.setCursor("LinkGeo"):this.distinguishElements.getSelectableMoldes(this.findElements.findElementsByPos(e,t)).length>0?this.paperView.setCursor("LinkGeo"):this.paperView.setCursor()},_upRight:function(t){t.preventDefault(),t.stopPropagation();var e=this.getXYofEvt(t),n=this.findElements.findElementsByPos(e,t);if(n.length>0)return this.selectManager.clearSelected(),this.selectManager.selectByIds([n[0].get("id")]),void this.bindEvents.dispatchEvent(this.bindEvents.Events.CONTEXTMENU,{eleArr:[n[0]],event:t});this.bindEvents.dispatchEvent(this.bindEvents.Events.CONTEXTMENU,{eleArr:this.selectManager.getSelectedModels(),event:t})},_moveLabel:function(t,e){t.stopPropagation(),this.lastName&&!this.lastName.output_Model.isLengthLabel&&!this.lastName.nameModel.get("locked")&&this.__isMoved__(t,e,this.preScreenPos)&&(this.isFirstMove||this.willManager.setElementWillPointOn([this.lastName]),this.undoRedo.updateElements(this.moveLabel(e.x-this.preScreenPos.x,e.y-this.preScreenPos.y,this.lastName),this.isNewMaco),this.isNewMaco=!1,this.preScreenPos=e,this.isFirstMove=!0)},_upNone:function(t){},_upLabel:function(t){t.preventDefault(),t.stopPropagation(),this.selectManager.selectByIds([this.lastName.get("id")])},_dbClick:function(t){var e=this.findElements.findNameLabelByTarget(t.target),n=t.currentTarget.getBoundingClientRect();if(e)return t.stopPropagation(),void this.bindEvents.dispatchEvent(this.bindEvents.Events.DOUBLE_CLICK_ON_ELEMENT,{pos:{x:t.pageX-n.left,y:t.pageY-n.top},nameModels:[e]});var i=this.distinguishElements.getSelectableMoldes(this.findElements.findElementsByPos(this.getXYofEvt(t),t));i.length<1||this.bindEvents.dispatchEvent(this.bindEvents.Events.DOUBLE_CLICK_ON_ELEMENT,{pos:{x:t.pageX-n.left,y:t.pageY-n.top},elements:i})},moveLabel:function(t,e,n){var i,r,o={},s=n.nameModel,a=s.get("midPos").x+s.get("offset").dx+t,u=s.get("midPos").y+s.get("offset").dy+e;n.output_Model.isPoint?(i=0,r=this.transGTS(n.output_Model)):(i=n.output_Model.valueOn(this.transSTG({x:a,y:u})),r=this.transGTS(n.output_Model.pointOn(i)));var c=a-r.x,l=u-r.y;return c>30?c=30:c<-30&&(c=-30),l>30?l=30:l<-30&&(l=-30),o[n.get("id")]={label:{nameVal:i,offset:{dx:c,dy:l},midPos:r}},o}}},function(t,e,n){"use strict";n(70),n(3),n(82),t.exports={initEvent:function(t){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this),this.filter=t.filter},addEvent:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1)},removeEvent:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1)},__down__:function(t){var e=this.getXYofEvt(t),n=this.__filterElement__(e,t);n&&(t.stopPropagation(),t.preventDefault(),this.bindEvents.pickElement(n))},__move__:function(t){var e=this.getXYofEvt(t);if(this.__isMoved__(t,e,this.preScreenPos)){this.preScreenPos=e,this.willManager.reset(),this.paperView.setCursor();var n=this.__filterElement__(e,t);n&&(t.stopPropagation(),t.preventDefault(),this.paperView.setCursor("LinkGeo"),this.willManager.setSingleElementWillPointOn(n))}},__filterElement__:function(t,e){var n=this.findElements.findElementsByPos(t,e);return n.sort((function(t,e){return e.get("id")-t.get("id")})),this.filter.filterElementArr(n)}}},function(t,e,n){"use strict";t.exports={initEvent:function(){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this)},addEvent:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1)},removeEvent:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1)},__down__:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),2===t.button)return this.bindEvents.bindSelect();var n=this.getXYofEvt(t);this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){},callback2:function(t){e.createInterPoint(t,!0)},callback3:function(t){e.createPointOnElement(n,t,!0)},defaultCallback:function(){e.createFreePointByPos(n,!0)}})},__move__:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.getXYofEvt(t);this.__isMoved__(t,n,this.preScreenPos)&&(this.preScreenPos=n,this.willManager.reset(),this.assistManager.resetPoint(),this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.willManager.setSingleElementWillPointOn(t)},callback2:function(t){e.willManager.setElementWillPointOn(t.parents),e.assistManager.setPoint(t.pos)},callback3:function(t){e.moveOnElement(n,t)},defaultCallback:function(){e.changePosByCapture(n)}}))}}},function(t,e,n){"use strict";n(82),t.exports={initEvent:function(t){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this),this.nameConstructor=t.nameConstructor},addEvent:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1)},removeEvent:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1)},getNearModelByPriority:function(t){return t.sort((function(t,e){return e.get("id")-t.get("id")})),this.distinguishElements.getPoint(t)||this.distinguishElements.getNameModel(t)},__down__:function(t){if(t.stopPropagation(),2==t.button)return this.bindEvents.bindSelect();t.preventDefault();var e=this.getXYofEvt(t),n=this.getNearModelByPriority(this.findElements.findGeoElementsByPos(e,t));if(n){var i={};return i[n.get("id")]=this.__getCommandAttr__(n),void this.undoRedo.updateElements(i)}this.bindEvents.dispatchEvent(this.bindEvents.Events.TEXT_FORM,{pos:e})},__move__:function(t){t.preventDefault(),t.stopPropagation(),this.willManager.reset();var e=this.getXYofEvt(t),n=this.findElements.findGeoElementsByPos(e,t),i=this.getNearModelByPriority(n);this.paperView.setCursor("Pencil"),i&&this.willManager.setElementWillPointOn([i])},__getCommandAttr__:function(t){var e=t.get("name");return e&&!t.nameModel.get("callShow")||(e=this.nameConstructor.getNameByElement(t)),{name:e,label:{callShow:!0}}}}},function(t,e,n){"use strict";n(3),n(22),n(70);var i=n(625),r=n(627),o=n(628),s=n(629),a=n(630),u=n(631),c=n(632),l=n(633),f=n(634);t.exports=Backbone.View.extend({getViewById:function(t){return this.element_map[this.collection.get(t).get("id")]},startAnimationFrame:function(){this.animationFrameFlag=!0,this.reRender(),this.stoppedAudio&&this.stoppedAudio.forEach((function(t){return t.model.play()}))},stopAnimationFrame:function(){this.animationFrameFlag=!1,this.stoppedAudio=this.audioViews.filter((function(t){return 0!=t.model.getValue().play})),this.stoppedAudio.forEach((function(t){return t.model.stop()}))},addAssistView:function(t){var e,n=t.output_Model;return n.isVariableRulerOutput?e=new s(this.$el,t,this.paper,this.paperView):n.isActionButtonOutput?e=new i(this.$el,t,this.paper):n.isAnimationButtonOutput?e=new r(this.$el,t):n.isHtmlTextOutput?e=new o(this.$el,t):n.isPicture?e=new c(this.$el,t,this.paper):n.isAudioButtonOutput?(e=new l(this.$el,t,this.paper,this.paperView,this.beforeLoading),this.audioViews.push(e)):n.isMeasureTextOutput?e=new a(this.$el,t):n.isText?e=new f(this.$el,t,this.paper):n.isCustomFunctionOutput&&(e=new u(this.$el,t,this.paper)),e?(t.constraint.isFreeAssist&&(this._nextAssistView=e),e.onRender(e.model),this.$el.append(e.div_el),e):null},getNextAssistPosition:function(){if(!this._nextAssistView)return{left:0,top:0};var t=this._nextAssistView.model.output_Model.position,e=t.left,n=t.top+this._nextAssistView.$el.height()+5;return n>=this.paper.get("height")-10&&(n=0,e=t.left+this._nextAssistView.$el.width()+15),e>=this.paper.get("width")&&(e=0),{left:e,top:n}},resize:function(t,e){this.$el.css("width",t).css("height",e),this.renderer&&this.renderer.setSize(t,e);for(var n,i=0;n=this.element_views[i];i++)n.resize&&n.resize(t,e)}})},function(t,e,n){"use strict";var i=Backbone.View.extend({initialize:function(t,e,n,i){this.elementModel=e,this.paper=n,this._$parentEL=i,this.listenTo(this.elementModel,"change:name",this.onValChange),this.listenTo(this.model,"change:callShow",this.onValChange),this.listenTo(this.model,"change:midPos",this.onPositionChange),this.listenTo(this.model,"change:offset",this.onPositionChange),this.listenTo(this.model,"change:selected",this.onSelected),this.listenTo(this.model.font_Model,"change:size",this.onSizeChange),this.listenTo(this.model.font_Model,"change:color",this.onColorChange),this.listenTo(this.model.font_Model,"change:opacity",this.onColorChange),this.render()},render:function(){return this.el=document.createElement("span"),this.el.style.position="absolute",this.el.style.padding="0 10px",this.el.style.transform="translate(-50%, -50%)",this.el.style.pointerEvents="visiblepainted",this.$el=$(this.el),this.onValChange(this.model),this.el},updateShow:function(t){this.el.style.display=t?"block":"none"},detach:function(){this.$el.detach()},append:function(){this._$parentEL.append(this.$el)},updateMidPos:function(){this.__existName__()&&this.model.set({midPos:this.__getInPaperNamePos__()})},__existName__:function(){return this.elementModel.get("name")&&this.model.get("callShow")},__getInPaperNamePos__:function(){return this.paper.transGTS(this.elementModel.getNamePosByVal())},onValChange:function(t){if(!this.__existName__())return this.detach();this.append(),this.updateMidPos();try{this.el.innerHTML=katex.renderToString(this.elementModel.get("name"))}catch(t){this.el.innerHTML="<span>"+this.elementModel.get("name")+"</span>"}this.onPositionChange(this.model),this.onSizeChange(this.model.font_Model),this.onColorChange(this.model.font_Model)},onSizeChange:function(t){this.el.style.fontSize=t.get("size")+"px"},onPositionChange:function(t){this.el.style.left=t.get("midPos").x+t.get("offset").dx+"px",this.el.style.top=t.get("midPos").y+t.get("offset").dy+"px"},onSelected:function(t){var e=t.get("selected");this.el.style.textShadow=e?"2px 2px #2FB351":""},onShowChange:function(t){var e=t.get("callShow");this.el.style.display=e?"block":"none"},onColorChange:function(t){this.el.style.color=t.toRgbaString()},getWidthAndHeight:function(){var t=this.el.parentNode;document.body.appendChild(this.el);var e=this.el.clientWidth,n=this.el.clientHeight;return t.appendChild(this.el),{width:e,height:n}}});i.OFFSET=30,t.exports=i},function(t,e,n){"use strict";n(21),n(3),t.exports=Backbone.View.extend({initializeBase:function(t,e){var n=this;this.paper=t,this._$parentEL=e,this.nameLabel_view=null,this._forceRender=!1,this._isHighLight=!1,this._isSelected=!1,this.currentUgly=!0,this.geoNeedUpdate=!0,this.displayNeedUpdate=!0,this.listenTo(this.model,"BLICK",this._onBlickChange),this.model.displayModel.on("change",(function(t){n.geoNeedUpdate=!0,n.displayNeedUpdate=!0})),this.model.displayModel.fillModel&&this.model.displayModel.fillModel.on("change",(function(t){return n.displayNeedUpdate=!0})),this.model.displayModel.strokeModel&&this.model.displayModel.strokeModel.on("change",(function(t){return n.displayNeedUpdate=!0})),this.model.displayModel.arrowModel&&this.model.displayModel.arrowModel.on("change",(function(t){return n.geoNeedUpdate=!0})),this.listenTo(this.model,"change:isDeleted",this.__onDeleteChange__),this.listenTo(this.model,"OUTPUT_CHANGE",(function(t){return n.geoNeedUpdate=!0})),this.listenTo(this.model,"OUTPUT_TYPE_CHANGE",this._replaceInfrastructureView)},isDeleted:function(){return this.model.get("isDeleted")},isUgly:function(){return this.model.output_Model.isUgly},isShow:function(){return this.model.displayModel.get("show")},onRender:function(){var t=this.model;this.isDeleted()||(t.calculateShow&&t.calculateShow(),t.calculateGeo&&t.calculateGeo(),t.calculateStroke&&t.calculateStroke(),t.calculateFill&&t.calculateFill(),this._render())},forceRender:function(t){this._forceRender=t,this._render()},_render:function(){this._updateShow()&&(this._updateDisplay(),this._updateGeo(),this._updateAssist())},findNameLabel:function(t){if(this.nameLabel_view)return this.nameLabel_view.$el.find(t).length>0?this.model:void 0},clearTrace:function(){this.infrastructure_view.clearTrace()},updateSelected:function(t){this._isSelected=t,this._render()},updateHighlight:function(t){this._isHighLight=t,this._render()},isRender:function(){return!this.isDeleted()&&(!this.isUgly()&&(!!this._isHighLight||(!!this._forceRender||!!this.isShow())))},_updateShow:function(){var t=this.isRender();return this._isRenderStatus===t||(this._isRenderStatus=t,this.infrastructure_view.updateShow(t),this.nameLabel_view&&this.nameLabel_view.updateShow(t)),t},_updateGeo:function(){this.geoNeedUpdate&&(this.infrastructure_view.update_geo(this.model.getValue(),this.model.displayModel.getAttr(),this.model.displayModel.get("showPoint")),this.nameLabel_view&&this.nameLabel_view.updateMidPos(),this.geoNeedUpdate=!1)},_updateDisplay:function(){if(this.displayNeedUpdate){var t=this.model.displayModel.getAttr();this.infrastructure_view.updateMaterial(t),this.__onTrace__(),this.displayNeedUpdate=!1}},_updateAssist:function(){this.infrastructure_view.updateAssist&&this.infrastructure_view.updateAssist(this._isHighLight,this._isSelected)},_replaceInfrastructureView:function(){},__onDeleteChange__:function(t){this.model.get("isDeleted")?this.detach():(this.geoNeedUpdate=!0,this.displayNeedUpdate=!0,this.append())},__onTrace__:function(){this.infrastructure_view.updateTrace(this.model.displayModel.get("traced"),this.model.displayModel.get("traceLength"))},_onBlickChange:function(){var t=this,e=5,n=!0;this.updateHighlight(n);var i=setInterval((function(r){0!==e?(n=!n,t.updateHighlight(n),n||e--):clearInterval(i)}),500)}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(320);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t)}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){return this.sp=t.sp,this.ep=t.ep,e.arrow&&(this.bArrow(e.arrow.bArrow),this.eArrow(e.arrow.eArrow)),{sp:this.sp,ep:this.ep}}},{key:"_getBeginArrowInfo",value:function(){var t=this._getCorrectPos(this.sp,this.ep),e=this._getArrowGeo(this.sp,t);return this.sp=t,e}},{key:"_getEndArrowInfo",value:function(){var t=this._getCorrectPos(this.ep,this.sp),e=this._getArrowGeo(this.ep,t);return this.ep=t,e}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(114),f=n(67).createSVGEle,h=npGeo,p=h.Vector2,d=h.Circle2,y=h.Utils,v=y.isZero,_=y.PI,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i)).leftTopPoint_S=null,o.rightBottomPoint_S=null,o.output_Model=null,o}return(0,o.default)(n,[{key:"update_geo",value:function(t){this.output_Model=t,this.$_geoEl.empty(),t.isRightGrid2?this.__drawRightCoor__(t):this.__drawPolarCoor__(t),this._assistEl&&this.__updateAssistEl__()}},{key:"__drawRightCoor__",value:function(t){for(var e=t.minX,n=t.minY,i=t.maxX,r=t.maxY,o=t.stepX,s=t.stepY,a=this._axisTransformer.matrix_GTS(),u="",c=n;c<r||v(c-r);c+=s){var l=new p(e,c).applyMatrix(a),h=new p(i,c).applyMatrix(a);u+="M ".concat(l.x," ").concat(l.y," L ").concat(h.x," ").concat(h.y)}for(var d=e;d<i||v(d-i);d+=o){var y=new p(d,n).applyMatrix(a),_=new p(d,r).applyMatrix(a);u+="M ".concat(y.x," ").concat(y.y," L ").concat(_.x," ").concat(_.y)}var g=f("path");g.setAttributeNS(null,"d",u),this._geoEl.appendChild(g)}},{key:"__drawPolarCoor__",value:function(t){for(var e=this._axisTransformer.matrix_GTS(),n=t.centre,i=n.applyMatrix(e),r=t.maxRadius,o=t.stepR,s=0,a=o;a<r;a+=o){var u=new p(n.x+a,n.y).applyMatrix(e);s=i.distanceTo(u),this._geoEl.appendChild(m(i,s))}for(var c=new d(i,s),l="",h=0;h<24;h++){var y=c.pointOn(_*h/12);l+="M ".concat(i.x," ").concat(i.y," L ").concat(y.x," ").concat(y.y)}var v=f("path");v.setAttributeNS(null,"d",l),this._geoEl.appendChild(v)}},{key:"twinkle",value:function(){if(this.output_Model&&!this.output_Model.isUgly){var t=this._axisTransformer.matrix_GTS();this.leftTopPoint_S=this.output_Model.leftTopPoint.applyMatrix(t),this.rightBottomPoint_S=this.output_Model.rightBottomPoint.applyMatrix(t);var e=f("path"),n="M ".concat(this.leftTopPoint_S.x," ").concat(this.leftTopPoint_S.y," ")+"L ".concat(this.rightBottomPoint_S.x," ").concat(this.leftTopPoint_S.y," ")+"L ".concat(this.rightBottomPoint_S.x," ").concat(this.rightBottomPoint_S.y," ")+"L ".concat(this.leftTopPoint_S.x," ").concat(this.rightBottomPoint_S.y," Z");e.setAttributeNS(null,"d",n),e.setAttributeNS(null,"stroke-width","4px"),e.setAttributeNS(null,"stroke","red"),e.setAttributeNS(null,"fill","none"),this._svgEl.appendChild(e),setTimeout((function(){e.setAttributeNS(null,"d",""),$(e).remove()}),1e3)}}}]),n}(l);function m(t,e){var n=f("circle");return n.setAttributeNS(null,"cx",t.x),n.setAttributeNS(null,"cy",t.y),n.setAttributeNS(null,"r",e),n.setAttributeNS(null,"fill","none"),n}t.exports=g},function(t,e,n){"use strict";var i=npGeo.Vector3,r=function(t,e){this.inputs=[t,e],this.line1=t,this.line2=e,this.dirty=!0};r.isLegal=function(t,e){var n=t.output_Model,i=e.output_Model;if(n.isLinear&&i.isLinear||n.isLinear&&i.isPlane||i.isLinear&&n.isPlane||n.isLinear&&i.isEntity||i.isLinear&&n.isEntity)return new r(t,e)},r.prototype.getIntersection=function(){return this.dirty&&(this.intersection=i.intersections(this.line1.output_Model,this.line2.output_Model),this.dirty=!1),this.intersection};var o=[];t.exports={getIntersectionSets:function(t,e){if(t!=e){for(var n=0;n<o.length;n++){var i=o[n].inputs;if(i.indexOf(t)>-1&&i.indexOf(e)>-1)return o[n]}var s=r.isLegal(t,e);return s&&(o.push(s),t.intersectionSets||(t.intersectionSets=[]),t.intersectionSets.push(s),e.intersectionSets||(e.intersectionSets=[]),e.intersectionSets.push(s)),s}},reset:function(){o=[]}}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,o){var a;return(0,r.default)(this,n),(a=e.call(this,t)).elementType=i,a.defType=o,a._isNewMacro=!0,a.spDeletedCallback=function(t){console.log("spDeletedCallback: ".concat(t.get("id"))),this.__endDrawing__(),t.off("change:isDeleted",this.spDeletedCallback)}.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"initEvent",value:function(){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this),this.__up__=this.__up__.bind(this),this.startPoint=null,this.isMoved=!1}},{key:"addEvent",value:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1),this.el.addEventListener("mouseup",this.__up__,!1),this.el.addEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"removeEvent",value:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1),this.el.removeEventListener("mouseup",this.__up__,!1),this.el.removeEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"__endDrawing__",value:function(){this.startPoint&&this.startPoint.off("change:isDeleted",this.spDeletedCallback),this.startPoint=null,this.isMoved=!1,this.assistManager.resetAll(),this._isNewMacro=!0}},{key:"__down__",value:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),2===t.button)return this.bindEvents.bindSelect(),void t.stopPropagation();if(!this.startPoint){this.isMoved=!1;var n=this.getXYofEvt(t);this.downScreenPos=n,this.preScreenPos=n,this.downVector3Pos=this.transSTG(n),this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.startPoint=t},callback2:function(t){e.startPoint=e.getElementById(e.createInterPoint(t,e._isNewMacro)),e._isNewMacro=!1},callback3:function(t){e.startPoint=e.getElementById(e.createPointOnElement(n,t,e._isNewMacro)),e._isNewMacro=!1},defaultCallback:function(){e.startPoint=e.getElementById(e.createFreePointByPos(n,e._isNewMacro)),e._isNewMacro=!1}}),this.startPoint.on("change:isDeleted",this.spDeletedCallback)}}},{key:"__move__",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.getXYofEvt(t);this.__isMoved__(t,n,this.preScreenPos)&&(this.preScreenPos=n,this.isMoved=!0,this.willManager.reset(),this.assistManager.resetPoint(),this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.willManager.setSingleElementWillPointOn(t),e.createAssistElement(t.output_Model)},callback2:function(t){e.willManager.setElementWillPointOn(t.parents),e.assistManager.setPoint(t.pos),e.createAssistElement(e.transSTG(t.pos))},callback3:function(t){e.createAssistElement(e.moveOnElement(n,t))},defaultCallback:function(){e.createAssistElement(e.transSTG(n))}}))}},{key:"__up__",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.getXYofEvt(t);this.__isMoved__(t,n,this.downScreenPos)?this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.createElement(t.get("id"))},callback2:function(t){var n=e.createInterPoint(t,e._isNewMacro);e._isNewMacro=!1,e.createElement(n)},callback3:function(t){var i=e.createPointOnElement(n,t,e._isNewMacro);e._isNewMacro=!1,e.createElement(i)},defaultCallback:function(){if(e.__isMoved__(t,n,e.downVector3Pos)){var i=e.createFreePointByPos(n,e._isNewMacro);return e._isNewMacro=!1,void e.createElement(i)}e.__endDrawing__()}}):this.isMoved&&this.__endDrawing__()}},{key:"createElement",value:function(t){this.ElementByJSON3({type:this.elementType,def:{type:this.defType,parents:[this.startPoint.get("id"),t]}},this._isNewMacro),this.__endDrawing__()}},{key:"createAssistElement",value:function(t){this.startPoint&&this.__assistElement__(this.startPoint.output_Model,t)}}]),n}(n(256));t.exports=f},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(422),h=THREE,p=h.MeshBasicMaterial,d=h.Mesh,y=h.Vector3,v=h.LineSegmentsGeometry,_=n(679),g=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){return(0,o.default)(this,n),e.call(this,t,i)}return(0,s.default)(n,[{key:"update_geo",value:function(t,e){var n=this._updateArrowMesh(t,e),i=(0,r.default)(n,2),o=i[0],s=i[1];this._updateLinePosition(o,s),this._trace()}},{key:"_updateArrowMesh",value:function(t,e){this._startArrowMesh&&(this._geoMesh.remove(this._startArrowMesh),this._startArrowMesh.geometry.dispose()),this._endArrowMesh&&(this._geoMesh.remove(this._endArrowMesh),this._endArrowMesh.geometry.dispose());var n=e.arrow;if(!n||!n.bArrow&&!n.eArrow)return[t.sp,t.ep];if(!this._arrowMaterial){var i=e.stroke,r=i.color,o=i.opacity;this._arrowMaterial=new p({transparent:!0,color:r,opacity:o})}var s=t.sp,a=t.ep,u=3*.15/t.length;if(n.bArrow){var c=_(s,a,.15,3,t.length);s=t.pointOn(u),this._startArrowMesh=new d(c,this._arrowMaterial),this._geoMesh.add(this._startArrowMesh)}if(n.eArrow){var l=_(a,t.sp,.15,3,t.length);this._endArrowMesh=new d(l,this._arrowMaterial),this._geoMesh.add(this._endArrowMesh),a=t.pointOn(1-u)}return[s,a]}},{key:"_updateLinePosition",value:function(t,e){var n=[t.x,t.y,t.z,e.x,e.y,e.z],i=[new y(t.x,t.y,t.z),new y(e.x,e.y,e.z)];this._geometry.dispose();var r=new v;r.setPositions(n),this._geometry=r,this._assistMesh.geometry=r,this._geoMesh.geometry=r,this._geoMesh.computeLineDistances(),this._geoMesh.computeLineDistances(),this._updateSelectableGeometry(i),this._depthMesh&&(this._depthMesh.geometry=r,this._depthMesh.computeLineDistances())}},{key:"updateMaterial",value:function(t){var e=t.stroke;this._updateLineMaterial(e),this._updateDepthMaterial(t.blocking,e),this._updateAssistMaterial(e.width/300),this._updateArrowMaterial(e.color,e.opacity)}},{key:"_updateArrowMaterial",value:function(t,e){this._arrowMaterial&&this._arrowMaterial.setValues({color:t,opacity:e})}}]),n}(f);t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(198),f=THREE,h=f.LineSegmentsGeometry,p=f.LineMaterial,d=f.LineSegments2,y=f.Geometry,v=f.LineSegments,_=f.LineBasicMaterial,g=(f.Vector3,function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;(0,r.default)(this,n),(o=e.call(this,t,i))._geometry=new h,o._assistMaterial=new p,o._assistMesh=new d(o._geometry,o._assistMaterial),o._material=new p({opacity:0,linewidth:1,transparent:!0}),o._geoMesh=new d(o._geometry,o._material),o._geoGroup.add(o._geoMesh);var s=new _({opacity:0,linewidth:1,transparent:!0});return o._selectableMesh=new v(new y,s),o._geoGroup.add(o._selectableMesh),o._updateSelectMesh(o._selectableMesh),o}return(0,o.default)(n,[{key:"updateMaterial",value:function(t){this._updateLineMaterial(t.stroke),this._updateDepthMaterial(t.blocking,t.stroke),this._updateAssistMaterial(t.stroke.width/300)}},{key:"_updateLineMaterial",value:function(t){this._updateMaterialStroke(t,this._material)}},{key:"_updateAssistMaterial",value:function(t){this._assistMaterial.setValues({linewidth:t})}},{key:"_updateDepthMaterial",value:function(t,e){if(!t){if(!this._depthMesh)return;return this._material.setValues({transparent:!1}),this._geoGroup.remove(this._depthMesh),void(this._depthMesh=null)}this._depthMesh||(this._depthMaterial=new p({depthTest:!1}),this._depthMaterial.dashed=!0,this._depthMaterial.defines.USE_DASH="",this._depthMaterial.dashSize=.25,this._depthMaterial.gapSize=.15,this._depthMaterial.needsUpdate=!0,this._depthMesh=new d(this._geometry,this._depthMaterial),this._geoGroup.add(this._depthMesh)),this._depthMaterial.setValues({color:e.color,opacity:e.opacity,transparent:!0,linewidth:e.width/550})}},{key:"_updateSelectableGeometry",value:function(t){this._selectableMesh.geometry.dispose();var e=new y;e.vertices=t,this._selectableMesh.geometry=e,this._selectableMesh.computeLineDistances()}}]),n}(l));t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(220),f=n(176).zoomPoints,h=THREE,p=h.Geometry,d=h.Vector3,y=h.Face3,v=h.Mesh,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){return(0,r.default)(this,n),e.call(this,t,i)}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e;this._wireframe&&(e=f(t.vertices,t.centre,.996));var n=this._createSurfaceGeometryByNPGeo(t,e);this._updateSurfaceGeometry(n),this._updateWireframeGeometry(t.wireframePosition),this._updateSphericalGeometry(t),this._trace()}},{key:"updateMaterial",value:function(t){var e=t.spherical,n=t.colorful,i=t.blocking,r=t.wireframe,o=t.texture,s=t.fill,a=s.color,u=s.opacity;this._updateSurfaceMaterial(n,r,o,a,u),this._updateSphericalMaterial(e),this._updateWireframeMaterial(i,r,a,u),this._updateDepthMaterial(i,r,a,u),this._updateRenderOrder(i)}},{key:"_updateSphericalMaterial",value:function(t){if(t){if(this._sphericalFrontSideMesh)return this._sphericalFrontSideMesh.material=this._frontSideMesh.material,void(this._sphericalBackSideMesh.material=this._backSideMesh.material);var e=new p;this._sphericalFrontSideMesh=new v(e,this._frontSideMesh.material),this._sphericalBackSideMesh=new v(e,this._backSideMesh.material),this._geoMesh.add(this._sphericalFrontSideMesh),this._geoMesh.add(this._sphericalBackSideMesh)}else this._sphericalFrontSideMesh&&(this._geoMesh.remove(this._sphericalFrontSideMesh),this._geoMesh.remove(this._sphericalBackSideMesh),this._sphericalFrontSideMesh.geometry.dispose(),this._sphericalFrontSideMesh=null,this._sphericalBackSideMesh=null)}},{key:"_updateSphericalGeometry",value:function(t){if(this._sphericalFrontSideMesh){for(var e=t.vertices,n=t.row,i=t.column,r=[],o=[],s=new p,a=t.centre,u=0;u<n;u++){var c=e[u*i];o.push(new d(c.x,c.y,c.z))}for(var l=0;l<n;l++){var f=e[(l+1)*i-1];o.push(new d(f.x,f.y,f.z))}o.push(new d(a.x,a.y,a.z));for(var h=o.length-1,v=0;v<n-1;v++)r.push(new y(v,v+1,h)),r.push(new y(v+n,v+n+1,h));s.vertices=o,s.faces=r,s.computeFaceNormals(),s.verticesNeedUpdate=!0,s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0,s.computeBoundingBox(),s.computeVertexNormals(),this._sphericalFrontSideMesh.geometry.dispose(),this._sphericalFrontSideMesh.geometry=s,this._sphericalBackSideMesh.geometry=s}}}]),n}(l);t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(220),h=n(284),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){return(0,o.default)(this,n),e.call(this,t,i)}return(0,s.default)(n,[{key:"update_geo",value:function(t){this._updateClippingPlanes(t.planes);var e=t.mesh;this._updateSurfaceGeometry(this._createSurfaceGeometryByNPGeo(e)),this._updateWireframeGeometry(e.wireframePosition)}}]),n}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(75),n(27),n(87),n(3),n(115),n(132),n(177),n(147);var i,r,o=n(196),s=o.getScaleForMouse,a=o.isInallowedBand,u=npGeo.Vector2,c=1,l=math.sqrt,f=math.abs,h=function(t,e,n){var i=this;this.transform={dx:0,dy:0,scale:1,center:{x:0,y:0}},this.paperView=e,this.paper=e.model,this.undoRedo=n,this.contentView=t,this.lastClickTime=0,this.height=this.paper.get("height"),this.isLandscape=!1,this.dragingForTouchEvent=this.dragingForTouch.bind(this),this.dragEndForTouchEvent=this.dragEndForTouch.bind(this),this.paper.on("change:height",(function(){i.height=i.paper.get("height")})),this.bindGlobalEvents()};function p(t){var e=t.touches[0].pageX,n=t.touches[0].pageY;return{x:(e+t.touches[1].pageX)/2,y:(n+t.touches[1].pageY)/2}}h.prototype={setCursor:function(t){this.paperView.el.style.cursor=t,this.contentView.el.style.cursor=t},scale:function(t){if(t.preventDefault(),!this.contentView.isLock)return t.target==t.currentTarget?this.scaleContent(s(t)):this.scaleByCenter(t.pageX,t.pageY,s(t)),!1},dragStart:function(t){2==t.button&&(this.curPos=this.getXYofEvtForMouse(t),this.downPos=this.getXYofEvtForMouse(t),t.preventDefault(),this.isDown=!0)},draging:function(t){if(!this.contentView.isLock&&this.isDown){t.stopPropagation();var e=this.getXYofEvtForMouse(t);this.__isMoved__(t,e,this.curPos)&&(this.setCursor("url('https://comnp.netpad.net.cn/dynamicMath/images/public/MoveCursor.cur'),default"),this.translate(e.x-this.curPos.x,e.y-this.curPos.y),this.curPos=e)}},dragEnd:function(t){this.isDown&&(this.__isMoved__(t,this.getXYofEvtForMouse(t),this.downPos)&&t.stopPropagation(),this.isDown=!1,t.preventDefault(),this.setCursor("default"))},dragStartForTouch:function(t){this.contentView.isLock||2==t.touches.length&&(c=1,i=p(t),r=d(t),this.downPosTwo=this.getPosWith2Touches(t),t.stopPropagation(),t.preventDefault(),this.contentView.el.addEventListener("touchmove",this.dragingForTouchEvent,!0),this.contentView.el.addEventListener("touchend",this.dragEndForTouchEvent,!0))},dragingForTouch:function(t){var e=d(t);if(!this.curCavansEvent&&f(e-r)<10){var n=this.getPosWith2Touches(t);if(!this.__isMoved__(t,n,this.downPosTwo))return;this.translate(n.x-this.downPosTwo.x,n.y-this.downPosTwo.y),this.downPosTwo=n,r=e}var o=e/r;if(this.curCavansEvent){var s=e-r;s<-500?s=-500:s>500&&(s=500),this.paperView.elementsV.scaleGlobalGroup(1-s/500),r=e}else t.touches[0].target!=t.touches[1].target||t.target===this.contentView.el?this.scaleContent(o/c):this.scaleByCenter(i.x,i.y,o/c);c=o,t.preventDefault(),t.stopPropagation()},dragEndForTouch:function(t){t.preventDefault(),this.contentView.el.removeEventListener("touchmove",this.dragingForTouchEvent,!0),this.contentView.el.removeEventListener("touchend",this.dragEndForTouchEvent,!0)},scaleContent:function(t){var e=this.transform.center,n=this.transform.scale*t;if(!(n<.3||n>5)){var i=e.x-this.paper.get("width")/2,r=e.y-this.paper.get("height")/2;this.transformEl(i,r,n),this.contentView.updateResize(!0)}},scaleByCenter:function(t,e,n){var i=this.transform.scale*n;if(!(i<.3||i>5)){var r=this.isLandscape?this.landscapePos(t,e,this.contentView.el):this.portraitPos(t,e,this.contentView.el),o=this.transform.center.zoom(r,n),s=o.x-this.paper.get("width")/2,a=o.y-this.paper.get("height")/2;this.transformEl(s,a,i),this.contentView.updateResize(!0)}},translate:function(t,e){this.transformEl(this.transform.dx+t,this.transform.dy+e,this.transform.scale),this.contentView.updateResize(!0)},transformEl:function(t,e,n){this.transform.dx=t,this.transform.dy=e,this.transform.scale=n,this.transform.center=new u(this.paper.get("width")/2+t,this.paper.get("height")/2+e),this.paperView.transformEl(t,e,n)},resize:function(){var t=1,e=this.contentView.$el.parent().width(),n=this.contentView.$el.parent().height(),i=this.paper.get("width"),r=this.paper.get("height");t=e/n>i/r?n/r:e/i,this.transformEl((e-i)/2,(n-r)/2,t)},bindGlobalEvents:function(){var t=this;document.ondrop=function(e){e.preventDefault();for(var n=e.dataTransfer.files,i=0;i<n.length;i++)/.gif|.png|.jpeg|.jpg$/.test(n[i].name)&&t.undoRedo.constructByJSON3({type:"Picture",def:{type:"FreePicture",attr:{file:n[i],picPath:window.URL.createObjectURL(n[i]),position:t.paperView.getNextAssistPosition()}}},!0)},document.ondragover=function(t){return t.preventDefault(),!1},window.addEventListener("resize",(function(){t.resize()})),this.contentView.$el.on("contextmenu",(function(t){return t.preventDefault(),!1}))},__isMoved__:function(t,e,n){return!a(e,n,void 0===t.pageX?4:10)},__dbTouchHandle__:function(){this.paperView.clearTrace()},dbClickEvent:function(){this.paperView.clearTrace()},dbTouchEvent:function(t){if(1==t.touches.length){var e=(new Date).getTime();e-this.lastClickTime<300&&(this.__dbTouchHandle__(),t.preventDefault(),t.stopPropagation()),this.lastClickTime=e}},setOrientation:function(t){this.isLandscape="landscape"==t},getXYofEvtForMouse:function(t){return this.isLandscape?this.landscapePos(t.pageX,t.pageY,t.currentTarget):this.portraitPos(t.pageX,t.pageY,t.currentTarget)},getXYofEvtForTouch:function(t){return this.landscapePos?this.landscapePos(t.changedTouches[0].pageX,t.changedTouches[0].pageY,t.currentTarget):this.portraitPos(t.changedTouches[0].pageX,t.changedTouches[0].pageY,t.currentTarget)},getPosWith2Touches:function(t){var e=p(t);return this.isLandscape?this.landscapePos(e.x,e.y,t.currentTarget):this.portraitPos(e.x,e.y,t.currentTarget)},portraitPos:function(t,e,n){var i=n.getBoundingClientRect();return new u(t-i.left,e-i.top)},landscapePos:function(t,e,n){var i=n.getBoundingClientRect();return new u(e-i.top,this.height-t+i.left)}};var d=function(t){var e=t.touches[0].pageX,n=t.touches[0].pageY,i=e-t.touches[1].pageX,r=n-t.touches[1].pageY;return l(i*i+r*r)};t.exports=h},function(t,e,n){"use strict";var i=n(0)(n(28));n(27),n(106),n(131),n(3),n(22),n(48),n(82),n(286),n(115),n(70),n(51);var r=n(694),o=new(n(429)),s=n(72).createUUID,a=npGeo,u=a.Vector2,c=a.Utils.quantify,l=Math.random,f=Backbone.Model.extend({defaults:{locked:!1,selectable:!0,isDeleted:!1},output_Model:{},initialize:function(t,e){var n=this;this.uuid=s(),this.dataRepository=t.dataRepository,this.environmentConfig=t.environmentConfig,this.elementsRepository=t.elementsRepository,this.algebraic=t.dataRepository.algebraic,this.paper=t.paper,this.outPutNeedUpdate=!0,this.isUgly=!1,this.containsCustomFuns=[],this.set({id:e.id,name:e.name||""}),e.attr&&this.set(e.attr),e.outVais&&(this.outVais=this.dataRepository.getDataByName(e.outVais,this)),this._initParents(e.def.parents),this._initDisplayModel(e.dis,e.def.type),this._initConstraint(t,e.def),this._initLabel(e.label,e.def.type),this._setAdvanced(e.advanced),this.__listenTo__(),this._updateInputsData(),this._updateOutputsData(),this._initZIndex(),this.on("change:name",(function(){return n.setOutputNeedUpdate()}))},canUp:function(){var t=this.get("id"),e=this.elementsRepository.get(t-1);return!(!e||!e.canBeDelete())&&(!this.inputs||0==this.inputs.length||!this.inputs.includes(e))},upOrder:function(){this.elementsRepository.upOrder(this)},canCopy:function(){return this.constraint&&this.constraint.canCopy},setOutputNeedUpdate:function(){this.traverseSons((function(t){return t.outPutNeedUpdate=!0})),this.outPutNeedUpdate=!0},_initLabel:function(){},_initParents:function(t){var e=this;if(t&&0!==t.length){this.inputs&&this.inputs.length>0&&this.inputs.forEach((function(t){return t._removeChild(e)})),this.inputs=[];for(var n=0;n<t.length;n++){var i=t[n],r=this.elementsRepository.get(i);if(!r)return;r._addChild(this),this.inputs.push(r)}}},_initConstraint:function(t,e){console.error("Must be override")},_initDisplayModel:function(){console.error("Must be override")},__listenTo__:function(){},_initZIndex:function(){var t=this,e=function(){return o.updateIndexByModel(t)};void 0!==this.get("zIndex")?e():this.set({zIndex:o.getZIndexByModel(this)}),this.on("change:zIndex",e)},_addChild:function(t){this.children||(this.children=[]),-1==this.children.indexOf(t)&&this.children.push(t)},_removeChild:function(t){if(this.children){var e=this.children.indexOf(t);-1!==e&&this.children.splice(e,1)}},traverseChildren:function(t){if(t instanceof Function){var e=this.children;if(e&&0!=e.length)for(var n,i=0;n=e[i];i++)n.get("isDeleted")||(t(n),n.traverseChildren(t))}},getChildren:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.traverseChildren((function(e){t.includes(e)||t.push(e)})),t.sort((function(t,e){return t.get("id")-e.get("id")})),t},getChildren00:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function n(i){e.indexOf(i)>-1||i==t||(e.push(i),i.outputsData&&i.outputsData.forEach((function(t){return t.traverseChildren(n)})))};return this.traverseChildren(n),this.outputsData?(this.outputsData.forEach((function(t){return t.traverseChildren(n)})),e):e},getParents:function(){if(!this.inputs)return[];var t=Array.from(this.inputs);return t.sort((function(t,e){return t.get("id")-e.get("id")})),t},getSons:function(){if(!this.children)return[];var t=this.children.filter((function(t){return!t.get("isDeleted")}));return t.sort((function(t,e){return t.get("id")-e.get("id")})),t},traverseSons:function(t){if(t instanceof Function&&this.children)for(var e,n=0;e=this.children[n];n++)e.get("isDeleted")||t(e)},_isMyParent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this==t)return!0;if(this.children&&this.children.length>0)for(var n,i=0;n=this.children[i];i++)if(n._isMyParent(t,e))return!0;if(!this.outputsData)return!1;for(var r,o=this.outputsData,s=0;r=o[s];s++)if(!e.includes(r)){e.push(r);var a=!1;if(o[s].traverseChildren((function(n){n._isMyParent(t,e)&&(a=!0)})),a)return!0}return!1},updateDeleted:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.canBeDelete()?(t.indexOf(this)>-1||(t.push(this),this.set("isDeleted",!0),this.traverseChildren((function(e){return e.updateDeleted(t)}))),t):t},canBeDelete:function(){return this.get("id")>4},calculateGeo:function(){this.outPutNeedUpdate&&(this.setOutputNeedUpdate(),this.calculate(),this.outPutNeedUpdate=!1)},_updateOutputsData:function(){var t=this.constraint.getChildrenDataName();this.outputsData=[];for(var e,n=0;e=t[n];n++){var i=this.dataRepository.getDataByName(e);if(!i)return;this.outputsData.includes(i)||this.outputsData.push(i)}},_updateInputsData:function(){var t=this;this.containsCustomFuns=this.constraint.getCustomFuns();var e=this.constraint.getParentsDataName();for(var n in this.inputsData&&this.inputsData.forEach((function(e){return e._removeChild(t)})),this.inputsData=[],e)if(e.hasOwnProperty(n)){var i=this.dataRepository.getDataByName(n);i&&-1==this.inputsData.indexOf(i)&&(this.inputsData.push(i),i._addChild(this))}},_updateInputsDataByCustomFunction:function(t){1!==this.containsCustomFuns.indexOf(t)&&(this.setOutputNeedUpdate(),this._updateInputsData())},_updateIntersectionSets:function(){if(this._updateSetsDirty(this.intersectionSets),this._updateSetsDirty(this.tangentSets),this._updateSetsDirty(this.affineSets),this._updateSetsDirty(this.customTransformSets),this._updateSetsDirty(this.intersectionSets_2Points),this._updateSetsDirty(this.tangentPointsSets),this._updateSetsDirty(this.intersectionSets_PV),this.compositePathsSet)for(var t,e=0;t=this.compositePathsSet[e];e++)t.disposeLiearSet()},_updateSetsDirty:function(t){t&&t.forEach((function(t){return t.dirty=!0}))},calculateShow:function(){if(this.dynamicDisplay&&this.dynamicDisplay.show)return this.dynamicDisplay.show.calculate()},calculateStroke:function(){if(this.dynamicDisplay&&this.dynamicDisplay.stroke)return this.dynamicDisplay.stroke.calculate()},calculateFill:function(){if(this.dynamicDisplay&&this.dynamicDisplay.fill)return this.dynamicDisplay.fill.calculate()},calculate:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.constraint.calculate(this,e);this.setValue(n,{silent:t})},forceCalulateDynamicDisplay:function(){var t=this.displayModel.getAttr();return t.show=!0,this.dynamicDisplay?(this.dynamicDisplay.show&&(t.show=this.dynamicDisplay.show.forceCalculate()),this.dynamicDisplay.fill&&(t.fill=(0,i.default)(t.fill,this.dynamicDisplay.fill.forceCalculate())),this.dynamicDisplay.stroke&&(t.stroke=(0,i.default)(t.stroke,this.dynamicDisplay.stroke.forceCalculate())),t):t},getValue:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t||!this.constraint.isHFPoint)return this.output_Model;var e=c(l(),{fValue:0,eValue:1},this.constraint.defalutRange);return this.inputs[0].output_Model.pointOn(e)},setValue:function(t,e){var n=t.type!=this.output_Model.type;if(this.isUgly=!!t.isUgly,this.outVais&&this.constraint.isMeasureValue&&this.outVais.setValue(t.value,e),this.output_Model=t,this._updateIntersectionSets(),!e||!e.silent){if(n)return this.trigger("OUTPUT_TYPE_CHANGE");this.trigger("OUTPUT_CHANGE")}},_setConstraintAttr:function(t){this.setOutputNeedUpdate(),this.constraint.setAttr(t),this._updateInputsData(),this._updateOutputsData()},_setAdvanced:function(t){t&&(this.setOutputNeedUpdate(),this.dynamicDisplay?this.dynamicDisplay.updateAttr(t):this.dynamicDisplay=new r({},{display:this.displayModel,dataRepository:this.dataRepository,algebraic:this.algebraic,dynamicData:t}))},getNamePosByVal:function(){return this.output_Model.isPoint?this.output_Model:this.output_Model.pointOn?this.output_Model.pointOn(this.nameModel.get("nameVal")):u.createUgly()},play:function(){this.constraint.play&&this.constraint.play()},stop:function(){this.constraint.stop&&this.constraint.stop()},moveTo00:function(t,e){this.constraint.moveToPos(t,this,e)},toPoints:function(t){return this.output_Model.toPoints(t)},fromJSON3:function(t){t.hasOwnProperty("name")&&this.set({name:t.name}),t.attr&&this.set(t.attr),t.dis&&this.displayModel.setAttr(t.dis),t.def&&t.def.attr&&this._setConstraintAttr(t.def.attr),t.label&&this.nameModel&&this.nameModel.setAttr(t.label),t.advanced&&this._setAdvanced(t.advanced),this.trigger("JSON3_CHANGE")},toJSON3:function(){return{id:this.get("id"),type:this.type,name:this.get("name"),outVais:this.outVais?this.outVais.name:"",attr:{locked:this.get("locked"),selectable:this.get("selectable"),zIndex:this.get("zIndex")},def:this.constraint.toJSON3(this),dis:this.displayModel.toJSON3(),label:this.nameModel&&this.nameModel.toJSON3(),advanced:this.dynamicDisplay&&this.dynamicDisplay.toJSON3()}}});t.exports=f},function(t,e,n){"use strict";t.exports=Backbone.Model.extend({_initialize:function(t){this.display=t.display,this.dataRepository=t.dataRepository,this.algebraic=t.algebraic,this.updateAttr(t.dynamicData)},dispose:function(){this._stopListening()},isHasVari:function(t){if(this.datas)return!!this.datas[t]},_setDirty:function(){this.dirty=!0},_setDatas:function(t){for(var e in this.datas||(this.datas={}),this._stopListening(),this.datas={},t)if(t.hasOwnProperty(e)){var n=this.dataRepository.getDataByName(e);n&&(this.datas[e]=n)}this._addListening()},_addListening:function(){for(var t in this.datas)this.listenTo(this.datas[t],"change:value",this._setDirty)},_stopListening:function(){for(var t in this.datas)this.stopListening(this.datas[t])}})},function(t,e,n){"use strict";var i=n(0)(n(28));n(75),n(20),n(16),n(3),n(49);var r=n(427),o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;function s(t){var e=(t[0]<<16|t[1]<<8|t[2]).toString(16);e<0&&(e=-e);var n="#";if((e=e.toString()).length<6){for(var i=0;i<6-e.length;i++)n+="0";n+=e}else n+=e.slice(e.length-6,e.length);return n}function a(t){var e,n=[];for(var i in t){if(e=t[i],this[i]){var r=this[i].calcu()%256;isNaN(e)||(e=r>0?r:0)}n.push(e)}return n}function u(t){var e=t;if(this.A){var n=this.A.calcu();e=isNaN(e)?0:function(t,e){e&&(t/=e);if(t>1)return 1;if(t<0)return 0;return t}(n)}return e}t.exports=r.extend({initialize:function(t,e){this._initialize(e),this.dirty=!0},updateAttr:function(t){this.R=this.algebraic.createAlgeObjByStr(t.R),this.G=this.algebraic.createAlgeObjByStr(t.G),this.B=this.algebraic.createAlgeObjByStr(t.B),this.A=this.algebraic.createAlgeObjByStr(t.A),this.rgb=function(t){if(!o.test(t))return[0,0,0];if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var i=[];for(n=1;n<7;n+=2)i.push(parseInt("0x"+t.slice(n,n+2)));return i}(this._getColor().color),this.a=this._getColor().opacity;var e={};(0,i.default)(e,this.R.getVaris(),this.G.getVaris(),this.B.getVaris(),this.A.getVaris()),this._setDatas(e),this._setDirty()},_getColor:function(){return this.display.getAttr().stroke},_setColor:function(t){return this.display.setAttr({stroke:t})},calculate:function(){if(this.dirty){var t=this.rgb;this.rgb=a.call(this,{R:t[0],G:t[1],B:t[2]}),this.a=u.call(this,this.a),this._setColor({opacity:this.a,color:s(this.rgb)}),this.dirty=!1}},forceCalculate:function(){var t=this.rgb;return{opacity:u.call(this,this.a),color:s(a.call(this,{R:t[0],G:t[1],B:t[2]}))}},toJSON3:function(){var t={};if(this.R&&(t.R=this.R.toString()),this.G&&(t.G=this.G.toString()),this.B&&(t.B=this.B.toString()),this.A&&(t.A=this.A.toString()),!function(t){return"{}"==JSON.stringify(t)}(t))return t}})},function(t,e,n){"use strict";var i,r=n(0),o=r(n(1)),s=r(n(2)),a=function(){function t(){if((0,o.default)(this,t),i)return i;this._MIN_POINT=2e3,this._MIN_OTHER=1e3,this._currentPointIndex=this._MIN_POINT,this._currentOtherIndex=this._MIN_OTHER,this._min=this._currentOtherIndex,i=this}return(0,s.default)(t,[{key:"getZIndexByModel",value:function(t){return t.output_Model.isPoint?this._currentPointIndex++:this._currentOtherIndex++}},{key:"getMax",value:function(){return this._currentPointIndex++}},{key:"getMin",value:function(){return this._min--}},{key:"updateIndexByModel",value:function(t){var e=t.get("zIndex");e>this._MIN_POINT&&e>this._currentPointIndex?this._currentPointIndex=e:e<this._MIN_POINT&&e>this._currentOtherIndex?this._currentOtherIndex=e:e<this._min&&(this._min=e)}}]),t}();t.exports=a},function(t,e,n){"use strict";n(130),t.exports=Backbone.Model.extend({initialize:function(t){this.font_Model=t,this.set({callShow:!0,locked:!1,nameVal:.5,offset:{dx:15,dy:15},midPos:{x:0,y:0}})},toJSON3:function(){return{callShow:this.get("callShow"),locked:this.get("locked"),nameVal:this.get("nameVal"),offset:this.get("offset"),font:this.font_Model.toJSON()}},getAttr:function(t,e){return{val:this.get("val"),callShow:this.get("callShow"),locked:this.get("locked"),nameVal:this.get("nameVal"),offset:this.get("offset"),fontProp:this.font_Model.toJSON()}},setAttr:function(t){null!=t.val&&this.set({val:t.val}),null!=t.callShow&&this.set({callShow:t.callShow}),null!=t.locked&&this.set({locked:t.locked}),null!=t.nameVal&&this.set({nameVal:t.nameVal}),null!=t.midPos&&this.set({midPos:t.midPos}),null!=t.offset&&this.set({offset:t.offset}),this.font_Model.set(t.fontProp?t.fontProp:t.font)},getPosByMidPos:function(t){return{x:t.x+this.get("offset").dx,y:t.y+this.get("offset").dy}}})},function(t,e,n){"use strict";n(699)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(703))},function(t,e,n){var i=n(29),r=n(13),o=n(112),s=n(35),a=n(39),u=n(44).f,c=n(92),l=n(280),f=n(700),h=n(117),p=n(702),d=!1,y=h("meta"),v=0,_=function(t){u(t,y,{value:{objectID:"O"+v++,weakData:{}}})},g=t.exports={enable:function(){g.enable=function(){},d=!0;var t=c.f,e=r([].splice),n={};n[y]=1,t(n).length&&(c.f=function(n){for(var i=t(n),r=0,o=i.length;r<o;r++)if(i[r]===y){e(i,r,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,y)){if(!f(t))return"F";if(!e)return"E";_(t)}return t[y].objectID},getWeakData:function(t,e){if(!a(t,y)){if(!f(t))return!0;if(!e)return!1;_(t)}return t[y].weakData},onFreeze:function(t){return p&&d&&f(t)&&!a(t,y)&&_(t),t}};o[y]=!0},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)})).pointType=s||"xR",a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();if(!isFinite(t))return p.createUgly();t<.001&&(t=0);var e=this.inputs[0].getValue();return"xR"==this.pointType?new p(t+e.x,e.y):"yT"==this.pointType?new p(e.x,e.y+t):void 0}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i,n)}},{key:"moveToPos",value:function(t,e,n){var i=this.inputs[0].output_Model,r=0;"xR"==this.pointType?t.x>=i.x&&(r=t.x-i.x):"yT"==this.pointType&&t.y>=i.y&&(r=t.y-i.y),e.outVais&&e.outVais.setValue(r,n)}}]),n}(l);d.prototype.isHFPoint=!0,d.prototype.isAxisControlPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo,p=h.LineType,d=h.AxisLine2,y=h.Utils.isZero,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{offset:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[2].output_Model.distanceTo(this.inputs[3].output_Model);y(t)&&(t=.001);var e=this.element.displayModel.getAttr().step;return(e*t<.2||e*t>5)&&this.element.displayModel.set({step:_(t)}),new d(this.inputs[0].output_Model,this.inputs[1].output_Model,p.SEGMENT,this.inputs[2].output_Model,t,this._attributes.offset.get())}}]),n}(l);function _(t){return t<=.001?1e3:t>.001&&t<=.01?500:t>.01&&t<=.02?100:t>.02&&t<=.05?50:t>.05&&t<=.1?20:t>.1&&t<=.5?10:t>.5&&t<=.7?5:t>.7&&t<=.9?2:t>.9&&t<=2?1:t>2&&t<=5?.5:t>5&&t<=10?.2:t>10&&t<=20?.1:.05}v.prototype.isAxisLine=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h=npGeo,p=h.Arc3,d=h.Arc2,y={0:p.createBy3Points,1:p.arcOfCircleAngle,2:p.arcOfCenterAndPoints},v={0:d.createBy3Points,1:d.arcOfCircleAngle,2:d.arcOfCenterAndPoints},_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{defineType:new f(0,t.is2D?v:y)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this._attributes.defineType.getValue()(this.inputs[0].output_Model,this.inputs[1].output_Model,this.inputs[2].output_Model)}}]),n}(l);_.prototype.type="3PointsArc",_.prototype.is3PointsArc=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(15),p=n(62),d=n(770),y=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){return(0,o.default)(this,n),e.call(this,t,i,(0,r.default)({parName1:"a",parName2:"b"},s),{par1:new h(i.algebraic,"3"),par2:new h(i.algebraic,"2"),direct:new p("x",{x:0,y:1})})}return(0,s.default)(n,[{key:"setAttr",value:function(t){for(var e in t)this._attributes[e]&&this._attributes[e].set(t[e]);void 0!==t.parName1&&(this.parName1=t.parName1),void 0!==t.parName2&&(this.parName2=t.parName2),void 0!==t.par1&&this._attributes.par1.set(t.par1[this.parName1]),void 0!==t.par2&&this._attributes.par2.set(t.par2[this.parName2]),void 0!==t.direct&&this._attributes.direct.set(t.direct),void 0!==t.bindAction&&this._attributes.bindAction.set(t.bindAction);var n=this.parName1+","+this.parName2;this.Fun1=d[n]}},{key:"getAttr",value:function(){var t={},e={};return t[this.parName1]=this._attributes.par1.get(),e[this.parName2]=this._attributes.par2.get(),{parName1:this.parName1,parName2:this.parName2,par1:t,par2:e,direct:this._attributes.direct.get(),bindAction:this._attributes.bindAction.get()}}}]),n}(f);y.prototype.type="NormalConicBase",y.prototype.isNormalConicBase=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(360),f=n(38),h=n(15),p=n(18),d=n(361),y={silent:!0},v=Math.abs,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{varis:new d(i.algebraic),pNum:new h(i.algebraic,"100"),stepNum:new p(5),isSegmentColor:new f,isClosed:new f})}return(0,o.default)(n,[{key:"stepNum",get:function(){return this._attributes.stepNum.get()}},{key:"__calculate__",value:function(t){var e,n=this.pNum;return n<1?t.createUgly():(e=this._calcuSamples(n),new t(e=this.__closeCurve__(e)))}},{key:"_calcuSamples",value:function(t){for(var e,n=this._preCalculate(t),i=this.stepNum,r=[],o=[],s=this.inputs,a=s[s.length-1],u=this._getCurrentVariValue(n),c=0;c<t;c++){this._calculateRS(this.rs);var l=a.output_Model,f=this._getCurrentVariValue(n);if(e&&e.isUgly&&!l.isUgly){var h=this.__intervalCalculate__(n,u,f,[],10,a,!0);o=o.concat(h)}else if(e&&!e.isUgly&&l.isUgly){var p=this.__intervalCalculate__(n,u,f,[],10,a,!1);(o=o.concat(p)).length>1&&r.push(o),o=[]}else!e||e.isUgly||l.isUgly||(v(e.x-l.x)>i||v(e.y-l.y)>i)&&(o.length>1&&r.push(o),o=[]),o=this._pushPoint(r,o,a);if(e=l,u=f,c<t-2)for(var d,_=0;d=n[_];_++)d.data.addValue(d.step,y);else for(var g,m=0;g=n[m];m++)g.data.setValue(g.endVal,y)}return o.length>1&&r.push(o),this._restoreVaRs(n),r}},{key:"_pushPoint",value:function(t,e,n){return n.output_Model.isUgly?(e.length>1&&t.push(this._getGeoByElement(n)),[]):(e.push(this._getGeoByElement(n)),e)}},{key:"__intervalCalculate__",value:function(t,e,n,i,r,o,s){if(r<0)return i;r--;var a=this._interpolat(e,n);return this._setCurrentVariValue(t,a),this._calculateRS(this.rs),s?o.output_Model.isUgly?this.__intervalCalculate__(t,a,n,i,r,o,s):(i.unshift(this._getGeoByElement(o)),this.__intervalCalculate__(t,e,a,i,r,o,s)):s?void 0:o.output_Model.isUgly?this.__intervalCalculate__(t,e,a,i,r,o,s):(i.push(this._getGeoByElement(o)),this.__intervalCalculate__(t,a,n,i,r,o,s))}},{key:"_interpolat",value:function(t,e){for(var n=[],i=0;i<t.length;i++)n.push(.618*(e[i]-t[i])+t[i]);return n}},{key:"__closeCurve__",value:function(t){return this._attributes.isClosed.get()&&t.length>0&&t[t.length-1].push(t[0][0]),t}},{key:"__segmentColor__",value:function(t){var e=t.getValue();return e.userData={isLocus:!0,dis:t.forceCalulateDynamicDisplay()},e}},{key:"__notSegmentColor__",value:function(t){return t.getValue()}},{key:"_getCurrentVariValue",value:function(t){for(var e,n=[],i=0;e=t[i];i++)n.push(this.algebraic.get(e.varName));return n}},{key:"_setCurrentVariValue",value:function(t,e){for(var n,i=0;n=t[i];i++)n.data.setValue(e[i],y)}}]),n}(l);_.prototype.type="Locus_Point",_.prototype.isPointLocus=!0,t.exports=_},function(t,e,n){"use strict";t.exports={getRangeByModel:function(t){return t.isCircle?{fValue:0,eValue:6.283}:t.isArc?{fValue:0,eValue:1}:t.isConic?t.isParabola?{fValue:0,eValue:1}:{fValue:0,eValue:6.283}:{fValue:0,eValue:1}}}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(62),p=n(56),d=n(38),y=n(148),v=npGeo.Utils.ARC_PER_ANGLE,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={ang:new f(i.algebraic),nUnit:new p(0),direct:new h(0,{0:1,1:-1})};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new d(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return y(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.ang.calcu();return isFinite(e)?t.rotate(this.inputs[1].output_Model,this.getRotateAng(e)):t.constructor.createUgly()}},{key:"_attrChanged",value:function(){this.angleUnit=0==this._attributes.nUnit.get()?1:v,this.directData=0==this._attributes.direct.get()?1:-1}},{key:"getRotateAng",value:function(t){return t*this.angleUnit*this.directData}}]),n}(l);_.prototype.type="Rotate",_.prototype.isTransform=!0,_.prototype.isRotate=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(148),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new f(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return h(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){return t.centroSymmetric(this.inputs[1].output_Model)}}]),n}(l);p.prototype.type="Centrosymmetric",p.prototype.isCentrosymmetric=!0,p.prototype.isTransform=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(148),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={ratio:new f(i.algebraic,"0.5")};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new h(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return p(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.ratio.calcu();return isFinite(e)?t.zoom(this.inputs[1].output_Model,e):t.constructor.createUgly()}}]),n}(l);d.prototype.type="Dilate",d.prototype.isDilate=!0,d.prototype.isTransform=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(16);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(148),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;(0,r.default)(this,n);t.inputs[0].output_Model.isGeoList&&new f(!0),a=e.call(this,t,i,o);var u=t.inputs.slice(0);return u.shift(),a.affineSet=i.affineSets.getAffineSet(u),a}return(0,o.default)(n,[{key:"calculate",value:function(){return h(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){return t.affine(this.affineSet.getAffine())}}]),n}(l);p.prototype.type="AffineByPoints",p.prototype.isAffineByPoints=!0,p.prototype.isAffine=!0,p.prototype.isTransform=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(148),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={inverPower:new f(i.algebraic,"1")};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new h(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return p(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.inverPower.calcu();return isFinite(e)?t.inversion(this.inputs[1].output_Model,e):t.constructor.createUgly()}}]),n}(l);d.prototype.type="Inversion",d.prototype.isTransform=!0,d.prototype.isInversion=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(222),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o)).customTransformSet=new f(t.inputs[1],t.inputs[2]),s}return(0,o.default)(n,[{key:"calculate",value:function(){return this.customTransformSet.transform(this.inputs[0].output_Model)}}]),n}(l);h.prototype.type="CustomTransform",h.prototype.isTransform=!0,h.prototype.isCustomTransform=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(201),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o)).dataRepository=i.dataRepository,s.customTransform=new f(t.inputs[1],t.inputs[2]),s}return(0,o.default)(n,[{key:"calculate",value:function(){return this.customTransform.tranformPoint(this.inputs[0].output_Model)}}]),n}(l);h.prototype.type="CustomTransformSpecialPoint",h.prototype.isTransform=!0,h.prototype.isCustomTransformSpecial=!0,h.prototype.isCustomTransformSpecialPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(793)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(201),p=n(38),d=n(15),y=n(18),v=npGeo,_=v.Paths2,g=v.Paths3,m=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){var s;return(0,o.default)(this,n),s=e.call(this,t,i,r,{stepNum:new y(5),pNum:new d(i.algebraic,"500"),isSegmentColor:new p}),t.inputs[0].output_Model.isObject3?s.outputConstuctor=g:s.outputConstuctor=_,s.customTransform=new h(t.inputs[1],t.inputs[2]),s}return(0,s.default)(n,[{key:"calculate",value:function(){var t,e=this._attributes.pNum.calcu();if(!isFinite(e))return this.outputConstuctor.createUgly();var n=this.inputs[0].toPoints(e).points;return new this.outputConstuctor(this.customTransform.tranformPoints((t=[]).concat.apply(t,(0,r.default)(n)),this.stepNum,this.isSegmentColor))}},{key:"_attrChanged",value:function(){this.isSegmentColor=this._attributes.isSegmentColor.get(),this.stepNum=this._attributes.stepNum.get()}}]),n}(f);m.prototype.type="CustomTransformSpecialPoints",m.prototype.isTransform=!0,m.prototype.isCustomTransformSpecial=!0,m.prototype.isCustomTransformSpecialPoints=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(65),n(66);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(62),f=n(32),h=n(18),p=n(291),d=n(797),y=n(36),v=n(11),_=n(149),g=n(808),m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,btnType:new l(0,{0:0,1:1}),driveType:new l(0,{0:0,1:1}),curStep:new h,description:new p,actionList:new d(i),timeVal:new h(1),bind:new y(i,t)})}return(0,o.default)(n,[{key:"totalStep",get:function(){return 0==this._attributes.btnType?0:this._attributes.actionList.length()}},{key:"curStep",get:function(){return this._attributes.curStep.get()}},{key:"timeVal",get:function(){return this._attributes.timeVal.get()}},{key:"calculate",value:function(){var t=this._attributes.description.get();return 1==this._attributes.btnType.get()&&(t=this._attributes.actionList.getDesciptionByindex(this.curStep)),new g({curStep:this.curStep,totalStep:this.totalStep,description:t,position:this._attributes.position.get()})}},{key:"getPosition",value:function(){return this._attributes.position.get()}},{key:"play",value:function(){if(0!=this._attributes.btnType.get()){if(0==this._attributes.driveType.get()){if(this.timerIndex)return;return this._excuteByTimer()}this._excuteByCurStep()}else this._attributes.actionList.excuteAll()}},{key:"_excuteByTimer",value:function(){var t=this;this._excuteByCurStep()?this.timerIndex=setTimeout((function(){t._excuteByTimer()}),1e3*this.timeVal):this.timerIndex=null}},{key:"_excuteByCurStep",value:function(){return this._attributes.actionList.excuteByIndex(this.curStep),this.curStep+1==this.totalStep?(this._attributes.curStep.set(0),this.element.setOutputNeedUpdate(),!1):(this._attributes.curStep.set(this.curStep+1),this.element.setOutputNeedUpdate(),!0)}}]),n}(v);m.prototype.type="Action",m.prototype.isAction=!0,m.prototype.canBindAction=!1,m.prototype.canCopy=!0,t.exports=_(m)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(62),f=n(15),h=n(32),p=n(36),d=n(809),y=n(11),v=n(149),_=n(810),g=npGeo.Utils.isZero;var m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),s=e.call(this,t,i,o,{position:new h,quenceType:new l(0,{0:0,1:1}),aniType:new l(2,{0:0,1:1,2:2}),playExp:new f(i.algebraic,"0"),times:new f(i.algebraic,"0"),varObjs:new d(i),playStatus:new l(0,{"-2":-2,"-1":-1,0:0,1:1,2:2}),bind:new p(i,t)}),1==o.playStatus&&s.play(),-1==o.playStatus&&s.antiPlay(),s}return(0,o.default)(n,[{key:"calculate",value:function(){if(!this._forcePlay){var t=this._attributes.playExp.calcu();e=t,isFinite(e)&&e>0&&!g(e)?this.play():this.stop()}var e;return this._forcePlay=!1,new _(this._attributes.position.get(),this._attributes.playStatus.get())}},{key:"_attrChanged",value:function(t){this._attributes.varObjs.updateAnimationItem({aniType:this._attributes.aniType.get(),quenceType:this._attributes.quenceType.get(),times:this._attributes.times}),this._attributes.playStatus.set(0),this.element.setOutputNeedUpdate()}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0==this._attributes.playStatus.get()&&(this._forcePlay=t,this._attributes.playStatus.set(1),this.element.setOutputNeedUpdate(),this._attributes.varObjs.play(!0),this._playing())}},{key:"forwardPause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];1==this._attributes.playStatus.get()&&(this._forcePlay=t,this._attributes.playStatus.set(2),this.element.setOutputNeedUpdate())}},{key:"forwardContinue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];2==this._attributes.playStatus.get()&&(this._forcePlay=t,this._attributes.playStatus.set(1),this.element.setOutputNeedUpdate(),this._playing())}},{key:"antiPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0==this._attributes.playStatus.get()&&(this._forcePlay=t,this._attributes.playStatus.set(-1),this.element.setOutputNeedUpdate(),this._attributes.varObjs.play(!1),this._playing())}},{key:"antiPause",value:function(t){-1==this._attributes.playStatus.get()&&(this._forcePlay=t,this._attributes.playStatus.set(-2),this.element.setOutputNeedUpdate())}},{key:"antiContinue",value:function(){-2==this._attributes.playStatus.get()&&(this._attributes.playStatus.set(-1),this.element.setOutputNeedUpdate(),this._playing())}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._attributes.playStatus.get();0!=e&&(this._attributes.playStatus.set(0),this.element.setOutputNeedUpdate(),this._attributes.varObjs.stop(),this._forcePlay=t)}},{key:"_playing",value:function(){var t=this,e=this._attributes.playStatus.get();-1!=e&&1!=e||this._attributes.varObjs.calculate((function(e){e?t.stop(!0):requestAnimationFrame(t._playing.bind(t))}))}}]),n}(y);m.prototype.type="Animation",m.prototype.isAnimation=!0,m.prototype.canBindAction=!1,m.prototype.canCopy=!0,t.exports=v(m)},function(t,e,n){"use strict";var i=n(0);n(8),n(3),n(22);var r=i(n(1)),o=i(n(2)),s=math.gcd,a=Math.abs,u=Math.floor,c=function(){function t(){(0,r.default)(this,t),this._attr={},this._timerCount=0,this._realTimer=1}return(0,o.default)(t,[{key:"varObjs",set:function(t){t&&(this._attr.varObjs=t,this._realTimer=this._computeRealTimer())}},{key:"setAttr",value:function(t){this.varObjs=t.varObjs}},{key:"play",value:function(t){this.stop(),this._timerCount=0,this._computeVarObjsByDirect(t)}},{key:"_computeVarObjsByDirect",value:function(t){var e=this._realTimer,n=this._attr.varObjs.map((function(n){var i=n.s.calcu(),r=n.e.calcu(),o=n.varis;if(!t){var s=[r,i];i=s[0],r=s[1]}o.setValue(i);var c=u(a(n.num.calcu()));(!isFinite(c)||c<1)&&(c=1);var l=c*(n.timer/e);return{varis:o,s:i,e:r,num:l,step:(r-i)/l}}));this._realVO=n}},{key:"stop",value:function(){this._timerCount=0,this._timeOutIndex&&clearTimeout(this._timeOutIndex),this._timeOutIndex=null}},{key:"calculate",value:function(t){var e=this;this._timeOutIndex||(this._timeOutIndex=setTimeout((function(){var n=e._timerPlay();n&&e.stop(),t(n),e._timeOutIndex=null}),this._realTimer))}},{key:"_timerPlay",value:function(){var t=this,e=!0;return this._realVO.forEach((function(n){n.num-1<=t._timerCount?n.varis.setValue(n.e):(e=!1,n.varis.addValue(n.step))})),this._timerCount++,e}},{key:"_computeRealTimer",value:function(){if(1===this._attr.varObjs.length)return this._attr.varObjs[0].timer;var t=this._attr.varObjs.map((function(t){return t.timer}));return s.apply(null,t)}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=Math.abs,a=Math.floor,u=function(){function t(){(0,r.default)(this,t),this._attr={},this._animationIndex=0,this._timerCount=0,this._direct=!0}return(0,o.default)(t,[{key:"varObjs",set:function(t){t&&(this._attr.varObjs=t)}},{key:"setAttr",value:function(t){this.varObjs=t.varObjs}},{key:"play",value:function(t){this.stop(),this._direct!==t&&(this._direct=t,this._attr.varObjs=this._attr.varObjs.reverse()),this._animationIndex=0,this._computeVarObjsByDirect(t)}},{key:"_computeVarObjsByDirect",value:function(t){var e=this._attr.varObjs[this._animationIndex],n=e.s.calcu(),i=e.e.calcu(),r=e.varis,o=e.timer;if(!t){var u=[i,n];n=u[0],i=u[1]}r.setValue(n);var c=a(s(e.num.calcu()));(!isFinite(c)||c<1)&&(c=1),this._currentVO={varis:r,s:n,e:i,num:c,step:(i-n)/c,timer:o}}},{key:"stop",value:function(){this._timerCount=0,this._timeOutIndex&&clearTimeout(this._timeOutIndex),this._timeOutIndex=null}},{key:"calculate",value:function(t){var e=this;if(!this._timeOutIndex){this._currentVO||this._computeVarObjsByDirect(this._direct);var n=this._currentVO;this._timeOutIndex=setTimeout((function(){e._timeOutIndex=null;var i=e._oneVOPlay(n);return i?(e._animationIndex++,e._attr.varObjs[e._animationIndex]?(e._timerCount=0,e._computeVarObjsByDirect(e._direct),t(!1)):(e.stop(),void t(!0))):t(i)}),n.timer)}}},{key:"_oneVOPlay",value:function(t){return!t||(this._timerCount===t.num-1?(t.varis.setValue(t.e),!0):(t.varis.addValue(t.step),this._timerCount++,!1))}}]),t}();t.exports=u},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s={0:n(449),1:n(450)},a=Math.floor,u=function(){function t(){(0,r.default)(this,t),this._attr={},this._currentTimes=0,this._totalTimes=0}return(0,o.default)(t,[{key:"times",set:function(t){if(t){this._attr.times=t;var e=this._attr.times.calcu();(!isFinite(e)||e<0)&&(e=0),this._totalTimes=a(e),this._direct=!0}}},{key:"setAttr",value:function(t){this.times=t.times,this.updateOnes(t.quenceType),this._once.setAttr(t)}},{key:"updateOnes",value:function(t){null!=t&&this._quenceType!=t&&(this._quenceType=t,this._once=new s[t])}},{key:"play",value:function(t){this.stop(),this._currentTimes=0,this._direct=t,this._once.play(t)}},{key:"stop",value:function(){this._once.stop()}},{key:"calculate",value:function(t){throw""}},{key:"_isTimesEnd",value:function(){return 0!=this._totalTimes&&this._currentTimes==this._totalTimes}}]),t}();t.exports=u},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.call(this)}return(0,o.default)(n,[{key:"calculate",value:function(t){var e=this;this._once.calculate((function(n){return n?(e._currentTimes++,e._isTimesEnd()?(e.stop(),t(!0)):(e._direct=!e._direct,e._once.play(e._direct),t(!1))):t(!1)}))}},{key:"_isTimesEnd",value:function(){return 0!=this._totalTimes&&this._currentTimes==2*this._totalTimes}}]),n}(n(451));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(32),f=n(36),h=n(15),p=n(11),d=n(149),y=n(811),v=npGeo.Utils.isZero;var _=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{position:new l,playExp:new h(i.algebraic,"0"),bind:new f(i,t)})).element.on("change:isDeleted",(function(t){return t.get("isDeleted")&&t.stop()})),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t,e=0;return e=this._handPlay?1:this._handStop?0:this._attributes.playExp.calcu(),this._handStop=!1,this._handPlay=!1,t=e,isFinite(t)&&t>0&&!v(t)||(e=0),new y(this._attributes.position.get(),e)}},{key:"play",value:function(){this._handPlay=!0,this.element.setOutputNeedUpdate()}},{key:"stop",value:function(){this._handStop=!0,this.element.setOutputNeedUpdate()}}]),n}(p);_.prototype.type="DynamicAudio",_.prototype.isDynamicAudio=!0,_.prototype.canBindAction=!1,_.prototype.canCopy=!0,t.exports=d(_)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(455),f=n(32),h=n(291),p=n(36),d=n(812),y=n(11),v=n(149),_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,funName:new h("customFun"),expStr:new h("abs(x)"),inVariables:new d(["x"]),note:new h,bind:new p(i,t)})}return(0,o.default)(n,[{key:"calculate",value:function(){return new l(this._attributes.funName.get(),this._attributes.expStr.get(),this._attributes.inVariables.get(),this.algebraic.strToLatex(this._attributes.expStr.get()),this._attributes.position.get())}},{key:"_attrChanged",value:function(t){var e=this;t.expStr&&(this.algebraic.createCustomFunction(this._attributes.funName.get(),this._attributes.expStr.get(),this._attributes.inVariables.get(),this._attributes.note.get())||this.algebraic.updateCustomFunction(this._attributes.funName.get(),this._attributes.expStr.get(),"note"),this.element.elementsRepository.traverseElement((function(t){t._updateInputsDataByCustomFunction(e._attributes.funName.get())})))}}]),n}(y);_.prototype.type="CustomFunction",_.prototype.isCustomFunction=!0,_.prototype.canBindAction=!0,_.prototype.canCopy=!0,t.exports=v(_)},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n,i,o,s){(0,r.default)(this,t),this._attributes={funName:e,expStr:n,inVariables:i,expLatex:o,position:s}}return(0,o.default)(t,[{key:"funName",get:function(){return this._attributes.funName}},{key:"expStr",get:function(){return this._attributes.expStr}},{key:"inVariables",get:function(){return this._attributes.inVariables}},{key:"expLatex",get:function(){return this._attributes.expLatex}},{key:"position",get:function(){return this._attributes.position}}]),t}();s.prototype.type="CustomFunction",s.prototype.isCustomFunctionOutput=!0,t.exports=s},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(455),f=n(32),h=n(36),p=n(18),d=n(291),y=n(11),v=n(149),_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{position:new f,funName:new d("customFun"),variable:new d("x"),order:new p(1,1,50),note:new d,bind:new h(i,t)}))._caluAttr={},s}return(0,o.default)(n,[{key:"calculate",value:function(){return this._updateExp(),new l(this._caluAttr.funName,this._caluAttr.expStr,this._caluAttr.inVariables,this._caluAttr.expLatex,this._attributes.position.get())}},{key:"_attrChanged",value:function(t){(t.variable||t.order)&&(this.isAttrChanged=!0)}},{key:"_updateExp",value:function(){var t=this,e=this.inputs[0].output_Model;if(e.expStr!==this._caluAttr.parentExpStr||this.isAttrChanged){this._caluAttr.parentExpStr=e.expStr;for(var n=this._attributes.order.get()-1,i=this._attributes.variable.get(),r=math.derivative(this._caluAttr.parentExpStr,i);n>0;)r=math.derivative(r.toString(),i),n--;this._caluAttr.expStr=r.toString(),this._caluAttr.inVariables=e.inVariables,this._caluAttr.expLatex=r.toTex(),this._caluAttr.funName=this._attributes.funName.get(),this.algebraic.createCustomFunction(this._caluAttr.funName,this._caluAttr.expStr,this._caluAttr.inVariables,this._attributes.note.get())||this.algebraic.updateCustomFunction(this._caluAttr.funName,this._caluAttr.expStr,"note"),this.element.elementsRepository.traverseElement((function(e){e._updateInputsDataByCustomFunction(t._caluAttr.funName)})),this.isAttrChanged=!1}}}]),n}(y);_.prototype.type="DerivativeFunction",_.prototype.isDerivativeFunction=!0,_.prototype.canBindAction=!0,_.prototype.canCopy=!0,t.exports=v(_)},function(t,e,n){"use strict";n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}n(216),n(75),n(49),n(223),n(3),n(185),n(21);var l=n(458),f=n(813),h=n(814),p=n(11),d=n(149),y=n(32),v=n(36),_=n(18),g=n(815),m=n(816),x=n(459),P=x.NETPAD_BL_REX,w=x.NETPAD_FOMULAR_REX,M=x.NETPAD_IF_TEXT_REX,b=x.FORMULAR_REX_1,R=x.FORMULAR_REX_2,S=x.VARIS_REX,k=x.IF_TEXT_REX,E=new RegExp(S),A=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{position:new y,textWidth:new _(0),text:new g(""),bind:new v(i,t)})).$div=$("<div></div>"),s}return(0,o.default)(n,[{key:"calculate",value:function(){return new m(this._attributes.position.get(),this._attributes.textWidth.get(),this._calcHtml())}},{key:"_attrChanged",value:function(t){if(t.text){var e=this._attributes.text.get();try{e=decodeURI(e)}catch(t){}this.realHtml=function(t){return t.replace(/&amp;/gm,"&").replace(/[\n]/gi,"")}(function t(e){if(!e)return"";for(var n,i=$("<div></div>").html(e),r=document.createElement("span"),o=i.find("font"),s=0;n=o[s];s++){var a=t(n.innerHTML);a?(r.innerHTML=a,r.style.fontSize=n.size?C[n.size]:n.style.fontSize,r.style.fontFamily=n.face,r.style.color=n.color,n.outerHTML=r.outerHTML):$(n).remove()}return i.html()}(e)),this.formularList={},this.blList={},this.ifTextList={},this.RM=function(t){var e=t.match(E);if(!e||0==e.length)return{};for(var n,i={},r=0;n=e[r];r++){var o=n.substring(n.indexOf("{")+1,n.indexOf(","));i[o]=o}return i}(e),e=this._handlerFormularList(e),e=this._handlerBlList(e),e=this._handleIfText(e),this.tempText=e}}},{key:"getParentsDataName",value:function(){return this.RM}},{key:"_handlerBlList",value:function(t){var e=this,n=0;return t.replace(S,(function(t){var i="NETPAD"+n+++"BL";return e.blList[i]=new l(t,e.dataRepository),i}))}},{key:"_handlerFormularList",value:function(t){var e=this,n=0;return t=(t=t.replace(b,(function(t){var i="NETPAD"+n+++"FORMULAR";return e.formularList[i]=new f(t,e.dataRepository,e.algebraic),i}))).replace(R,(function(t){var i="NETPAD"+n+++"FORMULAR";return e.formularList[i]=new f(t,e.dataRepository,e.algebraic),i}))}},{key:"_handleIfText",value:function(t){var e=this,n=0;return t=t.replace(k,(function(t){var i="NETPAD".concat(n++,"IFTEXT");return e.ifTextList[i]=new h(t,e.algebraic),e.RM=$.extend({},e.RM,e.ifTextList[i].vm),i}))}},{key:"_calcHtml",value:function(){var t=this;if(!this.tempText)return"";var e=this.tempText.replace(P,(function(e){return t.blList[e].toString()}));return e=(e=e.replace(w,(function(e){return t.formularList[e].toString()}))).replace(M,(function(e){return t.ifTextList[e].toString()})),this.$div.html(e),this.$div.html()}}]),n}(p);A.prototype.type="DynamicText",A.prototype.isDynamicText=!0;var C={1:"10px",2:"13px",3:"16px",4:"18px",5:"24px",6:"32px",7:"48px"};t.exports=d(A)},function(t,e,n){"use strict";var i=n(0);n(93);var r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t);var i=e.substring(0,1);this.isPositive="+"===i,this.isNagetive="-"===i,this.unitStr=this.isPositive||this.isNagetive?i:"";var o=e.indexOf(",");this.varibleName=e.substring(e.indexOf("{")+1,e.indexOf(",")),this.accucy=parseInt(e.substring(o+1,e.indexOf("}"))),this.varibleInstance=n.getDataByName(this.varibleName)}return(0,o.default)(t,[{key:"toString",value:function(){var t=parseFloat(this.varibleInstance.getValue().toFixed(this.accucy));return isNaN(t)?"?":t>=0?this.unitStr+(isFinite(t)?t:""):this.isPositive?isFinite(t)?t:"-":this.isNagetive?"+"+(isFinite(t)?-t:""):isFinite(t)?t:"-"}}]),t}();t.exports=s},function(t,e,n){"use strict";t.exports={NETPAD_BL_REX:/(NETPAD[0-9]*BL)/g,NETPAD_FOMULAR_REX:/(NETPAD[0-9]*FORMULAR)/g,NETPAD_IF_TEXT_REX:/(NETPAD[0-9]*IFTEXT)/g,FORMULAR_REX_1:/(\$\$.+?\$\$)/g,FORMULAR_REX_2:/(\\\[.+?\\\])/g,IF_TEXT_REX:/(\*\*.+?\*\*)/g,VARIS_REX:/[-|+]?(\$bl\{([\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F$A-Za-z_][\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F$A-Za-z0-9_]*),\d\})|(toFixed\(.*?\))|(\%s)/g}},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(27);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=n(15),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,exp:new d(i.algebraic,"1"),accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){return function(t){return!0===t?1:!1===t?0:t}(this._attributes.exp.calcu())}},{key:"_description",value:function(){return"".concat(this._attributes.exp.toTex()," = ")}},{key:"getParentsDataName",value:function(){return this._attributes.exp.getVaris()}},{key:"getCustomFuns",value:function(){return this._attributes.exp.getCustomFuns()}},{key:"getChildrenDataName",value:function(){return this.element.outVais?[this.element.outVais.name]:[]}}]),n}(l);y.prototype.type="MeasureExpress",y.prototype.isMeasureExpress=!0,t.exports=y},function(t,e,n){"use strict";var i=n(0);n(65),n(66);var r=i(n(1)),o=i(n(2)),s=function(){function t(e){(0,r.default)(this,t),this._attributes=e}return(0,o.default)(t,[{key:"position",get:function(){return this._attributes.position}},{key:"unit",get:function(){return this._attributes.unit}},{key:"val",get:function(){return this._attributes.val}},{key:"description",get:function(){return this._attributes.description}},{key:"value",get:function(){return this._attributes.value}}]),t}();s.prototype.type="Measure",s.prototype.isMeasureTextOutput=!0,t.exports=s},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]?t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()).area||0:t.area||0}},{key:"_description",value:function(){return"S_{"+this.inputs[0].get("name")+"} = "}}]),n}(l);d.prototype.type="MeasureArea",d.prototype.isMeasureArea=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]?t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()).length||0:void 0!==t.circumference?t.circumference:t.length}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[0].output_Model;return t?e.isPolygon||e.isConic||e.isCircle||e.isPolyhedron?"C_{".concat(t,"} = "):"L_{".concat(t,"} = "):""}}]),n}(l);d.prototype.type="MeasureLength",d.prototype.isMeasureLength=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),fValue:new p(0),eValue:new p(1),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this._attributes.fValue.get(),i=this._attributes.eValue.get(),r=e.valueOn(t,{fValue:n,eValue:i});if(e.isSegment){if(r>i)return i;if(r<n)return n}return r}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name");return t&&e?"".concat(t,"").concat(e," = "):""}}]),n}(l);d.prototype.type="MeasureValueOfPointToObj",d.prototype.isMeasureValueOfPointToObj=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model.radius;return this.inputs[1]&&(t*=Math.sqrt(this.inputs[1].constraint.axisTransFormer.getXScale()*this.inputs[1].axisTransFormer.getYScale())),t}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"R_{".concat(t,"} = "):""}}]),n}(l);d.prototype.type="MeasureRadius",d.prototype.isMeasureRadius=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(36),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new h(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){return this.inputs[0].output_Model.isLine&&this.inputs[1].output_Model.isLine?this.inputs[0].output_Model.length/this.inputs[1].output_Model.length:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name");return t&&e?"\\dfrac{L_{".concat(t,"}}{L_{").concat(e,"}} = "):""}}]),n}(l);d.prototype.type="MeasureProportioOf2Lines",d.prototype.isMeasureProportioOf2Lines=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.x}},{key:"_description",value:function(){return this.inputs[0].get("name")?"".concat(this.inputs[0].get("name"),"_{x} = "):""}}]),n}(l);d.prototype.type="MeasureCoorX",d.prototype.isMeasureCoorX=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.y}},{key:"_description",value:function(){return this.inputs[0].get("name")?"".concat(this.inputs[0].get("name"),"_{y} = "):""}}]),n}(l);d.prototype.type="MeasureCoorY",d.prototype.isMeasureCoorY=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;return this.inputs[2]&&(t=this.inputs[2].transSTG(t),e=this.inputs[2].transSTG(e)),t.distanceTo(e)}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name");return t&&e?"| ".concat(t).concat(e," | = "):""}}]),n}(l);d.prototype.type="MeasureDistanceOf2Points",d.prototype.isMeasureDistanceOf2Points=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this.inputs[2].output_Model;return this.inputs[3]&&(t=this.inputs[3].transSTG(t),e=this.inputs[3].transSTG(e),n=this.inputs[3].transSTG(n)),t.distanceTo(n)/t.distanceTo(e)}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name"),n=this.inputs[2].get("name");return t&&e&&n?"\\dfrac{|".concat(t).concat(n,"|}{|").concat(t).concat(e,"|} = "):""}}]),n}(l);d.prototype.type="MeasureRatioOf3Points",d.prototype.isMeasureRatioOf3Points=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(32),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{offset:new f({left:0,top:0})})}return(0,o.default)(n,[{key:"getPosition",value:function(){return this.element.output_Model.position}},{key:"calculate",value:function(){return this.inputs[1].output_Model.mergeToPoint(this.inputs[0].output_Model,this._attributes.offset.get())}},{key:"moveToPos",value:function(t){var e=this._attributes.offset.get(),n=this.getPosition();this.element._setConstraintAttr({offset:{left:t.x-n.left+e.left,top:t.y-n.top+e.top}})}}]),n}(l);h.prototype.type="CombinationPicture",h.prototype.isCombinationPicture=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(149),h=n(18),p=n(291),d=n(32),y=n(840),v=n(841),_=n(36),g=n(842),m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{imgWidth:new h,imgHeight:new h,picPath:new p,position:new d,affine:new y,bind:new _(i,t),file:new v})}return(0,o.default)(n,[{key:"calculate",value:function(){return new g(this.paper,this.getAttr())}}]),n}(l);m.prototype.type="FreePicture",m.prototype.isPicture=!0,m.prototype.isFreeAssist=!0,m.prototype.canAlign=!0,t.exports=f(m)},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(32),h=n(843),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{offset:new f({left:0,top:0})})}return(0,o.default)(n,[{key:"getPosition",value:function(){return this.element.output_Model.position}},{key:"calculate",value:function(){if(this.inputs[0].isUgly)return h.createUgly();var t=this.paper.transGTS(this.inputs[0].output_Model),e=this._attributes.offset.get(),n={left:t.x+e.left,top:t.y+e.top};if(this.inputs[1].output_Model.isHtmlTextOutput){var i=this.inputs[1].output_Model,r=i.value,o=i.textWidth;return new h({value:r,textWidth:o,position:n})}var s="",a="";s=this.inputs[1].output_Model.isVariableRulerOutput?this.inputs[1].constraint.getValue():this.inputs[1].getValue().val.toString();try{a=katex.renderToString(s)}catch(t){a="?"}return new h({value:a,position:n})}},{key:"moveToPos",value:function(t){var e=this._attributes.offset.get(),n=this.getPosition();this.element._setConstraintAttr({offset:{left:t.x-n.left+e.left,top:t.y-n.top+e.top}})}}]),n}(l);p.prototype.type="CombinationText",p.prototype.isCombinationText=!0,t.exports=p},function(t,e,n){"use strict";n(4);var i=n(0);n(27),n(93),n(3),n(22);var r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(149),p=n(32),d=n(36),y=n(18),v=n(15),_=n(62),g=n(844),m={0:n(452),1:n(362),2:n(362)},x=Math.abs,P=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){var s;return(0,o.default)(this,n),(s=e.call(this,t,i,r,{position:new p,accuracy:new y(2),min:new v(i.algebraic,"-10"),max:new v(i.algebraic,"10"),step:new y(1),playType:new y(0),playStatus:new _(0,{0:0,1:1}),bind:new d(i,t)})).outVais=s.element.outVais,s.varis={},s.varis[s.outVais.name]=s.outVais.name,1===r.playStatus&&s.play(),s}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._attributes.min.calcu(),e=this._attributes.max.calcu(),n=this.outVais.getValue();return new g({paramName:this.outVais.name,min:t,max:e,step:this._attributes.step.get(),val:n.toFixed(this._attributes.accuracy.get()),value:n,playStatus:this._attributes.playStatus.get(),position:this._attributes.position.get()})}},{key:"_attrChanged",value:function(t,e){isNaN(e.value)||this.element.outVais.setValue(e.value),this.updateValueEvent||(this.updateValueEvent=this._updateValueByMinMax.bind(this)),(t.min||t.max)&&this.addListenerMinMax((0,r.default)({},this._attributes.min.getVaris(),this._attributes.max.getVaris())),this.animation=new(m[this._attributes.playType.get()])(this.algebraic,this.dataRepository);var n=this._attributes.min.calcu(),i=this._attributes.max.calcu(),o=this._attributes.step.get();this.animation.setAttr({quenceType:0,varObjs:[{varis:this.element.outVais,s:this._attributes.min,e:this._attributes.max,num:this.algebraic.createAlgeObjByStr(x((i-n)/o)),timer:100}]}),this._attributes.playStatus.set(0),this.element.setOutputNeedUpdate()}},{key:"getParentsDataName",value:function(){return $.extend({},this.varis,this._attributes.min.getVaris(),this._attributes.max.getVaris())}},{key:"getValue",value:function(){return this.outVais.getValue().toFixed(this._attributes.accuracy.get())}},{key:"play",value:function(){0==this._attributes.playStatus.get()&&(this._attributes.playStatus.set(1),this.animation.play(!0),this._playing(),this.element.setOutputNeedUpdate())}},{key:"_playing",value:function(){var t=this;this.animation.calculate((function(e){e||1!=t._attributes.playStatus.get()||requestAnimationFrame(t._playing.bind(t))}))}},{key:"stop",value:function(){0!=this._attributes.playStatus.get()&&(this.animation.stop(),this._attributes.playStatus.set(0),this.element.setOutputNeedUpdate())}},{key:"addListenerMinMax",value:function(t){for(var e in this.stopListenerMinMax(),this.ListenerDatas=[],t){var n=this.dataRepository.getDataByName(e);n.on("change:value",this.updateValueEvent),this.ListenerDatas.push(n)}}},{key:"stopListenerMinMax",value:function(){var t=this;this.ListenerDatas&&this.ListenerDatas.forEach((function(e){return e.off("change:value",t.updateValueEvent)}))}},{key:"_updateValueByMinMax",value:function(){var t=this._attributes.min.calcu(),e=this._attributes.max.calcu(),n=this._calcuValue(t,e);this.element.outVais.setValue(parseFloat(n))}},{key:"_calcuValue",value:function(t,e){if(t>e)return e;var n=this.outVais.getValue();return n<t?t:n>e?e:n}}]),n}(f);P.prototype.type="VariableRuler",P.prototype.isVariableRuler=!0,P.prototype.canBindAction=!1,t.exports=h(P)},function(t,e,n){"use strict";n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(28));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}n(51),n(20),n(82),n(8),n(27),n(16),n(48),n(106),n(131),n(3),n(22),n(49);var h=n(11),p=n(15),d=n(38),y=n(62),v=n(845),_=Math.floor,g=Math.random,m=Math.round,x={silent:!0},P=npGeo.GeoList,w={0:function(t){},1:function(t){},2:function(t){for(var e=this.displayList.length;e<t;e++)this.displayList[e]=S()},3:function(t){for(var e=[],n=0;n<t;n++)e[n]=S();this.displayList=e}},M={0:function(t,e,n,i){var r=this.element.displayModel.toJSON3();return e.userData.dis.fill=r.fill,e.userData.dis.stroke=r.stroke,e.userData.dis.show=!0,e.isPoint&&!i&&(e.userData.dis.show=!1),e},1:function(t,e,n,i){return t.output_Model.isGeoList?(e.isPoint&&!i&&(e.userData.dis.show=!1),e):(e.userData.dis=t.forceCalulateDynamicDisplay(),e.isPoint&&!i&&(e.userData.dis.show=!1),e)},2:function(t,e,n,i){var r=this.displayList[n];return e.userData.dis.fill=r.fill,e.userData.dis.stroke&&(0,l.default)(e.userData.dis.stroke,r.stroke),e.userData.dis.show=!0,e.isPoint&&!i&&(e.userData.dis.show=!1),e},3:function(t,e,n,i){var r=this.displayList[n];return e.userData.dis.fill=r.fill,e.userData.dis.stroke&&(0,l.default)(e.userData.dis.stroke,r.stroke),e.userData.dis.show=!0,e.isPoint&&!i&&(e.userData.dis.show=!1),e}},b=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i,o){var a;return(0,r.default)(this,n),(a=e.call(this,t,i,o,{isRandom:new d,showLast:new d,shader:new y(1,M),num:new p(i.algebraic,"3"),stopCondition:new p(i.algebraic,"1<0")})).rsHide=[],a.spNum=o.spNum,a.displayList=[],a.elementsRepository.on("update",(function(){v.call((0,s.default)(a))})),a}return(0,o.default)(n,[{key:"calculate",value:function(){var t=_(this._attributes.num.calcu());if(!isFinite(t))return P.createUgly();var e=[],n=this._recordOriginPosition(),i=n.beforeElementValues,r=n.beforeDatasValues;this.colorListFun(t);for(var o,s=this.oriImages,a=this.mapImages,u=this.rs,c=this.mapgetValue,l=R(a,c),f=this._attributes.showLast.get(),h=this._attributes.isRandom.get(),p=this.element.displayModel.getAttr().showPoint,d=0;d<t&&!this._attributes.stopCondition.calcu();d++){o=l,l=[],f&&(e=[]);for(var y,v=0;y=o[v];v++){for(var g,m=0;g=s[m];m++)g.setValue(y[m],x),this.updateGeoAttrArrs(e,g,d,p);for(var w,M=0;w=u[M];M++)w.calculate(!0,h),this.updateGeoAttrArrs(e,w,d,p);l=l.concat(R(a,c,h))}}return this._restoreOriginPosition(i,r),new P(e.sort((function(t,e){return t.userData.zIndex-e.userData.zIndex})))}},{key:"_recordOriginPosition",value:function(){for(var t,e=[],n=0;t=this.elementsAffectToIter[n];n++)e.push({element:t,value:t.getValue()});for(var i,r=[],o=this.dataRepository.getDataList(),s=0;i=o[s];s++)r.push({data:i,value:i.getValue()});return{beforeElementValues:e,beforeDatasValues:r}}},{key:"_restoreOriginPosition",value:function(t,e){for(var n,i=0;n=t[i];i++)n.element.setValue(n.value,x);for(var r,o=0;r=e[o];o++)r.data.setValue(r.value,x)}},{key:"setAttr",value:function(t){var e=this;for(var n in t)this._attributes[n]&&this._attributes[n].set(t[n]);var i=this._attributes.shader.get();this.colorListFun=w[i],this.followFun=M[i],void 0!==t.inputs_id&&(this.inputs=t.inputs_id.map((function(t){return e.elementsRepository.get(t)}))),void 0!==t.rsHide&&(this.rsHide=t.rsHide.map((function(t){return e.elementsRepository.get(t)}))),v.call(this);var r=this.elementsAffectToIter;this.element._initParents(r.map((function(t){return t.get("id")})))}},{key:"getAttr",value:function(){var t={};for(var e in this._attributes)t[e]=this._attributes[e].get();t.origin=this.oriImageElements.map((function(t){return{name:t.output_Model.isPoint?t.get("name"):t.outVais.name,id:t.get("id"),isPoint:t.output_Model.isPoint}}));for(var n,i=[],r=0;n=this.mapImageElements[r];r++)for(var o,s=0;o=n[s];s++)i.push(o);t.map_ids=i,t.inputs_id=this.inputs.map((function(t){return t.get("id")}));for(var a=this.elementsAffectToIter.slice(0),u=0;u<a.length;u++)a[u].output_Model.canIter||(a.splice(u,1),u--);return a.sort((function(t,e){return t.get("id")-e.get("id")})),t.rs=a,t.rsHide=this.rsHide.map((function(t){return t.get("id")})),t}},{key:"toJSON3",value:function(){var t={};for(var e in this._attributes)t[e]=this._attributes[e].get();return t.spNum=this.spNum,t.inputs_id=this.inputs.map((function(t){return t.get("id")})),t.rsHide=this.rsHide.map((function(t){return t.get("id")})),{type:this.type,parents:this._getParentsID(),attr:t}}},{key:"updateGeoAttrArrs",value:function(t,e,n,i){var r=this;if(e.output_Model&&!e.output_Model.isUgly&&e.output_Model.canIter&&!this.rsHide.includes(e))if(e.output_Model.isGeoList)e.output_Model.forEach((function(o){t.push(r.followFun(e,o,n,i))}));else{var o=e.getValue();o.userData={dis:e.displayModel.toJSON3(),zIndex:e.get("zIndex")},t.push(this.followFun(e,o,n,i))}}}]),n}(h);function R(t,e,n){return t.map((function(t,e){return t.map((function(t,e){return t.getValue(n)}))}))}function S(){var t,e,n,i=(t=(m(127*g())+127).toString(16),e=(m(127*g())+127).toString(16),n=(m(127*g())+127).toString(16),"#"+t+e+n);return{fill:{color:i,opacity:1},stroke:{color:i,opacity:1},show:!0}}b.prototype.type="Iter",b.prototype.isIter=!0,t.exports=b},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=new(n(846)),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return f}}]),n}(l);h.prototype.type="Group",h.prototype.isGroup=!0,h.prototype.canCopy=!0,t.exports=h},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(178),s=n(287),a=(n(72).deepToJSON,i.extend({defaults:{show:!1,traced:!1,step:1,PI2:1,tick:0,number:0,offset:0},initialize:function(){this.strokeModel=new r,this.arrowModel=new o,this.fontModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.step=this.get("step"),t.PI2=this.get("PI2"),t.tick=this.get("tick"),t.number=this.get("number"),t.offset=this.get("offset"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}}));t.exports=a},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(178),s=n(287),a=i.extend({defaults:{show:!0,traced:!1,step:1,PI2:1,tick:0,number:0,offset:0},initialize:function(){this.strokeModel=new r,this.arrowModel=new o,this.fontModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.step=this.get("step"),t.PI2=this.get("PI2"),t.tick=this.get("tick"),t.number=this.get("number"),t.offset=this.get("offset"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=a},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=n(178),a=i.extend({defaults:{show:!0,traced:!1,isFanShaped:!1},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.arrowModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.traced=this.get("traced"),t.isFanShaped=this.get("isFanShaped"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=a},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164);t.exports=i.extend({defaults:{show:!0,imgWidth:70,imgHeight:70,btnStyle:0,picPath:"/courseImages/icon/reset_1.png",borderRadius:4},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.fontModel=new s,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.btnStyle=this.get("btnStyle"),t.picPath=this.get("picPath"),this.get("file")&&(t.file=this.get("file")),t.imgWidth=this.get("imgWidth"),t.imgHeight=this.get("imgHeight"),t.borderRadius=this.get("borderRadius"),t}})},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164);t.exports=i.extend({defaults:{show:!0,animationType:"2",borderRadius:4},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.fontModel=new s,this.iconModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.animationType=this.get("animationType"),t.borderRadius=this.get("borderRadius"),t}})},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(164);t.exports=i.extend({defaults:{show:!0,audioSrc:"https://sound.netpad.net.cn/01.mp3",audioPlay:"once"},initialize:function(){this.fontModel=new o,this.iconModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.audioSrc=this.get("audioSrc"),t.audioPlay=this.get("audioPlay"),t}})},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50);t.exports=i.extend({defaults:{show:!0},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.initializeBase()}})},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164),a=i.extend({defaults:{show:!0},initialize:function(){this.strokeModel=new o({color:"#ffffff",opacity:0,style:"solid",width:1}),this.fillModel=new r({color:"#ffffff",opacity:0}),this.fontModel=new s({size:20,color:"#000",opacity:1}),this.initializeBase()}});t.exports=a},function(t,e,n){"use strict";var i=n(45),r=n(73),o=n(50),s=n(164);t.exports=i.extend({defaults:{show:!0,rulerWidth:140,showVariable:!0,showInput:!0,showBtn:!0,showRuler:!0},initialize:function(){this.strokeModel=new o,this.fillModel=new r,this.fontModel=new s,this.iconModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.rulerWidth=this.get("rulerWidth"),t.showBtn=this.get("showBtn"),t.showRuler=this.get("showRuler"),t.showVariable=this.get("showVariable"),t.showInput=this.get("showInput"),t}})},function(t,e,n){"use strict";var i=n(45),r=n(72).deepToJSON,o=n(50),s=n(73),a=i.extend({defaults:{show:!0,showPoint:!0},initialize:function(){this.fillModel=new s,this.strokeModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.showPoint=this.get("showPoint"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});a.defaultAttributes={stroke:{color:"#0000ff",opacity:1,style:"solid",width:1},fill:{color:"#ff0000",opacity:1,texture:"0"}},a.Attributes=r(a.defaultAttributes),t.exports=a},function(t,e,n){"use strict";var i=n(0);n(27);var r=i(n(1)),o=i(n(2)),s=["XAxisControlPoint","YAxisControlPoint","XAxisSPoint","XAxisEPoint","YAxisSPoint","YAxisEPoint"],a=function(){function t(e,n,i,o,s,a,u,c,l){(0,r.default)(this,t),this.elementsRepository=e,this.intersectionSets=n,this.tangentSets=i,this.algebraic=o,this.dataRepository=s,this.paper=a,this.nameConstructor=u,this.environmentConfig=c,this.preview=l}return(0,o.default)(t,[{key:"restoreByJSON3",value:function(t){this.resetSets();for(var e,n=0;e=t[n];n++)this.restoreElementByJSON3(e)}},{key:"resetSets",value:function(){console.error("ElementsFactory.resetSets must be override")}},{key:"restoreElementByJSON3",value:function(t){console.error("ElementsFactory.resetSets must be override")}},{key:"ElementByJSON3",value:function(t){return t.id=this.elementsRepository.length,"Point"===t.type&&!t.name&&this.environmentConfig.autoNamePoint&&-1===s.indexOf(t.def.type)&&(t.name=this.nameConstructor.autoUpperName()),"Measure"!==t.type&&"Variable"!==t.type||(t.def.attr||(t.def.attr={}),t.def.attr.accuracy=this.environmentConfig.varisAccuracy),this.restoreElementByJSON3(t)}},{key:"hfPoint",value:function(t,e,n){var i=this.dataRepository.getUDataName();return this.algebraic.set(i,n||0),this.ElementByJSON3({type:"Point",outVais:i,def:{type:t,parents:e,attr:{inVais:i,outVais:i}}})}},{key:"addElement",value:function(t){return this.elementsRepository.add(t),t.get("id")}}]),t}();t.exports=a},function(t,e,n){"use strict";n(27),n(65),n(66),n(3),n(22),n(87),n(115),n(132),n(177),n(147),n(16),n(20),t.exports={Slider:function(t,e){var n=t.variName,i=t.min,r=void 0===i?"0":i,o=t.max,s=void 0===o?"10":o,a=t.step,u=void 0===a?1:a,c=t.value,l=void 0===c?Math.random():c;return{type:"Variable",name:n,outVais:n,def:{type:"VariableRuler",attr:{position:e||this.getNextAssistPosition(),variName:n,min:r,max:s,step:u,value:l}}}},Animation:function(t,e){var n=t.name,i=t.quenceType,r=t.aniType,o=t.times,s=t.varObjs;if(s&&0!==s.length)return{type:"AnimationButton",name:n,def:{type:"Animation",attr:{position:e||this.getNextAssistPosition(),quenceType:i||0,aniType:r||2,times:o||"0",varObjs:s}}}},Action:function(t,e){if(t instanceof Array)return{type:"ActionButton",def:{type:"Action",attr:{position:e||this.getNextAssistPosition(),btnType:"1",driveType:"1",actionList:[{name:"hide",description:"",destObjs:t},{name:"show",description:"",destObjs:t}]}}};var n=t.btnType,i=t.driveType,r=t.timeVal,o=t.description,s=t.actionList;return 0===n&&o&&s.forEach((function(t){t.description=o})),{type:"ActionButton",def:{type:"Action",attr:{position:e||this.getNextAssistPosition(),btnType:n||1,driveType:i||1,timeVal:r||1,description:o,actionList:s}}}},Picture:function(t,e,n,i){var r={position:i||this.getNextAssistPosition()};return e&&(r.width=e),n&&(r.height=n),t instanceof Blob?(r.picPath=window.URL.createObjectURL(t),r.file=t):r.picPath=t,{type:"Picture",def:{type:"FreePicture",attr:r}}},Audio:function(t,e){return{type:"Audio",dis:{audioSrc:t||"https://sound.netpad.net.cn/01.mp3"},def:{type:"DynamicAudio",attr:{position:e||this.getNextAssistPosition()}}}},CustomFunction:function(t,e,n,i,r){return{type:"CustomFunction",def:{type:"CustomFunction",attr:{position:r||this.getNextAssistPosition(),funName:t,expStr:e,inVariables:n,note:i}}}},DerivativeFunction:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0;return{type:"CustomFunction",def:{type:"DerivativeFunction",parents:[t],attr:{position:r||this.getNextAssistPosition(),funName:e,variable:n,order:i}}}},Text:function(t,e){return{type:"HtmlText",def:{type:"DynamicText",attr:{position:e||this.getNextAssistPosition(),text:t}}}},Express:function(t){var e=this.dataRepository.getMDataName();return{type:"Measure",outVais:e,name:e,def:{type:"MeasureExpress",attr:{position:this.getNextAssistPosition(),exp:t}}}},Iter:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.slice(0);return e.forEach((function(t){i=i.concat(t.slice(0))})),{type:"Iter",def:{type:"Iter",attr:{spNum:t.length,inputs_id:i,num:n}}}}}},function(t,e,n){"use strict";n(48);var i=n(868),r=n(429),o=n(161),s=o.canDelete,a=o.canHide,u=o.canShow,c=o.canHideLabels,l=o.canShowLabels,f={CREATE:n(869),DELETE:n(870),UPDATE:n(871)},h=n(872),p=n(874),d=new r,y=0,v=1,_=2,g=Backbone.Model.extend({initialize:function(t){this.selectManager=t.selectManager,this.elementsRepos=t.elementsRepos,this.elementsFactory=t.elementsFactory,this.nameConstructor=t.nameConstructor,this.is2D=t.is2D,this.paper=t.paper,this.undo_stack=[],this.redo_stack=[],this._currentMacroCommand=null},reset:function(){this.undo_stack.splice(0),this.redo_stack.splice(0),this.set("isChanged",!1)},constructFreePoint:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.createCommand("CREATE",{fun:"ElementByJSON3",arg:[this._json3ForFreePoint(t)]},e)},constructHFPoint:function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.createCommand("CREATE",{fun:"hfPoint",arg:[t,e,n]},i)},constructByJSON3:function(t,e){return this.createCommand("CREATE",{fun:"ElementByJSON3",arg:[t]},e)},_json3ForFreePoint:function(t){return{type:"Point",def:{type:"FreePoint",attr:{position:t}}}},deleteElements:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(s(t))return this.createCommand("DELETE",t,e)},hideElements:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a(t);n&&(this.updateElements(this._execute_ChangeAttr_Same(n,{dis:{show:!1}}),e),this.selectManager.clearSelected())},hideLabels:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=c(t);n&&this.updateElements(this._execute_ChangeAttr_Same(n,{label:{callShow:!1}}),e)},showElements:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=u(t);n&&this.updateElements(this._execute_ChangeAttr_Same(n,{dis:{show:!0}}),e)},showLabels:function(t){var e=l(t);if(e)for(var n,i={},r=0;n=e[r];r++)n.nameModel&&(i[n.get("id")]={name:n.get("name")?n.get("name"):this.nameConstructor.getNameByElement(n),label:{callShow:!0}},this.updateElements(i,0==r))},updateElements:function(t,e){return this.createCommand("UPDATE",t,e)},updateZIndexMax:function(t){var e={};return e[t]={attr:{zIndex:d.getMax()}},this.updateElements(e,!0)},updateZIndexMin:function(t){var e={};return e[t]={attr:{zIndex:d.getMin()}},this.updateElements(e,!0)},createCommand:function(t,e,n){!n&&this._currentMacroCommand||(this._currentMacroCommand=new i,this._currentMoveCommand=null,this.addCommand(this._currentMacroCommand));var r=new f[t](this,e);return this._currentMacroCommand.add(r),r.execute()},moveTo:function(t,e,n,i,r){return this._currentMoveCommand&&this._currentMoveCommand.elements==t?(this._currentMoveCommand.moveTo(e,n),this._currentMoveCommand):(this.is2D?this._currentMoveCommand=new h(this,{elements:t,sPos:e,gPos:n,isCapture:i,userAxis_id:r}):this._currentMoveCommand=new p(this,{elements:t,sPos:e,gPos:n}),this.addCommand(this._currentMoveCommand),this._currentMacroCommand=null,this._currentMoveCommand)},addCommand:function(t){this.set("isChanged",!0),50==this.undo_stack.length&&this.undo_stack.shift(),this.currentCommand=t,this.undo_stack.push(t),this.redo_stack.splice(0),this._fireEvents(y,t)},undo:function(){if(!(this.undo_stack.length<0)){this._currentMacroCommand=null,this._currentMoveCommand=null,this.set("isChanged",!0);var t=this.undo_stack.pop();this.redo_stack.push(t),t.undo(),this._fireEvents(v,t)}},redo:function(){if(!(this.redo_stack.length<0)){this.set("isChanged",!0);var t=this.redo_stack.pop();t.redo(),this.undo_stack.push(t),this._fireEvents(_,t)}},_fireEvents:function(t,e){this.trigger("UNDO_REDO",{code:t,command:e,undo_length:this.undo_stack.length,redo_length:this.redo_stack.length})},_execute_ChangeAttr_Same:function(t,e){for(var n={},i=0,r=t.length;i<r;i++)n[t[i].get("id")]=e;return n}});t.exports=g},function(t,e,n){"use strict";n(16),n(27),n(286),n(115),n(75),n(65),n(66),n(873),n(87),n(132);var i=n(0);n(3),n(22),n(48);var r=i(n(1)),o=i(n(2));function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=["isHFPoint","isLineLabel","isInElementPoint","isOnPlanePoint","isAngleLabel","isLengthLabel","isRightPoint"];var c=function(){function t(e,n,i,o,s){(0,r.default)(this,t),this.elements=e,this.elementsRepos=s,this.paper=o,this.origin_sPos=n,this.origin_gPos=i||this.paper.transSTG(n),this.dest_sPos=n,this.dest_gPos=i||this.paper.transSTG(n),this.originPositions={}}return(0,o.default)(t,[{key:"_findDragableElements",value:function(t){var e=this,n=this._getRelatedModels(t);this.freePoints=n.freePoints,this.hfPoints=n.hfPoints,this.S_ele=n.S_ele,n.freePoints.forEach((function(t){return e.originPositions[t.get("id")]=t.output_Model})),n.hfPoints.forEach((function(t){return e.originPositions[t.get("id")]=t.output_Model})),n.S_ele.forEach((function(t){var n=t.constraint.getPosition();e.originPositions[t.get("id")]={x:n.left,y:n.top}}))}},{key:"_getRelatedModels",value:function(t){for(var e,n=[],i=[],r=[],o=[],s=0;e=t[s];s++)this._findParent(e,n,i,r,o);return{freePoints:n,hfPoints:i,S_ele:r}}},{key:"_findParent",value:function(t,e,n,i,r){if(t.constraint&&function(t){var e,n=s(u);try{for(n.s();!(e=n.n()).done;){if(t[e.value])return!0}}catch(t){n.e(t)}finally{n.f()}}(t.constraint))-1==n.indexOf(t)&&n.push(t),this._findChild(t,e,n,i,r);else if(function(t){return t.constraint.isFreeAssist||t.constraint.getPosition||t.constraint.isCombinationPicture}(t))-1==i.indexOf(t)&&i.push(t);else if(t.constraint&&t.constraint.isFreePoint)-1==e.indexOf(t)&&e.push(t),this._findChild(t,e,n,i,r);else if(t.inputs)for(var o,a=0;o=t.inputs[a];a++)o.output_Model.isHtmlTextOutput||o.output_Model.isVariableRulerOutput||o.output_Model.isMeasureTextOutput||o.output_Model.isCombination||t.constraint.isAxisLine3D||this._findParent(o,e,n,i,r)}},{key:"_findChild",value:function(t,e,n,i,r){var o=this;t.traverseChildren((function(t){r.indexOf(t)>-1||(r.push(t),o._findChild(t,e,n,i,r))})),this._removehfPoint(e,n,i,r)}},{key:"_removehfPoint",value:function(t,e,n,i){if(0!=e.length&&0!=i.length)for(var r,o=0;r=e[o];o++)if(-1!==i.indexOf(r)){e.splice(o);for(var s,a=r.inputs,u=0;s=a[u];u++)this._findParent(s,t,e,n,i);o--;break}}},{key:"moveTo",value:function(t,e){var n=this;this.dest_sPos=t,this.dest_gPos=e||this.paper.transSTG(t),this._moveAxis(t)||(this.hfPoints&&this.hfPoints.forEach((function(t){t.moveTo00(n._getGridPos(t,n.dest_gPos,n.origin_gPos))})),this.S_ele&&this.S_ele.forEach((function(e){e.moveTo00(n._getGridPos(e,t,n.origin_sPos))})),this._moveFreePoints(this.dest_gPos))}},{key:"_moveFreePoints",value:function(t){var e=this;this.freePoints&&this.freePoints.forEach((function(n){return n.fromJSON3({def:{attr:{position:e._getGridPos(n,t,e.origin_gPos)}}})}))}},{key:"redo",value:function(){this.moveTo(this.dest_sPos,this.dest_gPos)}},{key:"undo",value:function(){var t=this;this.freePoints&&this.freePoints.forEach((function(e){return e.fromJSON3({def:{attr:{position:t.originPositions[e.get("id")]}}})})),this.hfPoints&&this.hfPoints.forEach((function(e){return e.moveTo00(t.originPositions[e.get("id")])})),this.S_ele&&this.S_ele.forEach((function(e){return e.moveTo00(t.originPositions[e.get("id")])}))}},{key:"_moveAxis",value:function(t){return!1}},{key:"_getGridPos",value:function(t,e,n){}}]),t}();t.exports=c},function(t,e,n){"use strict";n(106),n(27);var i=n(426),r=n(430),o=n(884),s=n(72).deepCopy,a=n(885),u=n(991),c=["AngleLabel","Arc","Circle","Line","Segment","Straight","Ray","Paths","Polygon","Point"];t.exports=i.extend({is3D:!0,canBeDelete:function(){return this.get("id")>13},_initConstraint:function(t,e){this.constraint=new a[e.type](this,t,e.attr),"Iter"==e.type&&this._setConstraintAttr(e.attr),this.calculateGeo()},_initDisplayModel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=u(e)||this.inputs[0].displayModel.constructor,i=this.environmentConfig.getDefalutDisplayJSONByDef(e);i=s(i,t),this.displayModel=new n,this.displayModel.setAttr(i)},_initLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c.includes(this.output_Model.type)){this.nameModel=new r(new o);var e=this.environmentConfig.getLabelDisplay();t=s({font:e},t),this.nameModel.setAttr(t),this.nameModel.set({nameVal:this.constraint.isAxisLine?1:.5})}},toJSON3:function(){return{id:this.get("id"),type:this.output_Model.type,name:this.get("name"),outVais:this.outVais?this.outVais.name:"",attr:{locked:this.get("locked"),selectable:this.get("selectable"),zIndex:this.get("zIndex")},def:this.constraint.toJSON3(this),dis:this.displayModel.toJSON3(),label:this.nameModel&&this.nameModel.toJSON3(),advanced:this.dynamicDisplay&&this.dynamicDisplay.toJSON3()}}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Utils,p=h.isZero,d=h.angleTo2PI,y=f.Vector3,v=f.Circle3,_=f.Arc3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"_attrChanged",value:function(){this.getFixedAngle=this._attributes.fixedAngle.get()?this._angle:this._arclengthToangle,this.directReverse=this._attributes.directReverse.get()}},{key:"__calculate__",value:function(t,e,n){if(n=this.getFixedAngle(n,t.radius),!p(n,1e-4)&&p(d(n),1e-4)){var i=y.createByPoints(t.centre,t.pointOn(e)).normalize();return new v(t.centre,t.radius,t.normalVector,i,t.isRight)}return new _(t,e,e+n)}},{key:"_arclengthToangle",value:function(t,e){return t/e}},{key:"_angle",value:function(t){return t}}]),n}(l);t.exports=g},function(t,e,n){"use strict";var i=n(0)(n(28));n(130),n(3),n(22),t.exports=function(t,e){var n,r,o,s;if(e)return t._attributes.isSegmentColor&&!t._attributes.isSegmentColor.get()?(n=t.element,r=e,o=n.displayModel.strokeModel.toJSON(),s=n.displayModel.fillModel.toJSON(),r.forEach((function(t){t.userData.dis=(0,i.default)(t.userData.dis,{stroke:o,fill:s})})),r):e}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(493),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,r.default)(this,n),t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new f(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return h(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}}]),n}(l);p.prototype.isTransform=!0,p.prototype.isSymmetric=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(15),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s,a){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({ratio:new h(i.algebraic)},a))}return(0,s.default)(n,[{key:"calculate",value:function(){return this.__calculate__()}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.ratio.calcu();return isFinite(e)?this.inputs[1].output_Model.isLine?t.projectionToLine(this.inputs[1].output_Model,e):this.inputs[1].output_Model.isPlanar?t.projectionToPlane(this.inputs[1].output_Model.plane,e,this.__light__(this.inputs[2])):t.constructor.createUgly():t.constructor.createUgly()}},{key:"__light__",value:function(t){return t?t.output_Model:null}}]),n}(f);p.prototype.isTransform=!0,p.prototype.isProjection=!0,t.exports=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(0)(n(86));n(567);var r=n(146),o=n(568),s=n(875),a=n(72);function u(t){return 1==t.fileType||"3D"===t.environment}t.exports={createByContent:function(t,e,n,r){if("object"!==(0,i.default)(e)&&(e=JSON.parse(e)),!u(e)||s.canSupport3D()){var a=u(e)?new s(t,n):new o(t,n);a.loadFromJSON(e),r&&r(a)}else alert("3D")},create2D:function(t,e,n){n&&n(new o(t,e))},create3D:function(t,e,n){s.canSupport3D()?n&&n(new s(t,e)):alert("3D")},canSupport3D:s.canSupport3D,getModeByContent:function(t){return u(t)?"3D":"2D"},userAgent:r,utils:a}},function(t,e,n){"use strict";!function(t){var e,n,i,r,o,s,a,u='<svg><symbol id="netpad-play" viewBox="0 0 1024 1024"><path d="M183.79996395 53.54034142L183.79996395 967.40359078 901.83537553 510.47196531 183.79996395 53.54034142Z"  ></path></symbol><symbol id="netpad-antiplay" viewBox="0 0 1024 1024"><path d="M840.20003605 970.45965858L840.20003605 56.59640922 122.16462448 513.52803469 840.20003605 970.45965858Z"  ></path></symbol><symbol id="netpad-stop" viewBox="0 0 1024 1024"><path d="M950.857143 109.714286l0 804.571429q0 14.857143-10.857143 25.714286t-25.714286 10.857143l-804.571429 0q-14.857143 0-25.714286-10.857143t-10.857143-25.714286l0-804.571429q0-14.857143 10.857143-25.714286t25.714286-10.857143l804.571429 0q14.857143 0 25.714286 10.857143t10.857143 25.714286z"  ></path></symbol><symbol id="netpad-antiplay2" viewBox="0 0 1024 1024"><path d="M512 1008.125c274.01603906 0 496.125-222.10896094 496.125-496.125s-222.10896094-496.125-496.125-496.125-496.125 222.10896094-496.125 496.125 222.10896094 496.125 496.125 496.125zM512 108.89843751c222.63609376 0 403.1015625 180.46546875 403.10156249 403.10156249s-180.46546875 403.1015625-403.10156249 403.10156249-403.1015625-180.46546875-403.10156249-403.10156249 180.46546875-403.1015625 403.10156249-403.10156249zM636.03125 729.0546875l-372.09374999-217.0546875 372.09374999-217.0546875z"  ></path></symbol><symbol id="netpad-play2" viewBox="0 0 1024 1024"><path d="M512 15.875c-274.01603906 0-496.125 222.10896094-496.125 496.125s222.10896094 496.125 496.125 496.125 496.125-222.10896094 496.125-496.125-222.10896094-496.125-496.125-496.125zM512 915.1015625c-222.63609375 0-403.1015625-180.46546875-403.1015625-403.1015625s180.46546875-403.1015625 403.1015625-403.1015625 403.1015625 180.46546875 403.1015625 403.1015625-180.46546875 403.1015625-403.1015625 403.1015625zM387.96875 294.9453125l372.09375 217.0546875-372.09375 217.0546875z"  ></path></symbol><symbol id="netpad-pause" viewBox="0 0 1024 1024"><path d="M178.74520755 845.25479245V178.74520755a111.08493082 111.08493082 0 0 1 111.08493083-111.0849308h37.02831055a111.08493082 111.08493082 0 0 1 111.0849308 111.0849308v666.5095849a111.08493082 111.08493082 0 0 1-111.0849308 111.08493081H289.83013838a111.08493082 111.08493082 0 0 1-111.08493083-111.08493081z m518.39634352 111.0849308h37.02831055a111.08493082 111.08493082 0 0 0 111.08493083-111.0849308V178.74520755a111.08493082 111.08493082 0 0 0-111.08493083-111.0849308h-37.02831055a111.08493082 111.08493082 0 0 0-111.0849308 111.0849308v666.5095849a111.08493082 111.08493082 0 0 0 111.0849308 111.08493081z"  ></path></symbol></svg>';if((e=document.getElementsByTagName("script"))[e.length-1].getAttribute("data-injectcss")&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}function c(){s||(s=!0,r())}n=function(){var t,e,n,i,r,o=document.createElement("div");o.innerHTML=u,u=null,(t=o.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",e=t,(n=document.body).firstChild?(i=e,(r=n.firstChild).parentNode.insertBefore(i,r)):n.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),n()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(r=n,o=t.document,s=!1,(a=function(){try{o.documentElement.doScroll("left")}catch(t){return void setTimeout(a,50)}c()})(),o.onreadystatechange=function(){"complete"==o.readyState&&(o.onreadystatechange=null,c())})}(window)},function(t,e,n){"use strict";n(4);var i=n(0);n(130),n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(388),p=n(601),d=n(603),y=n(394),v=n(395),_=n(396),g=n(397),m=n(604),x=n(398),P=n(399),w=n(400),M=n(401),b=n(402),R=n(403),S=n(404),k=n(692),E=n(222),A=n(201),C=n(855),T=n(146),L=n(489),B=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(this,n),i=e.call(this,t),(0,l.default)((0,s.default)(i),"mode","2D"),i.is2D=!0,i.environmentConfig=new p,o&&o.environmentConfig&&i.environmentConfig.setEnvironmentConfig(o.environmentConfig),i.paper=new d({environmentConfig:i.environmentConfig}),i.elementsFactory=new k(i.elementsRepos,y,_,v,g,P,x,m,i.algbraicSys,i.dataRepository,i.paper,i.nameConstructor,i.environmentConfig,(0,s.default)(i)),i.undoRedo=new L((0,s.default)(i)),i.copyPasteService=new w((0,s.default)(i),o&&o.allowCopyCrossPages),i.cov=new S((0,s.default)(i)),i.paperView=i.cov.paperView,i.paperView.render(),i.bindEvents=i.paperView.bindEvents,i.$el.append(i.cov.$el).focus(),T.isPhone&&i.$el.append(new R(i.selectManager,i.paperView.bindEvents).$el),new M((0,s.default)(i)),i.keyboardEvents=new b((0,s.default)(i),o&&o.forbidKeys,!0),i.elementsFactory.globalAxis(),i.cov.reset(),i.bindEvents.bindSelect(),i._addEvents(),i.bindEvents.addEventListener(i.bindEvents.Events.CURRENT_AXIS,function(t){this.dispatchEvent(this.Events.CURRENT_AXIS,t)}.bind((0,s.default)(i))),i.bindEvents.addEventListener(i.bindEvents.Events.CAPTURE_GRID,function(t){this.dispatchEvent(this.Events.CAPTURE_GRID,t)}.bind((0,s.default)(i))),i.bindEvents.addEventListener(i.bindEvents.Events.HOVER_ELEMENT,function(t){this.dispatchEvent(this.Events.HOVER_ELEMENT,t)}.bind((0,s.default)(i))),i}return(0,o.default)(n,[{key:"getIntersectionSets",value:function(t,e){return y.getIntersectionSets(t,e)}},{key:"getTangentSets",value:function(t,e){return x.getTangentSets(t,e)}},{key:"canCustomTransformRule",value:function(t,e){return E.isLegal(t,e)}},{key:"canCustomTransformRule_ToPoints",value:function(t,e){return A.isLegal(t,e)}},{key:"toJSON3",value:function(){return{version:"3.1",environment:"2D",defaultTheme:this.environmentConfig.getEnvironmentConfig(),thumbnail:this.paper.get("thumbnail"),parameters:this.dataRepository.toJSON(),customFun:this.algbraicSys.toJSONArrayCustomFun(),paper:this.paper.toJSON3(),elements:this.elementsRepos.toJSON3(),captureGrid:this.paperView.bindEvents.captureGrid,currentAixsId:this.paperView.bindEvents.getCurrentUserAxisID()}}},{key:"_formJSON3",value:function(t){var e=this;this.environmentConfig.setEnvironmentConfig(t.defaultTheme?t.defaultTheme:{}),t.parameters.forEach((function(t){e.algbraicSys.set(t.paramName,t.value)})),t.customFun&&this.algbraicSys.fromJSONArrayCustomFun(t.customFun),this.paper.formJSON3(t.paper),t.thumbnail&&this.paper.set({thumbnail:t.thumbnail}),this.elementsFactory.restoreByJSON3(t.elements),this.paperView.setCurrentUserAxis(t.currentAixsId),this.paperView.bindEvents.toggleCapture(t.captureGrid)}}]),n}(h);B.prototype.createElements=C,t.exports=B},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(27);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(570),p=np.EventDispatcher,d=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],y=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i;return(0,r.default)(this,n),i=e.call(this),(0,l.default)((0,s.default)(i),"Events",{ADD:0,RESET:1}),i.dataMap={},i.autoVairsMap={},i._charIndex=0,i._subIndex=0,i.algebraic=t,i}return(0,o.default)(n,[{key:"getDataList",value:function(){var t=[];for(var e in this.dataMap)t.push(this.dataMap[e]);return t}},{key:"getDataByName",value:function(t,e){return this.dataMap[t]||this.addByName(t),e&&this.dataMap[t].addParent(e),this.dataMap[t]}},{key:"includes",value:function(t){return!!this.dataMap[t]}},{key:"getUDataName",value:function(){return this._getADataName("u")}},{key:"getMDataName",value:function(){return this._getADataName("m")}},{key:"getAutoDataName",value:function(){for(;;){this._charIndex==d.length&&(this._charIndex=0,this._subIndex++);var t=d[this._charIndex];if(this._charIndex++,0!=this._subIndex&&(t+=this._subIndex),!this.autoVairsMap[t])return this.autoVairsMap[t]=t,t}}},{key:"_getADataName",value:function(t){var e,n=0;do{e=t+n,n++}while(this.autoVairsMap[e]||this.dataMap[e]);return this.autoVairsMap[e]=e,e}},{key:"addByName",value:function(t,e){return this.dataMap[t]?this.dataMap[t]:t&&this.algebraic.isVari(t)?(this.algebraic.addVariable(t),this.dataMap[t]=new h(t,this.algebraic,this.algebraic.get(t)),void 0!==e&&this.dataMap[t].setValue(e),this.dispatchEvent(this.Events.ADD,{data:this.dataMap[t]}),this.dataMap[t]):void 0}},{key:"isCanDriveStr",value:function(t,e){var n=this.algebraic.createAlgeObjByStr(e);if(n){for(var i=this._getCanDriveData(t),r=n.getVaris(),o=0;o<i.length;o++)if(r[i[o].name])return!0;return!1}}},{key:"_getCanDriveData",value:function(t){var e=this.getDataByName(t),n=[],i=[e];return e.traverseChildren((function t(e){if(!(n.indexOf(e)>-1)&&(n.push(e),e.outputsData))for(var r=0;r<e.outputsData.length;r++)i.indexOf(e.outputsData[r])>-1||(i.push(e.outputsData[r]),e.outputsData[r].traverseChildren(t))})),i}},{key:"reset",value:function(){this.dataMap={},this.autoVairsMap={},this._charIndex=0,this._subIndex=0,this.dispatchEvent(this.Events.RESET)}},{key:"toJSON",value:function(){var t=[];for(var e in this.dataMap)this.dataMap.hasOwnProperty(e)&&0!==this.dataMap[e].childLength&&t.push(this.dataMap[e].toJSONObj());return t}}]),n}(p);t.exports=y},function(t,e,n){"use strict";n(27),n(106),n(131),n(48),n(82),n(16),n(3),n(188);var i=Backbone.Model.extend({initialize:function(t,e,n){this.initialize_base(t,e,n)},initialize_base:function(t,e,n){this.name=t,this.algebraic=e,this.parents=[],this.children=[],this.setValue(n)},toJSONObj:function(){return{paramName:this.name,value:this.getValue()}},addParent:function(t){var e=this;-1===this.parents.indexOf(t)&&(this.parents.push(t),this.__trigger__().then((function(){e.trigger("parent",{parent:t})})))},_addChild:function(t){this.children.includes(t)||this.children.push(t)},_removeChild:function(t){this.children.splice(this.children.indexOf(t),1)},setValue:function(t,e){var n;if(t=parseFloat(!0===(n=t)?1:!1===n?0:n),this.algebraic.set(this.name,t),this.set({value:t},e),!e||!e.silent)for(var i,r=0;i=this.children[r];r++)i.setOutputNeedUpdate()},addValue:function(t,e){var n=this.get("value")+t;this.setValue(n,e)},getValue:function(){return this.get("value")},traverseChildren:function(t){if(t instanceof Function)for(var e,n=0;e=this.children[n];n++)e.get("isDeleted")||(t(e),e.traverseChildren(t))},getChildren:function(t){return t=t||[],this.traverseChildren((function(e){-1==t.indexOf(e)&&t.push(e)})),t.sort((function(t,e){return t.get("id")-e.get("id")})),t},getChildren00:function(t){t=t||[];var e=[this];return this.traverseChildren((function n(i){if(!(t.indexOf(i)>-1)&&(t.push(i),i.outputsData&&0!==i.outputsData.length))for(var r=0;r<i.outputsData.length;r++)e.indexOf(i.outputsData[r])>-1||(e.push(i.outputsData[r]),i.outputsData[r].traverseChildren(n))})),t.sort((function(t,e){return t.get("id")-e.get("id")})),t},getParents:function(){return this.parents.slice(0)},isMyDescendantElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;return this.traverseChildren((function(i){i!=t?i.isMyDescendant(i,e)&&(n=!0):n=!0})),n},__trigger__:function(){return new Promise((function(t){t()}))}});t.exports=i},function(t,e,n){var i=n(9),r=n(215),o=i.TypeError;t.exports=function(t){if(r(t))throw o("The method doesn't accept regular expressions");return t}},function(t,e,n){var i=n(25)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){"use strict";n(70),n(3),n(48),n(27),n(22),n(106),n(8);var i=Backbone.Collection;t.exports=i.extend({initialize:function(){this.length=0,this.uscLength=0,this.models=[],this.exsitModels=[],this.models_map={}},add:function(t){this.models.push(t),this.models_map[t.uuid]=t,this.exsitModels.push(t),this.length=this.exsitModels.length,"UCSAxis"===t.type&&this.uscLength++,this.trigger("add",t)},getAllPoints:function(){return this.exsitModels.filter((function(t){return t.output_Model.isPoint}))},get:function(t){return this.exsitModels[t]},getByUUID:function(t){return this.models_map[t]},reset:function(){this.length=0,this.uscLength=0,this.models=[],this.exsitModels=[],this.trigger("reset")},traverseElement:function(t){for(var e,n=0;e=this.exsitModels[n];n++)t(e,n)},upOrder:function(t){if(t.canUp&&t.canUp()){var e=this.models.indexOf(t);this.models.splice(e,1),this.models.splice(e-1,0,t),this.updateUsefulModels()}},filterUnExistFreeVaribles:function(t){var e=["pi","PI","e","E"],n=[];this.traverseElement((function(t){if(t.output_Model.isMeasureTextOutput)return e.push(t.outputsData[0].name);t.output_Model.isVariableRulerOutput&&n.push(t.outputsData[0].name)}));var i=[];return t.forEach((function(t){e.includes(t)||n.includes(t)||i.push(t)})),i},deleted:function(t){var e=[];return t.forEach((function(t){return t.updateDeleted(e)})),this.updateUsefulModels(),e},cancelDeleted:function(t){return t.forEach((function(t){return t.set({isDeleted:!1})})),this.updateUsefulModels(),t.map((function(t){return t.get("id")}))},deleteByUUID:function(t){var e=this,n=t.map((function(t){return e.models_map[t]}));return this.deleted(n)},cancelDeletedByUUID:function(t){var e=this,n=t.map((function(t){return e.models_map[t]}));return this.cancelDeleted(n)},updateUsefulModels:function(){for(var t,e=[],n=0,i=0;t=this.models[i];i++)t.get("isDeleted")||(e.push(t),t.get("id")!=n&&t.set({id:n}),n++);this.length=e.length,this.exsitModels=e,this.trigger("update")},toJSON3:function(){return this.exsitModels.map((function(t){return t.toJSON3()}))}})},function(t,e,n){"use strict";var i=n(0);n(106),n(131),n(48),n(75),n(185),n(20),n(159),n(121);var r=i(n(1)),o=i(n(2)),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],u=function(){function t(e){var n=this;(0,r.default)(this,t),this.elementsRepos=e,this._nextUpperNameStr="A",this._nextLowerNameStr="a",this._usedName={},this.elementsRepos.on("add",(function(t){n.registName(t.get("name"),t.uuid),t.on("change:name",(function(t){return n.registName(t.get("name"),t.uuid)})),t.on("change:isDeleted",(function(t,e){if(!e)return n.registName(t.get("name"),t.uuid);n.unRegistName(t.get("name"),t.uuid)}))}))}return(0,o.default)(t,[{key:"reset",value:function(){this._nextUpperNameStr="A",this._nextLowerNameStr="a",this._usedName={}}},{key:"autoUpperName",value:function(){return this._nextUpperNameStr}},{key:"autoLowerName",value:function(){return this._nextLowerNameStr}},{key:"getNameByElement",value:function(t){return t.output_Model.isPoint?this.autoUpperName():this.autoLowerName()}},{key:"registName",value:function(t,e){if(t){if(this._isUpperChar(t)||this._isUpperCharWithSubNo(t)||this._isUpperCharWithUpperP(t)){for(var n in this._usedName)this._usedName[n].includes(e)&&this._usedName[n].splice(this._usedName[n].indexOf(e),1);for(this._usedName[t]||(this._usedName[t]=[]),this._usedName[t].includes(e)||this._usedName[t].push(e),this._nextUpperNameStr=t;this._nextUpperNameStr=this._nextUpperName(this._nextUpperNameStr),this._usedName[this._nextUpperNameStr]&&this._usedName[this._nextUpperNameStr].length>0;);}if(this._isLowerChar(t)||this._isLowerCharWithSubNo(t)||this._isLowerCharWithUpperP(t)){for(var i in this._usedName)this._usedName[i].includes(e)&&this._usedName[i].splice(this._usedName[i].indexOf(e),1);for(this._usedName[t]||(this._usedName[t]=[]),this._usedName[t].includes(e)||this._usedName[t].push(e),this._nextLowerNameStr=t;this._nextLowerNameStr=this._nextLowerName(this._nextLowerNameStr),this._usedName[this._nextLowerNameStr]&&this._usedName[this._nextLowerNameStr].length>0;);}}}},{key:"unRegistName",value:function(t,e){if(t)return this._isUpperChar(t)||this._isUpperCharWithSubNo(t)||this._isUpperCharWithUpperP(t)?(this._usedName[t]&&this._usedName[t].includes(e)&&this._usedName[t].splice(this._usedName[t].indexOf(e),1),this._nextUpperNameStr=t):this._isLowerChar(t)||this._isLowerCharWithSubNo(t)||this._isLowerCharWithUpperP(t)?(this._usedName[t]&&this._usedName[t].includes(e)&&this._usedName[t].splice(this._usedName[t].indexOf(e),1),this._nextLowerNameStr=t):void 0}},{key:"_removeFromUsedNameByUUID",value:function(t){for(var e in this._usedName)this._usedName[e].includes(t)&&this._usedName[e].splice(this._usedName[e].indexOf(t),1)}},{key:"_isLowerChar",value:function(t){return 1==t.length&&a.includes(t)}},{key:"_isUpperChar",value:function(t){return 1==t.length&&s.includes(t)}},{key:"_isUpperCharWithSubNo",value:function(t){return/^[A-Z]_[0-9]$/.test(t)?{char:t[0],number:parseInt(t[t.length-1])}:!!/^[A-Z]_\{[0-9]+\}$/.test(t)&&{char:t[0],number:t.match(/\{(\d+)\}/)[1]}}},{key:"_isLowerCharWithSubNo",value:function(t){return/^[a-z]_[0-9]$/.test(t)?{char:t[0],number:parseInt(t[t.length-1])}:!!/^[a-z]_\{[0-9]+\}$/.test(t)&&{char:t[0],number:t.match(/\{(\d+)\}/)[1]}}},{key:"_isUpperCharWithUpperP",value:function(t){return!!/^[A-Z]{1}('+)$/.test(t)&&{char:t[0],upperP:t.substring(1,t.length)}}},{key:"_isLowerCharWithUpperP",value:function(t){return!!/^[a-z]{1}('+)$/.test(t)&&{char:t[0],upperP:t.substring(1,t.length)}}},{key:"_nextUpperName",value:function(t){if(this._isUpperChar(t)){var e=s.indexOf(t);return e==s.length-1?"A_{1}":s[e+1]}var n=this._isUpperCharWithSubNo(t);if(n){var i=s.indexOf(n.char);return i==s.length-1?"A_{".concat(++n.number,"}"):"".concat(s[i+1],"_{").concat(n.number,"}")}var r=this._isUpperCharWithUpperP(t);if(r){var o=s.indexOf(r.char);return o==s.length-1?"A".concat(r.upperP,"'"):"".concat(s[o+1]).concat(r.upperP)}return t+"'"}},{key:"_nextLowerName",value:function(t){if(this._isLowerChar(t)){var e=a.indexOf(t);return e==a.length-1?"a_{1}":a[e+1]}var n=this._isLowerCharWithSubNo(t);if(n){var i=a.indexOf(n.char);return i==a.length-1?"a_{".concat(++n.number,"}"):"".concat(a[i+1],"_{").concat(n.number,"}")}var r=this._isLowerCharWithUpperP(t);if(r){var o=a.indexOf(r.char);return o==a.length-1?"a".concat(r.upperP,"'"):"".concat(a[o+1]).concat(r.upperP)}return t+"'"}},{key:"getNamesByStrAndCount",value:function(t,e){var n,i,r=e,o=[];if(1==t.length?(n=t,i=""):(n=t.charAt(t.length-1),i=t.substring(0,t.length-1)),"'"==n){var s=/'+$/.exec(t),a=s[0],u=t.charAt(s.index-1),c=t.substring(0,s.index-1),l=this.getUpperLetterIndex(u);return-1!=l?(o.push(this.getArrByPiao(i,r)),o.push(this.getArrByBLetter(r,l,c,a)),o):-1!=(l=this.getLowerLetterIndex(u))?(o.push(this.getArrByPiao(i,r)),o.push(this.getArrBySLetter(r,l,c,a)),o):(o.push(this.getArrByPiao(i,r)),o)}if("}"==n){var f=t.lastIndexOf("_{");if(-1!=f){var h=t.substring(f+2,t.length-1).trim();if(h&&!isNaN(parseFloat(h))){o.push(this.getArrByNum(r,h,t.substring(0,f+2),"}"));var p=t.charAt(f-1);if(p){var d=this.getUpperLetterIndex(p);return-1!=d?(o.push(this.getArrByBLetter(r,d,t.substring(0,f-1),"_{"+h+"}")),o):-1!=(d=this.getLowerLetterIndex(p))?(o.push(this.getArrBySLetter(r,d,t.substring(0,f-1),"_{"+h+"}")),o):(o.push(this.getArrByPiao(t,r)),o)}return o.push(this.getArrByPiao(t,r)),o}o.push(this.getArrByPiao(t,r))}else o.push(this.getArrByPiao(i,r))}else{var y=/\d+$/.exec(t);if(y){var v,_=y.index;"_"==t.charAt(_-1)&&_-1==t.indexOf("_")?(o.push(this.getArrByNum(r,parseInt(y[0]),t.substring(0,_)+"{","}")),i=t.substring(0,_-2),n=t.charAt(_-2),v="_{"+y[0]+"}"):(i=t.substring(0,_-1),n=t.charAt(_-1),v=t.substring(y.index,t.length),o.push(this.getArrByNum(r,parseInt(y[0]),t.substring(0,_),""))),-1!=(g=this.getUpperLetterIndex(n))?o.push(this.getArrByBLetter(r,g,i,v)):-1!=(g=this.getLowerLetterIndex(n))&&o.push(this.getArrBySLetter(r,g,i,v))}else{var g;-1!=(g=this.getUpperLetterIndex(n))?(o.push(this.getArrByBLetter(r,g,i)),o.push(this.getArrByPiao(t,r)),o.push(this.getArrByNum(r,1,t+"_{","}"))):-1!=(g=this.getLowerLetterIndex(n))?(o.push(this.getArrBySLetter(r,g,i,"")),o.push(this.getArrByPiao(t,r)),o.push(this.getArrByNum(r,1,t+"_{","}"))):o.push(this.getArrByPiao(t,r))}}return o}},{key:"getUpperLetterIndex",value:function(t){return s.indexOf(t)}},{key:"getUpperIndexLetter",value:function(t){return s[t]?s[t]:s[s.length-1]+(t-s.length+1)}},{key:"getLowerLetterIndex",value:function(t){return a.indexOf(t)}},{key:"getLowerIndexLetter",value:function(t){return a[t]?a[t]:a[a.length-1]+(t-a.length+1)}},{key:"getArrByPiao",value:function(t,e){for(var n=[],i=0;i<e;i++)n.push(t+new Array(i+2).join("'"));return n}},{key:"getArrByBLetter",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=[],o=0;o<t;o++)r.push(n+this.getUpperIndexLetter(o+e)+i);return r}},{key:"getArrBySLetter",value:function(t,e,n,i){i=i||"";for(var r=[],o=0;o<t;o++)r.push(n+this.getLowerIndexLetter(o+e)+i);return r}},{key:"getArrByNum",value:function(t,e,n,i){i=i||"",e=parseInt(e);for(var r=[],o=0;o<t;o++)r.push(n+(e+o)+i);return r}}]),t}();t.exports=u},function(t,e,n){"use strict";var i=n(0);n(3),n(22),n(70);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=function(){function t(e){(0,r.default)(this,t),(0,s.default)(this,"filter_fun",void 0),(0,s.default)(this,"filters_child",void 0),(0,s.default)(this,"filters_callback",void 0),this.elementsRepos=e}return(0,o.default)(t,[{key:"addFilters",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.filter_fun=e.filter_fun,this.filters_callback=e.callback;var n=e.filters_child;if(n){var i=[];n.forEach((function(e){var n=t.elementsRepos.get(e);i.indexOf(n)>-1||(i.push(n),n.getChildren00(i))})),this.filters_child=i.filter((function(t){return!e.iterId||t.get("id")<=e.iterId}))}else this.filters_child=null}},{key:"filterElements",value:function(t){return this.filter_fun?this.filters_child?this.filter_fun(t)&&-1!=this.filters_child.indexOf(t):this.filter_fun(t):t}},{key:"filterElementArr",value:function(t){for(var e,n=0;e=t[n];n++)if(this.filterElements(e))return e}}]),t}();t.exports=a},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22),n(106),n(131),n(16),n(48),n(8),n(20);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i;return(0,r.default)(this,n),i=e.call(this),(0,l.default)((0,s.default)(i),"Events",{ADD_ELEMENT_SELECT:0,REMOVE_ELEMENT_SELECT:1}),i.elementsRepos=t,i.selected=[],i}return(0,o.default)(n,[{key:"selectByIds",value:function(t){var e=this;t&&0!=t.length&&(t.forEach((function(t){var n=e.elementsRepos.get(t);e.selected.includes(n)||e._setSelected(n,!0)&&e.selected.push(n)})),this.dispatchEvent(this.Events.ADD_ELEMENT_SELECT,{selected:t.slice(0)}))}},{key:"removeByIds",value:function(t){var e=this;t&&0!=t.length&&(t.forEach((function(t){var n=e.elementsRepos.get(t),i=e.selected.indexOf(n);i<0||(e.selected.splice(i,1),e._setSelected(n,!1))})),this.dispatchEvent(this.Events.REMOVE_ELEMENT_SELECT,{selected:t.slice(0)}))}},{key:"reset",value:function(){this.selected.splice(0,this.selected.length)}},{key:"getSelected",value:function(){return this.selected.map((function(t){return t.get("id")}))}},{key:"getSelectedModels",value:function(){return this.selected.slice(0)}},{key:"clearSelected",value:function(){this.selected.length<0||this.removeByIds(this.getSelected())}},{key:"isSelected",value:function(t){return this.selected.includes(this.elementsRepos.get(t))}},{key:"_setSelected",value:function(t,e){return!!(t&&t.elementView&&t.elementView.updateSelected)&&(t.elementView.updateSelected(e),!0)}},{key:"canSelectParents",value:function(){return this._canSelectRelated("getParents")}},{key:"canSelectChildren",value:function(){return this._canSelectRelated("getSons")}},{key:"_canSelectRelated",value:function(t){var e=this.getSelectedModels();if(0==e.length)return null;for(var n=[],i=0;i<e.length;i++)n=n.concat(e[i][t]().map((function(t){return t.get("id")})));return 0==n.length?null:n}},{key:"selectParents",value:function(){this._selectRelated("canSelectParents")}},{key:"selectChildren",value:function(){this._selectRelated("canSelectChildren")}},{key:"_selectRelated",value:function(t){var e=this[t]();e&&(this.clearSelected(),this.selectByIds(e))}}]),n}(np.EventDispatcher);t.exports=h},function(t,e,n){"use strict";var i=n(0);n(70),n(3),n(8),n(22);var r=i(n(1)),o=i(n(2)),s=n(146).isIOS,a=n(578),u=n(277);t.exports=function(){function t(){(0,r.default)(this,t),this.audiosMAP={}}return(0,o.default)(t,[{key:"convertToV3",value:function(t){return"3.1"==t.version?t:a(t)}},{key:"preprocessAudio",value:function(t,e){var n=this;if(!s)return e(t);this.audiosMAP={};var i=t.elements.filter((function(t){return"Audio"===t.type}));if(!i.length)return e(t);var r=i.map((function(t){return n.getAudioDOM(t.id,t.dis.audioSrc)}));this._audioTipDOM(r,t,e)}},{key:"_audioTipDOM",value:function(t,e,n){var i=document.createElement("div");i.className=u["ios-audio"],i.innerHTML="",document.body.appendChild(i),i.addEventListener("mousedown",(function(){i.innerHTML="",t.forEach((function(t){t.play(),t.pause()})),setTimeout((function(){document.body.removeChild(i),n(e)}),400)}))}},{key:"getAudioDOM",value:function(t,e){if(this.audiosMAP[t])return this.audiosMAP[t];var n=document.createElement("audio");return n.src=e,n.setAttribute("hidden",""),this.audiosMAP[t]=n,n}}]),t}()},function(t,e,n){"use strict";var i=n(579),r=n(389);t.exports=function(t){return"3.1"==t.version?t:"3.0"==t.version?r(t):i(t)}},function(t,e,n){"use strict";var i=n(389),r=n(580),o=n(591);t.exports=function(t){if("3.0"==t.version)return t;console.log("start converting! v2 data: "),console.log(t);var e=1==(t=JSON.parse(JSON.stringify(t))).fileType?o(t):r(t),n=e.elements;if(t.d)for(var s in t.d){if(!n[s])return;t.d[s].color&&(t.d[s].stroke=t.d[s].color,delete t.d[s].color),n[s].advanced=t.d[s]}if(t.assistBindPoint)for(var a in t.assistBindPoint){if(!n[a])return;n[a].def.attr||(n[a].def.attr={}),n[a].def.attr.bind=t.assistBindPoint[a].bind}if(t.bindActions)for(var a in t.bindActions){if(!n[a])return;n[a].def.attr||(n[a].def.attr={}),n[a].def.attr.bindAction=t.bindActions[a]}return t.defaultsDisplay&&t.defaultsDisplay.font&&(e.defaultTheme={Action:{font:t.defaultsDisplay.font.button},Animation:{font:t.defaultsDisplay.font.button},Calculation:{font:t.defaultsDisplay.font.measure||{}},Variable:{font:t.defaultsDisplay.font.variable},Label:t.defaultsDisplay.font.label}),console.log("converted! v3 data: "),console.log(e),i(e)}},function(t,e,n){"use strict";var i=n(0);n(3),n(22);var r=(0,i(n(28)).default)({},n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(390),n(391)),o=n(392);t.exports=function(t){var e=function(t,e){if(e)return{height:e.height,width:e.width,backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity,globalGroup:{originPos:e.originPos,scaleRatio:e.scaleRatio,scale:e.scale}};var n={globalGroup:{scale:{x:1,y:1}}},i=t.display,r=i.private,o=i.translate,s=i.scale;return r&&r.scale&&(n.globalGroup.scale=r.scale,delete r.scale),o&&s&&(n.globalGroup.originPos={x:o.x,y:o.y},n.globalGroup.scaleRatio=50/(s.x*n.globalGroup.scale.x),delete i.translate,delete i.scale),r?(r.fillColor&&(n.backgroundColor=r.fillColor,n.backgroundOpacity=r.fillOpacity,delete r.fillColor,delete r.fillOpacity),r.stroke_color&&(i.penProp={color:r.stroke_color,opacity:r.stroke_opacity,style:r.stroke_style,width:r.stroke_width},delete r.stroke_color,delete r.stroke_opacity,delete r.stroke_style,delete r.stroke_width),n):n}(t.r[0],t.paper2D),n=[];return t.r.forEach((function(t,e){o(t,e,r,n)})),{version:"3.0",environment:"2D",defaultTheme:t.environment,thumbnail:e.thumbnail,mark:t.mark,parameters:t.p,customFun:t.cf,paper:e,elements:n,captureGrid:t.captureGrid,currentAixsId:t.currentAxisID}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={AxisRelation:function(){return{type:"GlobalAxis",def:{type:"GlobalAxis"}}},createAxisHyb:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"UCSAxis",name:e[2],attr:{selectable:!1},def:{type:"UCSAxis",parents:[n,r]}}},LineLabel:function(t){return{type:"LineLabel",def:{type:"LineLabel",parents:[(0,i.default)(t,1)[0]]}}},LabelAngle:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"AngleLabel",name:e[3],def:{type:"AngleLabel",parents:[n,r,o]}}},LengthLabel:function(t){var e=(0,i.default)(t,3);return{type:"LengthLabel",def:{type:"LengthLabel",parents:[e[0],e[1],e[2]]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Point:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"FreePoint",attr:{position:{x:n,y:r}}}}},CoorPoint:function(t){var e=(0,i.default)(t,7),n=e[0],r=e[1],o=e[2],s=e[3];e[4];return{type:"Point",name:e[5],def:{type:"RightPoint",parents:[e[6]],attr:{x:n,y:r,dragX:o,dragY:s}}}},pCoorPoint:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1];e[2];return{type:"Point",name:e[3],def:{type:"PolarPoint",parents:[e[4]],attr:{r:n,p:r}}}},Midpoint:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"PointsMidPoint",parents:[n,r]}}},MidpointOfSegment:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"LineMidPoint",parents:[n]}}},CenPoint:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OriginPoint",parents:[n]}}},ConicCentre:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"CentrePoint",parents:[n]}}},Foot:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"FootPoint",parents:[n,r]}}},Point_VEqual:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Point",name:e[3],def:{type:"VEqualPoint",parents:[n,r],attr:{direct:o}}}},ConicFocus:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"FocusPoint",parents:[n],attr:{index:r}}}},ConicRightFocus:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicFocus([n,0,r])},ConicLeftFocus:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicFocus([n,1,r])},ConicVertex:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"VertexPoint",parents:[n],attr:{index:r}}}},ConicRightVertex:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicVertex([n,0,r])},ConicLeftVertex:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicVertex([n,1,r])},ConicLowerVertex:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicVertex([n,2,r])},ConicUpperVertex:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return this.ConicVertex([n,3,r])},createAxisPoint:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1],o="XAxisSPoint";return"xR"===r&&(o="XAxisEPoint"),"yB"===r&&(o="YAxisSPoint"),"yT"===r&&(o="YAxisEPoint"),{type:"Point",name:e[2],def:{type:o,parents:[n]}}},createAxisControlPoint:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"xR"===r?"XAxisControlPoint":"YAxisControlPoint",parents:[n]}}},Parallelogram2:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Point",name:e[3],def:{type:"ParaEqualPoint",parents:[n,r],attr:{direct:o}}}},EqualSegmentPoint2:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"OnEqualSegmentPoint",parents:[n,r]}}},Intersection_P:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2],s=e[3];return{type:"Point",name:e[4],def:{type:"ParallelIntersection",parents:[n,r,o],attr:{index:s}}}},Intersection_V:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2],s=e[3];return{type:"Point",name:e[4],def:{type:"VerticalIntersection",parents:[n,r,o],attr:{index:s}}}},Intersection_2Points:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2],s=e[3];return{type:"Point",name:e[4],def:{type:"ThroughPointIntersection",parents:[n,r,o],attr:{index:s}}}},PointOnPLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"OnPLinePoint",parents:[n,r]}}},PointOnVLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"OnVLinePoint",parents:[n,r]}}},PointOn:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OnElementPoint",parents:[n]}}},PointOnCurve:function(t){return this.PointOn(t)},PointOnConic:function(t){return this.PointOn(t)},PointOnLine:function(t){return this.PointOn(t)},PointOnLocus:function(t){return this.PointOn(t)},PointOnPolygon:function(t){return this.PointOn(t)},PointOnPath:function(t){return this.PointOn(t)},PointIn:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"InElementPoint",parents:[n]}}},PointOnCompositePaths:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OnCompositePathsPoint",parents:n}}},TangentPoint:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Point",name:e[3],def:{type:"TangentPoint",parents:[n,r],attr:{index:o}}}},Constraint:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OnIterPoint",parents:[n]}}},Intersection:function(t){var e=t.pop(),n=t.length>2?t.pop():0;return{type:"Point",name:e,def:{type:"IntersectionPoint",parents:[t[0],t[1]],attr:{index:n}}}},P_Constraint:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"ConstraintPoint",parents:[n]}}},Point_Closest:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"ClosestPoint",parents:[n,r]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={GlobalAxisLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"GlobalAxisLine",name:e[2],def:{type:"Xaxis"===r?"XGlobalAxisLine":"YGlobalAxisLine",parents:[n]}}},Xaxis:function(t){var e=(0,i.default)(t,2),n=(e[0],e[1]);return this.GlobalAxisLine([0,"Xaxis",n])},Yaxis:function(t){var e=(0,i.default)(t,2),n=(e[0],e[1]);return this.GlobalAxisLine([0,"Yaxis",n])},createAxisLine:function(t,e){var n=(0,i.default)(t,2),r=n[0];return{type:"UCSAxisLine",name:n[1],def:{type:"UCSAxisLine"==e[e.length-1].type?"UCSYAxisLine":"UCSXAxisLine",parents:[r.sp,r.ep,r.cp,r.controlP]}}},Directrix:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"Directrix",parents:[n],attr:{index:r}}}},Asymptote:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"Asymptote",parents:[n],attr:{index:r}}}},AngleBisector:function(t){return{type:"Line",name:t.pop(),def:{type:"Bisector",parents:t}}},ParallelLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"ParaLine",parents:[n,r]}}},VerticalLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"VertiLine",parents:[n,r]}}},Tangent:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Line",name:e[3],def:{type:"TangentLine",parents:[n,r],attr:{index:o}}}},Segment:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"Segment",parents:[n,r]}}},Radial:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"Ray",parents:[n,r]}}},Line:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"Straight",parents:[n,r]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Circle:function(t,e){return 2===t.length?{type:"Circle",name:t[1],def:{type:"PointRCircle",parents:[t[0]]}}:4===t.length?{type:"Circle",name:t[3],def:{type:"3PointsCircle",parents:[t[0],t[1],t[2]]}}:{type:"Circle",name:t[2],def:{type:"Point"===e[t[1]].type?"2PointsCircle":"PointLineCircle",parents:[t[0],t[1]]}}},CircleOfRadius:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Circle",name:e[2],def:{type:"PointRCircle",parents:[n],attr:{rStrObj:r}}}},CircleOf3Point:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Circle",name:e[3],def:{type:"3PointsCircle",parents:[n,r,o]}}},CircleOf3TPRadius:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Circle",name:e[2],def:{type:"PointLineCircle",parents:[n,r]}}},CircleTangentPoint:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Circle",name:e[2],def:{type:"TangentCircle",parents:[n,r]}}},Arc:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"3PointsArc",parents:[n,r,o]}}},ThreePointArc:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"3PointsArc",parents:[n,r,o],attr:{defineType:0}}}},AngleArc:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"3PointsArc",parents:[n,r,o],attr:{defineType:1}}}},Arc_PCenP:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"3PointsArc",parents:[n,r,o],attr:{defineType:2}}}},ArcOnCircle:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"OnCircleArc",parents:[n,r,o]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Conic_Line_Focus_E:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Conic",name:e[2],def:{type:"LineFocusConic",parents:[n,r]}}},EllipseOfFocusPoint:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Conic",name:e[3],def:{type:"3PointsConic",parents:[n,r,o]}}},NormalEllipse:function(t){var e,n,r=(0,i.default)(t,6),o=r[0],s=r[1],a=r[2],u=r[3],c=r[4],l=r[5];for(var f in s)e=f;for(var h in a)n=h;return{type:"Conic",name:c,def:{type:"NormalEllipse",parents:[o,l],attr:{parName1:e,parName2:n,par1:s,par2:a,direct:u}}}},NormalHyperbola:function(t){var e,n,r=(0,i.default)(t,6),o=r[0],s=r[1],a=r[2],u=r[3],c=r[4],l=r[5];for(var f in s)e=f;for(var h in a)n=h;return{type:"Conic",name:c,def:{type:"NormalHyperbola",parents:[o,l],attr:{parName1:e,parName2:n,par1:s,par2:a,direct:u}}}},NormalParabola:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2];return{type:"Conic",name:e[3],def:{type:"NormalParabola",parents:[n,e[4]],attr:{direct:o,para:r}}}},ParabolaOfThreePoint:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Conic",name:e[3],def:{type:"3PointsParabola",parents:[n,r,o]}}},FivePointOfConic:function(t){var e=(0,i.default)(t,6),n=e[0],r=e[1],o=e[2],s=e[3],a=e[4];return{type:"Conic",name:e[5],def:{type:"5PointsConic",parents:[n,r,o,s,a]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));function r(t){try{if(t&&t.length>0&&t[0].length>0){if(!(t[0][0]instanceof Array))return t;for(var e,n=[],i=0;e=t[i];i++){for(var r,o=[],s=0;r=e[s];s++)o.push({x:r[0],y:r[1]});n.push(o)}return n}return[[]]}catch(t){return[[]]}}t.exports={xyFunction:function(t){var e=(0,i.default)(t,10),n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7];return{type:"Curve",name:e[8],def:{type:"ImplicitFunCurve",parents:[e[9]],attr:{funStr:n,minX:r,maxX:o,pNumX:s,minY:a,maxY:u,pNumY:c,stepNum:l||5}}}},xFunction:function(t){var e=(0,i.default)(t,7),n=e[0],r=e[1],o=e[2],s=e[3],a=e[4];return{type:"Curve",name:e[5],def:{type:"XFunCurve",parents:[e[6]],attr:{funStr:n,min:r,max:o,pNum:s,stepNum:a||5}}}},yFunction:function(t){var e=(0,i.default)(t,7),n=e[0],r=e[1],o=e[2],s=e[3],a=e[4];return{type:"Curve",name:e[5],def:{type:"YFunCurve",parents:[e[6]],attr:{funStr:n,min:r,max:o,pNum:s,stepNum:a||5}}}},pFunction:function(t){var e=(0,i.default)(t,7),n=e[0],r=e[1],o=e[2],s=e[3],a=e[4];return{type:"Curve",name:e[5],def:{type:"PolarFunCurve",parents:[e[6]],attr:{funStr:n,min:r,max:o,pNum:s,stepNum:a||5}}}},Function:function(t){var e=(0,i.default)(t,9),n=e[0],r=e[1],o=(e[2],e[3]),s=e[4],a=e[5],u=e[6];return{type:"Curve",name:e[7],def:{type:"ParamFunCurve",parents:[e[8]],attr:{funStrx:n,funStry:r,min:o,max:s,pNum:a,stepNum:u||5}}}},Scribble:function(t){return{type:"Curve",def:{type:"FreePaths",attr:{pointArr:r((0,i.default)(t,1)[0])}}}},Path:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Curve",name:e[1],def:{type:"PointsPath",parents:n}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Polygon:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Polygon",name:e[1],def:{type:"PointsPolygon",parents:n}}},GrahamScan:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Polygon",name:e[1],def:{type:"ConvexHull",parents:n}}},RegularPolygon:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Polygon",name:e[2],def:{type:"RegularPolygon",parents:[n,r]}}},IntersectionPolygons:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Polygon",name:e[2],def:{type:"IntersectionPolygon",parents:[n,r]}}},Polygon_Linears:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1];return{type:"Polygon",name:n[2],def:{type:"Point"==e[r].type?"PointLinearPolygon":"2LinearPolygon",parents:[r,o]}}}}},function(t,e,n){"use strict";var i=n(0);n(3),n(22),n(16),n(8);var r=i(n(43));t.exports={LocusByVaris:function(t,e){var n=(0,r.default)(t,4),i=n[0],o=n[1],s=n[2],a=n[3],u=this.Locus([i,a],e);return u.def.attr.pNum=s,u.def.attr.varis.forEach((function(t,e){t.startVal=o[e][0],t.endVal=o[e][1]})),u},Locus:function(t,e){var n=(0,r.default)(t,2),i=n[0],o=n[1],s=i.slice(0);s.pop();var a=s.map((function(t){return{varName:e[t].outVais,startVal:0,endVal:1}}));return this.Locus00([a,100,i[i.length-1],o,5,!1,!1],e)},Locus00:function(t,e){var n=(0,r.default)(t,7),i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6];return"Point"===e[s].type?{type:"Curve",name:a,def:{type:"PointLocus",parents:[s],attr:{varis:i,pNum:o,stepNum:u||5,isClosed:c,isSegmentColor:l}}}:{type:"Locus",name:a,def:{type:"Locus",parents:[s],attr:{varis:i,pNum:o,isSegmentColor:l}}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));function r(t){return"GlobalAxisLine"===t||"UCSAxisLine"===t?"Line":t}function o(t){return"Point"===t?"Point":"Line"===t||"GlobalAxisLine"===t||"UCSAxisLine"===t?"Line":"Picture"===t?"Picture":"Polygon"===t?"Polygon":"Curve"}t.exports={Transform_Element:function(t,e,n){return{type:r(t.type),name:n,def:e}},Translate:function(t,e){var n=(0,i.default)(t,5),r=n[0],o=n[1],s=n[2],a=n[3],u=n[4];return this.Transform_Element(e[r],{type:"TranslateBy2Points",parents:[r,o,s],attr:{ratio:u}},a)},Translate00:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"TranslateBySegment",parents:[r,o]},s)},TranslateCoor:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"TranslateByCoor",parents:[r,s]},o)},Symmetric:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"Symmetric",parents:[r,o]},s)},Rotate:function(t,e){var n=(0,i.default)(t,6),r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5];return this.Transform_Element(e[r],{type:"Rotate",parents:[r,o],attr:{ang:s,nUnit:u,direct:c}},a)},Dilate:function(t,e){var n=(0,i.default)(t,4),r=n[0],o=n[1],s=n[2],a=n[3];return this.Transform_Element(e[r],{type:"Dilate",parents:[r,o],attr:{d:s}},a)},transform:function(t,e){var n=(0,i.default)(t,8),r=n[0],s=n[1],a=n[2],u=n[3],c=n[4],l=n[5],f=n[6],h=n[7];return{type:o(e[r].type),name:h,def:{type:"AffineByFormula",parents:[r],attr:{a1:s,b1:a,x0:u,a2:c,b2:l,y0:f}}}},Affine_Points:function(t,e){for(var n=(0,i.default)(t,4),r=n[0],s=n[1],a=n[2],u=n[3],c=[r],l=0;l<s.length;l++)c.push(s[l]);return u&&3==s.length&&c.push(u),{type:o(e[r].type),name:a,def:{type:"AffineByPoints",parents:c}}},Centrosymmetric:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"Centrosymmetric",parents:[r,o]},s)},Inversion:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return{type:a(e[r]),name:s,def:{type:"Inversion",parents:[r,o]}}},Custom_Transform:function(t,e){var n=(0,i.default)(t,4),r=n[0],s=n[1],a=n[2],u=n[3];if("Point"!==e[s].type)return{type:o(e[r].type),name:u,def:{type:"CustomTransform",parents:[r,s,a]}};var c="Point"===e[r].type;return{type:c?"Point":"Curve",name:u,def:{type:c?"CustomTransformSpecialPoint":"CustomTransformSpecialPoints",parents:[r,s,a]}}}};var s={Straight:"Straight",TangentLine:"TangentLine",VertiLine:"VertiLine",ParaLine:"ParaLine",Bisector:"Bisector",Asymptote:"Asymptote",Directrix:"Directrix"};function a(t){return"Point"===t.type?"Point":"Polygon"===t.type?"Polygon":"Circle"===t.type||"GlobalAxisLine"===t.type?"Circle":"Arc"===t.type||"UCSAxisLine"===t.type?"Arc":"Line"===t.type?s[t.def.type]?"Circle":"Arc":"Curve"}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={MeasureExpress:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureExpress",attr:{exp:n}}}},MeasureRightCoor:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureRightCoor",parents:[n,r]}}},MeasureXCoor:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureCoorX",parents:[n,r]}}},MeasureYCoor:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureCoorY",parents:[n,r]}}},MeasurePolarRadius:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasurePolarRadius",parents:[n,r]}}},MeasurePolarAngle:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasurePolarAngle",parents:[n,r]}}},MeasureDistanceOf2P:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Measure",name:e[3],def:{type:"MeasureDistanceOf2Points",parents:[n,r,o]}}},MeasureLength:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureLength",parents:[n,e[2]]}}},MeasureSlope:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureSlope",parents:[n,e[2]]}}},MeasureAngleOfInclination:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureAngleOfInclination",parents:[n,e[2]]}}},MeasureXIntercept:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureXIntercept",parents:[n,e[2]]}}},MeasureYIntercept:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureYIntercept",parents:[n,e[2]]}}},MeasureSlopeInterceptForm:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureSlopeInterceptForm",parents:[n,e[2]]}}},MeasureInterceptForm:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureInterceptForm",parents:[n,e[2]]}}},MeasureGeneralForm:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureGeneralForm",parents:[n,e[2]]}}},MeasureProportioOf2Line:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureProportioOf2Lines",parents:[n,r,e[3]]}}},MeasurePerimeter:function(t){return this.MeasureLength(t)},MeasureArea:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureArea",parents:[n,e[2]]}}},MeasureAreaOfPolygon:function(t){return this.MeasureArea(t)},MeasureAreaOfCircle:function(t){return this.MeasureArea(t)},MeasureRadius:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureRadius",parents:[n,e[2]]}}},MeasureCentreOfCircle:function(t){return this.MeasureCentre(t)},MeasureCentre:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureCentre",parents:[n,e[2]]}}},MeasureNormalOfCircle:function(t){return this.MeasureNormalForm(t)},MeasureNormalForm:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureNormalForm",parents:[n,e[2]]}}},MeasureGeneralOfCircle:function(t){return this.MeasureGeneralForm(t)},MeasureGeneralOfConic:function(t){return this.MeasureGeneralForm(t)},MeasureArcLength:function(t){return this.MeasureLength(t)},MeasureArcAngle:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureArcAngle",parents:[n,e[2]]}}},MeasureNormalOfConic:function(t){return this.MeasureNormalForm(t)},MeasureCentreOfConic:function(t){return this.MeasureCentre(t)},MeasureLeftFocus:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureFocus",parents:[n,e[2]],attr:{index:0}}}},MeasureRightFocus:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureFocus",parents:[n,e[2]],attr:{index:1}}}},MeasureLeftVertex:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVertex",parents:[n,e[2]],attr:{index:1}}}},MeasureRightVertex:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVertex",parents:[n,e[2]],attr:{index:0}}}},MeasureLowerVertex:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVertex",parents:[n,e[2]],attr:{index:3}}}},MeasureUpperVertex:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVertex",parents:[n,e[2]],attr:{index:2}}}},MeasureSemiMajorAxis:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureSemiMajorAxis",parents:[n,e[2]]}}},MeasureSemiMinorAxis:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureSemiMinorAxis",parents:[n,e[2]]}}},MeasureSemiFocus:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureSemiFocus",parents:[n,e[2]]}}},MeasureEccentricity:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureEccentricity",parents:[n,e[2]]}}},MeasureLeftDirectrix:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureDirectrix",parents:[n,e[2]],attr:{index:1}}}},MeasureRightDirectrix:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureDirectrix",parents:[n,e[2]],attr:{index:0}}}},MeasureUpperAsymptote:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureAsymptote",parents:[n,e[2]],attr:{index:0}}}},MeasureLowerAsymptote:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureAsymptote",parents:[n,e[2]],attr:{index:1}}}},MeasureConicArea:function(t){return this.MeasureArea(t)},MeasureConicPerimeter:function(t){return this.MeasureLength(t)},MeasureAngleOf3Points:function(t){var e=(0,i.default)(t,6),n=e[0],r=e[1],o=e[2];return{type:"Measure",name:e[3],def:{type:"MeasureAngleOf3Points",parents:[n,r,o,e[4]],attr:{angleDefine:e[5]}}}},MeasureAngle:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2],s=e[3];return this.MeasureAngleOf3Points([n,r,o,s,null,1])},MeasureDirectionAngle:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2],s=e[3];return this.MeasureAngleOf3Points([n,r,o,s,null,2])},MeasureAngleOfLabelAngle:function(t){var e=(0,i.default)(t,3),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureAngleOfLabelAngle",parents:[n,e[2]]}}},MeasureRatioOf3Points:function(t){var e=(0,i.default)(t,5),n=e[0],r=e[1],o=e[2];return{type:"Measure",name:e[3],def:{type:"MeasureRatioOf3Points",parents:[n,r,o,e[4]]}}},MeasureValueOfPointToObj:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureValueOfPointToObj",parents:[n,r]}}},MeasureValueOfPointToLine:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureValueOfPointToObj",parents:[n,r]}}}}},function(t,e,n){"use strict";var i=n(0);n(3),n(22);var r=(0,i(n(28)).default)({},n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(390),n(391)),o=n(392);t.exports=function(t){var e=[];t.r.forEach((function(t,n){o(t,n,r,e)}));var n=t.paper.private;return{version:"3.0",environment:"3D",defaultTheme:t.environment,thumbnail:n.thumbnail,mark:t.mark,parameters:t.p,customFun:t.cf,paper:{height:n.height,width:n.width,backgroundColor:n.backgroundColor,backgroundOpacity:n.backgroundOpacity,fog:n.fog,antialias:n.antialias,perspective:n.perspective||50,globalGroup:t.paper.globalGroup,grid:n.grid},elements:e}}},function(t,e,n){"use strict";var i=n(0)(n(43)),r={x1:"XAxisSPoint",x2:"XAxisEPoint",y1:"YAxisSPoint",y2:"YAxisEPoint",z1:"ZAxisSPoint",z2:"ZAxisEPoint"};t.exports={Point_Origin:function(t){return{type:"Point",name:(0,i.default)(t,1)[0],def:{type:"OriginPoint"}}},Point_AxisControl:function(t){var e=(0,i.default)(t,3),n=e[0],o=e[1];return{type:"Point",name:e[2],def:{type:r[o],parents:[n]}}},Point_Free:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"FreePoint",attr:{position:n}}}},Point_OnPLane:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OnPlanePoint",parents:[n]}}},Intersection:function(t){return 3===t.length?{type:"Point",name:t[2],def:{type:"IntersectionPoint",parents:[t[0],t[1]]}}:{type:"Point",name:t[3],def:{type:"IntersectionPoint",parents:[t[0],t[1]],attr:{index:t[2]}}}},Point_OnLinear:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"OnElementPoint",parents:[n]}}},Point_Mid:function(t){return 3==t.length?{type:"Point",name:t[2],def:{type:"PointsMidPoint",parents:[t[0],t[1]]}}:{type:"Point",name:t[1],def:{type:"LineMidPoint",parents:[t[0]]}}},Point_Coor:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"RightPoint",attr:n}}},Point_Polyhedron:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"PolyhedronPoint",parents:[n],attr:{index:r}}}},Point_Closest:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Point",name:e[2],def:{type:"ClosestPoint",parents:[n,r]}}},Point_Centre:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Point",name:e[1],def:{type:"CentrePoint",parents:[n]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43)),r={x:"XAxisLine",y:"YAxisLine",z:"ZAxisLine"};t.exports={Line_Axis:function(t){var e=(0,i.default)(t,4),n=e[0],o=e[1],s=e[2];return{type:"Line",name:e[3],def:{type:r[s],parents:[n,o]}}},Line_2Point:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"2PointsLine",parents:[n,r]}}},Line_Polyhedron:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"PolyhedronLine",parents:[n],attr:{index:r}}}},Line_Para:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"ParaLine",parents:[n,r]}}},Line_Verti:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"VertiLine",parents:[n,r]}}},Line_Tangent:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Line",name:e[3],def:{type:"TangentLine",parents:[n,r],attr:{index:o}}}},Line_Mid:function(t){return{type:"Line",name:t.pop(),def:{type:"MidLine",parents:t}}},Line_Intersection_2Polygons:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Line",name:e[2],def:{type:"IntersectionLine",parents:[n,r]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Circle_3Point:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Circle",name:e[3],def:{type:"3PointsCircle",parents:[n,r,o]}}},Circle_Centre_Normal:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Circle",name:e[2],def:{type:"PointNormalCircle",parents:[n,r]}}},Circle_Line_Point:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Circle",name:e[2],def:{type:"LinePointCircle",parents:[n,r]}}},Arc_3Point:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Arc",name:e[3],def:{type:"3PointsArc",parents:[n,r,o]}}},Arc_PointRNormal:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Arc",name:e[2],def:{type:"RadiusArc",parents:[n,r]}}},Arc_PointNormal:function(t){return{type:"Arc",name:t.pop(),def:{type:"PointNormalArc",parents:t}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Locus:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return"Point"===e[r].type?{type:"Curve",name:s,def:{type:"PointLocus",parents:[r],attr:{varis:o}}}:{type:"Surface",name:s,def:{type:"LocusSurface",parents:[r],attr:{varis:o}}}},Curve_Function:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return n.curveType=n.type,delete n.type,{type:"Curve",name:r,def:{type:"FunctionCurve",attr:n}}},XYZFunction:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return n.type=1,this.Curve_Function([n,r])},X_YFunction:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return n.type=0,this.Curve_Function([n,r])},T_R_PolarFunction:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return n.type=2,this.Curve_Function([n,r])},T_RMN_PolarFunction:function(t){var e=(0,i.default)(t,2),n=e[0],r=e[1];return n.type=3,this.Curve_Function([n,r])},Path_Points:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Curve",name:e[1],def:{type:"PointsPath",parents:n}}},Path_Intersection_PolygonSurface:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Curve",name:e[2],def:{type:"IntersectionCurve",parents:[n,r]}}},Path_Intersection_2Surfaces:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Curve",name:e[2],def:{type:"IntersectionCurve",parents:[n,r]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={Polygon_Points:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Plane",name:e[1],def:{type:"PointsPolygon",parents:n}}},Plane_Axis:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2],a="XOYAxisPlane",u=e[r],c=e[o];return"YAxisLine"===u.def.type&&"ZAxisLine"===c.def.type&&(a="YOZAxisPlane"),"XAxisLine"===u.def.type&&"ZAxisLine"===c.def.type&&(a="XOZAxisPlane"),{type:"Plane",name:s,def:{type:a,parents:[r,o]}}},Plane_Mid:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Plane",name:e[2],def:{type:"MidPlane",parents:[n,r]}}},Plane_Verti_Point:function(t){return{type:"Plane",name:t.pop(),def:{type:"VertiPlane",parents:t}}},Plane_Para_Point:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Plane",name:e[2],def:{type:"ParaPlane",parents:[n,r]}}},Plane_Point_2P:function(t){return{type:"Plane",name:t.pop(),def:{type:3===t.length?"3PointsPlane":"PointLinePlane",parents:t}}}}},function(t,e,n){"use strict";var i=n(0);n(20);var r=i(n(43));t.exports={Sphere_3Points:function(t){var e=(0,r.default)(t,4),n=e[0],i=e[1],o=e[2];return{type:"Sphere",name:e[3],def:{type:"3PointsSphere",parents:[n,i,o]}}},Sphere_4Points:function(t){var e=(0,r.default)(t,5),n=e[0],i=e[1],o=e[2],s=e[3];return{type:"Sphere",name:e[4],def:{type:"4PointsSphere",parents:[n,i,o,s]}}},Sphere_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Sphere",name:e[2],def:{type:"PointNormalSphere",parents:[n,i]}}},Cylinder_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Cylinder",name:e[2],def:{type:"Cylinder",parents:[n,i]}}},Prism_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Prism",name:e[2],def:{type:"Prism",parents:[n,i]}}},Tetrahedron_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Polyhedron",name:e[2],def:{type:"Tetrahedron",parents:[n,i]}}},Hexahedron_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Polyhedron",name:e[2],def:{type:"Hexahedron",parents:[n,i]}}},Octahedron_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Polyhedron",name:e[2],def:{type:"Octahedron",parents:[n,i]}}},Dodecahedron_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Polyhedron",name:e[2],def:{type:"Dodecahedron",parents:[n,i]}}},PositiveIcosahedron_Centre_Normal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Polyhedron",name:e[2],def:{type:"Icosahedron",parents:[n,i]}}},Surface_Rota_Element_Axis:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Surface",name:e[2],def:{type:"RotateElementSurface",parents:[n,i]}}},Surface_Rule:function(t,e){var n=(0,r.default)(t,3),i=n[0],o=n[1];return{type:"Surface",name:n[2],def:{type:"Point"===e[i].type?"PointLinearSurface":"2LinearSurface",parents:[i,o]}}},Surface_Function:function(t){var e=(0,r.default)(t,2),n=e[0],i=e[1];return n&&(n.surfaceType=n.type),{type:"Surface",name:i,def:{type:"FunctionSurface",attr:n}}},Clip:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Clip",name:e[2],def:{type:"Clip",parents:[n].concat(i)}}},ConvexHull:function(t){var e=(0,r.default)(t,2),n=e[0];return{type:"ConvexHull",name:e[1],def:{type:"ConvexHull",parents:n}}},Cuboid_CentreNormal:function(t){var e=(0,r.default)(t,3),n=e[0],i=e[1];return{type:"Cuboid",name:e[2],def:{type:"Cuboid",parents:[n,i]}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));function r(t){return"Point"===t?"Point":"Line"===t?"Line":"Circle"===t||"Arc"===t||"Curve"===t?"Curve":"Plane"===t?"Plane":"Surface"}t.exports={Transform_Element:function(t,e,n){return{type:t.type,name:n,def:e}},TranslateVector:function(t,e){return 3==t.length?this.Transform_Element(e[t[0]],{type:"TranslateBySegment",parents:[t[0],t[1]]},t[2]):this.Transform_Element(e[t[0]],{type:"TranslateBy2Points",parents:[t[0],t[1],t[2]]},t[3])},TranslateCoor:function(t,e){var n=(0,i.default)(t,2),r=n[0],o=n[1];return this.Transform_Element(e[r],{type:"TranslateByCoor",parents:[r]},o)},Rotate:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"Rotate",parents:[r,o]},s)},Symmetry:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2],a=e[o];return this.Transform_Element(e[r],{type:"Point"===a.type?"Centrosymmetric":"Line"===a.type?"Axisymmetric":"Planesymmetric",parents:[r,o]},s)},Zoom:function(t,e){var n=(0,i.default)(t,3),r=n[0],o=n[1],s=n[2];return this.Transform_Element(e[r],{type:"Dilate",parents:[r,o]},s)},Projection:function(t,e){var n=e[t[1]],i=[t[0],t[1]],o=3==t.length?t[2]:t[3];return 4==t.length&&i.push(t[2]),{type:r(e[t[0]].type),name:o,def:{type:"Line"===n.type?"ProjectionToLine":"ProjectionToPlane",parents:i}}}}},function(t,e,n){"use strict";var i=n(0)(n(43));t.exports={MeasureExpress:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureExpress",attr:{exp:n}}}},MeasureRightCoor:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureRightCoor",parents:[n]}}},MeasureXCoor:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureCoorX",parents:[n]}}},MeasureYCoor:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureCoorY",parents:[n]}}},MeasureZCoor:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureCoorZ",parents:[n]}}},MeasureLength:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureLength",parents:[n]}}},MeasureVector:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVector",parents:[n]}}},MeasureVectors:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureVectors",parents:[n],attr:{vectorUnit:r}}}},MeasureEquation:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureEquation",parents:[n]}}},MeasureRadius:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureRadius",parents:[n]}}},MeasureNormalVectors:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureNormalVectors",parents:[n],attr:{vectorUnit:r}}}},MeasureNormalVector:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureNormalVector",parents:[n]}}},MeasureCircleEquation:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureCircleEquation",parents:[n]}}},MeasurePerimeter:function(t){return this.MeasureLength(t)},MeasureArea:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureArea",parents:[n]}}},MeasureVolume:function(t){var e=(0,i.default)(t,2),n=e[0];return{type:"Measure",name:e[1],def:{type:"MeasureVolume",parents:[n]}}},MeasureValueOfPointToObj:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureValueOfPointToObj",parents:[n,r]}}},MeasureDistanceOf2P:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureDistanceOf2Points",parents:[n,r]}}},MeasureRatioOf3Points:function(t){var e=(0,i.default)(t,4),n=e[0],r=e[1],o=e[2];return{type:"Measure",name:e[3],def:{type:"MeasureRatioOf3Points",parents:[n,r,o]}}},MeasureProportioOf2Line:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureProportioOf2Lines",parents:[n,r]}}},MeasureDistanceOf2L:function(t){var e=(0,i.default)(t,3),n=e[0],r=e[1];return{type:"Measure",name:e[2],def:{type:"MeasureDistanceOf2Lines",parents:[n,r]}}},MeasureAngle:function(t){var e=[t[0],t[1]];return 4==t.length&&e.push(t[2]),{type:"Measure",name:t[t.length-1],def:{type:"MeasureAngle",parents:e}}}}},function(t,e,n){(e=n(97)(!1)).push([t.i,".preview--2ybic {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    font-family: '';\n    font-size: 14px !important;\n    line-height: 1.42857143;\n    color: #333;\n    /**/\n    -moz-user-select: none;\n    /**/\n    -webkit-user-select: none;\n    /*webkit*/\n    -ms-user-select: none;\n    /*IE10*/\n    -khtml-user-select: none;\n    /**/\n    user-select: none;\n    outline: -webkit-focus-ring-color auto 0;\n    outline: focus-ring-color auto 0;\n    vertical-align: top;\n}\n\n.preview--2ybic * {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.preview--2ybic .font-icon {\n    width: 1em;\n    height: 1em;\n    fill: currentColor;\n    overflow: hidden;\n    pointer-events: none;\n}\n\n.preview--2ybic p {\n    margin: 0 0 10px;\n}\n\n.preview--2ybic ol,\n.preview--2ybic ul {\n    margin-top: 0;\n    margin-bottom: 10px;\n}\n\n.preview--2ybic ul ul,\n.preview--2ybic ol ul,\n.preview--2ybic ul ol,\n.preview--2ybic ol ol {\n    margin-bottom: 0;\n}\n\n.preview--2ybic table {\n    border-spacing: 0;\n    border-collapse: collapse;\n}\n\n.preview--2ybic td,\n.preview--2ybic th {\n    padding: 0;\n}\n\n.preview--2ybic svg {\n    pointer-events: visiblePainted;\n}\n\n.preview--2ybic .svg-twinkle_0 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n}\n\n.preview--2ybic .svg-twinkle_1 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n    animation-delay: .3s;\n}\n\n.preview--2ybic .svg-twinkle_2 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n    animation-delay: .6s;\n}\n\n.preview--2ybic .svg-twinkle_3 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n    animation-delay: .9s;\n}\n\n.preview--2ybic .svg-twinkle_4 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n    animation-delay: 1.2s;\n}\n\n.preview--2ybic .svg-twinkle_5 {\n    animation: preview-twinkle--fv6f1 1s infinite;\n    animation-delay: 1.5s;\n}\n\n@keyframes preview-twinkle--fv6f1 {\n    from {\n        transform: scale(1, 1);\n        stroke-opacity: 1;\n    }\n    to {\n        transform: scale(2.5, 2.5);\n        stroke-opacity: 0;\n    }\n}\n\n@-webkit-keyframes showIn--1hgj7 {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(.5);\n        transform: scale(.5)\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1);\n        transform: scale(1)\n    }\n}\n\n@keyframes showIn--1hgj7 {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(.5);\n        -ms-transform: scale(.5);\n        transform: scale(.5)\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1);\n        -ms-transform: scale(1);\n        transform: scale(1)\n    }\n}\n\n.jzjy-show-in {\n    -webkit-animation: showIn--1hgj7 .3s;\n    animation: showIn--1hgj7 .3s;\n    -webkit-animation-iteration-count: 1;\n    animation-iteration-count: 1;\n}\n\n.ios-audio--mUVJA {\n    position: fixed;\n    z-index: 20210803;\n    bottom: 0;\n    top: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #fff;\n    text-align: center;\n    font-size: 1em;\n    padding: 0 2em;\n}",""]),e.locals={preview:"preview--2ybic","preview-twinkle":"preview-twinkle--fv6f1",showIn:"showIn--1hgj7","ios-audio":"ios-audio--mUVJA"},t.exports=e},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(106),n(131);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=np.EventDispatcher,f=n(602),h=n(72),p=h.deepToJSON,d=h.deepCopy,y={FreePoint:["FreePoint"],HalfPoint:["RightPoint","PolarPoint","InElementPoint","OnElementPoint","OnPLinePoint","OnVLinePoint","OnEqualSegmentPoint","OnIterPoint","OnCompositePathsPoint"],ConstraintPoint:["OriginPoint","PointsMidPoint","LineMidPoint","CentrePoint","FootPoint","FocusPoint","VertexPoint","VEqualPoint","ParaEqualPoint","TangentPoint","ClosestPoint","ConstraintPoint","IntersectionPoint","ParallelIntersection","VerticalIntersection","ThroughPointIntersection"],ControlPoint:["XAxisSPoint","YAxisSPoint","XAxisEPoint","YAxisEPoint"],UnitPoint:["XAxisControlPoint","YAxisControlPoint"],Line:["Segment","Ray","Straight","Bisector","Asymptote","Directrix","ParaLine","VertiLine","TangentLine","LineByPointSlope","LineByPointAngle","LineByPointXIntercept","LineByPointYIntercept"],Arc:["3PointsArc","OnCircleArc"],Circle:["2PointsCircle","3PointsCircle","PointLineCircle","PointRCircle","TangentCircle"],Conic:["3PointsConic","LineFocusConic","5PointsConic","NormalParabola","NormalEllipse","NormalHyperbola","3PointsParabola"],Curve:["YFunCurve","XFunCurve","ParamFunCurve","PolarFunCurve","ImplicitFunCurve","PointLocus","PointsPath"],Polygon:["PointsPolygon","RegularPolygon","IntersectionPolygon","PointLinearPolygon","2LinearPolygon","ConvexHull"],FreePaths:["FreePaths"],Locus:["Locus"],AngleMarker:["AngleLabel"],LineMarker:["LineLabel"],PointsMarker:["LengthLabel"],Action:["Action"],Animation:["Animation"],Audio:["DynamicAudio"],CustomFunction:["CustomFunction","DerivativeFunction"],DynamicText:["DynamicText"],Calculation:["MeasureExpress","MeasureGeneralForm","MeasureNormalForm","MeasureArea","MeasureLength","MeasureValueOfPointToObj","MeasureAngleOf3Points","MeasureAngleOfLabelAngle","MeasureArcAngle","MeasureRadius","MeasureAngleOfInclination","MeasureProportioOf2Lines","MeasureSlope","MeasureXIntercept","MeasureYIntercept","MeasureCoorX","MeasureCoorY","MeasureDistanceOf2Points","MeasurePolarAngle","MeasurePolarRadius","MeasureRatioOf3Points","MeasureEccentricity","MeasureSemiFocus","MeasureSemiMajorAxis","MeasureSemiMinorAxis","MeasureRightCoor","MeasureCentre","MeasureInterceptForm","MeasureSlopeInterceptForm","MeasureAsymptote","MeasureDirectrix","MeasureFocus","MeasureVertex"],Variable:["VariableRuler"],Picture:["CombinationPicture","FreePicture"],Text:["CombinationText"]},v=function(t){(0,s.default)(n,t);var e=c(n);function n(){var t;return(0,r.default)(this,n),(t=e.call(this))._config=f,t}return(0,o.default)(n,[{key:"autoNamePoint",get:function(){return this._config.AutoNamePoint}},{key:"varisAccuracy",get:function(){return this._config.VarisAccuracy}},{key:"arrowStyle",get:function(){return this._config.ArrowStyle}},{key:"paper",get:function(){return d({},this._config.Paper)}},{key:"getEnvironmentConfig",value:function(){return p(this._config)}},{key:"setEnvironmentConfig",value:function(t){this._config=d(this._config,t),this.dispatchEvent("EnvironmentConfigChange")}},{key:"getLabelDisplay",value:function(){return d({},this._config.Label)}},{key:"getDefalutDisplayJSONByDef",value:function(t){if("GlobalAxis"===t)return d({},this._config.GlobalAxis.Grid);if("XGlobalAxisLine"===t||"YGlobalAxisLine"===t)return d({},this._config.GlobalAxis.AxisLine);if("UCSAxis"===t)return d({},this._config.CustomizedAxis.Grid);if("UCSXAxisLine"===t||"UCSYAxisLine"===t)return d({},this._config.CustomizedAxis.AxisLine);if(y.ControlPoint.includes(t))return d({},this._config.CustomizedAxis.ControlPoint);if(y.UnitPoint.includes(t))return d({},this._config.CustomizedAxis.UnitPoint);for(var e in y)if(y[e].includes(t))return d({},this._config[e]);return{}}}]),n}(l);t.exports=v},function(t,e,n){"use strict";t.exports={AutoNamePoint:!0,VarisAccuracy:2,ArrowStyle:1,Paper:{backgroundColor:"#ffffff",backgroundOpacity:1},Label:{size:20,color:"#000",opacity:1},GlobalAxis:{AxisLine:{arrow:{bArrow:!1,eArrow:!0},stroke:{color:"#000",opacity:1,style:"solid",width:2},font:{size:15,color:"#000",opacity:1},show:!1,step:1,PI2:1,tick:0,number:0,offset:0},Grid:{stroke:{color:"#cccccc",opacity:.6,style:"solid",width:1},show:!1,type:1,x:{step:1,PI2:1,tick:0,number:0},y:{step:1,PI2:1,tick:0,number:0}}},CustomizedAxis:{AxisLine:{arrow:{bArrow:!1,eArrow:!0},stroke:{color:"#000",opacity:1,style:"solid",width:2},font:{size:15,color:"#000",opacity:1}},ControlPoint:{size:4,stroke:{color:"#000",opacity:.3,style:"solid",width:2},fill:{color:"#ffD3D6",opacity:1}},UnitPoint:{size:2,stroke:{color:"#000",opacity:.3,style:"solid",width:2},fill:{color:"#ffD3D6",opacity:1}},Grid:{stroke:{color:"#000",opacity:.3,style:"solid",width:.5},show:!0,type:1,x:{step:1,PI2:1},y:{step:1,PI2:1}}},FreePoint:{size:4,stroke:{color:"#000",opacity:.3,style:"solid",width:2},fill:{color:"#ff0000",opacity:1}},HalfPoint:{size:4,stroke:{color:"#000",opacity:.3,style:"solid",width:2},fill:{color:"#ffD3D6",opacity:1}},ConstraintPoint:{size:4,stroke:{color:"#000",opacity:.3,style:"solid",width:2},fill:{color:"#cd8500",opacity:1}},Line:{arrow:{bArrow:!1,eArrow:!1},stroke:{color:"#0000ff",opacity:1,style:"solid",width:3}},Circle:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:3},fill:{color:"none",opacity:0,texture:"0"}},Arc:{stroke:{color:"#008000",opacity:1,style:"solid",width:3},fill:{color:"none",opacity:0,texture:"0"},arrow:{bArrow:!1,eArrow:!1}},Curve:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:3},fill:{color:"#000",opacity:0,texture:"0"},arrow:{bArrow:!1,eArrow:!1}},Conic:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:3},fill:{color:"#000",opacity:0,texture:"0"}},Polygon:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:2},fill:{color:"#000",opacity:.2,texture:"0"}},LineMarker:{stroke:{color:"#800080",opacity:.8,style:"solid",width:2},labelStyle:2},AngleMarker:{stroke:{color:"#800080",opacity:.8,style:"solid",width:2},fill:{color:"#fff",opacity:0},labelStyle:1},PointsMarker:{stroke:{color:"#000",opacity:.8,style:"solid",width:2},font:{size:20,color:"#000",opacity:1},lengthStyle:0},FreePaths:{stroke:{color:"#0000FF",opacity:2,style:"solid",width:3},fill:{color:"none",opacity:0,texture:"0"}},Locus:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:3},fill:{color:"#000",opacity:0,texture:"0"}},Action:{borderRadius:4,stroke:{color:"#000",opacity:1,style:"solid",width:2},fill:{color:"#337ab7",opacity:0},font:{size:20,color:"#000",opacity:1}},Animation:{animationType:"2",borderRadius:4,stroke:{color:"#000",opacity:1,style:"solid",width:2},fill:{color:"#337ab7",opacity:0},font:{size:20,color:"#000",opacity:1},icon:{color:"#000",opacity:1}},Audio:{font:{size:24,color:"#0064cd",opacity:1},icon:{color:"#0064cd",opacity:1}},CustomFunction:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#c9db93",opacity:0},font:{size:20,color:"#000",opacity:1}},DynamicText:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0}},Calculation:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0},font:{size:20,color:"#000",opacity:1}},Variable:{rulerWidth:140,showBtn:!0,showRuler:!0,showVariable:!0,showInput:!0,stroke:{color:"#ccc",opacity:1,style:"solid",width:1},fill:{color:"#0064cd",opacity:1},font:{size:18,color:"#000",opacity:1},icon:{color:"#0064cd",opacity:1}},Picture:{stroke:{color:"#000000",opacity:0,style:"solid",width:1},fill:{color:"#c9db93",opacity:0}},CombinationText:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0},font:{size:20,color:"#000",opacity:1}}}},function(t,e,n){"use strict";var i=n(393),r=Backbone.Model.extend({defaults:{width:1366,height:768,scale:{x:1,y:1},scaleRatio:1,originPos:{x:683,y:384},backgroundColor:"#ffffff",backgroundOpacity:1,thumbnail:{x:383,y:84,width:600,height:600}},initialize:function(){this.axisTransformer=new i({translateX:this.get("width")/2,translateY:this.get("height")/2}),this.on("change",this.resetAxisTransform),this.environmentConfig=this.get("environmentConfig"),this.set(this.environmentConfig.paper),this.resetAxisTransform()},moveOriginPos:function(t){this.set({originPos:t})},resizeScaleRatio:function(t){this.set("scaleRatio",this.get("scaleRatio")*t)},resetAxisTransform:function(){var t=this.get("originPos"),e=this.get("scaleRatio"),n=this.get("scale");this.axisTransformer.reset({translateX:t.x,translateY:t.y,scaleX:e*n.x/50,scaleY:-e*n.y/50}),this.trigger("reRender")},transGTS:function(t){return this.axisTransformer.transGTS(t)},transSTG:function(t){return this.axisTransformer.transSTG(t)},formJSON3:function(t){t.globalGroup&&(this.set(t.globalGroup),delete t.globalGroup),this.set(t),this.resetAxisTransform()},toJSON3:function(){return{width:this.get("width"),height:this.get("height"),backgroundColor:this.get("backgroundColor"),backgroundOpacity:this.get("backgroundOpacity"),globalGroup:{originPos:this.get("originPos"),scale:this.get("scale"),scaleRatio:this.get("scaleRatio")}}}});t.exports=r},function(t,e,n){"use strict";var i=[],r={x:0,y:0},o={x:1,y:0},s={x:0,y:1};function a(t,e,n,i,r,o){var s=t.x,a=t.y,u=e.x,c=e.y,l=n.x,f=n.y,h=i.x,p=i.y,d=r.x,y=r.y,v=o.x,_=o.y,g=s*c+u*f+l*a-l*c-u*a-s*f;return{a1:(h*(c-f)-d*(a-f)+v*(a-c))/g,b1:(-h*(u-l)+d*(s-l)-v*(s-u))/g,x0:(h*(u*f-l*c)-d*(s*f-l*a)+v*(s*c-u*a))/g,a2:(p*(c-f)-y*(a-f)+_*(a-c))/g,b2:(-p*(u-l)+y*(s-l)-_*(s-u))/g,y0:(p*(u*f-l*c)-y*(s*f-l*a)+_*(s*c-u*a))/g}}var u=function(t){this.inputs=t,this.dirty=!0,this.affine={a1:0,b1:0,a2:0,b2:0,x0:0,y0:0}};u.prototype={getAffine:function(){if(this.dirty){var t=this.inputs;this.affine=a(t[0].output_Model,t[1].output_Model,t[2].output_Model,t[3].output_Model,t[4].output_Model,t[5].output_Model),this.dirty=!1}return this.affine}};var c=function(t){this.inputs=t,4==t.length&&(this.axis=t[3]),this.dirty=!0,this.affine={a1:0,b1:0,a2:0,b2:0,x0:0,y0:0}};c.prototype={getAffine:function(){if(this.dirty){var t=this.inputs;this.axis?this.affine=a(this.axis.transGTS(r),this.axis.transGTS(o),this.axis.transGTS(s),t[0].output_Model,t[1].output_Model,t[2].output_Model):this.affine=a(r,o,s,t[0].output_Model,t[1].output_Model,t[2].output_Model),this.dirty=!1}return this.affine}},t.exports={getAffineSet:function(t){for(var e=0;e<i.length;e++){for(var n=i[e].inputs,r=!0,o=0;o<t.length;o++)if(n.indexOf(t[o]!=o)){r=!1;break}if(r)return i[e]}var s;if(s=6==t.length?new u(t):new c(t)){i.push(s);for(e=0;e<t.length;e++)t[e].affineSets||(t[e].affineSets=[]),t[e].affineSets.push(s)}return s},reset:function(){i=[]}}},function(t,e,n){"use strict";var i=n(0);n(70),n(3),n(22),n(8),n(106),n(131);var r=i(n(1)),o=i(n(2)),s=npGeo.Vector2,a=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,r.default)(this,t),this.selectManager=e.selectManager,this.undoRedo=e.undoRedo,this.paperView=e.paperView,this.bindEvents=e.bindEvents,this.elementsV=e.paperView.elementsV,this.is2D=n,this.times=0,this.x=0,this.y=0}return(0,o.default)(t,[{key:"reset",value:function(){this.times=0}},{key:"down_27",value:function(){this.bindEvents.bindSelect()}},{key:"down_ctrl_65",value:function(){this._selectAll()}},{key:"down_shift_13",value:function(){if(!this.times){var t=this.selectManager.getSelectedModels();t=t.filter((function(t){return t.constraint.canAlign})),this.geoModels=t.length>1?t:null}if(this.geoModels){for(var e,n=this.geoModels,i=1;e=n[i];i++){var r=n[i-1].constraint.getPosition(),o=r.left,a=r.top,u=n[i-1].elementView.getWidthAndHeight().height,c=[e],l=e.constraint.getPosition();this.undoRedo.moveTo(c,new s(l.left,l.top)),this.undoRedo.moveTo(c,new s(o,a+u+this.times))}this.times++}}},{key:"down_ctrl_13",value:function(){if(!this.times){var t=this.selectManager.getSelectedModels();t=t.filter((function(t){return t.constraint.canAlign})),this.geoModels=t.length>1?t:null}if(this.geoModels)for(var e,n=this.geoModels,i=1;e=n[i];i++){var r=n[i-1].constraint.getPosition(),o=r.left,a=r.top,u=n[i-1].elementView.getWidthAndHeight().width,c=[e],l=e.constraint.getPosition();this.undoRedo.moveTo(c,new s(l.left,l.top)),this.undoRedo.moveTo(c,new s(o+u+this.times,a))}this.times++}},{key:"down_ctrl_90",value:function(){this.undoRedo.undo()}},{key:"down_ctrl_82",value:function(){this.undoRedo.redo()}},{key:"down_alt_38",value:function(){this.selectManager.selectParents()}},{key:"down_alt_40",value:function(){this.selectManager.selectChildren()}},{key:"down_ctrl_72",value:function(){this.undoRedo.hideElements(this.selectManager.getSelectedModels())}},{key:"down_ctrl_shift_72",value:function(){this.paperView.updateForceRender(!this.paperView.forceRender)}},{key:"down_ctrl_75",value:function(){this.undoRedo.showLabels(this.selectManager.getSelectedModels())}},{key:"down_ctrl_shift_75",value:function(){this.undoRedo.hideLabels(this.selectManager.getSelectedModels())}},{key:"down_8",value:function(){this.undoRedo.deleteElements(this.selectManager.getSelectedModels())}},{key:"down_46",value:function(){this.undoRedo.deleteElements(this.selectManager.getSelectedModels())}},{key:"down_107",value:function(){u.call(this,(function(t,e){return t+e}))}},{key:"down_187",value:function(){u.call(this,(function(t,e){return t+e}))}},{key:"down_109",value:function(){u.call(this,(function(t,e){return t-e}))}},{key:"down_189",value:function(){u.call(this,(function(t,e){return t-e}))}},{key:"down_ctrl_shift_69",value:function(){this.paperView.clearTrace()}},{key:"down_shift_49",value:function(){this.selectManager.getSelectedModels().forEach((function(t){return t.setOutputNeedUpdate()}))}},{key:"down_81",value:function(){this.is2D||this.paperView.model.resetViewPoint()}},{key:"down_88",value:function(){this.is2D||this.paperView.model.resetViewPoint("X")}},{key:"down_89",value:function(){this.is2D||this.paperView.model.resetViewPoint("Y")}},{key:"down_90",value:function(){this.is2D||this.paperView.model.resetViewPoint("Z")}},{key:"down_37",value:function(){var t=this;this._move((function(){return t.x-=5}))}},{key:"down_ctrl_37",value:function(){var t=this;this._move((function(){return t.x-=.5}))}},{key:"down_38",value:function(){var t=this;this._move((function(){return t.y-=5}))}},{key:"down_ctrl_38",value:function(){var t=this;this._move((function(){return t.y-=.5}))}},{key:"down_39",value:function(){var t=this;this._move((function(){return t.x+=5}))}},{key:"down_ctrl_39",value:function(){var t=this;this._move((function(){return t.x+=.5}))}},{key:"down_40",value:function(){var t=this;this._move((function(){return t.y+=5}))}},{key:"down_ctrl_40",value:function(){var t=this;this._move((function(){return t.y+=.5}))}},{key:"_move",value:function(t){if(this.times||(this.models=this.selectManager.getSelectedModels()),0!=this.models.length){if(!this.times){var e=this.paperView.model.transGTS({x:0,y:0,z:0});this.undoRedo.moveTo(this.models,e),this.x=e.x,this.y=e.y}t(),this.times++,this.undoRedo.moveTo(this.models,new s(this.x,this.y))}}},{key:"_filterElementsByOutputTypes",value:function(t){var e=this.selectManager.getSelectedModels().map((function(t){return t.output_Model.type}));return 0===e.length?t:t.filter((function(t){var n=t.output_Model;return e.includes(n.type)}))}},{key:"_selectAll",value:function(){var t=this.elementsV.element_views.filter((function(t){return t.isRender()})).map((function(t){return t.model})),e=this._filterElementsByOutputTypes(t);0!==e.length&&(this.selectManager.clearSelected(),this.selectManager.selectByIds(e.map((function(t){return t.get("id")})))),this.bindEvents.bindSelect()}}]),t}();function u(t){if(!this.times){var e=this.selectManager.getSelectedModels().filter((function(t){return!!t.output_Model.isVariableRulerOutput&&(t.get("isPlay")&&t.set({isPlay:!1}),!0)}));this.geoModels=0==e.length?null:e}if(this.geoModels)for(var n,i=0;n=this.geoModels[i];i++)n.outVais.setValue(t(n.outVais.getValue(),n.getValue().step||.1));this.times++}t.exports=a},function(t,e,n){"use strict";var i=n(405),r=n(72).colorRgbA,o=n(607),s=n(624),a=n(277).preview;t.exports=i.extend({initialize:function(t,e,n){var i=this;this.initialize_base(n);var a=this.model;a.on("reRender",(function(){return i.render()})),this.listenTo(this.model,"change:backgroundColor",this.onBackGroundChange),this.listenTo(this.model,"change:backgroundOpacity",this.onBackGroundChange),this.el=document.createElement("div"),this.$el=$(this.el).css("position","relative").css("background","#fff").css("-ms-touch-action","none").css("width",a.get("width")).css("height",a.get("height")),this.bindEventsEl=this.el,this.backgroud=document.createElement("div"),this.backgroud.style.position="absolute",this.backgroud.style.background=r(a.get("backgroundColor"),a.get("backgroundOpacity")),this.backgroud.style.pointerEvents="none",this.backgroud.style.width="100%",this.backgroud.style.height="100%",this.el.appendChild(this.backgroud),this.elementsV=new s({collection:e.elementsRepos},this.model,e.environmentConfig,e.beforeLoading,this),this._initBindEvents(o,e)},onBackGroundChange:function(){var t=this.model;this.backgroud.style.backgroundColor=r(t.get("backgroundColor"),t.get("backgroundOpacity"))},exportPaperHTML:function(t){if(t)return'<div class="'+a+' jzjy-preview" style="width:'+this.model.get("width")+"px;height:"+this.model.get("height")+'px;">'+this.elementsV.el.outerHTML+"</div>";var e=this.model;return'<div class="'+a+'" style="width:'+e.get("width")+"px;height:"+e.get("height")+"px;background: "+r(e.get("backgroundColor"),e.get("backgroundOpacity"))+'">'+this.elementsV.el.outerHTML+"</div>"},setCurrentUserAxis:function(t){this.bindEvents.setCurrentUserAxis(t)},getCurrentUserAxisID:function(){return this.bindEvents.getCurrentUserAxisID()}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(406),h=n(407),p=n(608),d=n(609),y=n(610),v={bindSelect:n(611),bindPickUp:n(613),bindPoint:n(614),bindLine:n(615),bindSegment:n(616),bindRay:n(617),bindCircle:n(618),bindText:n(619),bindPolygon:n(620),bindPath:n(621),bindIntelligent:n(622)},_=function(t){(0,a.default)(n,t);var e=l(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).axisTransformer=i.paperView.model.axisTransformer,i.elementsRepos=t.elementsRepos,i.dispatchCurrentAxisEvent=i._dispatchCurrentAxisEvent.bind((0,s.default)(i)),i.captureGrid=!1,i.currentUserAxis=null,i._initEvents(t),i.bindSelect(),i}return(0,o.default)(n,[{key:"_initEvents",value:function(t){var e=new p(t.elementsV),n=new d(t.paperView.model.axisTransformer),i=new h,r=new y(t.paperView,t.undoRedo,this);for(var o in t.bindEvents=this,t.findElements=e,t.distinguishElements=n,t.willManager=i,t.assistManager=r,v)this.eventTypeManager[o]=new v[o](t)}},{key:"bindLine",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindLine")}},{key:"bindRay",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindRay")}},{key:"bindPolygon",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindPolygon")}},{key:"bindPath",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindPath")}},{key:"bindIntelligent",value:function(){this.paperView.setCursor("ReggaeCursor"),this.changeEvent("bindIntelligent")}},{key:"setCurrentUserAxis",value:function(t){this.currentUserAxis&&this.currentUserAxis.off("change:isDeleted",this.dispatchCurrentAxisEvent);var e=this.elementsRepos.get(t);e&&e.output_Model.isGrid?(this.currentUserAxis=e,this.currentUserAxis.trigger("curAxisChange",this.currentUserAxis)):this.currentUserAxis=this.elementsRepos.get(0),this.currentUserAxis.on("change:isDeleted",this.dispatchCurrentAxisEvent),this.dispatchEvent(this.Events.CURRENT_AXIS)}},{key:"getCurrentUserAxisID",value:function(){return this.currentUserAxis&&this.currentUserAxis.constraint.isUCSAxis?this.currentUserAxis.get("id"):null}},{key:"_dispatchCurrentAxisEvent",value:function(){this.currentUserAxis&&this.currentUserAxis.get("isDeleted")&&(this.currentUserAxis.off("change:isDeleted",this.dispatchCurrentAxisEvent),this.currentUserAxis=this.elementsRepos.get(0),this.dispatchEvent(this.Events.CURRENT_AXIS))}},{key:"toggleCapture",value:function(t){this.captureGrid=t,this.dispatchEvent(this.Events.CAPTURE_GRID,{isCaptureGrid:this.captureGrid})}},{key:"getCapture",value:function(){return this.captureGrid}},{key:"changeToGridPos",value:function(t){this.currentUserAxis||(this.currentUserAxis=this.elementsRepos.get(0));var e=this.axisTransformer.transSTG(t),n=this.currentUserAxis.output_Model.getGridPoint(e);return this.axisTransformer.transGTS(n)}}]),n}(f);t.exports=_},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=Math.min,a=Math.max,u=function(){function t(e){(0,r.default)(this,t),this.elementsV=e}return(0,o.default)(t,[{key:"findNameLabelByTarget",value:function(t){return this.elementsV.findNameLabel(t)}},{key:"findElementsByRect",value:function(t,e,n){return this.getElementByRect({start:{x:s(t.x,e.x),y:s(t.y,e.y)},end:{x:a(t.x,e.x),y:a(t.y,e.y)}},n)}},{key:"findElementsByPos",value:function(t,e,n){for(var i,r=void 0===e.pageX?20:5,o=e.target,s=[],a=0;i=this.elementsV.element_views[a];a++)n&&n(i.model)||i.selectedByPos(t,r,o)&&s.push(i.model);return s}},{key:"findGeoElementsByPos",value:function(t,e){return this.findElementsByPos(t,e,(function(t){return!t.output_Model.isGeometry||t.output_Model.isFreePaths}))}},{key:"getElementByRect",value:function(t,e,n){for(var i,r=t.start,o=t.end,s=[],a=0;i=this.elementsV.element_views[a];a++)n&&n(i.model)||i.isInRect&&i.isInRect(r,o,e)&&s.push(i.model);return s}},{key:"getElements",value:function(t){for(var e,n=[],i=0;e=this.elementsV.element_views[i];i++)e.isRender()&&t(e.model)&&n.push(e.model);return n}}]),t}();t.exports=u},function(t,e,n){"use strict";n(48),n(82);var i=n(196).isInallowedBand,r=n(394).getIntersectionSets,o=function(t){this.axisTransformer=t};$.extend(o.prototype,{getSelectableMoldes:function(t){for(var e,n=t.length-1;e=t[n];n--)e.get("selectable")||t.splice(n,1);return t},getSimilarModels:function(t){for(var e,n=[],i=[],r=[],o=0;e=t[o];o++)e.output_Model.isPoint?n.push(e):e.output_Model.isLine?i.push(e):r.push(e);return(t=n.length>0?n:i.length>0?i:r).sort((function(t,e){return e.get("id")-t.get("id")})),{selected:t[0],arr:t}},getDistinguish:function(t,e,n){if(t.sort((function(t,e){return e.get("id")-t.get("id")})),0==t.length)return n.defaultCallback&&n.defaultCallback instanceof Function&&n.defaultCallback(),null;var i=this.getPoint(t);i?n.callback1(i):(i=this.getIntersectionPoint(t,e))?n.callback2(i):(i=this.getLine(t))?n.callback3(i):n.defaultCallback&&n.defaultCallback instanceof Function&&n.defaultCallback()},getPoint:function(t){for(var e=0,n=t.length;e<n;e++)if(t[e].output_Model.isPoint)return t[e];return null},canDrawPointOnThisElement:function(t){return t.output_Model.isLinear||t.output_Model.isPolygon||t.output_Model.isGeoList},getLine:function(t){for(var e=0,n=t.length;e<n;e++)if(this.canDrawPointOnThisElement(t[e]))return t[e];return null},matchIntersection:function(t,e){var n=t.getIntersection(),r=t.inputs;if(n instanceof Array)for(var o=0;o<n.length;o++){var s=this.axisTransformer.transGTS(n[o]);if(i(s,e))return{type:"intersection",parents:r,index:o,pos:s}}else{s=this.axisTransformer.transGTS(n);if(i(s,e))return{type:"intersection",parents:r,pos:s}}return null},getIntersectionPoint:function(t,e){for(var n=0,i=t.length;n<i;n++)for(var o=n+1;o<i;o++){var s=r(t[n],t[o]);if(s){var a=this.matchIntersection(s,e);if(a)return a}}return null},getAllIntersectionsByPos:function(t,e){for(var n=[],o=0,s=t.length;o<s;o++)for(var a=o+1;a<s;a++){var u=r(t[o],t[a]);if(u){var c=u.getIntersection(),l=u.inputs;if(c instanceof Array)for(var f=0;f<c.length;f++){var h=this.axisTransformer.transGTS(c[f]);i(h,e)&&n.push({type:"interaction",parents:l,index:f,pos:h})}else{h=this.axisTransformer.transGTS(c);i(h,e)&&n.push({type:"interaction",parents:l,pos:h})}}}return n},getAllLineModels:function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n].output_Model.isLine&&e.push(t[n]);return e},getOnLines:function(t){for(var e=[],n=0,i=t.length;n<i;n++)this.canDrawPointOnThisElement(t[n])&&e.push(t[n]);return e.length>0?e:null},getNameModel:function(t){for(var e,n=0;e=t[n];n++)if(e.nameModel)return e;return null}}),t.exports=o},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(408),h=n(67).createSVGEle,p=math.abs,d=function(t,e,n){var i=[e.x-t.x,e.y-t.y],r=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[(e.x-t.x)/r,(e.y-t.y)/r];return{x:o[0]*n+t.x,y:o[1]*n+t.y}},y=function(t,e,n,i,r,o){var s=d(t,n,r),a=d(t,e,r);return o+="M "+s.x+" ,"+s.y,o+=" A "+r+" , "+r+" , "+i+a.x+" ,"+a.y},v=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,o){var a;return(0,r.default)(this,n),(a=e.call(this,i,o)).rect=h("rect"),a.pointEle=h("circle"),a.polygonEle=h("path"),a.pathEle=h("path"),a.circleEle=h("circle"),a.labelAngleEle=h("path"),a.$msgEle=$("<span></span>"),a.line={},a.msgEle=a.$msgEle[0],a.$rect=$(a.rect),a.$polygonEle=$(a.polygonEle),a.$pathEle=$(a.pathEle),a.$pointEle=$(a.pointEle),a.$labelAngleEle=$(a.labelAngleEle),_.call((0,s.default)(a),t),a}return(0,o.default)(n,[{key:"resetAll",value:function(){this.resetRect(),this.resetPoint(),this.resetLine(),this.resetCircle(),this.resetPolygon(),this.resetButton(),this.resetHLineEle(),this.resetVLineEle(),this.resetPath(),this.resetLabelAngle(),this.resetMsgEle()}},{key:"setRect",value:function(t,e){var n,i,r={},o={};t.x<e.x?t.y<e.y?(r.x=t.x,r.y=t.y):(r.x=t.x,r.y=e.y):t.x>e.x&&(t.y<e.y?(r.x=e.x,r.y=t.y):(r.x=e.x,r.y=e.y)),n=p(t.x-e.x),i=p(t.y-e.y),o.x=r.x+n,o.y=r.y+i,this.rect.setAttributeNS(null,"display","block"),this.$rect.attr("x",r.x).attr("y",r.y),this.$rect.attr("width",n).attr("height",i)}},{key:"resetRect",value:function(){this.rect.setAttributeNS(null,"display","none")}},{key:"setPoint",value:function(t){this.pointEle.setAttributeNS(null,"display","block"),this.pointEle.setAttributeNS(null,"cx",t.x),this.pointEle.setAttributeNS(null,"cy",t.y)}},{key:"resetPoint",value:function(){this.pointEle.setAttributeNS(null,"display","none")}},{key:"setSegment",value:function(t,e){this.setLine(t,e)}},{key:"setRay",value:function(t,e){if(e.x==t.x)e=e.y<t.y?{x:t.x,y:0}:{x:t.x,y:1e4};else{var n=(e.y-t.y)/(e.x-t.x);e=e.x<t.x?{x:0,y:-n*e.x+e.y}:{x:1e4,y:n*(1e4-e.x)+e.y}}this.setLine(t,e)}},{key:"setStraight",value:function(t,e){if(e.x==t.x)e={x:(t={x:t.x,y:0}).x,y:1e4};else{var n=(e.y-t.y)/(e.x-t.x);t={x:0,y:-n*e.x+e.y},e={x:1e4,y:n*(1e4-e.x)+e.y}}this.setLine(t,e)}},{key:"setLine",value:function(t,e){this.pathEle.setAttributeNS(null,"d","M "+t.x+" "+t.y+" L "+e.x+" "+e.y)}},{key:"resetLine",value:function(){this.pathEle.setAttributeNS(null,"d","")}},{key:"resetCircle",value:function(){this.circleEle.setAttributeNS(null,"display","none")}},{key:"setCircle",value:function(t,e){this.circleEle.setAttributeNS(null,"cx",t.x),this.circleEle.setAttributeNS(null,"cy",t.y),this.circleEle.setAttributeNS(null,"r",t.distanceTo(e)),this.circleEle.setAttributeNS(null,"display","block")}},{key:"resetPolygon",value:function(){this.pathEle.setAttributeNS(null,"d",""),this.pathEle.setAttributeNS(null,"fill","none")}},{key:"setPolygon",value:function(t){if(0!=t.length){for(var e="M "+t[0].x+" "+t[0].y,n=1;n<t.length;n++)e+="L "+t[n].x+" "+t[n].y;this.pathEle.setAttributeNS(null,"d",e),this.pathEle.setAttributeNS(null,"fill","black")}}},{key:"resetButton",value:function(){this.buttons.css("display","none"),this.sureBtn.off("touchstart"),this.cancelBtn.off("touchstart")}},{key:"setButton",value:function(t,e,n){this.resetButton(),this.buttons.css("display","block"),this.sureBtn.on("touchstart",e),this.cancelBtn.on("touchstart",n),this.buttons.css("left",t.x).css("top",t.y)}},{key:"setPath",value:function(t,e){for(var n="M "+t[0].x+" "+t[0].y,i=1;i<t.length;i++)n+="L "+t[i].x+" "+t[i].y;e&&(n+="L "+e.x+" "+e.y),this.pathEle.setAttributeNS(null,"d",n)}},{key:"resetPath",value:function(){this.pathEle.setAttributeNS(null,"d","")}},{key:"setLabelAngle",value:function(t,e,n,i,r,o){var s="",a="";a=y(t,e,n,s=0==i?r>0?"0,1,1,":"0,1,0,":r>0?"0,0,0,":"0,0,1,",25,a),o>1&&(a=y(t,e,n,s,30,a)),o>2&&(a=y(t,e,n,s,35,a)),o>3&&(a=y(t,e,n,s,40,a)),this.labelAngleEle.setAttributeNS(null,"display","block"),this.labelAngleEle.setAttributeNS(null,"d",a)}},{key:"resetLabelAngle",value:function(){this.labelAngleEle.setAttributeNS(null,"display","none")}},{key:"setMsgEle",value:function(t,e){e?this.$msgEle.css("left",t.x).css("top",t.y-30).html(e).css("display","block"):this.$msgEle.css("display","none")}},{key:"resetMsgEle",value:function(){this.$msgEle.css("display","none")}}]),n}(f);function _(t){this.$msgEle.css("position","absolute").css("white-space","nowrap").css("background","#4CAF50").css("box-shadow","0 0 9px #222").css("font-size","14px").css("border-radius","4px").css("color","#ffffff").css("padding","1px 5px").css("display","none").css("transform","translate(-50%, -50%)"),this.$rect.attr("stroke","#6d6d67").attr("stroke-width",1).attr("fill-opacity",.2),this.$polygonEle.attr("stroke-width",1).attr("stroke","black").attr("fill","black").attr("fill-opacity",.2),this.$pathEle.attr("stroke-width",1).attr("stroke","#00ff00").attr("fill-opacity",.2),this.$pointEle.attr("stroke-width",2).attr("stroke","#000000").attr("stroke-opacity",.3).attr("fill","#ff0000").attr("fill-opacity",1).attr("display","none").attr("r",4),$(this.circleEle).attr("stroke","#00ff00").attr("stroke-width",2).attr("fill-opacity",0),this.$labelAngleEle.attr("stroke-width",2).attr("stroke","#00ff00").attr("fill-opacity",.2),this.sureBtn=$('<div style="padding: 6px 12px;display: inline-block;background-color: #5cb85c;border-color: #4cae4c;"></div>'),this.cancelBtn=$('<div style="padding: 6px 12px;display: inline-block;background-color: #337ab7;border-color: #2e6da4;"></div>'),this.buttons=$('<div style="display:none;text-align:center;position: absolute;pointer-events:auto;z-index: 5000;box-shadow: 2px 2px 9px #222;transform:translate(50%,50%);color: #fff;font-size: 16px;"></div>'),this.buttons.append(this.sureBtn).append(this.cancelBtn);var e=h("svg"),n=$(e);n.css("fill","none").css("position","absolute").css("pointer-events","none").css("width",t.model.get("width")).css("height",t.model.get("height")).attr("id","$assist_el");var i=$('<div style="position: absolute;pointer-events: none;z-index:10000;width:100%;height:100%;"></div>');n.append(this.pathEle).append(this.circleEle).append(this.pointEle).append(this.$rect).append(this.$labelAngleEle),i.append(n).append(this.$msgEle).append(this.vLineEle).append(this.hLineEle),t.$el.append(i).append(this.buttons)}t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(410),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,o.default)(this,n),e.call(this,t)}return(0,s.default)(n,[{key:"__down_geo__",value:function(t){var e,n=this.distinguishElements.getSimilarModels(t);this.similarEles=n.arr;for(var i=this.similarEles.length-1;i>=0;i--)if(this.selectManager.isSelected(this.similarEles[i].get("id"))){e=this.similarEles[i];break}e?(this.lastModel=null,this.isReselected={similarObj:e},e.get("locked")||this.align.setAlignInfo(e)):(this.lastModel=n.selected,this.selectManager.selectByIds([n.selected.get("id")]))}},{key:"__move_geo__",value:function(t,e){if(this.__isMoved__(t,e,this.preScreenPos)){if(this.isFirstMove||(this.lastModel&&(this.selectManager.clearSelected(),this.selectManager.selectByIds([this.lastModel.get("id")]),this.lastModel.get("locked")||this.align.setAlignInfo(this.lastModel)),this.selectModels=function(t){for(var e,n=[],i=0;e=t[i];i++)e.get("locked")||n.push(e);return n}(this.selectManager.getSelectedModels()),this.undoRedo.moveTo(this.selectModels,this.downScreenPos,this.transSTG(e),this.bindEvents.getCapture(),this.bindEvents.getCurrentUserAxisID()||0),this.isFirstMove=!0),this.selectModels){var n=this.align.elementAlign(e.x-this.downScreenPos.x,e.y-this.downScreenPos.y),i={x:n.dx+this.downScreenPos.x,y:n.dy+this.downScreenPos.y};this.undoRedo.moveTo(this.selectModels,i,this.transSTG(i),this.bindEvents.getCapture(),this.bindEvents.getCurrentUserAxisID())}this.preScreenPos=e}}},{key:"__up_geo__",value:function(t){t.stopPropagation(),t.preventDefault();var e=this.getXYofEvt(t);if(!this.__isMoved__(t,e,this.downScreenPos))if(this.lastModel)this.lastModel.constraint.canBindAction&&this.lastModel.play();else if(this.isReselected&&this.similarEles.length>0){var n=this.isReselected.similarObj,i=this.similarEles.indexOf(n);if(this.selectManager.removeByIds([n.get("id")]),this.similarEles[i+1])this.selectManager.selectByIds([this.similarEles[i+1].get("id")]),n=this.similarEles[i+1];else for(var r=0;r<i;r++)if(!this.selectManager.isSelected(this.similarEles[r].get("id"))){this.selectManager.selectByIds([this.similarEles[r].get("id")]),n=this.similarEles[r];break}n.constraint.canBindAction&&n.play()}}},{key:"__move_rect__",value:function(t,e){this.assistManager.setRect(e,this.downScreenPos)}},{key:"__up_rect__",value:function(t){var e=this.getXYofEvt(t);if(this.selectManager.clearSelected(),this.__isMoved__(t,e,this.downScreenPos)){for(var n=this.distinguishElements.getSelectableMoldes(this.findElements.findElementsByRect(this.downScreenPos,e,t.target)),i=[],r=0;r<n.length;r++)i.push(n[r].get("id"));this.selectManager.selectByIds(i)}}},{key:"clearStatus",value:function(){this.reset(),this.assistManager.resetRect(),this.willManager.reset(),this.align.removeAlign()}}]),n}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";var i=n(0);n(48);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=Math.abs,u=function(){function t(e){var n=e.assistManager,i=e.elementsRepos;(0,r.default)(this,t),(0,s.default)(this,"assistModels",[]),this.assistService=n,this.elementsRepos=i}return(0,o.default)(t,[{key:"setAlignInfo",value:function(t){if(t.constraint.canAlign){this.dragEle=t;var e=this.dragEle.elementView.getBenchmarkPointPosition();this.downBench=e,this.assistModels.splice(0);for(var n,i=this.elementsRepos.models,r=5;n=i[r];r++)n.constraint.canAlign&&(n.elementView&&!n.elementView.isRender()||n.elementView.selected||this.assistModels.push(n.elementView.getBenchmarkPointPosition()))}else this.dragEle=null}},{key:"updateLeftX",value:function(t){return t-this.downBench.left.x}},{key:"elementHorizontal",value:function(t,e,n,i){var r=t.top.x,o=t.left.x,s=t.right.x,u=e.top.x,c=e.left.x,l=e.right.x;return a(u-(r+n))<10?(this.setHorizontalLine(u),this.updateLeftX(u-i/2)):a(c-(o+n))<10?(this.setHorizontalLine(c),this.updateLeftX(c)):a(c-(s+n))<10?(this.setHorizontalLine(c),this.updateLeftX(c-i)):a(l-(o+n))<10?(this.setHorizontalLine(l),this.updateLeftX(l)):a(l-(s+n))<10?(this.setHorizontalLine(l),this.updateLeftX(l-i)):(this.assistService.resetVLineEle(),null)}},{key:"elementsHorizontal",value:function(t,e,n){for(var i,r=0;i=this.assistModels[r];r++){var o=this.elementHorizontal(t,i,e,n);if(null!==o)return o}return null}},{key:"updateTopY",value:function(t){return t-this.downBench.top.y}},{key:"elementVertical",value:function(t,e,n,i){var r=t.top.y,o=t.bottom.y,s=t.left.y,u=e.top.y,c=e.bottom.y,l=e.left.y;return a(l-(s+n))<10?(this.setVerticalLine(l),this.updateTopY(l-i/2)):a(u-(r+n))<10?(this.setVerticalLine(u),this.updateTopY(u)):a(u-(o+n))<10?(this.setVerticalLine(u),this.updateTopY(u-i)):a(c-(r+n))<10?(this.setVerticalLine(c),this.updateTopY(c)):a(c-(o+n))<10?(this.setVerticalLine(c),this.updateTopY(c-i)):(this.assistService.resetHLineEle(),null)}},{key:"elementsVertical",value:function(t,e,n){for(var i,r=0;i=this.assistModels[r];r++){var o=this.elementVertical(t,i,e,n);if(null!==o)return o}return null}},{key:"elementAlign",value:function(t,e){if(!this.dragEle)return{dx:t,dy:e};var n=this.dragEle.elementView.getWidthAndHeight(),i=this.elementsHorizontal(this.downBench,t,n.width),r=this.elementsVertical(this.downBench,e,n.height);return{dx:null===i?t:i,dy:null===r?e:r}}},{key:"setVerticalLine",value:function(t){this.assistService.setHLineEle(t)}},{key:"setHorizontalLine",value:function(t){this.assistService.setVLineEle(t)}},{key:"removeAlign",value:function(){this.dragEle=null,this.assistModels=[],this.assistService.resetHLineEle(),this.assistService.resetVLineEle()}}]),t}();t.exports=u},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(411),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(412),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Line","Straight")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setStraight(t,e)}}]),n}(n(279));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Line","Segment")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setSegment(t,e)}}]),n}(n(279));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Line","Ray")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setRay(t,e)}}]),n}(n(279));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Circle","2PointsCircle")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setCircle(t,e)}}]),n}(n(279));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(413),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22),n(48),n(16);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(175),h=n(196).getPosBy,p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).polygonVector=[],i.polygonVectorPos_S=[],i.points=[],i.isTouchEvent=!1,i._isNewMacro=!0,i.spDeletedCallback=function(t){console.log("spDeletedCallback: ".concat(t.get("id"))),this.__endDrawing__(),t.off("change:isDeleted",this.spDeletedCallback)}.bind((0,s.default)(i)),i}return(0,o.default)(n,[{key:"initEvent",value:function(){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this)}},{key:"addEvent",value:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1),this.__endDrawing__()}},{key:"removeEvent",value:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1),this.__endDrawing__()}},{key:"_downWithRight",value:function(){if(this.assistManager.resetPolygon(),this.polygonVector.length>2)return this.createPolygon();this.bindEvents.bindSelect()}},{key:"__down__",value:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),2===t.button)return this._downWithRight();this.isTouchEvent=this.isTouch(t);var n=this.getXYofEvt(t);this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.selectManager.selectByIds([t.get("id")]),e.isClosePolygon(t.get("id")),e.setAssistPolygon(n)},callback2:function(t){e.downAssistPolygon(e.createInterPoint(t,e._isNewMacro)),e._isNewMacro=!1},callback3:function(t){e.downAssistPolygon(e.createPointOnElement(n,t,e._isNewMacro)),e._isNewMacro=!1},defaultCallback:function(){var i=e.transSTG(e.getShiftCapturePos(n,t.shiftKey));e.downAssistPolygon(e.undoRedo.constructFreePoint(i,e._isNewMacro)),e._isNewMacro=!1}})}},{key:"__move__",value:function(t){var e=this;this.willManager.reset(),this.assistManager.resetPoint(),t.preventDefault();var n=this.getXYofEvt(t);this.distinguishElements.getDistinguish(this.findElements.findGeoElementsByPos(n,t),n,{callback1:function(t){e.willManager.setSingleElementWillPointOn(t),e.setAssistPolygon(e.transGTS(t.output_Model))},callback2:function(t){e.willManager.setElementWillPointOn(t.parents),e.assistManager.setPoint(t.pos),e.setAssistPolygon(t.pos)},callback3:function(t){e.setAssistPolygon(e.moveOnElement(n,t))},defaultCallback:function(){e.setAssistPolygon(e.getShiftCapturePos(n,t.shiftKey))}})}},{key:"__endDrawing__",value:function(){var t=this;this.points.forEach((function(e){return e.off("change:isDeleted",t.spDeletedCallback)})),this.points=[],this.polygonVector=[],this.polygonVectorPos_S=[],this.assistManager.resetPolygon(),this._isNewMacro=!0}},{key:"downAssistPolygon",value:function(t){this.addPointForPolygon(t),this.setAssistPolygon(this.polygonVectorPos_S[this.polygonVectorPos_S.length-1])}},{key:"getShiftCapturePos",value:function(t,e){return e&&0!=this.polygonVector.length?(t=h(this.polygonVectorPos_S[this.polygonVector.length-1],this.changePosByCapture(t)),this.assistManager.setPoint(t),t):this.changePosByCapture(t)}},{key:"isClosePolygon",value:function(t){var e=this.polygonVector.indexOf(t);0==e?this.polygonVector.length>2?this.createPolygon():this.removePointFromByIndex(e):e>0?this.removePointFromByIndex(e):this.addPointForPolygon(t)}},{key:"addPointForPolygon",value:function(t){this.polygonVector.push(t);var e=this.elementsRepos.get(t);e.on("change:isDeleted",this.spDeletedCallback),this.points.push(e),this.polygonVectorPos_S.push(this.transGTS(e.output_Model))}},{key:"removePointFromByIndex",value:function(t){var e=this.polygonVector.splice(t,1);this.polygonVectorPos_S.splice(t,1),this.points.splice(t,1)[0].off("change:isDeleted",this.spDeletedCallback),this.selectManager.isSelected(e[0])&&this.selectManager.removeByIds(e)}},{key:"createPolygon",value:function(){this.polygonVector.length>2&&this.undoRedo.constructByJSON3({type:"Polygon",def:{type:"PointsPolygon",parents:this.polygonVector.slice(0)}},this._isNewMacro),this.__endDrawing__()}},{key:"setAssistPolygon",value:function(t){var e=this.polygonVectorPos_S.length;if(e<=1)return this.assistManager.resetPolygon(),void(this.isTouchEvent&&this.assistManager.resetButton());var n=this.polygonVectorPos_S.slice(0);this.isTouchEvent||n.push(t),this.assistManager.setPolygon(n),this.isTouchEvent&&(e>2?this.setButton(n):this.assistManager.resetButton())}},{key:"setButton",value:function(t){this.assistManager.setButton(this.getButtonPos(t),this.sureFun.bind(this),this.cancelFun.bind(this))}},{key:"getButtonPos",value:function(t){var e=t[0],n=t[t.length-1];return{x:(e.x+n.x)/2,y:(e.y+n.y)/2}}},{key:"sureFun",value:function(){return this.createPolygon(),this.assistManager.resetButton(),!1}},{key:"cancelFun",value:function(){return this.__endDrawing__(),this.assistManager.resetButton(),!1}}]),n}(f);t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(82),n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(175),f=n(196),h=f.hasPointInArr,p=f.hasLabelLineInArr,d=f.getThreePointModels,y=npGeo,v=y.Vector2,_=y.Utils,g=_.PI,m=_.isZero,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).moveFun=i.moveFindElements,i.upFun=i.upFindElements,i.isDown=!1,i.labelAngle=!1,i.lines=[],i.points=[],i.pointModels=[],i.drawPathPositionArr=[],i._isNewMacro=!0,i}return(0,o.default)(n,[{key:"initEvent",value:function(){this.__down__=this.__down__.bind(this),this.__move__=this.__move__.bind(this),this.__up__=this.__up__.bind(this)}},{key:"addEvent",value:function(){this.el.addEventListener("mousedown",this.__down__,!1),this.el.addEventListener("touchstart",this.__down__,!1),this.el.addEventListener("mousemove",this.__move__,!1),this.el.addEventListener("touchmove",this.__move__,!1),this.el.addEventListener("mouseup",this.__up__,!1),this.el.addEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"removeEvent",value:function(){this.el.removeEventListener("mousedown",this.__down__,!1),this.el.removeEventListener("touchstart",this.__down__,!1),this.el.removeEventListener("mousemove",this.__move__,!1),this.el.removeEventListener("touchmove",this.__move__,!1),this.el.removeEventListener("mouseup",this.__up__,!1),this.el.removeEventListener("touchend",this.__up__,!1),this.__endDrawing__()}},{key:"__endDrawing__",value:function(){this.isDown=!1,this.moveFun=this.moveFindElements,this.upFun=this.upFindElements,this._isNewMacro=!0,this.drawPathPositionArr=[],this.assistManager.resetAll()}},{key:"addPoints",value:function(t,e,n){t?-1==this.pointModels.indexOf(t)&&(this.pointModels.push(t),this.points.push({point:t,pos:this.transGTS(t.output_Model)})):this.points.push({type:"pos",value:1.2,pos:this.transGTS(e.output_Model.pointOn(n)),parent:e})}},{key:"setPoints",value:function(t,e){if(-1==this.lines.indexOf(e)){this.lines.push(e);var n=this.transSTG(t.pos),i=e.output_Model.valueOn(n),r=e.inputs;e.output_Model.isSegment?m(i)?this.addPoints(r[1]):m(i-1)?this.addPoints(r[0]):(this.addPoints(r[0]),this.addPoints(r[1])):e.output_Model.isRadial?m(i)?this.addPoints(r[1]):m(i-1)?(this.addPoints(r[0]),this.points.push({type:"pos",value:1.2,pos:this.transGTS(e.output_Model.pointOn(1.2)),parent:e})):i>1?(this.addPoints(r[1]),this.points.push({type:"pos",value:i+.2,pos:this.transGTS(e.output_Model.pointOn(i+.2)),parent:e})):(this.addPoints(r[0]),this.addPoints(r[1])):e.output_Model.isStraight&&(m(i)?(this.addPoints(r[1],e,1),this.points.push({type:"pos",value:-.2,pos:this.transGTS(e.output_Model.pointOn(-.2)),parent:e})):m(i-1)?(this.addPoints(r[0]),this.points.push({type:"pos",value:1.2,pos:this.transGTS(e.output_Model.pointOn(1.2)),parent:e})):i>1?(this.addPoints(r[1],e,1),this.points.push({type:"pos",value:i+.2,pos:this.transGTS(e.output_Model.pointOn(i+.2)),parent:e})):i<0?(this.addPoints(r[0]),this.points.push({type:"pos",value:i-.2,pos:this.transGTS(e.output_Model.pointOn(i-.2)),parent:e})):(this.addPoints(r[0]),this.addPoints(r[1],e,1)))}}},{key:"getStarAndEndPointInfo",value:function(t){var e=this.vPoint,n=this.points.map((function(n){var i=v.createByPoints(e,n.pos);return n.angle=t.angleWith(i),n})).sort((function(t,e){return t.angle>e.angle?1:-1}));this.sPoint=n[0],this.ePoint=n[1]}},{key:"setLabelAngle",value:function(t,e,n,i){var r=e.pos,o=n.pos,s=this.vPoint,a=v.createByPoints(s,r),u=v.createByPoints(s,o),c=a.angleWith(u),l=t.angleWith(a)+t.angleWith(u);this.labelType=m(c-l,1e-5)?1:0;var f=a.cross(u),h=s.distanceSqrtTo(i),p=1;h>100?(this.labelAngle=!0,h>900&&(p=2),h>3600&&(p=3),h>8100&&(p=4),this.assistManager.setLabelAngle(s,r,o,this.labelType,f,p)):(this.labelAngle=!1,this.assistManager.resetLabelAngle()),this.circleNum=p}},{key:"__down__",value:function(t){if(2==t.button)return this.bindEvents.bindSelect(),void t.stopPropagation();if(t.preventDefault(),!this.isDown){this.isDown=!0;var e=this.getXYofEvt(t),n=this.findElements.findElementsByPos(e,t),i=this.distinguishElements.getAllIntersectionsByPos(this.distinguishElements.getAllLineModels(n),e),r=i.length;if(r>0){this.vPointModels=i[r-1],this.moveFun=this.moveDrawLabel,this.upFun=this.upDrawLabel,this.vPoint=this.vPointModels.pos;for(var o=0,s=r;o<s;o++)this.setPoints(i[o],i[o].parents[0]),this.setPoints(i[o],i[o].parents[1])}else h(n)||p(n)?(this.moveFun=this.moveFindElements,this.upFun=this.upFindElements):(this.moveFun=this.moveDrawPath,this.upFun=this.upDrawPath)}}},{key:"moveFindElements",value:function(t,e){if(this.willManager.reset(),this.paperView.setCursor("pen"),this.isDown)return this.moveFun=this.moveDrawPath,this.upFun=this.upDrawPath,void this.moveDrawPath(t,e);var n=this.findElements.findElementsByPos(e,t);if(this.distinguishElements.getIntersectionPoint(this.distinguishElements.getAllLineModels(n),e))this.paperView.setCursor("labelAngle");else if(h(n))this.paperView.setCursor("LinkGeo");else{var i=p(n);i&&(this.paperView.setCursor("labelLine"),this.willManager.setElementWillPointOn([i]))}}},{key:"moveDrawLabel",value:function(t,e){if(this.__isMoved__(t,this.vPoint,e)){var n=v.createByPoints(this.vPoint,e);this.getStarAndEndPointInfo(n),this.setLabelAngle(n,this.sPoint,this.ePoint,e)}}},{key:"moveDrawPath",value:function(t,e){this.paperView.setCursor("pen"),this.selectManager.clearSelected(),this.drawPathPositionArr.push(e),this.assistManager.setPath(this.drawPathPositionArr,e)}},{key:"__move__",value:function(t){t.preventDefault(),this.moveFun(t,this.getXYofEvt(t))}},{key:"upFindElements",value:function(t){var e=this.getXYofEvt(t),n=this.findElements.findElementsByPos(e,t),i=h(n);if(i){if(this.selectManager.isSelected(i.get("id")))this.selectManager.removeByIds([i.get("id")]);else{this.selectManager.selectByIds([i.get("id")]);var r=d(this.selectManager.getSelectedModels());if(r){var o=this.transGTS(r[0].output_Model),s=this.transGTS(r[1].output_Model),a=this.transGTS(r[2].output_Model),u=v.createByPoints(s,o),c=v.createByPoints(s,a);this.undoRedo.constructByJSON3({type:"AngleLabel",def:{type:"AngleLabel",parents:[r[0].get("id"),r[1].get("id"),r[2].get("id")],attr:{angleDefine:u.angleWith(c)<g?1:0,labelStyle:1}}},this._isNewMacro),this.selectManager.clearSelected()}}this.paperView.setCursor("LinkGeo")}else{var l=p(n);l&&this.undoRedo.constructByJSON3({type:"LineLabel",def:{type:"LineLabel",parents:[l.get("id")],attr:{d:l.output_Model.valueOn(this.transSTG(e))}}},this._isNewMacro)}}},{key:"upDrawLabel",value:function(t){var e=this.getXYofEvt(t);if(this.__isMoved__(t,e,this.vPoint)){if(!this.sPoint||!this.ePoint||!this.labelAngle)return;var n,i,r=this.findElements.findElementsByPos(this.vPoint,t),o=h(r);o=o?o.get("id"):this.createInterPoint(this.vPointModels),this.sPoint.type?(n=this.undoRedo.constructHFPoint("OnElementPoint",[this.sPoint.parent.get("id")],this.sPoint.value,this._isNewMacro),this._isNewMacro=!1):n=this.sPoint.point.get("id"),i=this.ePoint.type?this.undoRedo.constructHFPoint("OnElementPoint",[this.ePoint.parent.get("id")],this.ePoint.value,this._isNewMacro):this.ePoint.point.get("id"),this.undoRedo.constructByJSON3({type:"AngleLabel",dis:{labelStyle:this.circleNum},def:{type:"AngleLabel",parents:[n,o,i],attr:{angleDefine:this.labelType}}},this._isNewMacro),this.points=[],this.pointModels=[],this.lines=[],this.sPoint=null,this.ePoint=null,this.labelAngle=!1}else this.upFindElements(t)}},{key:"upDrawPath",value:function(){var t=this;if(this.drawPathPositionArr.length>1){var e=this.drawPathPositionArr.map((function(e){return t.transSTG(e)}));this.undoRedo.constructByJSON3({type:"Curve",def:{type:"FreePaths",attr:{pointArr:[e]}}},this._isNewMacro)}}},{key:"__up__",value:function(t){t.preventDefault(),this.upFun(t),this.__endDrawing__()}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}n(8),n(75),n(185);var f=n(175),h=n(623),p=npGeo,d=p.Vector2,y=p.Line2,v=p.Utils.HALF_PI,_=p.LineType.STRAIGHT,g={midPoint:"",paraEqual:"",paraLine:"",vEqual:"",verticalLine:"",footPoint:"",equal:"",intersectPoint:"",tangentP:"",tangentL:"",circle:"",intersectionP:"",intersectionV:""},m={intersection:function(t){return this.createInterPoint(t,this._isNewMacro)},hfPoint:function(t){var e=t.parents[0];return this.undoRedo.constructHFPoint(e.output_Model.isGeoList?"OnIterPoint":"OnElementPoint",[e.get("id")],t.value,this._isNewMacro)},midPoint:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"LineMidPoint",parents:x(t.parents)}},this._isNewMacro)},footPoint:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"FootPoint",parents:x(t.parents)}},this._isNewMacro)},tangentP:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"TangentPoint",parents:x(t.parents),attr:{index:t.index}}},this._isNewMacro)},intersectionP:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"ParallelIntersection",parents:x(t.parents),attr:{index:t.index}}},this._isNewMacro)},intersectionV:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"VerticalIntersection",parents:x(t.parents),attr:{index:t.index}}},this._isNewMacro)},intersectPoint:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"ThroughPointIntersection",parents:x(t.parents),attr:{index:t.index}}},this._isNewMacro)},paraEqual:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"ParaEqualPoint",parents:x(t.parents),attr:{direct:t.index}}},this._isNewMacro)},paraLine:function(t){var e=t.parents[0].output_Model,n=t.parents[1].output_Model;return this.undoRedo.constructHFPoint("OnPLinePoint",x(t.parents),new y(e,e.translate(n.toVector()),_).valueOn(this.transSTG(t.pos)),this._isNewMacro)},vEqual:function(t){return this.undoRedo.constructByJSON3({type:"Point",def:{type:"VEqualPoint",parents:x(t.parents),attr:{direct:t.index}}},this._isNewMacro)},verticalLine:function(t){var e=t.parents[1].output_Model,n=e.ep.rotate(e.sp,v),i=e.sp,r=d.createByPoints(i,n),o=t.parents[0].output_Model;return this.undoRedo.constructHFPoint("OnVLinePoint",x(t.parents),new y(o,o.translate(r),_).valueOn(this.transSTG(t.pos)),this._isNewMacro)},equal:function(t){return this.undoRedo.constructHFPoint("OnEqualSegmentPoint",x(t.parents),d.createByPoints(t.parents[0].output_Model,this.transSTG(t.pos)).angle(),this._isNewMacro)},freePoint:function(t){return this.createFreePointByPos(t.pos,this._isNewMacro)}};function x(t){return t.map((function(t){return t.get("id")}))}var P=function(t){(0,a.default)(n,t);var e=l(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).isDown=!1,i.downTimes=0,i.isMoved=!1,i.curDrawCircle=!1,i._isNewMacro=!0,i.match=new h({elementsRepos:t.elementsRepos,distinguishElements:t.distinguishElements,findElements:t.findElements,paper:i.paper}),i.moveFun=i.moveFindElements,i.upFun=i.upFindElements,i.downEvent=i.__down__.bind((0,s.default)(i)),i.moveEvent=i.__move__.bind((0,s.default)(i)),i.upEvent=i.__up__.bind((0,s.default)(i)),i.spDeletedCallback=function(t){this._endDrawing(),t.off("change:isDeleted",this.spDeletedCallback)}.bind((0,s.default)(i)),i}return(0,o.default)(n,[{key:"initEvent",value:function(){}},{key:"addEvent",value:function(){this.el.addEventListener("mousedown",this.downEvent,!1),this.el.addEventListener("mousemove",this.moveEvent,!1),this.el.addEventListener("mouseup",this.upEvent,!1),this.el.addEventListener("touchstart",this.downEvent,!1),this.el.addEventListener("touchmove",this.moveEvent,!1),this.el.addEventListener("touchend",this.upEvent,!1),this.match.getAllElementsByType()}},{key:"removeEvent",value:function(){this.el.removeEventListener("mousedown",this.downEvent,!1),this.el.removeEventListener("mousemove",this.moveEvent,!1),this.el.removeEventListener("mouseup",this.upEvent,!1),this.el.removeEventListener("touchstart",this.downEvent,!1),this.el.removeEventListener("touchmove",this.moveEvent,!1),this.el.removeEventListener("touchend",this.upEvent,!1),this._endDrawing()}},{key:"_endDrawing",value:function(){this.startModel&&this.startModel.off("change:isDeleted",this.spDeletedCallback),this.startModel=null,this.downTimes=0,this.isMoved=!1,this.curDrawCircle=!1,this.moveFun=this.moveFindElements,this.upFun=this.upFindElements,this._isNewMacro=!0,this.clearStatus()}},{key:"clearStatus",value:function(){this.willManager.reset(),this.assistManager.resetAll()}},{key:"drawStartPoint",value:function(t,e){this.downPos=e,this._isNewMacro=!0;var n=this;this.match.matchStartPoint(t,e,{existPoint:function(t){n.selectManager.clearSelected(),n.startId=t.get("id"),n.selectManager.selectByIds([n.startId])},intersection:function(t){n.startId=n.drawPoint(t)},pointOnElement:function(t){n.startId=n.drawPoint(t)},hfPoint:function(t){n.startId=n.drawPoint(t)},freePoint:function(){n.startId=n.drawPoint({type:"freePoint",pos:e})}}),this.startModel=this.elementsRepos.get(n.startId),this.startPos=this.transGTS(this.startModel.output_Model),this.startModel.on("change:isDeleted",this.spDeletedCallback)}},{key:"__down__",value:function(t){this.isTouch(t)?this.__touch__(t):this.__mouse__(t)}},{key:"__mouse__",value:function(t){if(2===t.button)return this.bindEvents.bindSelect(),void t.stopPropagation();if(this.startModel||this.drawStartPoint(t,this.getXYofEvt(t)),this.isMoved){if(this.curDrawCircle)return this.moveFun=this.moveDrawCircle,void(this.upFun=this.upDrawCircle);this.moveFun=this.moveDrawLine,this.upFun=this.upDrawLine}else 1==this.downTimes?(this.moveFun=this.moveDrawCircle,this.upFun=this.upDrawCircle,this.curDrawCircle=!0):(this.moveFun=this.moveDrawLine,this.upFun=this.upDrawLine,this.curDrawCircle=!1);this.downTimes++}},{key:"__touch__",value:function(t){if(t.preventDefault(),this.startModel||this.drawStartPoint(t,this.getXYofEvt(t)),this.__isMoved__(t,this.getXYofEvt(t),this.downPos)){if(this.curDrawCircle)return this.moveFun=this.moveDrawCircle,void(this.upFun=this.upDrawCircle);this.moveFun=this.moveDrawLine,this.upFun=this.upDrawLine}else 1==this.downTimes?(this.moveFun=this.moveDrawCircle,this.upFun=this.upDrawCircle,this.curDrawCircle=!0):(this.moveFun=this.moveDrawLine,this.upFun=this.upDrawLine,this.curDrawCircle=!1);this.downTimes++}},{key:"moveFindElements",value:function(t,e){var n=this;this.match.matchStartPoint(t,e,{existPoint:function(t){n.willManager.setElementWillPointOn([t])},intersection:function(t){n.willManager.setElementWillPointOn(t.parents),n.assistManager.setPoint(t.pos)},pointOnElement:function(t){n.assistManager.setPoint(t.pos),n.assistManager.setMsgEle(e,g[t.type]),n.willManager.setElementWillPointOn(t.parents)},hfPoint:function(t){n.assistManager.setPoint(t.pos),n.willManager.setElementWillPointOn(t.parents)},freePoint:function(){}})}},{key:"moveDrawLine",value:function(t,e){if(this.__isMoved__(t,e,this.downPos)){this.isMoved=!0;var n=this,i=this.startPos,r=e;this.match.matchEndPointForLine(t,e,this.startPos,this.startModel,{existPoint:function(t){n.willManager.setElementWillPointOn([t]),r=n.transGTS(t.output_Model),n.assistManager.setSegment(i,r)},intersection:function(t){r=t.pos,n.assistManager.setPoint(r),n.willManager.setElementWillPointOn(t.parents),n.assistManager.setSegment(i,r)},pointOnElement:function(t){r=t.pos,n.assistManager.setPoint(r),n.assistManager.setMsgEle(d.midPoint(i,r),g[t.type]),n.willManager.setElementWillPointOn(t.parents),n.assistManager.setSegment(i,r)},hfPoint:function(t){r=t.pos,n.assistManager.setPoint(r),n.willManager.setElementWillPointOn(t.parents),n.assistManager.setSegment(i,r)},paraVAndEquelPoint:function(t){r=t.pos,n.assistManager.setPoint(r),n.assistManager.setMsgEle(d.midPoint(i,r),g[t.type]),n.willManager.setElementWillPointOn(t.parents),n.assistManager.setSegment(i,r)},tangentLine:function(t){n.assistManager.setMsgEle(d.midPoint(i,r),g[t.type]),n.willManager.setElementWillPointOn(t.parents),n.assistManager.setStraight(i,r)},freePoint:function(){n.assistManager.setSegment(i,r)}})}}},{key:"moveDrawCircle",value:function(t,e){if(this.__isMoved__(t,e,this.downPos)){this.isMoved=!0;var n=this,i=this.startPos,r=e;this.match.matchEndPointForCircle(t,e,this.startPos,this.startModel,{existPoint:function(t){n.willManager.setElementWillPointOn([t]),r=n.transGTS(t.output_Model)},intersection:function(t){n.willManager.setElementWillPointOn(t.parents),n.assistManager.setPoint(t.pos),r=t.pos},tangentCircle:function(t){n.assistManager.setMsgEle(d.midPoint(n.startPos,e),g[t.type]),n.willManager.setElementWillPointOn(t.parents)},pointOnElement:function(t){r=t.pos,n.assistManager.setPoint(r),n.assistManager.setMsgEle(d.midPoint(i,r),g[t.type]),n.willManager.setElementWillPointOn(t.parents)},hfPoint:function(t){r=t.pos,n.assistManager.setPoint(r),n.willManager.setElementWillPointOn(t.parents)},freePoint:function(){}}),this.assistManager.setCircle(i,r)}}},{key:"__move__",value:function(t){t.preventDefault(),this.clearStatus(),this.moveFun(t,this.getXYofEvt(t))}},{key:"upFindElements",value:function(t){}},{key:"upDrawLine",value:function(t,e){var n=this;this.match.matchEndPointForLine(t,e,this.startPos,this.startModel,{existPoint:function(t){n.drawLine(t.get("id"))},intersection:function(t){n.drawLine(n.drawPoint(t))},pointOnElement:function(t){n.drawLine(n.drawPoint(t))},hfPoint:function(t){n.drawLine(n.drawPoint(t))},paraVAndEquelPoint:function(t){n.drawLine(n.drawPoint(t))},tangentLine:function(t){var e=t.parents;n.addMatchElement(n.undoRedo.constructByJSON3({type:"Line",def:{type:"TangentLine",parents:x(e),attr:{index:t.index}}})),n._endDrawing()},freePoint:function(){n.drawLine(n.drawPoint({type:"freePoint",pos:e}))}})}},{key:"upDrawCircle",value:function(t,e){var n=this;this.match.matchEndPointForCircle(t,e,this.startPos,this.startModel,{existPoint:function(t){n.drawCilcle(t.get("id"))},intersection:function(t){n.drawCilcle(n.drawPoint(t))},tangentCircle:function(t){n.addMatchElement(n.undoRedo.constructByJSON3({type:"Circle",def:{type:"TangentCircle",parents:x(t.parents)}})),n._endDrawing()},pointOnElement:function(t){n.drawCilcle(n.drawPoint(t))},hfPoint:function(t){n.drawCilcle(n.drawPoint(t))},freePoint:function(){n.drawCilcle(n.drawPoint({type:"freePoint",pos:e}))}})}},{key:"__up__",value:function(t){t.preventDefault();var e=this.getXYofEvt(t);this.__isMoved__(t,e,this.downPos)&&this.upFun(t,e),this.clearStatus()}},{key:"addMatchElement",value:function(t){t&&this.match.addNewElement(this.elementsRepos.get(t)),this.clearStatus()}},{key:"drawPoint",value:function(t){var e=m[t.type].call(this,t);return this._isNewMacro=!1,this.addMatchElement(e),e}},{key:"drawLine",value:function(t){if(t&&this.startId!=t){var e=this.undoRedo.constructByJSON3({type:"Line",def:{type:"Segment",parents:[this.startId,t]}},this._isNewMacro);this.addMatchElement(e)}this._endDrawing()}},{key:"drawCilcle",value:function(t){if(t&&this.startId!=t){var e=this.undoRedo.constructByJSON3({type:"Circle",def:{type:"2PointsCircle",parents:[this.startId,t]}},this._isNewMacro);this.addMatchElement(e)}this._endDrawing()}}]),n}(f);t.exports=P},function(t,e,n){"use strict";n(48),n(82);var i=n(399).getTangentPointsSets,r=n(395).getIntersectionSets,o=n(396).getIntersectionSets,s=n(397).getIntersectionSets,a=npGeo,u=a.Vector2,c=a.Utils.isZero,l=function(t){this.elementsRepos=t.elementsRepos,this.distinguishElements=t.distinguishElements,this.findElements=t.findElements,this.conicModels=[],this.lineModels=[],this.segmentModels=[],this.pointModels=[],this.paper=t.paper};l.prototype={transSTG:function(t){return this.paper.transSTG(t)},transGTS:function(t){return this.paper.transGTS(t)},getAllElementsByType:function(){this.conicModels=this.findElements.getElements((function(t){return t.output_Model.isConic||t.output_Model.isCircle})),this.conicModels.reverse(),this.lineModels=this.findElements.getElements((function(t){return t.output_Model.isLine})),this.lineModels[0]&&2==this.lineModels[0].get("id")||this.lineModels.unshift(this.elementsRepos.get(2)),this.lineModels[1]&&3==this.lineModels[1].get("id")||this.lineModels.splice(1,null,this.elementsRepos.get(3)),this.lineModels.reverse(),this.segmentModels=this.findElements.getElements((function(t){return t.output_Model.isSegment})),this.segmentModels.reverse(),this.pointModels=this.findElements.getElements((function(t){return t.output_Model.isPoint})),this.pointModels.reverse()},addNewElement:function(t){return t.output_Model.isPoint?this.pointModels.unshift(t):t.output_Model.isLine?(this.lineModels.unshift(t),void(t.output_Model.isSegment&&this.segmentModels.unshift(t))):t.output_Model.isCircle?this.conicModels.unshift(t):void 0},matchStartPoint:function(t,e,n){var i=this.findElements.findElementsByPos(e,t);i.sort((function(t,e){return e.get("id")-t.get("id")})),this.matchExistPoint(i,n)||this.matchIntersectionPoint(i,n,e)||this.matchPointOnElementStart(e,n,i)||n.freePoint()},matchEndPointForLine:function(t,e,n,i,r){var o=this.findElements.findElementsByPos(e,t);o.sort((function(t,e){return e.get("id")-t.get("id")})),this.startModel=i,this.matchExistPoint(o,r)||this.matchIntersectionPoint(o,r,e)||this.matchPointOnElement(e,r,o)||this.matchParaVertical(e,r)||this.matchEquel(e,r)||this.matchTangentLine(e,r)||r.freePoint()},matchEndPointForCircle:function(t,e,n,i,r){var o=this.findElements.findElementsByPos(e,t);o.sort((function(t,e){return e.get("id")-t.get("id")})),this.startModel=i,this.matchExistPoint(o,r)||this.matchIntersectionPoint(o,r,e)||this.matchTangentPosCircle(e,r,n)||this.matchPointOnElementStart(e,r,o)||r.freePoint()},matchExistPoint:function(t,e){var n=this.distinguishElements.getPoint(t);return!!n&&(e.existPoint(n),!0)},matchIntersectionPoint:function(t,e,n){var i=this.distinguishElements.getIntersectionPoint(t,n);return!!i&&(e.intersection(i),!0)},matchMidPos:function(t,e){for(var n,i=0;n=t[i];i++)if(n.output_Model.isSegment){var r=n.output_Model.sp,o=n.output_Model.ep,s=this.transGTS(u.midPoint(r,o));if(u.isEqual(e,s,10))return{type:"midPoint",parents:[n],pos:s}}return null},matchTangentPosCircle:function(t,e,n){for(var i,r=this.startModel,o=0;i=this.lineModels[o];o++){var s=i.output_Model.foot(r.output_Model),a=this.transGTS(s);if(c(n.distanceTo(t)-a.distanceTo(n),10))return e.tangentCircle({type:"circle",parents:[r,i],index:o}),!0}return!1},matchFootPoint:function(t,e){for(var n,i=this.startModel,r=0;n=t[r];r++)if(n.output_Model.isLine){var o=n.output_Model.foot(i.output_Model),s=this.transGTS(o);if(u.isEqual(s,e,10))return{type:"footPoint",parents:[i,n],index:r,pos:s}}return null},matchTangentPoint:function(t,e){for(var n,r,o,s=this.startModel,a=0;o=t[a];a++)if(r=i(s,o))for(var c=r.getTangentPoints(),l=0;l<c.length;l++)if(n=this.transGTS(c[l]),u.isEqual(n,e,10))return{type:"tangentP",parents:[s,o],pos:n,index:l};return null},matchParaVertical:function(t,e){for(var n,i,r=this.startModel,o=r.output_Model,s=this.transSTG(t),a="paraLine",c=u.createByPoints(o,s),l=0;i=this.lineModels[l];l++){var f=i.output_Model.toVector(),h=c.cross(f);if(h>-.5&&h<.5){if(i.output_Model.isSegment){var p=i.output_Model.sp,d=i.output_Model.ep,y=this.transGTS({x:p.x-d.x+o.x,y:p.y-d.y+o.y});if(u.isEqual(y,t,10))return e.paraVAndEquelPoint({type:"paraEqual",parents:[r,i],index:0,pos:y}),!0;if(y=this.transGTS({x:o.x-p.x+d.x,y:o.y-p.y+d.y}),u.isEqual(y,t,10))return e.paraVAndEquelPoint({type:"paraEqual",parents:[r,i],index:1,pos:y}),!0}!n&&(n=i)}var v=c.dot(f);if(v>-.5&&v<.5){if(i.output_Model.isSegment){p=i.output_Model.sp,d=i.output_Model.ep,y=this.transGTS({x:o.x+p.y-d.y,y:o.y-p.x+d.x});if(u.isEqual(y,t,10))return e.paraVAndEquelPoint({type:"vEqual",parents:[r,i],index:0,pos:y}),!0;if(y=this.transGTS({x:o.x-p.y+d.y,y:o.y+p.x-d.x}),u.isEqual(y,t,10))return e.paraVAndEquelPoint({type:"vEqual",parents:[r,i],index:1,pos:y}),!0}!n&&(n=i)&&(a="verticalLine")}}return!!n&&(e.paraVAndEquelPoint({type:a,parents:[r,n],pos:t}),!0)},matchParaInter:function(t,e){for(var n,i=this.startModel,r=i.output_Model,s=this.transSTG(e),a=u.createByPoints(r,s),c=0;n=this.lineModels[c];c++){var l=n.output_Model.toVector(),f=a.cross(l);if(f>-.5&&f<.5)for(var h,p=0;h=t[p];p++){var d=o(i,n,h);if(d){var y=d.getIntersection();if(y instanceof Array)for(var v=0;v<y.length;v++){var _=this.transGTS(y[v]);if(u.isEqual(_,e,10))return{type:"intersectionP",parents:d.inputs,index:v,pos:_}}else{_=this.transGTS(y);if(u.isEqual(_,e,10))return{type:"intersectionP",parents:d.inputs,index:0,pos:_}}}}}return null},matchVerticalInter:function(t,e){for(var n,i=this.startModel,r=i.output_Model,o=this.transSTG(e),a=u.createByPoints(r,o),c=0;n=this.lineModels[c];c++){var l=n.output_Model.toVector(),f=a.dot(l);if(f>-.5&&f<.5)for(var h,p=0;h=t[p];p++){var d=s(i,n,h);if(d){var y=d.getIntersection();if(y instanceof Array)for(var v=0;v<y.length;v++){var _=this.transGTS(y[v]);if(u.isEqual(_,e,10))return{type:"intersectionV",parents:d.inputs,index:v,pos:_}}else{_=this.transGTS(y);if(u.isEqual(_,e,10))return{type:"intersectionV",parents:d.inputs,index:0,pos:_}}}}}return null},matchPassPointInter:function(t,e){for(var n,i=this.startModel,o=0;n=this.pointModels[o];o++)for(var s,a=0;s=t[a];a++){var c=r(i,n,s);if(c){var l=c.getIntersection();if(l instanceof Array)for(var f=0;f<l.length;f++){var h=this.transGTS(l[f]);if(u.isEqual(h,e,10))return{type:"intersectPoint",parents:c.inputs,index:f,pos:h}}else{h=this.transGTS(l);if(u.isEqual(h,e,10))return{type:"intersectPoint",parents:c.inputs,index:0,pos:h}}}}},matchEquel:function(t,e){for(var n,i,r=this.startModel,o=r.output_Model,s=this.transSTG(t),a=o.distanceTo(s),u=0;i=this.segmentModels[u];u++)if((n=a-i.output_Model.length)>-.2&&n<.2)return e.paraVAndEquelPoint({type:"equal",parents:[r,i],pos:t}),!0;return!1},matchTangentLine:function(t,e){for(var n,r,o=this.startModel,s=this.transSTG(t),a=0;r=this.conicModels[a];a++)if(n=i(o,r))for(var c=n.getTangent(),l=0;l<c.length;l++){var f=this.transGTS(c[l].foot(s));if(u.isEqual(f,t,10))return e.tangentLine({type:"tangentL",parents:n.inputs,index:l}),!0}return!1},matchPointOnElement:function(t,e,n){var i=this.distinguishElements.getOnLines(n);if(!i)return!1;var r=this.matchMidPos(i,t)||this.matchFootPoint(i,t)||this.matchTangentPoint(i,t)||this.matchParaInter(i,t)||this.matchVerticalInter(i,t)||this.matchPassPointInter(i,t);if(r)e.pointOnElement(r);else{var o=i[0],s=o.output_Model.valueOn(this.transSTG(t));e.hfPoint({type:"hfPoint",parents:[o],pos:this.transGTS(o.output_Model.pointOn(s)),value:s})}return!0},matchPointOnElementStart:function(t,e,n){var i=this.distinguishElements.getOnLines(n);if(!i)return!1;var r=this.matchMidPos(i,t);if(r)e.pointOnElement(r);else{var o=i[0],s=o.output_Model.valueOn(this.transSTG(t));e.hfPoint({type:"hfPoint",parents:[o],pos:this.transGTS(o.output_Model.pointOn(s)),value:s})}return!0}},t.exports=l},function(t,e,n){"use strict";n(82),n(48),n(3),n(22),n(21),n(70),n(8);var i=n(414),r=n(635),o=window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;t.exports=i.extend({initialize:function(t,e,n,i,r){var o=this;this.axisTransformer=e.axisTransformer,this.paper=e,this.environmentConfig=n,this.beforeLoading=i,this.paperView=r,this.el=document.createElement("div"),this.$el=$(this.el).css("position","relative"),this.animationFrameFlag=!0,this.listenTo(this.collection,"add",this.onAdd),this.listenTo(this.collection,"remove",this.onRemove),this.listenTo(this.collection,"reset",this.onReset),this.listenTo(this.collection,"update",(function(){o.element_views.sort((function(t,e){return t.model.get("id")-e.model.get("id")}));for(var t,e={},n=0;t=o.element_views[n];n++)e[t.model.get("id")]=t;o.element_map=e})),this.environmentConfig.addEventListener("EnvironmentConfigChange",(function(){for(var t,e=0;t=o.element_views[e];e++)t.setDirty&&t.setDirty(!0)})),this.element_views=[],this.element_map={},this.reRender(),this.audioViews=[]},render:function(t){for(var e,n=0;e=this.element_views[n];n++)e.model.canBeDelete()&&e.forceRender(t),e.geoNeedUpdate=!0;return this.el},reRender:function(){for(var t,e=0;t=this.element_views[e];e++)t.onRender();this.animationFrameFlag&&o(this.reRender.bind(this))},addGeoView:function(t){if(!t.output_Model.isGeometry)return null;var e=new r({model:t},this.axisTransformer,this.paper,this.environmentConfig,this.$el);return this.$el.prepend(e.div_el),e},onAdd:function(t){var e=this.addGeoView(t)||this.addAssistView(t);e&&(t.elementView=e,this.element_views.push(e),this.element_map[t.get("id")]=e,e.onRender(t))},onRemove:function(t){for(var e,n=0;e=this.element_views[n];n++)if(e.model==t){e.$el.remove(),this.element_views.splice(n,1),delete this.element_map[t.get("id")];break}},onReset:function(){this.element_map={},this.element_views.forEach((function(t){return t.$div_el.remove()})),this.element_views.splice(0)},findNameLabel:function(t,e){var n=this.element_views.find((function(e){return e.findNameLabel&&e.findNameLabel(t)}));if(n)return n.model},selectByRect:function(t,e){return this.element_views.filter((function(n){return n.model.isInRect&&n.model.isInRect(t,e)})).map((function(t){return t.model}))},toggleStatus:function(t){if("construct"!==t)for(n=4;e=this.element_views[n];n++)e.div_el.parentNode&&e.div_el.parentNode.removeChild(e.div_el);else for(var e,n=4;e=this.element_views[n];n++)this.$el.append(e.div_el)},appendById:function(t){var e=this.getViewById(t);e&&e.append()},detachById:function(t){var e=this.getViewById(t);e&&e.detach()}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(65),n(66),n(106),n(131);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(197),f=n(217).viewStyle,h=n(160),p=n(146).isPc;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,l.action))._totalStep=1,s.div_el.style.paddingRight="20px",s.$el.on("mousedown touchstart","."+l.btn,(function(t){t.currentTarget.blur(),s.model.play(),t.preventDefault(),t.stopPropagation()})),s}return(0,o.default)(n,[{key:"__renderEl__",value:function(){this.$primaryBtn=this.__createElement__("div",l.btn,'<div class="'+l.text+'"></div><div class="'+l.progress+'"></div>'),this.$imageBtn=this.__createElement__("div",l.btn+" "+l["image-btn"]),this.$progress=this.$primaryBtn.querySelector("."+l.progress)}},{key:"__addEvents__",value:function(){var t=this;this.displayModel.on("change:picPath",(function(e){return t.onImageUrlChange(e)})),this.displayModel.on("change:btnStyle",(function(e){return t.onBtnStyleChange(e)})),this.displayModel.on("change:imgWidth",(function(e){return t.onImageSizeChange(e)})),this.displayModel.on("change:imgHeight",(function(e){return t.onImageSizeChange(e)})),this.displayModel.on("change:borderRadius",(function(e){return t.onBorderRadius(e)})),this.displayModel.fontModel.on("change:size",(function(e){return t.onSizeChange(e)})),this.displayModel.fontModel.on("change:color",(function(e){return t.onFontColorChange(e)})),this.displayModel.fontModel.on("change:opacity",(function(e){return t.onFontColorChange(e)})),this.onImageUrlChange(this.displayModel),this.onBtnStyleChange(this.displayModel),this.onImageSizeChange(this.displayModel),this.onBorderRadius(this.displayModel),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel),this.onOutputChange(this.model)}},{key:"_selectedByTarget",value:function(t){return p?!this.$primaryBtn.contains(t)&&(t!=this.$imageBtn&&!(this.div_el!==t&&!this.div_el.contains(t))):this.div_el.contains(t)}},{key:"onOutputChange",value:function(t){var e=t.output_Model;this.onPositionChange(e),this.onDescriptionChange(e),this.renderProgress(e)}},{key:"renderProgress",value:function(t){for(var e=t.totalStep,n=t.curStep,i="",r=0;r<e;r++)i+='<span style="background:#'+(r==n?"4efd03":"fff")+'"></span>';this.$progress.innerHTML=i,e<=1?this.__detach__(this.$progress):this.$primaryBtn.appendChild(this.$progress)}},{key:"onDescriptionChange",value:function(t){var e=t.description||"";try{e=katex.renderToString(e)}catch(t){}this.$primaryBtn.firstChild.innerHTML=e}},{key:"onBtnStyleChange",value:function(t){if(1==t.get("btnStyle"))return this.el.appendChild(this.$imageBtn),void this.__detach__(this.$primaryBtn);this.__detach__(this.$imageBtn),this.el.appendChild(this.$primaryBtn)}},{key:"onImageSizeChange",value:function(t){this.$imageBtn.style.width=t.get("imgWidth")+"px",this.$imageBtn.style.height=t.get("imgHeight")+"px"}},{key:"onImageUrlChange",value:function(t){var e=t.get("picPath");e.includes("courseImages")&&!e.includes("netpad")&&(e="".concat("https://www.netpad.net.cn").concat(e)),this.$imageBtn.style.backgroundImage="url("+e+")"}},{key:"onBorderRadius",value:function(t){this.$primaryBtn.style.borderRadius=t.get("borderRadius")+"px",this.$imageBtn.style.borderRadius=t.get("borderRadius")+"px"}},{key:"onFontColorChange",value:function(t){this.$primaryBtn.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.$primaryBtn.style.fontSize=t.get("size")+"px"}},{key:"onStrokeWChange",value:function(t){this.$primaryBtn.style.borderWidth=t.get("width")+"px",this.$imageBtn.style.borderWidth=t.get("width")+"px"}},{key:"onStrokeSChange",value:function(t){this.$primaryBtn.style.borderStyle=f[t.get("style")],this.$imageBtn.style.borderStyle=f[t.get("style")]}},{key:"onStrokeCChange",value:function(t){var e=t.toRgbaString();this.$primaryBtn.style.borderColor=e,this.$imageBtn.style.borderColor=e}},{key:"onFillChange",value:function(t){this.$primaryBtn.style.backgroundColor=t.toRgbaString(),this.$imageBtn.style.backgroundColor=t.toRgbaString()}}]),n}(h)},function(t,e,n){(e=n(97)(!1)).push([t.i,'.assist-view--aGGJG {\n    position: absolute;\n    -ms-touch-action: none;\n    padding: 2px;\n}\n\n.btn--2cgyA {\n    padding: 6px 12px;\n    line-height: 1;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    border: 0;\n    overflow: hidden;\n}\n\n.btn--2cgyA .katex--3kp-z {\n    pointer-events: none;\n}\n\n.btn--2cgyA:hover {\n    box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);\n}\n\n.btn--2cgyA:active {\n    box-shadow: inset 0 -3px 5px rgba(0, 0, 0, .125);\n    transform: translateY(1px);\n}\n\n.animation--1vkQR {\n    display: flex;\n    border-radius: 4px;\n    overflow: hidden;\n}\n\n.animation--1vkQR>.btn--2cgyA {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n}\n\n.animation--1vkQR>.btn--2cgyA:not(:first-child) {\n    border-left: 1px solid transparent;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.action--3p_d7 {\n    display: block;\n    overflow: hidden;\n    position: relative;\n}\n\n.action--3p_d7>.btn--2cgyA {\n    padding: 0;\n    border-radius: 4px;\n}\n\n.action--3p_d7>.image-btn--3DR-p {\n    padding: 6px 12px;\n    border-radius: 50%;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\n}\n\n.action--3p_d7>.btn--2cgyA .text--1fGf- {\n    padding: 6px 12px;\n    pointer-events: none;\n}\n\n.action--3p_d7>.btn--2cgyA>.progress--7F82c {\n    width: 100%;\n    height: 4px;\n    display: flex;\n}\n\n.action--3p_d7>.btn--2cgyA>.progress--7F82c>span {\n    flex: 1;\n    width: 0;\n    height: 100%;\n    border-right: 1px solid #286090;\n    border-top: 1px solid #286090;\n    background: #fff;\n}\n\n.action--3p_d7>.btn--2cgyA>.progress--7F82c>span:last-child {\n    border-right: 0;\n}\n\n.audio--drJvc {\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n.audio--drJvc .icon--vNqXM {\n    cursor: pointer;\n    line-height: 1;\n}\n\n.variable-ruler--UKktj {\n    display: block;\n    line-height: 1;\n}\n\n.variable-ruler--UKktj .icon--vNqXM {\n    cursor: pointer;\n    margin-right: 6px;\n    line-height: 1;\n}\n\n.variable-ruler--UKktj .value--pB0Jk {\n    font-family: Times New Roman;\n    display: inline-block;\n    border: 1px solid #f5f5f5;\n    cursor: pointer;\n    min-width: 50px;\n    margin-left: 4px;\n    padding: 2px 20px 2px 1px;\n    outline: none;\n    user-select: text;\n    -webkit-user-select: text;\n}\n\n.variable-ruler--UKktj .range--1yLn3 {\n    display: block;\n    position: relative;\n    height: 20px;\n    width: 100%;\n}\n\n.variable-ruler--UKktj .range--1yLn3:focus {\n    border: 0;\n    outline: 0;\n}\n\n.variable-ruler--UKktj .range--1yLn3>.slider-track--3vZOc,\n.variable-ruler--UKktj .range--1yLn3>.slider-thumb-track--2tqUK {\n    display: block;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    margin-top: -3px;\n    height: 6px;\n    width: 100%;\n    border: 1px solid #ccc;\n    cursor: pointer;\n}\n\n.variable-ruler--UKktj .range--1yLn3>.slider-thumb-track--2tqUK {\n    left: 8px;\n    width: calc(100% - 16px);\n    border: 0;\n}\n\n.phone--QTTuE .range--1yLn3>.slider-thumb-track--2tqUK,\n.pad--1scsj .range--1yLn3>.slider-thumb-track--2tqUK {\n    left: 12px;\n    width: calc(100% - 24px);\n}\n\n.variable-ruler--UKktj .slider-thumb-track--2tqUK>.slider-thumb--1Gn5V {\n    height: 20px;\n    width: 20px;\n    border-radius: 50%;\n    background-color: #fff;\n    cursor: pointer;\n    border: 1px solid #ddd;\n    -webkit-box-shadow: 1px 1px 3px rgb(0 0 0 / 40%);\n    box-shadow: 1px 1px 3px rgb(0 0 0 / 40%);\n    position: absolute;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.phone--QTTuE .slider-thumb-track--2tqUK>.slider-thumb--1Gn5V,\n.pad--1scsj .slider-thumb-track--2tqUK>.slider-thumb--1Gn5V {\n    height: 24px;\n    width: 24px;\n}\n\n.phone--QTTuE .slider-thumb-track--2tqUK>.slider-thumb--1Gn5V::before,\n.pad--1scsj .slider-thumb-track--2tqUK>.slider-thumb--1Gn5V::before {\n    content: "";\n    position: absolute;\n    top: -9px;\n    left: -9px;\n    height: 40px;\n    width: 40px;\n    display: block;\n    border-radius: 50%;\n}\n\n.picture--11prc,\n.picture--11prc img {\n    width: 100%;\n    height: 100%;\n}\n\n.html-text--2T03l {\n    padding: 0;\n    overflow: hidden;\n    word-wrap: break-word;\n    user-select: none;\n    pointer-events: none;\n}\n\n.html-text--2T03l a {\n    pointer-events: auto;\n    text-decoration: none;\n    color: #337ab7;\n}\n\n.html-text--2T03l a:hover,\n.html-text--2T03l a:focus {\n    color: #23527c;\n    text-decoration: underline;\n}',""]),e.locals={"assist-view":"assist-view--aGGJG",btn:"btn--2cgyA",katex:"katex--3kp-z",animation:"animation--1vkQR",action:"action--3p_d7","image-btn":"image-btn--3DR-p",text:"text--1fGf-",progress:"progress--7F82c",audio:"audio--drJvc",icon:"icon--vNqXM","variable-ruler":"variable-ruler--UKktj",value:"value--pB0Jk",range:"range--1yLn3","slider-track":"slider-track--3vZOc","slider-thumb-track":"slider-thumb-track--2tqUK",phone:"phone--QTTuE",pad:"pad--1scsj","slider-thumb":"slider-thumb--1Gn5V",picture:"picture--11prc","html-text":"html-text--2T03l"},t.exports=e},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(197),f=n(160),h=n(146).isPc;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,l.animation)).div_el.style.paddingRight="20px",s.$el.on("mousedown touchstart","."+l.btn,(function(t){s.togglePlay(t)})),s}return(0,o.default)(n,[{key:"__renderEl__",value:function(){this.$primaryBtn=this.__createElement__("div",l.btn,'<svg class="font-icon" aria-hidden="true"><use xlink:href="#netpad-play"></use></svg>'),this.$antiBtn=this.__createElement__("div",l.btn,'<svg class="font-icon" aria-hidden="true"><use xlink:href="#netpad-antiplay"></use></svg>'),this.$primaryBtn.setAttribute("name","play"),this.$antiBtn.setAttribute("name","antiPlay"),this.$primarySVG=this.$primaryBtn.querySelector("use"),this.$antiSVG=this.$antiBtn.querySelector("use"),this.$text=this.__createElement__("span")}},{key:"__addEvents__",value:function(){var t=this;this.model.on("change:name",(function(){t.onNameChange()})),this.displayModel.on("change:animationType",(function(e){t.onAnimationType(e)})),this.displayModel.on("change:borderRadius",(function(e){t.onBorderRadius(e)})),this.displayModel.fontModel.on("change:size",(function(e){t.onSizeChange(e)})),this.displayModel.fontModel.on("change",(function(e){t.onFontColorChange(e)})),this.displayModel.iconModel.on("change",(function(e){t.onIconColorChange(e)})),this.onPlayChange(),this.onNameChange(),this.onAnimationType(this.displayModel),this.onBorderRadius(this.displayModel),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel),this.onIconColorChange(this.displayModel.iconModel)}},{key:"_selectedByTarget",value:function(t){return h?this.__selectedByTargetPC__(t):this.div_el.contains(t)}},{key:"__selectedByTargetPC__",value:function(t){return!this.$primaryBtn.contains(t)&&(!this.$antiBtn.contains(t)&&!(this.div_el!==t&&!this.div_el.contains(t)))}},{key:"onNameChange",value:function(){var t=this.model.get("name");try{t=katex.renderToString(t)}catch(t){}this.$text.innerHTML=t}},{key:"onOutputChange",value:function(t){var e=t.output_Model;this.onPositionChange(e),this.onPlayChange()}},{key:"onPlayChange",value:function(){var t=this.model.output_Model.playStatus;t?1==t?this.play():-1==t?this.antiPlay():-2==t?this.pause():2==t&&this.continuePlay():this.stop()}},{key:"play",value:function(){this.$primaryBtn.setAttribute("name","forwardPause"),this.$primarySVG.href.baseVal="#netpad-pause",this.$antiBtn.setAttribute("name","stop"),this.$antiSVG.href.baseVal="#netpad-stop"}},{key:"continuePlay",value:function(){this.$primaryBtn.setAttribute("name","forwardContinue"),this.$primarySVG.href.baseVal="#netpad-play2",this.$antiBtn.setAttribute("name","stop"),this.$antiSVG.href.baseVal="#netpad-stop"}},{key:"pause",value:function(){this.$primaryBtn.setAttribute("name","stop"),this.$primarySVG.href.baseVal="#netpad-stop",this.$antiBtn.setAttribute("name","antiContinue"),this.$antiSVG.href.baseVal="#netpad-antiplay2"}},{key:"stop",value:function(){this.$primaryBtn.setAttribute("name","play"),this.$primarySVG.href.baseVal="#netpad-play",this.$antiBtn.setAttribute("name","antiPlay"),this.$antiSVG.href.baseVal="#netpad-antiplay"}},{key:"antiPlay",value:function(){this.$primaryBtn.setAttribute("name","stop"),this.$primarySVG.href.baseVal="#netpad-stop",this.$antiBtn.setAttribute("name","antiPause"),this.$antiSVG.href.baseVal="#netpad-pause"}},{key:"togglePlay",value:function(t){t.preventDefault(),this.model.constraint[t.currentTarget.getAttribute("name")](!0)}},{key:"onAnimationType",value:function(t){var e=t.get("animationType");if(this.__detach__(this.$primaryBtn),this.__detach__(this.$antiBtn),1==e)return this.$antiBtn.children[0]!==this.$text&&this.$antiBtn.insertBefore(this.$text,this.$antiBtn.children[0]),void this.el.appendChild(this.$antiBtn);this.$primaryBtn.children[0]!==this.$text&&this.$primaryBtn.insertBefore(this.$text,this.$primaryBtn.children[0]),this.el.appendChild(this.$primaryBtn),2==e&&this.el.appendChild(this.$antiBtn)}},{key:"onBorderRadius",value:function(t){this.el.style.borderRadius=t.get("borderRadius")+"px"}},{key:"onIconColorChange",value:function(t){this.el.style.color=t.toRgbaString()}},{key:"onFontColorChange",value:function(t){this.$text.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.el.style.fontSize=t.get("size")+"px"}},{key:"onStrokeCChange",value:function(t){var e=t.toRgbaString();this.el.style.borderColor=e,this.$antiBtn.style.borderColor=e}},{key:"onFillChange",value:function(t){this.el.style.backgroundColor=t.toRgbaString()}}]),n}(f)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(160),f=n(197);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,f["html-text"]+" fr-element fr-view")).div_el.style.padding="0",s}return(0,o.default)(n,[{key:"_selectedByTarget",value:function(t){return this.div_el===t||!!this.div_el.contains(t)&&!("A"===t.nodeName||"A"===t.parentNode.nodeName||1===t.children.length&&"A"===t.children[0].nodeName)}},{key:"onOutputChange",value:function(t){var e=t.output_Model,n=e.textWidth;this.el.innerHTML=e.value,n<0&&(n=-n),this.div_el.style.width=n?n+"px":"",this.onPositionChange(t.output_Model)}}]),n}(l)},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(159),n(27);var r=i(n(5)),o=i(n(6)),s=i(n(7)),a=i(n(1)),u=i(n(2));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,s.default)(t);if(e){var r=(0,s.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,o.default)(this,n)}}var l=n(197),f=n(160),h=n(217).viewStyle,p=n(146).isPc,d={landscape:{pageX:"pageY",left:"top",width:"height"},portrait:{pageX:"pageX",left:"left",width:"width"}},y=function(){function t(e,n){var i=this;(0,a.default)(this,t),this.model=e,this.el=n,this.isDisabled=!1,this.$iconSVG=this.el.querySelector("use"),this.el.addEventListener("touchstart",(function(t){t.preventDefault(),i.onIconFun()})),this.el.addEventListener("click",(function(t){t.preventDefault(),i.onIconFun()})),this.onIsPlayChange()}return(0,u.default)(t,[{key:"selectedByTarget",value:function(t){return this.el.contains(t)}},{key:"onIconFun",value:function(){this.isDisabled||(0==this.model.output_Model.playStatus?this.model.play():this.model.stop())}},{key:"onIsPlayChange",value:function(){this.$iconSVG.href.baseVal=1==this.model.output_Model.playStatus?"#netpad-pause":"#netpad-play"}},{key:"outputChange",value:function(t){this.isDisabled=parseFloat(t.max)<=parseFloat(t.min),this.el.style.opacity=this.isDisabled?"0.5":"1",this.onIsPlayChange()}}]),t}(),v=function(){function t(e,n){var i=this;(0,a.default)(this,t),this.model=e,this.el=n,this.el.setAttribute("contenteditable","true"),this.el.addEventListener("blur",(function(){i.onSubmitVais()})),this.el.addEventListener("keydown",(function(t){t.stopPropagation(),13===t.keyCode&&(t.preventDefault(),i.el.blur())})),this.stopPropagation()}return(0,u.default)(t,[{key:"stopPropagation",value:function(){var t=this;["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(e){t.el.addEventListener(e,(function(t){t.stopPropagation()}))}))}},{key:"onSubmitVais",value:function(){var t=this.model.getValue(),e=this.el.innerHTML.trim();if(""===e||isNaN(e))return this.outputChange(t);var n=parseFloat(t.max),i=parseFloat(t.min),r=parseFloat(e);r<i?r=i:r>n&&(r=n),this.model.outVais.setValue(r)}},{key:"outputChange",value:function(t){this.el.innerHTML=parseFloat(t.val)}}]),t}(),_=function(){function t(e,n,i){(0,a.default)(this,t),this.paperView=e,this.model=n,this.el=i,this.isDisabled=!1,this.min=0,this.max=10,this.step=1,this.value=0,this.el.setAttribute("tabindex","-1"),this.percent=this.step/(this.max-this.min),this.$track=this.el.querySelector("."+l["slider-track"]),this.$thumbTrack=this.el.querySelector("."+l["slider-thumb-track"]),this.$thumb=this.el.querySelector("."+l["slider-thumb"]),this.__events__()}return(0,u.default)(t,[{key:"selectedByTarget",value:function(t){return this.el!==t&&this.el.contains(t)}},{key:"outputChange",value:function(t){var e=parseFloat(t.value),n=parseFloat(t.min),i=parseFloat(t.max),r=0;this.min=n,this.max=i,this.value=e,this.step=parseFloat(t.step),this.onMinMaxChange(),e>=i?r=100:e>n&&(r=(e-t.min)/(t.max-t.min)*100),this.$thumb.style.left=r+"%",this.percent=this.step/(this.max-this.min)}},{key:"onWidthChange",value:function(){this.el.style.width=this.model.displayModel.get("rulerWidth")+"px"}},{key:"__events__",value:function(){var t=this;this.model.displayModel.on("change:rulerWidth",(function(){t.onWidthChange()})),this.onWidthChange(),this.__mousedown__=this.__mousedown__.bind(this),this.__touchstart__=this.__touchstart__.bind(this),this.__move__=this.__move__.bind(this),this.__mouseup__=this.__mouseup__.bind(this),this.__touchend__=this.__touchend__.bind(this),this.el.addEventListener("mousedown",this.__mousedown__),this.el.addEventListener("touchstart",this.__touchstart__),this.el.addEventListener("mouseup",(function(e){e.target!==t.el&&t.el.focus()})),this.el.addEventListener("keydown",(function(e){var n=e.keyCode;return 39===n||38===n?(e.stopPropagation(),t.__add__()):37===n||40===n?(e.stopPropagation(),t.__minus__()):void 0}))}},{key:"__mousedown__",value:function(t){t.stopPropagation(),this.isDisabled||t.target===this.el||(this.__changeWanted__(t),t.target===this.$thumb&&(document.addEventListener("mousemove",this.__move__,!0),document.addEventListener("mouseup",this.__mouseup__,!0)))}},{key:"__touchstart__",value:function(t){t.preventDefault(),t.stopPropagation(),this.isDisabled||(this.__changeWanted__(t),t.target===this.$thumb&&(document.addEventListener("touchmove",this.__move__,!0),document.addEventListener("touchend",this.__touchend__,!0),this.el.removeEventListener("mousedown",this.__mousedown__)))}},{key:"__move__",value:function(t){this.__changeWanted__(t)}},{key:"__mouseup__",value:function(){document.removeEventListener("mousemove",this.__move__,!0),document.removeEventListener("mouseup",this.__mouseup__,!0)}},{key:"__touchend__",value:function(t){t.preventDefault(),document.removeEventListener("touchmove",this.__move__,!0),document.removeEventListener("touchend",this.__touchend__,!0),this.el.addEventListener("mousedown",this.__mousedown__)}},{key:"__add__",value:function(){this.__updateValue__(this.value+this.step)}},{key:"__minus__",value:function(){this.__updateValue__(this.value-this.step)}},{key:"__changeWanted__",value:function(t){t.preventDefault(),t.stopPropagation();var e=d[this.paperView.isLandscape?"landscape":"portrait"],n=void 0===t.pageX?t.changedTouches[0][e.pageX]:t[e.pageX],i=this.$thumbTrack.getBoundingClientRect(),r=Math.round((n-i[e.left])/i[e.width]/this.percent),o=this.min+r*this.step;this.__updateValue__(o)}},{key:"__updateValue__",value:function(t){t!==this.value&&(t<this.min&&(t=this.min),t>this.max&&(t=this.max),this.model.outVais.setValue(t))}},{key:"onMinMaxChange",value:function(){this.isDisabled=this.max<=this.min,this.el.style.opacity=this.isDisabled?"0.5":"1"}},{key:"onFillChange",value:function(t){this.$track.style.backgroundColor=t.toRgbaString()}}]),t}();t.exports=function(t){(0,r.default)(n,t);var e=c(n);function n(t,i,r,o){var s;return(0,a.default)(this,n),(s=e.call(this,t,i,r,l["variable-ruler"],o)).div_el.style.paddingRight="20px",s}return(0,u.default)(n,[{key:"__renderEl__",value:function(){this.icon=new y(this.model,this.__createElement__("span",l.icon,'<svg class="font-icon" aria-hidden="true"><use xlink:href="#netpad-play"></use></svg>')),this.$variable=this.__createElement__("span","",katex.renderToString(this.model.outputsData[0].name+" =")),this.input=new v(this.model,this.__createElement__("div",l.value)),this.range=new _(this.paperView,this.model,this.__createElement__("div",l.range,'<div class="'+l["slider-track"]+'"></div><div class="'+l["slider-thumb-track"]+'"><div class="'+l["slider-thumb"]+'"></div></div>'))}},{key:"__addEvents__",value:function(){var t=this;this.displayModel.on("change:showBtn",(function(e){t.onShowStyle(e)})),this.displayModel.on("change:showVariable",(function(e){t.onShowStyle(e)})),this.displayModel.on("change:showInput",(function(e){t.onShowStyle(e)})),this.displayModel.on("change:showRuler",(function(e){t.onShowStyle(e)})),this.displayModel.fontModel.on("change:size",(function(e){t.onSizeChange(e)})),this.displayModel.fontModel.on("change",(function(e){t.onFontColorChange(e)})),this.displayModel.iconModel.on("change",(function(e){t.onIconColorChange(e)})),this.model.on("OUTPUT_CHANGE",(function(){t.outputChange()})),this.onShowStyle(this.displayModel),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel),this.onIconColorChange(this.displayModel.iconModel),this.outputChange()}},{key:"outputChange",value:function(){var t=this.model.getValue();this.icon.outputChange(t),this.input.outputChange(t),this.range.outputChange(t)}},{key:"_selectedByTarget",value:function(t){return p?this.div_el.contains(t)&&!(this.icon.selectedByTarget(t)||this.input===t||this.range.selectedByTarget(t)):this.div_el.contains(t)}},{key:"onShowStyle",value:function(t){t.get("showBtn")?this.el.appendChild(this.icon.el):this.__detach__(this.icon.el),t.get("showVariable")?this.el.appendChild(this.$variable):this.__detach__(this.$variable),t.get("showInput")?this.el.appendChild(this.input.el):this.__detach__(this.input.el),t.get("showRuler")?this.el.appendChild(this.range.el):this.__detach__(this.range.el)}},{key:"onFontColorChange",value:function(t){this.el.style.color=t.toRgbaString()}},{key:"onIconColorChange",value:function(t){this.icon.el.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.el.style.fontSize=t.get("size")+"px"}},{key:"onStrokeWChange",value:function(t){this.input.el.style.borderWidth=t.get("width")+"px"}},{key:"onStrokeSChange",value:function(t){this.input.el.style.borderStyle=h[t.get("style")]}},{key:"onStrokeCChange",value:function(t){this.input.el.style.borderColor=t.toRgbaString()}},{key:"onFillChange",value:function(t){this.range.onFillChange(t)}}]),n}(f)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}n(216),n(75),n(49),n(27),n(65),n(66),n(185),n(16);var l=n(160),f=new RegExp(/\$\$.*?\$\$/g);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"__renderEl__",value:function(){this.el.innerHTML="<span></span><span></span><span></span><span></span>";var t=this.el.children;this.$variableName=t[0],this.$label=t[1],this.$value=t[2],this.$unit=t[3]}},{key:"__addEvents__",value:function(){var t=this;this.model.on("OUTPUT_CHANGE",(function(){return t._onRender()})),this.model.on("change:name",(function(){return t.onMeasureStyle(t.model)})),this.displayModel.on("change:measureStyle",(function(){return t.onMeasureStyle(t.model)})),this.displayModel.on("change:variableName",(function(e){return t._renderVariableName(e)})),this.displayModel.fontModel.on("change:size",(function(e){t.onSizeChange(e)})),this.displayModel.fontModel.on("change",(function(e){return t.onFontColorChange(e)})),this.onMeasureStyle(this.model),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel),this._onRender()}},{key:"_onRender",value:function(){return this._renderLabel(this.model),this._renderValue(this.model),this._renderUnit(this.model),this.el}},{key:"_renderValue",value:function(t){var e="?";try{e=katex.renderToString(t.getValue().val+"")}catch(t){}this.$value.innerHTML=e}},{key:"onMeasureStyle",value:function(t){this._renderVariableName(t),this._renderLabel(t)}},{key:"_renderVariableName",value:function(t){if(t.outputsData&&!(t.outputsData.length<1)){var e=t.displayModel.get("measureStyle");this.$variableName.innerHTML=0==e||5==e?katex.renderToString(t.outputsData[0].name+" \\colon "):""}}},{key:"_renderLabel",value:function(t){var e=t.displayModel.get("measureStyle"),n="";if(1!=e){var i=t.output_Model.description;if(0==e||3==e)n=i||"";else if(2==e)n=t.get("name")||"";else if(4==e||5==e){n=(t.get("name")||"")+(i||"")}try{n=katex.renderToString(n)}catch(t){var r=n.match(f),o="",s=0;if(r){for(var a,u=0;a=r[u];u++){s=n.indexOf(a),o+=n.substring(0,s),n=n.slice(s+a.length);try{o+=katex.renderToString(a.substring(2,a.length-2))}catch(t){o+=a.substring(2,a.length-2)}}n=o+=n}}this.$label.innerHTML=n}else this.$label.innerHTML=""}},{key:"_renderUnit",value:function(t){void 0!==t.getValue().unit&&1!=t.getValue().unit?this.$unit.innerHTML=katex.renderToString("\\degree"):this.$unit.innerHTML=""}},{key:"onFontColorChange",value:function(t){this.el.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.el.style.fontSize=t.get("size")+"px"}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20),n(121);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(160);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"__addEvents__",value:function(){var t=this;this.displayModel.fontModel.on("change:size",(function(e){t.onSizeChange(e)})),this.displayModel.fontModel.on("change",(function(e){t.onFontColorChange(e)})),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel)}},{key:"onOutputChange",value:function(t){this.onDescriptionChange(t.output_Model),this.onPositionChange(t.output_Model)}},{key:"onDescriptionChange",value:function(t){var e="".concat(t.funName,"(").concat(t.inVariables.join(","),") =  ").concat(t.expLatex);try{e=katex.renderToString(e)}catch(t){}this.el.innerHTML=e}},{key:"onFontColorChange",value:function(t){this.el.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.el.style.fontSize=t.get("size")+"px"}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(106),n(131);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(160),f=n(197),h=Math.min;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,f.picture)).div_el.style.padding="0",s}return(0,o.default)(n,[{key:"__renderEl__",value:function(){if(this.el.innerHTML='<img draggable="false">',this.$img=this.el.querySelector("img"),0==this.model.constraint.getAttr().imgHeight){var t=this;this.$img.onload=function(){if(t.$img.onload=null,0==t.model.constraint.getAttr().imgHeight){var e=h(1366,t.$img.naturalWidth),n=t.$img.naturalHeight*e/t.$img.naturalWidth;t.model._setConstraintAttr({imgWidth:e,imgHeight:n})}}}}},{key:"__addEvents__",value:function(){var t=this;this.paper.on("reRender",(function(){t.model.setOutputNeedUpdate()}))}},{key:"onOutputChange",value:function(t){var e=t.getValue(),n=!e.isUgly;if(n!=this._isExist)return this._isExist=n,void this.onStatusChange();if(n){var i=e.affine_obj;this.el.style.transform="matrix("+i.a1+","+i.a2+","+i.b1+","+i.b2+",0,0)",this.changeWH(e),this.changPic(e.picPath),this.onPositionChange(e)}}},{key:"changPic",value:function(t){t.includes("courseImages")&&!t.includes("netpad")&&(t="".concat("https://www.netpad.net.cn").concat(t)),this.$img.getAttribute("src")!=t&&(this.$img.src=t)}},{key:"changeWH",value:function(t){var e=t.imgWidth,n=t.imgHeight;e<0&&(e=-e),n<0&&(n=-n),this.div_el.style.width=e+"px",this.div_el.style.height=n+"px"}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(197),f=n(160),h=n(146).isPc;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a){var u;return(0,r.default)(this,n),(u=e.call(this,t,i,o,l.audio,s,a)).div_el.style.paddingRight="20px",u.$button.addEventListener("mousedown",(function(t){u.model.getValue().play?u.model.stop():u.model.play()})),u.$audio.addEventListener("pause",(function(){return u.model.stop()})),u}return(0,o.default)(n,[{key:"__renderEl__",value:function(){this.el.innerHTML='<span class="'.concat(l.icon,'">\n            <svg class="font-icon" aria-hidden="true"><use xlink:href="#netpad-play"></use></svg>\n            </span>\n            <span class="text"></span>'),this.$audio=this.beforeLoading.getAudioDOM(this.model.get("id"),this.model.displayModel.get("audioSrc")),this.$button=this.el.firstChild,this.$iconSVG=this.$button.querySelector("use"),this.$name=this.el.querySelector(".text")}},{key:"__addEvents__",value:function(){var t=this;this.model.on("change:name",(function(e){return t.updateName(e.get("name"))})),this.displayModel.on("change:audioSrc",(function(e){return t.udpateAudioSrc(e.get("audioSrc"))})),this.displayModel.on("change:audioPlay",(function(e){return t.udpateAudioPlay(e.get("audioPlay"))})),this.displayModel.fontModel.on("change",(function(e){return t.updateFontColor(e.toRgbaString())})),this.displayModel.iconModel.on("change",(function(e){return t.updateIconColor(e.toRgbaString())})),this.displayModel.fontModel.on("change:size",(function(e){return t.updateFontSize(e.get("size"))})),this.updateName(this.model.get("name")),this.udpateAudioSrc(this.displayModel.get("audioSrc")),this.udpateAudioPlay(this.displayModel.get("audioPlay")),this.updateFontColor(this.displayModel.fontModel.toRgbaString()),this.updateIconColor(this.displayModel.iconModel.toRgbaString()),this.updateFontSize(this.displayModel.fontModel.get("size"))}},{key:"onOutputChange",value:function(t){this.onPositionChange(t.output_Model),this.onPlay()}},{key:"_selectedByTarget",value:function(t){return(!h||t!=this.$button)&&this.div_el.contains(t)}},{key:"updateName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$name.innerHTML=t}},{key:"udpateAudioSrc",value:function(t){this.$audio.src!=t&&(this.$audio.src=t)}},{key:"udpateAudioPlay",value:function(t){"once"!==t?this.$audio.loop="loop":this.$audio.removeAttribute("loop")}},{key:"onPlay",value:function(){if(!this.model.getValue().play)return this.$iconSVG.href.baseVal="#netpad-play",void this.$audio.pause();this.$audio.paused&&(this.$iconSVG.href.baseVal="#netpad-pause",this.$audio.currentTime=0,this.$audio.play())}},{key:"updateFontColor",value:function(t){this.$name.style.color=t}},{key:"updateIconColor",value:function(t){this.el.style.color=t}},{key:"updateFontSize",value:function(t){this.el.style.fontSize=t+"px"}}]),n}(f)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(217),f=l.isInRect,h=l.rectSelectByPos,p=n(160);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o)).div_el.style.transform="translate(-50%,-50%)",s.el.style.pointerEvents="none",s}return(0,o.default)(n,[{key:"__addEvents__",value:function(){var t=this;this.paper.on("reRender",(function(){t.model.setOutputNeedUpdate()})),this.displayModel.fontModel.on("change:size",(function(e){t.onSizeChange(e)})),this.displayModel.fontModel.on("change:color",(function(e){t.onFontColorChange(e)})),this.displayModel.fontModel.on("change:opacity",(function(e){t.onFontColorChange(e)})),this.onSizeChange(this.displayModel.fontModel),this.onFontColorChange(this.displayModel.fontModel)}},{key:"setDirty",value:function(){this.model.setOutputNeedUpdate()}},{key:"onOutputChange",value:function(){var t=this.model.getValue(),e=!t.isUgly;if(e!=this._isExist)return this._isExist=e,void this.onStatusChange();this.onPositionChange(t),this.updateWidth(t.textWidth),this.el.innerHTML=t.value}},{key:"onFontColorChange",value:function(t){this.el.style.color=t.toRgbaString()}},{key:"onSizeChange",value:function(t){this.el.style.fontSize=t.get("size")+"px"}},{key:"updateWidth",value:function(t){t<0&&(t=-t),this.div_el.style.width=t?t+"px":""}},{key:"selectedByPos",value:function(t,e,n){if(!this.isRender())return!1;if(this._selectedByTarget(n))return!0;var i=this.model.output_Model.position,r=this.div_el.clientWidth,o=this.div_el.clientHeight;return h(t,i.left-r/2,i.top-o/2,r,o,e)}},{key:"isInRect",value:function(t,e){if(!this.isRender())return!1;var n=this.model.output_Model.position,i=this.div_el.clientWidth,r=this.div_el.clientHeight;return f(t,e,n.left-i/2,n.top-r/2,i,r)}}]),n}(p)},function(t,e,n){"use strict";n(130);var i=n(415),r=n(416),o=n(636);t.exports=r.extend({initialize:function(t,e,n,r,o){this.initializeBase(n,o,t),this.axisTransformer=e,this.environmentConfig=r,this.div_el=document.createElement("div"),this.$div_el=$(this.div_el).css("position","absolute").css("width","100%").css("pointer-events","none").css("-ms-touch-action","none"),this.listenTo(this.model,"change:zIndex",this.__onZIndexChange__),this.listenTo(this.model,"curAxisChange",this.__onAxisChange__),this.model.displayModel.fontModel&&this.listenTo(this.model.displayModel.fontModel,"change",this.__onFontChange__),this.model.nameModel&&(this.nameLabel_view=new i({model:this.model.nameModel},this.model,this.paper,this.$div_el)),this._replaceInfrastructureView()},selectedByTarget:function(t){return!!this.isRender(this.model)&&this.infrastructure_view.selectedByTarget(t)},selectedByPos:function(t,e,n){return!!this.isRender(this.model)&&this.infrastructure_view.selectedByPos(t,e,n)},isInRect:function(t,e){return!!this.isRender(this.model)&&this.infrastructure_view.isInRect(t,e)},__onZIndexChange__:function(t){this.$div_el.css("z-index",t.get("zIndex"))},_replaceInfrastructureView:function(){var t;this.infrastructure_view&&this.infrastructure_view.getTraceEl&&(t=this.infrastructure_view.getTraceEl(),this.infrastructure_view.destory()),this.infrastructure_view=o(this.model.output_Model,this.model.constraint,this.axisTransformer,this.paper,this.environmentConfig),t&&(this.infrastructure_view.setTraceEl(t),this.__onTrace__()),this.geoNeedUpdate=!0,this.displayNeedUpdate=!0,this.__onZIndexChange__(this.model),this.model.displayModel.fontModel&&this.__onFontChange__(this.model.displayModel.fontModel),this.$div_el.prepend(this.infrastructure_view.$el)},onStatusChange:function(){this._updateShow(),this.setDirty()},__onFontChange__:function(t){this.infrastructure_view.updateFontDisplay(t.toJSON())},__onAxisChange__:function(){this.infrastructure_view.twinkle()},detach:function(){this.$div_el.detach()},append:function(){this._$parentEL.append(this.$div_el)},resize:function(t,e){this.infrastructure_view.resize(t,e)}})},function(t,e,n){"use strict";var i={Point:n(637),Straight:n(282),Ray:n(282),Segment:n(282),AxisLine:n(645),Circle:n(646),Arc:n(647),Ellipse:n(649),Paths:n(650),Polygon:n(655),LineLabel:n(656),AngleLabel:n(657),LengthLabel:n(658),Text:n(659),Picture:n(660),GeoList:n(661)},r={GlobalAxis:n(418),UCSAxis:n(418)};t.exports=function t(e,n,o,s,a){var u=n?n.type:void 0;if(u&&r[u])return new r[u](o,s,a,t);if(!e.isEllipse&&e.paths)return new i.Paths(o,s,a);var c=e.type;return i[c]?new i[c](o,s,a,t):void 0}},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67).createSVGEle,f=n(114),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._size=1,o._strokeWidth=1,o._screenPoint=h.createUgly(),o._svgCircle=l("circle"),o._svgCircle.setAttributeNS(null,"cx",0),o._svgCircle.setAttributeNS(null,"cy",0),o._svgCircle.setAttributeNS(null,"r",1),o._geoEl.appendChild(o._svgCircle),o}return(0,o.default)(n,[{key:"update_geo",value:function(t){this._screenPoint=t.applyMatrix(this._axisTransformer.matrix_GTS()),this._svgCircle.setAttributeNS(null,"cx",this._screenPoint.x),this._svgCircle.setAttributeNS(null,"cy",this._screenPoint.y),this._assistEl&&this.__updateAssistEl__(),this._trace(),this.__updateTwinkle__(this._screenPoint.x,this._screenPoint.y,this._size)}},{key:"updateMaterial",value:function(t){null==t.size&&(t.size=t.stroke.width,t.stroke.width=1),this.__updateStroke__(t.stroke),this.__updateFill__(t.fill),t.size&&this._updateSize(t.size),null!=t.twinkle&&this.__twinkle__(t)}},{key:"updateAssist",value:function(t,e){if(this._isHighlight=t,this._isSelected=e,!t&&!e)return this._svgCircle.setAttributeNS(null,"r",this._size),this._assistEl&&this._svgEl.removeChild(this._assistEl),void(this._assistEl=null);this.__updateAssistEl__()}},{key:"selectedByPos",value:function(t,e){return this._screenPoint.distanceTo(t)<this._size+this._strokeWidth/2+e}},{key:"isInRect",value:function(t,e){var n=this._size+this._strokeWidth/2;return t.x<this._screenPoint.x+n&&e.x>this._screenPoint.x-n&&t.y<this._screenPoint.y+n&&e.y>this._screenPoint.y-n}},{key:"__uglyGeo__",value:function(){this._svgCircle.setAttributeNS(null,"cx",-100),this._svgCircle.setAttributeNS(null,"cy",-100)}},{key:"__updateShow__",value:function(){this._isShow?(this._geoEl.style.display="block",this._assistEl&&(this._assistEl.style.display="block"),this._twinkleEl&&(this._twinkleEl.style.display="block")):(this._geoEl.style.display="none",this._assistEl&&(this._assistEl.style.display="none"),this._twinkleEl&&(this._twinkleEl.style.display="none"))}},{key:"__twinkle__",value:function(t){t.twinkle?(this._twinkleEl||(this._twinkleEl=l("g"),this._twinkleEl.setAttributeNS(null,"stroke-width",2),this._twinkleEl.setAttributeNS(null,"stroke-opacity",1),this._twinkleEl.setAttributeNS(null,"fill","none"),this._twinkleEl.setAttributeNS(null,"fill-opacity",1),this._svgEl.appendChild(this._twinkleEl)),this._twinkleEl.setAttributeNS(null,"stroke",t.stroke.color)):this._twinkleEl&&($(this._twinkleEl).remove(),this._twinkleEl=null)}},{key:"__updateTwinkle__",value:function(t,e,n){if(this._twinkleEl){for(var i="",r=0;r<=5;r++)i+='<circle class="svg-twinkle_'+r+'" style="transform-origin:'+t+"px "+e+'px" cx="'+t+'" cy="'+e+'"r='+n+"></circle>";this._twinkleEl.innerHTML=i}}},{key:"_updateSize",value:function(t){this._svgCircle.setAttributeNS(null,"r",t),this._size=parseFloat(t)}},{key:"__updateStroke__",value:function(t){if(t){this._strokeWidth=t.width,this._geoEl.setAttributeNS(null,"stroke-width",t.width),this._geoEl.setAttributeNS(null,"stroke",t.color),this._geoEl.setAttributeNS(null,"stroke-opacity",t.opacity);var e=t.style;"solid"!=e?this._geoEl.setAttributeNS(null,"stroke-dasharray","dashed1"==e?"10,10":"10,5,10"):this._geoEl.removeAttributeNS(null,"stroke-dasharray")}}},{key:"__updateAssistEl__",value:function(){this._assistEl&&this._svgEl.removeChild(this._assistEl),this._assistEl=this._geoEl.cloneNode(!0),this._assistEl.setAttributeNS(null,"fill","none"),this._assistEl.setAttributeNS(null,"stroke","#ff00ff"),this._assistEl.setAttributeNS(null,"stroke-opacity",1),this._assistEl.setAttributeNS(null,"stroke-width",2),this._assistEl.getElementsByTagName("circle")[0].setAttributeNS(null,"r",this._size+this._strokeWidth/2+(this._isHighlight?6:3)),this.$_svgEl.prepend(this._assistEl),this._svgCircle.setAttributeNS(null,"r",this._size+(this._isHighlight?3:0))}}]),n}(f);t.exports=p},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("VerticalLine"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","8"),this.el.setAttribute("height","8"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"stroke-width","1"),this.graEl.innerHTML='<path d="M 4,-1 L 4,9" />',this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("Slash"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","10"),this.el.setAttribute("height","10"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"stroke-width","1"),this.graEl.innerHTML='<path d="M 1,-1 L -1,1 M 0,10 L 10,0 M 11,9 L9,11" />',this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("HorizontalLine"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","8"),this.el.setAttribute("height","8"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"stroke-width","1"),this.graEl.innerHTML='<path d="M -1,4 L 9,4" />',this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("Circle9"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","12"),this.el.setAttribute("height","12"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"fill","none");var t=i("circle");t.setAttributeNS(null,"r",6),t.setAttributeNS(null,"cx",6),t.setAttributeNS(null,"cy",6),this.graEl.appendChild(t),this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("CrossLine"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","10"),this.el.setAttribute("height","10"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"stroke-width","1"),this.graEl.innerHTML='<path d="M 1,-1 L -1,1 M 0,10 L 10,0 M 11,9 L9,11 M -1,9 L 1,11 M 0,0 L 10,10 M 9,-1 L 11,1 " />',this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(67).createSVGEle,r=n(218).genetateID;t.exports=Backbone.View.extend({initialize:function(t){this.el=i("pattern"),this.id=r("Slash"),this.el.setAttribute("id",this.id),this.el.setAttribute("patternUnits","userSpaceOnUse"),this.el.setAttribute("width","10"),this.el.setAttribute("height","10"),this.render(),this.setDisplay(t)},getId:function(){return this.id},render:function(){this.graEl=i("g"),this.graEl.setAttributeNS(null,"stroke-width","1"),this.graEl.innerHTML='<path d="M -1,9 L 1,11 M 0,0 L 10,10 M 9,-1 L 11,1 " />',this.el.appendChild(this.graEl)},setDisplay:function(t){t.color&&this.graEl.setAttributeNS(null,"stroke",t.color),t.opacity&&this.graEl.setAttributeNS(null,"stroke-opacity",t.opacity)}})},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2));n(121),n(8);var s=n(67).createSVGEle,a={1:[{x:5,y:0},{x:6.5,y:2.5},{x:0,y:0},{x:6.5,y:-2.5}],2:[{x:8.5,y:0},{x:9.5,y:2.5},{x:0,y:0},{x:9.5,y:-2.5}],3:[{x:11.75,y:3},{x:0,y:0},{x:11.75,y:-3}],4:[{x:9.5,y:2},{x:0,y:0},{x:9.5,y:-2}]};function u(t,e){return"M"+a[e].map((function(e){return t*e.x+","+t*e.y})).join("L")+"Z"}t.exports=function(){function t(e){(0,r.default)(this,t),this.environmentConfig=e,this.el=s("path"),this.scale=2,this.el.setAttributeNS(null,"stroke-dasharray","none"),this.el.setAttributeNS(null,"stroke-width","0")}return(0,o.default)(t,[{key:"position",value:function(t){if(t){var e=t.position,n=t.angle;isNaN(e.x)||isNaN(e.x)||isNaN(n)?this.el.setAttributeNS(null,"display","none"):(this.el.setAttributeNS(null,"display",""),this.el.setAttributeNS(null,"transform","translate("+e.x+","+e.y+") rotate("+n+")"),this.el.setAttributeNS(null,"d",u(this.scale,this.environmentConfig.arrowStyle)))}}},{key:"updateWidth",value:function(t){this.scale=Math.max(.8*t,2),this.el.setAttributeNS(null,"d",u(this.scale,this.environmentConfig.arrowStyle))}},{key:"getArrowLength",value:function(){return a[this.environmentConfig.arrowStyle][0].x*this.scale}}]),t}()},function(t,e,n){"use strict";n(4);var i=n(0);n(75),n(195),n(3),n(49);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(282),f=n(67).createSVGEle,h=n(72).transFromNum,p=npGeo.Utils,d=p.isZero,y=p.HALF_PI,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o))._tickEl=f("path"),s._geoEl.appendChild(s._tickEl),s.$_htmlEl=$("<div></div>").css("pointer-events","visiblepainted").css("-ms-touch-action","none"),s._htmlEl=s.$_htmlEl[0],s.$el=$("<div></div>").css("pointer-events","none").css("position","absolute").css("white-space","nowrap").css("top","0").css("left","0"),s.el=s.$el[0],s.el.appendChild(s._svgEl),s.el.appendChild(s._htmlEl),s}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this.__updateLineGeo__(t,e),this.__updateTick__(t,e),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this._arrowView.style(t.stroke)}},{key:"onDecorationChange",value:function(t){}},{key:"__updateShow__",value:function(){this._isShow?(this._geoEl.style.display="block",this._htmlEl.style.display="block",this._assistEl&&(this._assistEl.style.display="block")):(this._geoEl.style.display="none",this._htmlEl.style.display="none",this._assistEl&&(this._assistEl.style.display="none"))}},{key:"__updateTick__",value:function(t,e){if(this.$_htmlEl.empty(),this._tickEl.setAttributeNS(null,"d",""),0==e.tick||0==e.number){var n=d(t.sp.x-t.ep.x)?this.__drawTick_Y__(t.centre,t.unitStep,e):this.__drawTick_X__(t.centre,t.unitStep,e);this._tickEl.setAttributeNS(null,"d",n)}}},{key:"__drawTick_X__",value:function(t,e,n){var i=n.step,r=n.PI2,o=n.tick,s=n.number,a=n.offset,u=r?i*e:i*y*e,c=t.x,l=this._axisTransformer.transSTG(this._sLine.sp).x-.1,f=this._axisTransformer.transSTG(this._sLine.ep).x+.1,p=0==o,d=0==s,v="",m=0,x=(i.toString().split(".")[1]||"").length,P=(a.toString().split(".")[1]||"").length;for(x=Math.max(x,P);c+u<f;){c+=u;var w=this._axisTransformer.transGTS({x:c,y:t.y});if(p&&(v+=" M "+w.x+" "+w.y+" L "+w.x+" "+(w.y-8)),d){var M=(m+1)*i+a;this._htmlEl.appendChild(g(w.x,w.y+5,"translate(-50%, 0%)",0==r?_(M):h(M,x)))}m++}for(c=t.x,m=0;c-u>l;){c-=u;var b=this._axisTransformer.transGTS({x:c,y:t.y});if(p&&(v+=" M "+b.x+" "+b.y+" L "+b.x+" "+(b.y-8)),d){var R=-(m+1)*i+a;this._htmlEl.appendChild(g(b.x,b.y+5,"translate(-50%, 0%)",0==r?_(R):h(R,x)))}m++}return v}},{key:"__drawTick_Y__",value:function(t,e,n){var i=parseFloat(n.step),r=n.PI2,o=n.tick,s=n.number,a=n.offset,u=r?i*e:i*y*e,c=t.y,l=this._axisTransformer.transSTG(this._sLine.sp).y-.1,f=this._axisTransformer.transSTG(this._sLine.ep).y+.1,p=0==o,d=0==s,v="",m=0,x=(i.toString().split(".")[1]||"").length,P=(a.toString().split(".")[1]||"").length;for(x=Math.max(x,P);c+u<f;){c+=u;var w=this._axisTransformer.transGTS({x:t.x,y:c});if(p&&(v+=" M "+w.x+" "+w.y+" L "+(w.x+8)+" "+w.y),d){var M=(m+1)*i+a;this._htmlEl.appendChild(g(w.x-10,w.y,"translate(-100%, -50%)",0==r?_(M):h(M,x)))}m++}for(c=t.y,m=0;c-u>l;){c-=u;w=this._axisTransformer.transGTS({x:t.x,y:c});if(p&&(v+=" M "+w.x+" "+w.y+" L "+(w.x+8)+" "+w.y),d){M=-(m+1)*i+a;this._htmlEl.appendChild(g(w.x-10,w.y,"translate(-100%, -50%)",0==r?_(M):h(M,x)))}m++}return v}}]),n}(l),_=function(t){var e=math.fraction(t/2);return(1===e.s?"":"-")+(1===e.d?"":"\\frac{")+(1===e.n?"":e.n)+""+(1===e.d?"":"}{"+e.d+"}")},g=function(t,e,n,i){var r=document.createElement("span");return r.style.position="absolute",r.style.transform=n,r.style.left=t+"px",r.style.top=e+"px",r.style.textDecoration="inherit",r.innerHTML=katex.renderToString("\\footnotesize{"+i+"}"),r};t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67).createSVGEle,f=n(114),h=Math.abs;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._svgCircle=l("circle"),o._svgCircle.setAttributeNS(null,"cx",0),o._svgCircle.setAttributeNS(null,"cy",0),o._svgCircle.setAttributeNS(null,"r",1),o._geoEl.appendChild(o._svgCircle),o}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e=t.applyMatrix(this._axisTransformer.matrix_GTS());this._centerPoint=e.centre,this._radius=e.radius,this._svgCircle.setAttributeNS(null,"cx",this._centerPoint.x),this._svgCircle.setAttributeNS(null,"cy",this._centerPoint.y),this._svgCircle.setAttributeNS(null,"r",this._radius),this._assistEl&&this.__updateAssistEl__(),this._trace()}},{key:"__uglyGeo__",value:function(){this._svgCircle.setAttributeNS(null,"r",-1)}},{key:"selectedByPos",value:function(t,e){return h(this._centerPoint.distanceTo(t)-this._radius)<e}},{key:"isInRect",value:function(t,e){var n=this._centerPoint,i=this._radius;if(n.x-t.x>i&&e.x-n.x>i&&n.y-t.y>i&&e.y-n.y>i)return!0;if(n.x-i<t.x&&n.x+i>e.x&&n.y-i<t.y&&n.y+i>e.y)return!1;var r=i*i,o=0;return n.distanceSqrtTo(t)<r&&o++,n.distanceSqrtTo({x:e.x,y:t.y})<r&&o++,n.distanceSqrtTo({x:t.x,y:e.y})<r&&o++,n.distanceSqrtTo(e)<r&&o++,0<o&&o<4||(h(n.x-t.x)<i&&n.y>t.y&&n.y<e.y||(h(n.y-t.y)<i&&n.x<e.x&&n.x>t.x||(h(n.x-e.x)<i&&n.y<e.y&&n.y>t.y||h(n.y-e.y)<i&&n.x>t.x&&n.x<e.x)))}}]),n}(f)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.pointInRect,p=n(648),d=n(114);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i))._arrowView=new p(o,s._axisTransformer),s._svgPath=f("path"),s._geoEl.appendChild(s._svgPath),s._geoEl.appendChild(s._arrowView.el),s._isFanShaped=!1,s}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this._arc_s=t.applyMatrix(this._axisTransformer.matrix_GTS()),this._sPoint=this._arc_s.sp,this._ePoint=this._arc_s.ep,this._arrowView.update_geo(t,e);var n=this._arc_s.centre,i=this._arc_s.largeArcFlag,r="M ".concat(this._sPoint.x," ").concat(this._sPoint.y," A ").concat(this._arc_s.radius," , ").concat(this._arc_s.radius," \n                      ,0, ").concat(i,", ").concat(t.direction," , ").concat(this._ePoint.x,", ").concat(this._ePoint.y);this._isFanShaped=e.isFanShaped,e.isFanShaped&&(r+=" L "+n.x+" "+n.y,r+=" L "+this._sPoint.x+" "+this._sPoint.y),this._svgPath.setAttributeNS(null,"d",r),this._assistEl&&this.__updateAssistEl__(),this._trace()}},{key:"selectedByPos",value:function(t,e){return this._isFilled?this._arc_s.justPointIn(t,this._isFanShaped,e):this._arc_s.justPointOn(t,e)}},{key:"isInRect",value:function(t,e){return h(t,e,this._sPoint)||h(t,e,this._ePoint)}},{key:"__uglyGeo__",value:function(){this._svgPath.setAttributeNS(null,"d","")}}]),n}(d)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(320);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t)).axisTransformer=i,o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this.element=t,e.arrow&&(this.bArrow(e.arrow.bArrow),this.eArrow(e.arrow.eArrow))}},{key:"_getBeginArrowInfo",value:function(){var t=this.transGTS(this.element.sp),e=this.transGTS(this.element.pointOn(.02)),n=this._getCorrectPos(t,e);return this._getArrowGeo(t,n)}},{key:"_getEndArrowInfo",value:function(){var t=this.transGTS(this.element.pointOn(.98)),e=this.transGTS(this.element.ep),n=this._getCorrectPos(e,t);return this._getArrowGeo(e,n)}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.pointsInRect,p=n(114),d=npGeo.Utils.ANGLE_PER_ARC;t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._points=[],o.ellipse_s=null,o._svgEllipse=f("ellipse"),o._geoEl.appendChild(o._svgEllipse),o}return(0,o.default)(n,[{key:"update_geo",value:function(t){this.ellipse_s=t.applyMatrix(this._axisTransformer.matrix_GTS()),this._points=this.ellipse_s.toPoints(200).points;var e=this.ellipse_s.normalizeParam,n=e.vector,i=e.arc;this._svgEllipse.setAttributeNS(null,"rx",this.ellipse_s.longRadius),this._svgEllipse.setAttributeNS(null,"ry",this.ellipse_s.shortRadius),this._svgEllipse.setAttributeNS(null,"transform","translate(".concat(-n.x," , ").concat(-n.y,") rotate( ").concat(-i*d," )")),this._assistEl&&this.__updateAssistEl__(),this._trace()}},{key:"selectedByPos",value:function(t,e){return this.ellipse_s.justPointOn(t,e)}},{key:"isInRect",value:function(t,e){return h(t,e,this._points)}},{key:"__uglyGeo__",value:function(){this._svgEllipse.setAttributeNS(null,"rx",-1)}}]),n}(p)},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(161).hasColor,f=n(114),h=n(651),p=n(652),d=n(654),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i))._environmentConfig=o,s._drawPoint=!1,s._isShow=!0,s._isSegmentColor=!1,s.output=null,s._currentView=new p(s._axisTransformer,s._paper,o),s.el.appendChild(s._currentView.el),s}return(0,o.default)(n,[{key:"selectedByPos",value:function(t,e,n){return this._currentView.selectedByPos(t,e,n)}},{key:"isInRect",value:function(t,e){return this._currentView.isInRect(t,e)}},{key:"update_geo",value:function(t,e){t=t.paths?t.paths:t,this.output=t;var n=l(t.points);return this._drawPoint!=e.drawPoint||n!=this._isSegmentColor?(this._drawPoint=e.drawPoint,this._isSegmentColor=n,this.__replaceView__(t,e),!0):this._currentView.update_geo(t,e)}},{key:"updateMaterial",value:function(t){null==t.drawPoint||this._drawPoint==t.drawPoint?this._currentView.updateMaterial(t):this.output&&this.update_geo(this.output,t)}},{key:"updateTrace",value:function(t){this._isTraced=t,this._currentView.updateTrace(t)}},{key:"clearTrace",value:function(){this._currentView.clearTrace()}},{key:"getTraceEl",value:function(){return this._currentView.getTraceEl()}},{key:"setTraceEl",value:function(t){this._currentView.setTraceEl(t)}},{key:"updateShow",value:function(t){this._isShow=t,this._currentView.updateShow(t)}},{key:"updateAssist",value:function(t,e){this._isHighlight=t,this._isSelected=e,this._currentView.updateAssist(t,e)}},{key:"__replaceView__",value:function(t,e){this._currentView.destory(),this._drawPoint?this._currentView=new h(this._axisTransformer,this._paper,this._environmentConfig):this._isSegmentColor?this._currentView=new d(this._axisTransformer,this._paper,this._environmentConfig):this._currentView=new p(this._axisTransformer,this._paper,this._environmentConfig),this.update_geo(t,e),this.updateMaterial(e),this.updateShow(this._isShow),this.updateTrace(this._isTraced),this.updateAssist(this._isHighlight,this._isSelected),this.el.appendChild(this._currentView.el)}}]),n}(f);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(67),h=f.createSVGEle,p=f.pointsInRect,d=f.pointsSelectByPos,y=n(114),v=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),y.call((0,s.default)(o),t,i),o._size=1,o._points=[],o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){if(t.isUgly)return!1;this.__updateSize__(e),this.__updatePoints__(t.points),this._geoEl.setAttributeNS(null,"stroke-width",1),this._assistEl&&this._assistEl.setAttributeNS(null,"stroke-width",1),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill),this._geoEl.setAttributeNS(null,"stroke-width",1),this._assistEl&&this._assistEl.setAttributeNS(null,"stroke-width",1)}},{key:"__updatePoints__",value:function(t){this.$_geoEl.empty();for(var e,n=[],i=0;e=t[i];i++)for(var r,o=0;r=e[o];o++){var s=this._axisTransformer.transGTS(r);n.push(s);var a=this.__createCircle__(s,this._size,r.userData&&r.userData.dis);this._geoEl.appendChild(a)}this._points=[n]}},{key:"selectedByPos",value:function(t,e,n){return!!this.selectedByTarget(n)||d(t,this._points,e)}},{key:"isInRect",value:function(t,e){return p(t,e,this._points)}},{key:"__updateAssistEl__",value:function(){this._assistEl&&this._svgEl.removeChild(this._assistEl),this._assistEl=h("g");for(var t,e=this._size+(this._isHighlight?3:1),n=0;t=this._points[n];n++)for(var i,r=0;i=t[r];r++)this._assistEl.appendChild(this.__createCircle__(i,e));this._assistEl.style.pointerEvents="visiblepainted",this._assistEl.style.display="block",this._assistEl.setAttributeNS(null,"fill","none"),this._assistEl.setAttributeNS(null,"stroke","#ff00ff"),this._assistEl.setAttributeNS(null,"stroke-opacity",1),this._assistEl.setAttributeNS(null,"stroke-width",1),this.$_svgEl.prepend(this._assistEl)}},{key:"__updateSize__",value:function(t){this._size=t.stroke?parseFloat(t.stroke.width):1}},{key:"__createCircle__",value:function(t,e,n){var i=h("circle");return i.setAttributeNS(null,"cx",t.x),i.setAttributeNS(null,"cy",t.y),i.setAttributeNS(null,"r",e),n?(i.setAttributeNS(null,"stroke",n.stroke.color),i.setAttributeNS(null,"stroke-opacity",n.stroke.opacity),i.setAttributeNS(null,"fill",n.fill.color),i.setAttributeNS(null,"fill-opacity",n.fill.opacity),i):i}}]),n}(y);t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51),n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.pointsSelectByPos,p=l.pointsInRect,d=n(653),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i))._svgPath=f("path"),s._geoEl.appendChild(s._svgPath),s._points=[[]],s._arrowView=new d(o,s._axisTransformer),s._geoEl.appendChild(s._arrowView.el),s}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){if(t.isUgly)return!1;t.isPaths2||(t=t.toPoints(200)),this.__updatePath__(t),this._arrowView.update_geo(t.segments,e),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill)}},{key:"__updatePath__",value:function(t){for(var e,n=t.applyMatrix(this._axisTransformer.matrix_GTS()),i=n.points,r="",o=0;e=i[o];o++){r+="M ".concat(e[0].x,"  ").concat(e[0].y);for(var s,a=1;s=e[a];a++)r+="L ".concat(s.x," ").concat(s.y)}this._points=n.points,this._svgPath.setAttributeNS(null,"d",r)}},{key:"selectedByPos",value:function(t,e,n){return!!this.selectedByTarget(n)||h(t,this._points,e)}},{key:"isInRect",value:function(t,e){return p(t,e,this._points)}},{key:"__uglyGeo__",value:function(){this._svgPath.setAttributeNS(null,"d","")}}]),n}(n(114));t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(320);t.exports=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t)).axisTransformer=i,o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this.element=t,e.arrow&&(this.bArrow(e.arrow.bArrow),this.eArrow(e.arrow.eArrow))}},{key:"_getBeginArrowInfo",value:function(){var t=this.transGTS(this.element[0].sp),e=this.transGTS(this.element[0].ep),n=this._getCorrectPos(t,e);return this._getArrowGeo(t,n)}},{key:"_getEndArrowInfo",value:function(){var t=this.transGTS(this.element[this.element.length-1].sp),e=this.transGTS(this.element[this.element.length-1].ep),n=this._getCorrectPos(e,t);return this._getArrowGeo(e,n)}}]),n}(l)},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(114),f=n(67),h=f.createSVGEle,p=f.pointsSelectByPos,d=f.pointsInRect,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._points=[],o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this._width=parseFloat(e.stroke.width),this.__updateSegmentsColor__(t.points,e),this._geoEl.setAttributeNS(null,"stroke-width",this._width),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke)}},{key:"__updateSegmentsColor__",value:function(t,e){this.$_geoEl.empty();for(var n,i=[],r=0;n=t[r];r++)for(var o,s=1;o=n[s];s++)n[s-1].userData&&n[s-1].userData.dis.show&&o.userData&&o.userData.dis.show?this.__appendLine__(n[s-1],o,i):s+=2;this._geoEl.setAttributeNS(null,"stroke-width",e.stroke.width),this._points=i}},{key:"selectedByPos",value:function(t,e,n){return!!this.selectedByTarget(n)||p(t,this._points,e)}},{key:"isInRect",value:function(t,e){return d(t,e,this._points)}},{key:"__updateAssistEl__",value:function(){this._assistEl&&this._svgEl.removeChild(this._assistEl),this._assistEl=h("path");for(var t,e="",n=0;t=this._points[n];n++)e+="M"+t[0].x+" "+t[0].y+"L"+t[1].x+" "+t[1].y;this._assistEl.setAttributeNS(null,"d",e),this._assistEl.style.pointerEvents="visiblepainted",this._assistEl.style.display="block",this._assistEl.setAttributeNS(null,"fill","none"),this._assistEl.setAttributeNS(null,"stroke","#ff00ff"),this._assistEl.setAttributeNS(null,"stroke-opacity",1),this._assistEl.setAttributeNS(null,"stroke-width",this._width+3),this._isHighlight?this._assistEl.setAttributeNS(null,"stroke-dasharray","15,5"):this._assistEl.removeAttributeNS(null,"stroke-dasharray"),this.$_svgEl.prepend(this._assistEl)}},{key:"__appendLine__",value:function(t,e,n){var i=this._axisTransformer.transGTS(t),r=this._axisTransformer.transGTS(e);n.push([i,r]);var o=h("line");o.setAttributeNS(null,"x1",i.x),o.setAttributeNS(null,"y1",i.y),o.setAttributeNS(null,"x2",r.x),o.setAttributeNS(null,"y2",r.y);var s=e.userData.dis;e.userData.isLocus?(o.setAttributeNS(null,"stroke-opacity",s.fill.opacity),o.setAttributeNS(null,"stroke",s.fill.color)):(o.setAttributeNS(null,"stroke-opacity",s.stroke.opacity),o.setAttributeNS(null,"stroke",s.stroke.color)),this._geoEl.appendChild(o)}}]),n}(l);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51),n(121),n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.segmentSelectByPos,p=l.segmentInRect,d=l.pointInRect,y=n(114),v=npGeo.Utils.isZero,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._svgPath=f("path"),o._svgPath.setAttributeNS(null,"stroke-linejoin","round"),o._geoEl.appendChild(o._svgPath),o._sPolygon=null,o._noZero=!0,o}return(0,o.default)(n,[{key:"update_geo",value:function(t){this.__updatePath__(t),this._noZero=!v(t.area,.1),this._trace(),this._assistEl&&this.__updateAssistEl__()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill)}},{key:"__updatePath__",value:function(t){this._sPolygon=t.applyMatrix(this._axisTransformer.matrix_GTS());var e=this._sPolygon.points,n="M ".concat(e.map((function(t){return t.x+" "+t.y})).join(" L "),"  Z");this._svgPath.setAttributeNS(null,"d",n)}},{key:"selectedByPos",value:function(t,e){if(this._noZero&&this._sPolygon.justPointIn(t))return!0;for(var n,i=this._sPolygon.segments,r=0;n=i[r];r++)if(h(t,n,e))return!0;return!1}},{key:"isInRect",value:function(t,e){for(var n,i=this._sPolygon.points,r=0;n=i[r];r++)if(d(t,e,n))return!0;for(var o,s=this._sPolygon.segments,a=0;o=s[a];a++)if(p(t,e,o.sp,o.ep))return!0;return!1}},{key:"__uglyGeo__",value:function(){this._svgPath.setAttributeNS(null,"d","")}}]),n}(y);t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.pointInRect,p=n(114),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._svgPath=f("path"),o._geoEl.appendChild(o._svgPath),o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){var n,i=this._axisTransformer.transGTS(t.position);this._pos=i,this._svgPath.setAttributeNS(null,"d",-1==(n=parseInt(e.labelStyle))?"M -10,-10 L 10,10 M 10,-10 L -10,10":0==n?"M -10,-10 L -10 10 L 10,0 Z":1==n?"M 0,-10 L 0,10":2==n?"M -5,-10 L -5,10 M 5,-10 L 5,10":3==n?"M -10,-10 L -10,10 M 0,-10 L 0,10 M 10,-10 L 10,10":4==n?"M -15,-10 L -15,10 M -5,-10 L -5,10 M 5,-10 L 5,10 M 15,-10 L 15,10":"M -10,-10 L 10,10 M 10,-10 L -10,10"),this._svgPath.setAttributeNS(null,"transform","translate("+i.x+","+i.y+") rotate("+t.directionAngle+")"),this._assistEl&&this.__updateAssistEl__()}},{key:"selectedByPos",value:function(t,e){return this._pos.distanceSqrtTo(t)<(e+4)*(e+4)}},{key:"isInRect",value:function(t,e){return h(t,e,this._pos)}}]),n}(p);t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51),n(121);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.pointInRect,p=n(114),d=Math.cos,y=Math.sin,v=npGeo,_=v.Utils.ANGLE_PER_ARC,g=v.Vector2,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._pos={x:0,y:0},o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){t.isUgly||this.__renderAngle(t,e),this._assistEl&&this.__updateAssistEl__(),this._trace()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill)}},{key:"selectedByPos",value:function(t,e,n){return this.selectedByTarget(n)||g.isEqual(t,this._pos,e)}},{key:"isInRect",value:function(t,e){return h(t,e,this._pos)}},{key:"__renderAngle",value:function(t,e){this.$_geoEl.empty();var n=this._axisTransformer.transGTS(t.centre),i=t.radius/this._axisTransformer.getXScale()||30;this._pos=n,t.isRight?this.__rightAngle__(n,i,t):this.__normalAngle__(n,i,t,e)}},{key:"__rightAngle__",value:function(t,e,n){var i=w(t,e,n.sAngle),r=w(t,e,n.eAngle),o=this._axisTransformer.transGTS(n.rightVertex),s="M "+t.x+","+t.y+"L "+i.x+","+i.y+" L "+o.x+","+o.y+" L "+r.x+","+r.y+"Z";this._geoEl.appendChild(x(s,!1,!0));var a="M "+i.x+","+i.y+" L "+o.x+","+o.y+" L "+r.x+","+r.y;this._geoEl.appendChild(x(a,!0))}},{key:"__normalAngle__",value:function(t,e,n,i){for(var r,o=n.sAngle,s=n.eAngle,a=",0,"+n.largeArcFlag+","+n.direction+",",u=[],c=i.labelStyle,l=0;l<c&&e>6;l++){var f=w(t,e,o),h=w(t,e,s);u[l]=P(f,h,e,a),l?e-=5:(r="M "+t.x+","+t.y+" L "+f.x+","+f.y+" A "+e+","+e+a+h.x+","+h.y+"Z",i.angleDirect&&this.__arrow__(n,h,e/10,i),e-=5)}this._geoEl.appendChild(x(r,!1,!0)),this._geoEl.appendChild(x(u.join(" "),!0))}},{key:"__arrow__",value:function(t,e,n,i){var r=x(" M "+-n+",0 L "+-2*n+","+-n+" L 0,0 L "+-2*n+","+n+" L "+-n+",0",!1);this._geoEl.appendChild(r),r.setAttributeNS(null,"x",0),r.setAttributeNS(null,"y",0),r.setAttributeNS(null,"fill",i.stroke.color),r.setAttributeNS(null,"fill-opacity",1);var o=t.eAngle*_;o=1==t.direction?90-o:270-o,r.setAttributeNS(null,"transform","translate("+e.x+","+e.y+") rotate("+o+")")}}]),n}(p);function x(t,e,n){var i=f("path");return i.setAttributeNS(null,"d",t),e&&i.setAttributeNS(null,"fill","none"),n&&i.setAttributeNS(null,"stroke","none"),i}function P(t,e,n,i){return"M "+t.x+","+t.y+" A "+n+","+n+i+e.x+","+e.y}function w(t,e,n){return{x:t.x+e*d(n),y:t.y-e*y(n)}}t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(67),f=l.createSVGEle,h=l.segmentSelectByPos,p=l.segmentInRect,d=n(417),y=n(114),v=Math.abs,_=Math.sin,g=Math.cos,m=Math.atan,x=npGeo,P=x.Line2,w=(x.Vector2,x.Utils.HALF_PI),M=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i))._sLine=P.createUgly(),s._lengthStyle=0,s.__renderLine__=s.__renderByArrow__,s.$_htmlEl=$("<span></span>").css("pointer-events","visiblepainted").css("-ms-touch-action","none").css("position","absolute").css("padding","0 10px").css("transform","translate(-50%, -50%)"),s._htmlEl=s.$_htmlEl[0],s.$el=$("<div></div>").css("pointer-events","none").css("position","absolute").css("top","0").css("left","0").css("width","100%"),s.el=s.$el[0],s.el.appendChild(s._svgEl),s.el.appendChild(s._htmlEl),s._arrowView=new d(o),s._lineView=f("path"),s._lineView.setAttribute("fill","none"),s._geoEl.appendChild(s._lineView),s._geoEl.appendChild(s._arrowView.el),s}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){this._lengthStyle!=e.lengthStyle&&(this._lengthStyle=e.lengthStyle,this.$_geoEl.empty(),this._geoEl.appendChild(this._lineView),0==e.lengthStyle&&this._geoEl.appendChild(this._arrowView.el),this.__renderLine__=0==e.lengthStyle?this.__renderByArrow__:this.__renderByVBraces__,this.updateMaterial(e)),this.__renderName__(t.label,e.font),this.__renderLine__(t,e),this._assistEl&&this.__updateAssistEl__(),this._trace()}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke)}},{key:"selectedByPos",value:function(t,e,n){return this.selectedByTarget(n)||h(t,this._sLine,e)}},{key:"isInRect",value:function(t,e){return p(t,e,this._sLine.sp,this._sLine.ep)}},{key:"__uglyGeo__",value:function(){this._lineView.setAttributeNS(null,"d","")}},{key:"__renderByArrow__",value:function(t,e){var n=this._axisTransformer.transGTS(t.sLine.sp),i=this._axisTransformer.transGTS(t.sLine.ep),r=this._axisTransformer.transGTS(t.eLine.sp),o=this._axisTransformer.transGTS(t.eLine.ep),s=b(n,r,1+10/n.distanceTo(r)),a=b(i,o,1+10/i.distanceTo(o)),u=this._arrowView.update_geo({sp:r,ep:o},{stroke:e.stroke,arrow:{bArrow:!0,eArrow:!0}}),c=u.sp,l=u.ep,f=this._htmlEl.clientWidth,h=this._htmlEl.clientHeight,p=m(v((a.y-s.y)/(a.x-s.x))),d=(p>m(h/f)?h/_(p):f/g(p))/n.distanceTo(i)/2,y="M "+n.x+","+n.y+" L"+s.x+","+s.y+"M "+i.x+","+i.y+" L"+a.x+","+a.y;if(d<.5){var x=b(c,l,.5-d),w=b(c,l,.5+d);y+=" M "+c.x+","+c.y+" L"+x.x+","+x.y+" M "+w.x+","+w.y+" L"+l.x+","+l.y}this._lineView.setAttributeNS(null,"d",y),this._sLine=new P(c,l),this.__updateNamePosition__({x:(c.x+l.x)/2,y:(c.y+l.y)/2})}},{key:"__renderByVBraces__",value:function(t){var e=this._axisTransformer.transGTS(t.sLine.sp),n=this._axisTransformer.transGTS(t.sLine.ep),i=this._axisTransformer.transGTS(t.eLine.sp),r=this._axisTransformer.transGTS(t.eLine.ep),o=b(i,r,.5),s=30;i.distanceTo(r)<120&&(s=i.distanceTo(r)/4);var a=b(i,e,20/i.distanceTo(e)),u=b(i,r,s/r.distanceTo(i)),c=i,l=b(o,i,s/o.distanceTo(i)),f={x:o.x+(c.x-a.x),y:o.y+(c.y-a.y)},h=o,p=b(o,r,s/o.distanceTo(r)),d={x:o.x+(c.x-a.x),y:o.y+(c.y-a.y)},y=o,x=b(r,n,20/r.distanceTo(n)),M=b(r,i,s/r.distanceTo(i)),k=r;this._lineView.setAttributeNS(null,"d",R(a,u,c)+R(l,f,h)+R(p,d,y)+R(x,M,k)+S(p,M)+S(u,l));var E=this._htmlEl.clientWidth,A=this._htmlEl.clientHeight,C=w-m(v((r.y-i.y)/(r.x-i.x))),T=C>m(A/E)?A/_(C):E/g(C);this._sLine=new P(c,y),this.__updateNamePosition__(b(h,f,1+T/h.distanceTo(f)/2))}},{key:"__renderName__",value:function(t,e){try{this._htmlEl.innerHTML=katex.renderToString(t)}catch(e){this._htmlEl.innerHTML="<span>"+t+"</span>"}this.updateFontDisplay(e)}},{key:"__updateNamePosition__",value:function(t){this._htmlEl.style.left=t.x+"px",this._htmlEl.style.top=t.y+"px"}},{key:"__updateShow__",value:function(){this._isShow?(this._geoEl.style.display="block",this._htmlEl.style.visibility="visible",this._assistEl&&(this._assistEl.style.display="block")):(this._geoEl.style.display="none",this._htmlEl.style.visibility="hidden",this._assistEl&&(this._assistEl.style.display="none"))}}]),n}(y);function b(t,e,n){return new P(t,e).pointOn(n)}function R(t,e,n){return"M "+t.x+","+t.y+" Q"+n.x+" "+n.y+" "+e.x+" "+e.y}function S(t,e){return"M "+t.x+","+t.y+" L "+e.x+" "+e.y}t.exports=M},function(t,e,n){"use strict";var i=n(0);n(21),n(3),n(51);var r=i(n(1)),o=i(n(2)),s=n(72).colorRgbA,a={solid:"solid",dashed1:"dashed",dashed2:"dotted"},u=n(217),c=u.rectSelectByPos,l=u.isInRect,f=function(){function t(e,n){(0,r.default)(this,t),this._axisTransformer=e,this._paper=n,this._isSelected=!1,this._isHighlight=!1,this._isExist=!0,this.el=document.createElement("div"),this.$el=$(this.el).css("position","absolute").css("left","0").css("top","0").css("pointer-events","visible").css("transform","translate(-50%,-50%)").css("z-index","-1")}return(0,o.default)(t,[{key:"selectedByTarget",value:function(t){return this.el==t||this.$el.find(t).length>0}},{key:"selectedByPos",value:function(t,e,n){if(this.selectedByTarget(n))return!0;var i=this._position;return c(t,i.left,i.top,this.el.clientWidth,this.el.clientHeight,e)}},{key:"isInRect",value:function(t,e){var n=this._position;return l(t,e,n.left,n.top,this.el.clientWidth,this.el.clientHeight)}},{key:"update_geo",value:function(t){this._position=t.position,this.__isUgly__(t)||(this.__updateWidth__(t.textWidth),this.__updateText__(t))}},{key:"updateMaterial",value:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill),this.updateFontDisplay(t.font)}},{key:"updateTrace",value:function(){}},{key:"clearTrace",value:function(){}},{key:"updateShow",value:function(t){this._isShow!==!!t&&(this._isShow=!!t,this.__updateShow__())}},{key:"updateDeleted",value:function(t){this.updateShow(!t)}},{key:"updateAssist",value:function(t,e){var n="";t?n="0px 0px 0px 2px #f0f":e&&(n="0px 0px 5px #f0f"),this.$el.css("box-shadow",n)}},{key:"destory",value:function(){this.$el.remove()}},{key:"__updateWidth__",value:function(t){t<0&&(t=-t),this.el.style.width=t?t+"px":""}},{key:"__updateText__",value:function(t){this.el.style.left=t.position.left+"px",this.el.style.top=t.position.top+"px",this.el.innerHTML=t.value}},{key:"updateFontDisplay",value:function(t){t&&(this.el.style.fontSize=t.size+"px",this.el.style.color=s(t.color,t.opacity))}},{key:"__updateStroke__",value:function(t){t&&(this.el.style.border=s(t.color,t.opacity)+" "+t.width+"px  "+a[t.style])}},{key:"__updateFill__",value:function(t){t&&(this.el.style.background=s(t.color,t.opacity))}},{key:"__updateShow__",value:function(){this._isExist&&this._isShow?this.el.style.display="block":this.el.style.display="none"}},{key:"__isUgly__",value:function(t){var e=isFinite(t.position.left)&&isFinite(t.position.top);return this._isExist!==e&&(this._isExist=e,this.__updateShow__()),!e}}]),t}();t.exports=f},function(t,e,n){"use strict";var i=n(0);n(51),n(20);var r=i(n(1)),o=i(n(2)),s=n(217),a=s.rectSelectByPos,u=s.isInRect,c=s.viewStyle,l=n(72).colorRgbA,f=function(){function t(e,n){(0,r.default)(this,t),this._axisTransformer=e,this._paper=n,this._isSelected=!1,this._isHighlight=!1,this._isExist=!0,this.el=document.createElement("img"),this.$el=$(this.el).css("position","absolute").css("left","0").css("top","0").css("pointer-events","visible").css("z-index","-1")}return(0,o.default)(t,[{key:"selectedByTarget",value:function(t){return this.el==t}},{key:"selectedByPos",value:function(t,e,n){if(this.selectedByTarget(n))return!0;var i=this._position;return a(t,i.left,i.top,this.el.clientWidth,this.el.clientHeight,e)}},{key:"isInRect",value:function(t,e){var n=this._position;return u(t,e,n.left,n.top,this.el.clientWidth,this.el.clientHeight)}},{key:"update_geo",value:function(t){this._position=t.position,this.__isUgly__(t)||this.__updatePicture__(t)}},{key:"updateMaterial",value:function(t){if(t){var e=t.fill,n=t.stroke,i=t.show;void 0!==i&&this.updateShow(i),e&&this.updateFill(e),n&&this.updateStroke(n)}}},{key:"updateTrace",value:function(){}},{key:"clearTrace",value:function(){}},{key:"updateShow",value:function(t){this._isShow!==!!t&&(this._isShow=!!t,this.__updateShow__())}},{key:"updateFill",value:function(t){var e=t.color,n=t.opacity;this.el.style.backgroundColor=l(e,n)}},{key:"updateStroke",value:function(t){var e=t.color,n=t.opacity,i=t.width,r=t.style;this.el.style.borderColor=l(e,n),this.el.style.borderWidth=i+"px",this.el.style.borderStyle=c[r]}},{key:"updateDeleted",value:function(t){this.updateShow(!t)}},{key:"updateAssist",value:function(t,e){var n="";t?n="0px 0px 0px 2px #f0f":e&&(n="0px 0px 5px #f0f"),this.$el.css("box-shadow",n)}},{key:"destory",value:function(){this.$el.remove()}},{key:"__updatePicture__",value:function(t){var e=t.affine_obj;this.el.style.transform="matrix(\n            ".concat(e.a1,",  ").concat(e.a2,", \n            ").concat(e.b1,",  ").concat(e.b2,",\n            0,  0)"),this.el.style.left=t.position.left+"px",this.el.style.top=t.position.top+"px",this.el.getAttribute("src")===t.picPath||this.el.setAttribute("src",t.picPath),this.el.setAttribute("height",t.imgHeight),this.el.setAttribute("width",t.imgWidth)}},{key:"__updateShow__",value:function(){this._isExist&&this._isShow?this.el.style.display="block":this.el.style.display="none"}},{key:"__isUgly__",value:function(t){var e=isFinite(t.position.left)&&isFinite(t.position.top);return this._isExist!==e&&(this._isExist=e,this.__updateShow__()),!e}}]),t}();t.exports=f},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e=this,n=[],i={};for(var r in t.forEach((function(t){if(t.userData.dis.show){var r=e.getInfrastructureView(t,i);r.updateShow(e._isShow&&t.userData.dis.show),r.update_geo(t,t.userData.dis),r.updateMaterial(t.userData.dis),e.$el.append(r.$el),n.push(r)}})),this._collectionViews=n,this._viewsMap)for(var o,s=this._viewsMap[r],a=i[r]||0;o=s[a];a++)o.$el.detach();return!0}},{key:"getInfrastructureView",value:function(t,e){var n=t.type;if(this._viewsMap[n]||(this._viewsMap[n]=[]),e[n]||(e[n]=0),!this._viewsMap[n][e[n]]){var i=this._createInfrastructureView(t,null,this._axisTransformer,this._paper,this._environmentConfig);i.updateTrace(this._isTraced),i.updateAssist(this._isHighlight,this._isSelected),this._viewsMap[n].push(i)}return this._viewsMap[n][e[n]++]}}]),n}(n(662));t.exports=l},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n,i,o){(0,r.default)(this,t),this._axisTransformer=e,this._paper=n,this._environmentConfig=i,this._createInfrastructureView=o,this._isShow=!0,this._isSelected=!1,this._isHighlight=!1,this._isTraced=!1,this._viewsMap={},this._collectionViews=[],this.$el=$("<div></div>").css("pointer-events","none").css("position","absolute").css("width","100%").css("top","0").css("left","0"),this.el=this.$el[0]}return(0,o.default)(t,[{key:"selectedByTarget",value:function(t){return this.el.contains(t)}},{key:"selectedByPos",value:function(t,e,n){for(var i,r=0;i=this._collectionViews[r];r++)if(i.selectedByPos(t,e,n))return!0;return!1}},{key:"isInRect",value:function(t,e){for(var n,i=0;n=this._collectionViews[i];i++)if(n.isInRect(t,e))return!0;return!1}},{key:"update_geo",value:function(t,e){return!0}},{key:"updateMaterial",value:function(t){}},{key:"updateFontDisplay",value:function(t){for(var e,n=0;e=this._collectionViews[n];n++)e.updateFontDisplay(t)}},{key:"updateTrace",value:function(t){this._isTraced=t;for(var e,n=0;e=this._collectionViews[n];n++)e.updateTrace(t)}},{key:"clearTrace",value:function(){for(var t,e=0;t=this._collectionViews[e];e++)t.clearTrace()}},{key:"updateShow",value:function(t){this._isShow=t;for(var e,n=0;e=this._collectionViews[n];n++)e.updateShow(t)}},{key:"updateDeleted",value:function(t){for(var e,n=0;e=this._collectionViews[n];n++)e.updateDeleted(t)}},{key:"updateAssist",value:function(t,e){this._isHighlight=t,this._isSelected=e;for(var n,i=0;n=this._collectionViews[i];i++)n.updateAssist(t,e)}},{key:"destory",value:function(){this.$el.remove(),this._collectionViews=[]}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(405),r=n(664),o=n(674);t.exports=i.extend({initialize:function(t,e,n){this.initialize_base(n),this.el=document.createElement("div"),this.$el=$(this.el).css("position","relative").css("overflow","visible").css("-ms-touch-action","none").css("width",this.model.get("width")).css("height",this.model.get("height")),this.elementsV=new o({model:this.model,collection:e.elementsRepos},e.beforeLoading,this),this.bindEventsEl=this.el,this.$el.append(this.elementsV.el),this._initBindEvents(r,e)},transGTS:function(t){return this.elementsV.worldToScreen(t)},exportPaperHTML:function(t){return this.elementsV.exportPaperHTML(t)},getCurrentUserAxisID:function(){return null},moveCenter:function(t){this.elementsV.moveCenter(t)}})},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(406),f=n(407),h=n(665),p=n(666),d=n(667),y={bindSelect:n(668),bindPickUp:n(669),bindPoint:n(670),bindText:n(671),bindSegment:n(672),bindCircle:n(673)},v=function(t){(0,s.default)(n,t);var e=c(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t))._initEvents(t),i.bindSelect(),i}return(0,o.default)(n,[{key:"_initEvents",value:function(t){var e=new h(t.paperView.elementsV),n=new p(t.paperView.elementsV),i=new f,r=new d(t.paperView,t.undoRedo,this);for(var o in t.bindEvents=this,t.findElements=e,t.distinguishElements=n,t.willManager=i,t.assistManager=r,y)this.eventTypeManager[o]=new y[o](t)}},{key:"getCapture",value:function(){return!1}},{key:"bindPlane",value:function(){this.paperView.setCursor("Pencil"),this.changeEvent("bindPlane")}}]),n}(l);t.exports=v},function(t,e,n){"use strict";var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=function(){function t(e){(0,r.default)(this,t),this.elementsV=e}return(0,o.default)(t,[{key:"findNameLabelByTarget",value:function(t){return this.elementsV.findNameLabelByTarget(t)}},{key:"findElementsByPos",value:function(t,e){return this.findGeoElementsByPos(t,e).concat(this.findAssistElementByPos(t,e))}},{key:"findGeoElementsByPos",value:function(t,e){return this.elementsV.findGeoElements(t,e.target)}},{key:"findAssistElementByPos",value:function(t,e){for(var n,i=void 0===e.pageX?20:5,r=[],o=0;n=this.elementsV.element_views[o];o++)!n.model.output_Model.isGeometry&&n.selectedByPos&&n.selectedByPos(t,i,e.target)&&r.push(n.model);return r}}]),t}();t.exports=s},function(t,e,n){"use strict";n(48),n(82);var i=n(196).isInallowedBand,r=n(419).getIntersectionSets,o=function(t){this.geoView=t};$.extend(o.prototype,{transSTG:function(t){return this.geoView.screenToWorld(t)},transGTS:function(t){return this.geoView.worldToScreen(t)},getSelectableMoldes:function(t){for(var e,n=t.length-1;e=t[n];n--)e.get("selectable")||t.splice(n,1);return t},getSimilarModels:function(t){for(var e=null,n=0;i=t[n];n++)if(i.output_Model.isPoint){e=i;break}if(!e){var i;for(n=0;i=t[n];n++)if(i.output_Model.isLine){e=i;break}}return{selected:e||t[0]}},getDistinguish:function(t,e,n){if(t.sort((function(t,e){return e.get("id")-t.get("id")})),0==t.length)return n.defaultCallback&&n.defaultCallback instanceof Function&&n.defaultCallback(),null;var i=this.getPoint(t);i?n.callback1(i):(i=this.getLine(t))?n.callback3(i):n.defaultCallback&&n.defaultCallback instanceof Function&&n.defaultCallback()},getPoint:function(t){for(var e,n=0;e=t[n];n++)if(e.output_Model.isPoint)return t[n];return null},canDrawPointOnThisElement:function(t){return t.output_Model.isLinear||t.output_Model.isGeoList},getLine:function(t){for(var e=0,n=t.length;e<n;e++)if(this.canDrawPointOnThisElement(t[e]))return t[e];return null},matchIntersection:function(t,e){var n=t.getIntersection();if(!n)return null;var r=t.inputs;if(n instanceof Array)for(var o=0;o<n.length;o++){var s=n[o];if(i(this.transGTS(s),e))return{type:"intersection",parents:r,index:o,pos:s}}else{s=n;if(i(this.transGTS(s),e))return{type:"intersection",parents:r,pos:s}}return null},getIntersectionPoint:function(t,e){for(var n=0,i=t.length;n<i;n++)for(var o=n+1;o<i;o++){var s=r(t[n],t[o]);if(s){var a=this.matchIntersection(s,e);if(a)return a}}return null},getAllIntersectionsByPos:function(t,e){for(var n=[],o=0,s=t.length;o<s;o++)for(var a=o+1;a<s;a++){var u=r(t[o],t[a]);if(u){var c=u.getIntersection(),l=u.inputs;if(c instanceof Array)for(o=0;o<c.length;o++){var f=c[o];i(f,e)&&n.push({type:"interaction",parents:l,index:o,pos:f})}else i(f=c,e)&&n.push({type:"interaction",parents:l,pos:f})}}return n},getAllLineModels:function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n].output_Model.isLine&&e.push(t[n]);return e},getOnLines:function(t){for(var e=[],n=0,i=t.length;n<i;n++)this.canDrawPointOnThisElement(t[n])&&e.push(t[n]);return e.length>0?e:null},getNameModel:function(t){for(var e,n=0;e=t[n];n++)if(e.nameModel)return e;return null}}),t.exports=o},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(408),f=THREE.Vector3,h=THREE.Face3,p=THREE.LineBasicMaterial,d=THREE.Line2,y=THREE.Geometry,v=THREE.LineGeometry,_=THREE.Line,g=THREE.LineMaterial,m=THREE.Mesh,x=THREE.MeshLambertMaterial,P=THREE.SphereGeometry,w=npGeo,M=w.Vector3,b=w.Circle3,R=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;(0,r.default)(this,n),(s=e.call(this,i,o)).geoView=t.elementsV;var a=new g({color:65518,opacity:1,linewidth:.002,dashed:!0,transparent:!0,dashSize:.2,gapSize:.2});a.dashed=!0,a.gapSize=.2,a.dashSize=.2,a.defines.USE_DASH="",a.needsUpdate=!0;var u=new v;u.setPositions([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s.assistLineByPos=new d(u,a),s.assistLineByPos.computeLineDistances(),s.assistLineByPos.scale.set(1,1,1);var c=new P(.12,10,10);s.assistPoint=new m(c,new x({transparent:!0})),s.assistPoint.material.setValues({color:"#ff1f48",opacity:1}),s.posMsg=document.createElement("span"),s.posMsg.style.zIndex="199409280",s.posMsg.style.position="absolute",s.posMsg.style.fontSize="16px",s.posMsg.style.fontWeight="bold",s.posMsg.style.background="#fff",s.assistLine=new d(new v,new g({color:65280,linewidth:.001}));for(var l=new y,w=0;w<101;w++)l.vertices.push(new f);s.circle=new _(l,new p({color:65280}));var M=new x({color:65518,side:THREE.DoubleSide}),b=new y;b.vertices=[new f(0,0,0),new f(0,0,0),new f(0,0,0)],b.faces=[new h(0,1,2)],s.plane=new m(b,M);var R=$("<div></div>").css("position","absolute").css("top","0").css("left","0").css("width","100%").css("height","100%").css("pointer-events","none");return R.append(s.vLineEle).append(s.hLineEle).append(s.posMsg),t.$el.append(R),s}return(0,o.default)(n,[{key:"resetAll",value:function(){this.resetAssistLineByPos(),this.resetMsg(),this.resetLine(),this.resetPoint(),this.resetCircle()}},{key:"drawAssistLineByPos",value:function(t){this.geoView.globalGroup.add(this.assistLineByPos),this.assistLineByPos.geometry.setPositions([t.x,t.y,t.z,t.x,t.y,0,t.x,0,0,0,0,0,0,t.y,0,t.x,t.y,0]),this.assistLineByPos.computeLineDistances()}},{key:"resetAssistLineByPos",value:function(){this.geoView.globalGroup.remove(this.assistLineByPos)}},{key:"setMsg",value:function(t,e){this.posMsg.style.left=e.x+"px",this.posMsg.style.top=e.y-30+"px",this.posMsg.innerHTML=t}},{key:"resetMsg",value:function(){this.posMsg.innerHTML=""}},{key:"setPoint",value:function(t){this.geoView.globalGroup.add(this.assistPoint),this.assistPoint.position.x=t.x,this.assistPoint.position.y=t.y,this.assistPoint.position.z=t.z,this.assistPoint.updateMatrix(),this.drawAssistLineByPos(t)}},{key:"resetPoint",value:function(){this.geoView.globalGroup.remove(this.assistPoint),this.resetAssistLineByPos()}},{key:"setLine",value:function(t,e){this.geoView.globalGroup.add(this.assistLine),this.assistLine.geometry.setPositions([t.x,t.y,t.z,e.x,e.y,e.z]),this.assistLine.computeLineDistances()}},{key:"resetLine",value:function(){this.geoView.globalGroup.remove(this.assistLine)}},{key:"setCircle",value:function(t,e){this.geoView.globalGroup.add(this.circle);for(var n=new b(new M(t.x,t.y,t.z),4,M.createByPoints(t,e).normalize()).toPoints(100).points[0],i=0;i<100;i++)this.circle.geometry.vertices[i].set(n[i].x,n[i].y,n[i].z);this.circle.geometry.vertices[100].set(n[0].x,n[0].y,n[0].z),this.circle.geometry.verticesNeedUpdate=!0,this.circle.geometry.lineDistancesNeedUpdate=!0}},{key:"resetCircle",value:function(){this.geoView.globalGroup.remove(this.circle)}},{key:"setPlane",value:function(t,e,n){this.geoView.globalGroup.add(this.plane),this.plane.geometry.vertices[0].set(t.x,t.y,t.z),this.plane.geometry.vertices[1].set(e.x,e.y,e.z),this.plane.geometry.vertices[2].set(n.x,n.y,n.z),this.plane.geometry.verticesNeedUpdate=!0}},{key:"resetPlane",value:function(){this.geoView.globalGroup.remove(this.plane)}}]),n}(l);t.exports=R},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(256),h=n(410),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,o.default)(this,n),e.call(this,t)}return(0,s.default)(n,[{key:"__down_geo__",value:function(t){var e=this.distinguishElements.getSimilarModels(t).selected;0==e.get("id")?this.centerPointSelected=e:this.centerPointSelected=null,this.selectManager.isSelected(e.get("id"))?(this.lastModel=null,this.similarEles=e,this.setPosByCapture(e)):(this.lastModel=e,this.selectManager.selectByIds([e.get("id")]),this.setPosByCapture(this.lastModel))}},{key:"__move_geo__",value:function(t,e){if(t.stopPropagation(),this.__isMoved__(t,e,this.preScreenPos)){if(this.centerPointSelected){var n=this.transSTGOnXOY(e);return this.paperView.moveCenter(n),this.preScreenPos=e,this.preVector3Pos=n,void this.assistManager.resetMsg()}this.isFirstMove||(this.lastModel&&(this.selectManager.clearSelected(),this.selectManager.selectByIds([this.lastModel.get("id")]),this.lastModel.get("locked")||this.align.setAlignInfo(this.lastModel)),this.selectModels=function(t){for(var e,n=[],i=0;e=t[i];i++)e.get("locked")||n.push(e);return n}(this.selectManager.getSelectedModels()),this.undoRedo.moveTo(this.selectModels,this.downScreenPos,this.downVector3Pos),this.isFirstMove=!0);var i=this.transSTGByModel(e,this.model);if(this.selectModels){var r=this.align.elementAlign(e.x-this.downScreenPos.x,e.y-this.downScreenPos.y),o={x:r.dx+this.downScreenPos.x,y:r.dy+this.downScreenPos.y};this.undoRedo.moveTo(this.selectModels,o)}this.preScreenPos=e,this.preVector3Pos=i}}},{key:"__up_geo__",value:function(t){t.stopPropagation(),t.preventDefault();var e=this.getXYofEvt(t);this.__isMoved__(t,e,this.downScreenPos)||(this.lastModel?this.lastModel.constraint.canBindAction&&this.lastModel.play():this.lastModel||(this.selectManager.removeByIds([this.similarEles.get("id")]),this.similarEles.constraint.canBindAction&&this.similarEles.play()))}},{key:"__move_rect__",value:function(){}},{key:"__up_rect__",value:function(t){this.__isMoved__(t,this.getXYofEvt(t),this.downScreenPos)||this.selectManager.clearSelected()}},{key:"setPosByCapture",value:function(t){this.assistManager.resetMsg(),this.isPointModel=t.output_Model.isPoint,this.model=t,this.downVector3Pos=this.transSTGByModel(this.downScreenPos,t),this.preVector3Pos=this.downVector3Pos}},{key:"clearStatus",value:function(){this.reset(),this.assistManager.resetMsg(),this.assistManager.resetAssistLineByPos(),this.willManager.reset(),this.align.removeAlign()}}]),n}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(256),h=n(411),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(256),h=n(412),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(2)),s=i(n(1)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(256),h=n(413),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t){return(0,s.default)(this,n),e.call(this,t)}return(0,o.default)(n)}(f);(0,r.default)(p.prototype,h),t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Line","2PointsLine")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setLine(t,e)}}]),n}(n(420));t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t){return(0,r.default)(this,n),e.call(this,t,"Circle","PointNormalCircle")}return(0,o.default)(n,[{key:"__assistElement__",value:function(t,e){this.assistManager.setCircle(t,e)}}]),n}(n(420));t.exports=l},function(t,e,n){"use strict";n(82),n(21),n(3);var i=n(414),r=n(675),o=n(676),s=n(277).preview,a=THREE.Vector3,u=THREE.Plane,c=new a,l=window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;function f(){this.scene=new THREE.Scene({background:0});for(var t,e=this.globalGroup.children,n=e.length-1;t=e[n];n--)this.globalGroup.remove(t);this.scene.add(this.globalGroup)}function h(t){this.canvasDom&&$(this.canvasDom).remove(),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t.get("width"),t.get("height")),this.renderer.setClearColor(t.get("backgroundColor"),t.get("backgroundOpacity")),this.renderer.localClippingEnabled=!0,this.canvasDom=this.renderer.domElement,this.canvasDom.style.pointerEvents="none",this.canvasDom.style.position="absolute",this.canvasDom.style.left="0",this.canvasDom.style.top="0",this.canvasDom.style.zIndex="-1",this.el.appendChild(this.renderer.domElement)}function p(){var t=new THREE.AmbientLight(15066597,.9);this.globalGroup.add(t);var e=new THREE.DirectionalLight(16119285,.7,0),n=new THREE.DirectionalLight(12105912,.3,0);e.position.set(-100,200,-50),n.position.set(0,0,100),this.scene.add(e,n)}t.exports=i.extend({initialize:function(t,e,n){this.el=document.createElement("div"),this.$el=$(this.el).css("position","relative"),this.element_views=[],this.element_map={},this.paper=this.model,this.paperView=n,this.beforeLoading=e,this.animationFrameFlag=!0,this.onReset(),this.listenTo(this.model,"change:backgroundColor",this.onPaperBackGroundChange),this.listenTo(this.model,"change:backgroundOpacity",this.onPaperBackGroundChange),this.listenTo(this.model,"change:fog",this.onPaperFogChange),this.listenTo(this.model,"change:antialias",this.onPaperAntialiasChange),this.listenTo(this.model,"change:perspective",this.onPerspectiveChange),this.listenTo(this.model,"globalGroupChange",this.onGlobalGroupChange),this.listenTo(this.model.elementsRepos,"add",this.onAdd),this.listenTo(this.model.elementsRepos,"reset",this.onReset),this.reRender(),this.audioViews=[]},onReset:function(){this.$el.empty(),this.raycaster=this.model.raycaster,this.camera=this.model.camera,this.globalGroup=this.model.globalGroup,f.call(this),p.call(this),h.call(this,this.model),this.element_views=[],this.element_map={},this.XOY_Plane=new u(new a(0,0,1)),this.fog=new THREE.Fog,this.onPerspectiveChange(this.model),this.onPaperAntialiasChange(this.model),this.onPaperFogChange(this.model),this.onPaperBackGroundChange(this.model),this.grid_View=new r(this.model.grid,this.globalGroup)},onAdd:function(t){var e=this.addAssistView(t)||this.addGeoView(t);e&&(e.model.elementView=e,this.element_views.push(e),this.element_map[t.get("id")]=e,e.onRender(t))},addGeoView:function(t){if(t.output_Model.isGeometry)return new o({model:t},this.scene,this,this.globalGroup,this.$el)},_renderGrid:function(){this.grid_View.onRender()},render:function(t){for(var e,n=0;e=this.element_views[n];n++)e.model.get("id")>13&&e.forceRender(t);return this.el},reRender:function(){this.renderer.render(this.scene,this.camera);for(var t,e=0;t=this.element_views[e];e++)t.onRender();this._renderGrid(),this.animationFrameFlag&&l(this.reRender.bind(this))},findGeoElements:function(t,e){this.model.updateRaycaster(t);for(var n,i=[],r=0;n=this.element_views[r];r++){(o=this.__isFindSuccess__(n,e))&&(o.model=n.model,i.push(o))}i.sort((function(t,e){return t.distance-e.distance}));var o,s=[];for(r=0;o=i[r];r++)s.push(o.model);return s},__isFindSuccess__:function(t,e){return t.raycaster&&t.raycaster(this.raycaster,e)},findNameLabelByTarget:function(t){for(var e,n=0;e=this.element_views[n];n++)if(e.findNameLabel&&e.findNameLabel(t))return e.model;return null},onPaperAntialiasChange:function(t){this.renderer.antialias=!!t.get("antialias")},onPaperFogChange:function(t){this.scene.fog=t.get("fog")?this.fog:null,this.fog.color=new THREE.Color(t.get("backgroundColor"))},onPaperBackGroundChange:function(t){this.renderer.setClearColor(t.get("backgroundColor"),t.get("backgroundOpacity")),this.onPaperFogChange(t)},onPerspectiveChange:function(t){var e=t.get("perspective"),n=this.model.getCameraPosition();this.camera.fov=e<1?1:e,this.camera.near=-.062344*e+4,this.camera.position.set(0,0,n),this.camera.updateProjectionMatrix(),this.onGlobalGroupChange()},onGlobalGroupChange:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.model.getCameraPosition();this.fog.near=e;var n=this.globalGroup.scale.x;this.fog.far=e+8*n,this.globalGroup.updateMatrixWorld(),setTimeout((function(){t.__updateNameLabels__()}),200)},screenToWorld:function(t){return this.model.transSTG(t)},screenToWorldOnXOY:function(t){return this.model.updateRaycaster(t),this.raycaster.ray.intersectPlane(this.XOY_Plane,c),this.scene.worldToLocal(c).clone()},screenToWorldByModel:function(t,e){if(!e.elementView.infrastructure_view||!e.elementView.infrastructure_view._selectableMesh)return this.screenToWorld(t,!0);this.model.updateRaycaster(t);var n=this.raycaster.intersectObject(e.elementView.infrastructure_view._selectableMesh,!0);return n[0]?this.globalGroup.worldToLocal(n[0].point.clone()):this.screenToWorld(t)},worldToScreen:function(t){return this.model.transGTS(t)},rotateByDxDy:function(t,e){this.globalGroup.rotateOnWorldAxis(new a(0,1,0),e/100),this.globalGroup.rotation.z+=t/100,this.__updateNameLabels__()},scaleGlobalGroup:function(t){this.model.resizeScaleRatio(t)},moveCenter:function(t){this.globalGroup.position.set(t.x,t.y,t.z),this.__updateNameLabels__()},__updateNameLabels__:function(){for(var t,e=0;t=this.element_views[e];e++)(t.nameLabel_view||t.model.constraint.isClip||t.model.output_Model.isText||t.model.constraint.isAxisLine)&&(t.geoNeedUpdate=!0)},exportPaperHTML:function(t){t&&this.renderer.setClearColor("#ffffff",0),this.renderer.render(this.scene,this.camera);var e=t?this.renderer.domElement.toDataURL("image/png"):this.renderer.domElement.toDataURL("image/jpeg",.4);t&&this.onPaperBackGroundChange(this.model);var n=document.createElement("img");n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=this.model.get("width")+"px",n.style.height=this.model.get("height")+"px",n.src=e;var i=this.$el.clone(),r=i.find("canvas");return i.addClass(s+" jzjy-preview"),i.prepend(n),r.remove(),i[0].outerHTML},toggleStatus:function(t){if("construct"!==t)for(n=13;e=this.element_views[n];n++)e.div_el?e.div_el.parentNode&&e.div_el.parentNode.removeChild(e.div_el):e.detach();else for(var e,n=13;e=this.element_views[n];n++)e.div_el?this.$el.append(e.div_el):e.append()},appendById:function(t){var e=this.getViewById(t);e&&(e.div_el?this.$el.append(e.div_el):e.append())},detachById:function(t){var e=this.getViewById(t);e&&(e.div_el?e.div_el.parentNode&&e.div_el.parentNode.removeChild(e.div_el):e.detach())}})},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=THREE.Geometry,a=THREE.Vector3,u=THREE.LineSegments,c=THREE.LineDashedMaterial;t.exports=function(){function t(e,n){(0,r.default)(this,t),this.model=e,this.globalGroup=n,this.outPutNeedUpdate=!0,this.material=new c({transparent:!0}),this.geometry=new s,this.geo_mesh=new u(this.geometry,this.material),this.vertices=this.geometry.vertices,this.updateColor(),this.verticesLength=200;for(var i=0;i<this.verticesLength;i++)this.vertices.push(new a);this.globalGroup.add(this.geo_mesh),this.model.on("change:show",this._show.bind(this)),this.model.on("change:x",this.setDirty.bind(this)),this.model.on("change:y",this.setDirty.bind(this)),this.model.on("change:color",this.updateColor.bind(this))}return(0,o.default)(t,[{key:"setDirty",value:function(){this.outPutNeedUpdate=!0}},{key:"onRender",value:function(){this.model.get("show")&&this.outPutNeedUpdate&&(this.update_geo(),this.outPutNeedUpdate=!1)}},{key:"update_geo",value:function(t){var e=this.model.getValue(),n=e.x,i=e.y;this.count=0;for(var r=0;r-n.step>n.min-.1;)r-=n.step,this._setVertixLine1(r,i.max,i.min);for(r=0;r+n.step<n.max+.1;)r+=n.step,this._setVertixLine1(r,i.max,i.min);for(this._setVertixLine1(0,i.max,i.min),r=0;r-i.step>i.min-.1;)r-=i.step,this._setVertixLine2(r,n.max,n.min);for(r=0;r+i.step<i.max+.1;)r+=i.step,this._setVertixLine2(r,n.max,n.min);this._setVertixLine2(0,n.max,n.min);for(var o=this.count;o<this.verticesLength;o++)this.vertices[o].set(0,0,0);this.geometry.verticesNeedUpdate=!0,this.geometry.lineDistancesNeedUpdate=!0}},{key:"updateColor",value:function(){this.material.setValues(this.model.get("color"))}},{key:"_show",value:function(){this.geo_mesh.visible=!!this.model.get("show")}},{key:"_getVertex",value:function(t,e){return[t,e,0]}},{key:"_setVertixLine1",value:function(t,e,n){this.vertices[this.count]&&this.vertices[this.count+1]&&(this.vertices[this.count].set.apply(this.vertices[this.count],this._getVertex(t,e)),this.vertices[this.count+1].set.apply(this.vertices[this.count+1],this._getVertex(t,n)),this.count=this.count+2)}},{key:"_setVertixLine2",value:function(t,e,n){this.vertices[this.count]&&this.vertices[this.count+1]&&(this.vertices[this.count].set.apply(this.vertices[this.count],this._getVertex(e,t)),this.vertices[this.count+1].set.apply(this.vertices[this.count+1],this._getVertex(n,t)),this.count=this.count+2)}}]),t}()},function(t,e,n){"use strict";var i=n(415),r=n(416),o=n(677);t.exports=r.extend({initialize:function(t,e,n,r,o){var s=this;this.initializeBase(n,o,t),this.scene=e,this.globalGroup=r,this._isDetch=!1,this.listenTo(this.model.displayModel,"change:traceLength",this.__onTrace__),this.model.displayModel.textureModel&&this.listenTo(this.model.displayModel.textureModel,"change",(function(t){return s.displayNeedUpdate=!0})),this.model.nameModel&&(this.nameLabel_view=new i({model:this.model.nameModel},this.model,this.paper.paper,this._$parentEL)),this._replaceInfrastructureView(),this._updateShow(),this._render()},raycaster:function(t,e){if(this.isRender())return this.infrastructure_view?this.infrastructure_view.raycaster(t,e):void 0},_replaceInfrastructureView:function(){this.infrastructure_view&&this.infrastructure_view.destory(),this.infrastructure_view=o(this.model.output_Model,this.model.constraint.type,this.globalGroup,this.paper),this.geoNeedUpdate=!0,this.displayNeedUpdate=!0},__deleted__:function(){this.infrastructure_view.updateDeleted(this.isDeleted()||this._isDetch),this._updateShow(),this.nameLabel_view&&(this.isDeleted()||this._isDetch?this.nameLabel_view.detach():this.nameLabel_view.append())},__onDeleteChange__:function(){this.__deleted__()},append:function(){this.infrastructure_view.updateDeleted(!1),this.nameLabel_view&&this.nameLabel_view.append()},detach:function(){this.infrastructure_view.updateDeleted(!0),this.nameLabel_view&&this.nameLabel_view.detach()}})},function(t,e,n){"use strict";var i={Point:n(678),Line:n(421),Circle:n(283),Arc:n(283),Paths:n(680),Plane:n(682),SurfaceTriangle:n(220),Cuboid:n(199),RegularDodecahedron:n(199),RegularHexahedron:n(199),RegularIcosahedron:n(199),RegularOctahedron:n(199),RegularTetrahedron:n(199),Sphere:n(423),Prism:n(200),Prismoid:n(200),Pyramid:n(200),Cylinder:n(200),FrustumOfCone:n(200),Cone:n(200),SurfaceQuad:n(220),LineLabel:n(683),AngleLabel:n(283),Text:n(684),PolyhedronClip:n(685),SphereClip:n(686),CylinderClip:n(687),SurfaceQuadClip:n(424),SurfaceTriangleClip:n(424),GeoList:n(688)},r={XAxisLine:n(356),YAxisLine:n(356),ZAxisLine:n(356)};t.exports=function t(e,n,o,s){return n&&r[n]?new r[n](o,s,t):i[e.type]?new i[e.type](o,s,t,e):void 0}},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(198),p=THREE.Mesh,d=THREE.SphereGeometry,y=THREE.MeshBasicMaterial,v=THREE.MeshPhongMaterial,_=new y({transparent:!0,color:16711935,depthTest:!1,side:THREE.DoubleSide}),g=new y({transparent:!0,color:16711680,depthTest:!1,side:THREE.DoubleSide}),m=new d(1,15,15),x=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"_size",1),o._highLightMesh=new p(m,g),o._selectedMesh=new p(m,_),o._material=new v({transparent:!0,shininess:100,flatShading:!1,depthTest:!1}),o._geoMesh=new p(m,o._material),o._geoMesh.renderOrder=999,o._highLightMesh.renderOrder=999,o._selectedMesh.renderOrder=999,o._geoGroup.add(o._geoMesh),o._updateSelectMesh(o._geoMesh),o}return(0,o.default)(n,[{key:"update_geo",value:function(t){this._geoMesh.position.copy(t),this._isSelected&&this._scaleAndCopyPosition(this._selectedMesh),this._isHighlight&&this._scaleAndCopyPosition(this._highLightMesh),this._trace()}},{key:"updateMaterial",value:function(t){this._material.setValues(t.fill),t.size&&this._updateSize(t.size)}},{key:"updateAssist",value:function(t,e){return this._geoGroup.remove(this._selectedMesh),this._geoGroup.remove(this._highLightMesh),this._isHighlight=t,this._isSelected=e,t?(this._geoGroup.add(this._highLightMesh),this._group.add(this._geoGroup),void this._scaleAndCopyPosition(this._highLightMesh)):e?(this._geoGroup.add(this._selectedMesh),this._group.add(this._geoGroup),void this._scaleAndCopyPosition(this._selectedMesh)):void 0}},{key:"_updateSize",value:function(t){this._size=t,this._geoMesh.scale.setScalar(.2*t)}},{key:"_scaleAndCopyPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;t.scale.setScalar(e*this._size),t.position.copy(this._geoMesh.position)}}]),n}(h);t.exports=x},function(t,e,n){"use strict";n(87),n(322),n(3),n(324),n(329),n(331),n(332),n(333),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355);var i=THREE,r=i.BufferGeometry,o=i.BufferAttribute,s=npGeo.Utils.PI,a=Math.sqrt,u=Math.acos,c=Math.atan,l=.7071,f=new r,h=new Float32Array([1,0,-1,l,l,-1,0,1,-1,-l,l,-1,-1,0,-1,-l,-l,-1,0,-1,-1,l,-l,-1,0,0,0]);f.addAttribute("position",new o(h,3)),f.setIndex([0,1,8,1,2,8,2,3,8,3,4,8,4,5,8,5,6,8,6,7,8,7,0,8,3,2,4,4,2,5,5,2,6,6,2,7,7,2,0,0,2,1]),t.exports=function(t,e,n,i,r){var o=f.clone();return o.scale(n,n,i*n),function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,l=e.z-t.z;if(0==r&&0==o)l<0&&n.rotateX(s);else if(0==r){n.rotateX(-s/2);var f=c(l/o);n.rotateX(f),o<0&&n.rotateX(s)}else{var h=a(r*r+l*l),p=u(h/i);o>0&&(p=-p),n.rotateX(p);f=u(l/h);r<0&&(f=-f),n.rotateY(f)}}(e,t,o,r),o.translate(t.x,t.y,t.z),o}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(198),f=n(681),h=n(283),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){var a;return(0,r.default)(this,n),(a=e.call(this,t,i))._scene=t,a._paper=i,a._isShow=!0,a._isSelected=!1,a._isHighlight=!1,a._isTraced=!1,a._traceLength=1,a._drawPoint=!1,a._output_Model=s,a._currentView=new h(t,i),a}return(0,o.default)(n,[{key:"update_geo",value:function(t){this._output_Model=t,this._currentView.update_geo(t)}},{key:"updateMaterial",value:function(t){this._drawPoint!=t.drawPoint&&(this._drawPoint=t.drawPoint,this.destory(),this._currentView=this._drawPoint?new f(this._scene,this._paper):new h(this._scene,this._paper),this.update_geo(this._output_Model),this.updateShow(this._isShow),this.updateAssist(this._isHighlight,this._isSelected),this.updateTrace(this._isTraced,this._traceLength)),this._currentView.updateMaterial(t)}},{key:"updateTrace",value:function(t,e){this._isTraced=t,this._traceLength=e,this._currentView.updateTrace(t,e)}},{key:"clearTrace",value:function(){this._currentView.clearTrace()}},{key:"updateShow",value:function(t){this._isShow=t,this._currentView.updateShow(t)}},{key:"updateDeleted",value:function(t){this._currentView.updateDeleted(t)}},{key:"raycaster",value:function(t){return this._currentView.raycaster(t)}},{key:"updateAssist",value:function(t,e){this._isHighlight=t,this._isSelected=e,this._currentView.updateAssist(t,e)}},{key:"destory",value:function(){this._currentView.destory()}}]),n}(l);t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20),n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(198),f=n(161).hasColor,h=THREE,p=h.Geometry,d=h.Vector3,y=h.Color,v=h.PointsMaterial,_=h.TextureLoader,g=h.Points,m=(new _).load("/textures/sprites/ball.png"),x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._geometry=new p,o._material=new v({size:.5,color:16711935,vertexColors:!0,map:m,transparent:!0}),o._geoMesh=new g(o._geometry,o._material),o._assistMaterial=new v({transparent:!0,map:m,vertexColors:!1,color:16711935}),o._assistMesh=new g(o._geometry,o._assistMaterial),o._geoGroup.add(o._geoMesh),o._updateSelectMesh(o._geoMesh),o}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e;e=t.isPaths3?t.points:t.toPoints(200);var n=f(e),i=new p;if(e[0]&&Array.isArray(e[0])){for(var r,o=[],s=0;r=e[s];s++)o=o.concat(r);e=o}for(var a,u=0;a=e[u];u++){if(n&&!a.userData.dis.show)return;i.vertices.push(new d(a.x,a.y,a.z)),n&&a.userData.dis.fill&&i.colors.push(new y(a.userData.dis.fill.color))}this._material.setValues({vertexColors:n?THREE.VertexColors:THREE.NoColors}),this._material.needsUpdate=!0,this._updateGeometry(i),this._trace()}},{key:"updateMaterial",value:function(t){var e=t.stroke;this._material.setValues({size:.5*e.width,color:e.color,opacity:e.opacity}),this._assistMaterial.setValues({size:.6*e.width}),this._material.needsUpdate=!0}},{key:"_updateGeometry",value:function(t){this._geometry.dispose(),this._geoMesh.geometry=t,this._assistMesh.geometry=t,this._geometry=t}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(4);var i=n(0);n(51),n(16),n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(198),p=n(176).__texture__,d=THREE.Mesh,y=THREE.LineSegments2,v=THREE.LineSegmentsGeometry,_=THREE.Geometry,g=THREE.Vector3,m=THREE.Vector2,x=THREE.Face3,P=THREE.LineMaterial,w=THREE.MeshStandardMaterial,M={transparent:!0,side:THREE.DoubleSide,roughness:1,metalness:0},b=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"__texture__",p),o._geometry=new _,o._wireframeGeometry=new v,o.hasTexture=!1,o._material=new w(M),o._geoMesh=new d(o._geometry,o._material),o._wireframeMesh=new y(o._wireframeGeometry,new P),o._assistMesh=new y(o._wireframeGeometry,new P({depthTest:!1,color:16711935,linewidth:.003})),o._geoGroup.add(o._geoMesh),o._geoGroup.add(o._wireframeMesh),o._updateSelectMesh(o._geoMesh),o}return(0,o.default)(n,[{key:"update_geo",value:function(t,e){e.texture&&!this.hasTexture&&this.updateMaterial(e),this._output_Model=t,this.__thickness__(e.thickness),this.__updateAssitGeometry__(),this._trace()}},{key:"updateMaterial",value:function(t){this._updateMaterialStroke(t.stroke,this._wireframeMesh.material),this._material.setValues(t.fill),this._assistMesh.material.setValues({linewidth:t.stroke.width/200});var e=this;this.__texture__(t.texture,(function(t){e._material.setValues({map:t}),e._material.needsUpdate=!0})),this._updateDepthMaterial(t),this.__thickness__(t.thickness)}},{key:"_updateDepthMaterial",value:function(t){if(this._material.setValues({depthWrite:t.blocking}),t.blocking)return this._depthMesh||(this._depthMaterial=new P({depthTest:!1}),this._depthMaterial.dashed=!0,this._depthMaterial.defines.USE_DASH="",this._depthMaterial.dashSize=.25,this._depthMaterial.gapSize=.15,this._depthMaterial.needsUpdate=!0,this._depthMesh=new y(this._wireframeGeometry,this._depthMaterial),this._geoGroup.add(this._depthMesh)),this._depthMaterial.setValues({color:t.stroke.color,opacity:t.stroke.opacity,transparent:!0,linewidth:t.stroke.width/500}),void this._wireframeMesh.material.setValues({transparent:!0});this._wireframeMesh.material.setValues({transparent:!1}),this._depthMesh&&this._geoGroup.remove(this._depthMesh)}},{key:"__thickness__",value:function(t){if(this._output_Model){var e=this._output_Model,n=e.vertices.slice(0),i=e.vplanes.slice(0),r=e.vertexUvs;if(r&&(r=r.slice(0)),0!=t){for(var o=n.length,s=this._output_Model.normalVector.clone().multiplyScalar(t),a=0;a<o;a++)n.push(n[a].translate(s)),r&&r.push(r[a]);e.vplanes.forEach((function(t){i.push([t[0]+o,t[1]+o,t[2]+o])}));for(var u=0;u<o-1;u++)i.push([u,u+1,o+u]),i.push([o+u,u+1,o+(u+1)]);return i.push([o-1,0,2*o-1]),i.push([2*o-1,0,o]),this._updateGeometry(n,i,r),void(this._geoMesh.geometry=this._geometry)}this._updateGeometry(n,i,e.vertexUvs),this._geoMesh.geometry=this._geometry}}},{key:"__updateAssitGeometry__",value:function(){for(var t,e=this._output_Model.segments,n=[],i=0;t=e[i];i++)n.push(t.sp.x,t.sp.y,t.sp.z),n.push(t.ep.x,t.ep.y,t.ep.z);this._wireframeGeometry.dispose();var r=new v;r.setPositions(n),this._wireframeGeometry=r,this._assistMesh.geometry=r,this._wireframeMesh.geometry=r,this._wireframeMesh.computeLineDistances(),this._depthMesh&&(this._depthMesh.geometry=r,this._depthMesh.computeLineDistances())}},{key:"_updateGeometry",value:function(t,e,n){for(var i,r=[],o=[],s=new _,a=0;i=t[a];a++)o.push(new g(i.x,i.y,i.z));for(var u,c=0;u=e[c];c++)r.push(new x(u[0],u[1],u[2]));if(n){for(var l,f=[],h=0;l=n[h];h++)f.push(new m(l.dx,l.dy));for(var p,d=0;p=e[d];d++)s.faceVertexUvs[0].push([f[p[0]],f[p[1]],f[p[2]]])}s.vertices=o,s.faces=r,s.verticesNeedUpdate=!0,s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0,s.computeFaceNormals(),s.computeBoundingSphere(),this._geometry.dispose(),this._geometry=s}}]),n}(h);t.exports=b},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(198),f=THREE.Vector3,h=THREE.Face3,p=THREE.Geometry,d=THREE.LineSegmentsGeometry,y=THREE.LineMaterial,v=THREE.MeshLambertMaterial,_=THREE.Mesh,g=THREE.LineSegments2,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i))._wireframeGeometry=new d,o._material=new v({transparent:!0,side:THREE.DoubleSide,depthWrite:!1}),o._geoMesh=new _(new p,o._material),o._wireframeMesh=new g(o._wireframeGeometry,new y({color:16711935,linewidth:.002})),o._assistMesh=new g(o._wireframeGeometry,new y({depthTest:!1,color:16711935,linewidth:.003})),o._geoGroup.add(o._geoMesh),o._geoGroup.add(o._wireframeMesh),o._updateSelectMesh(o._geoMesh),o}return(0,o.default)(n,[{key:"updateMaterial",value:function(t){this._material.setValues(t.fill),this._wireframeMesh.material.setValues({color:t.fill.color,opacity:t.fill.opacity})}},{key:"update_geo",value:function(t){this._updateGeometry(t.planes),this.__updateAssitGeometry__(t.planes)}},{key:"_updateGeometry",value:function(t){this._geoMesh.geometry.dispose();for(var e,n=[],i=[],r=0;e=t[r];r++){for(var o,s=n.length,a=0;o=e[a];a++)i.push(new h(s+o[0],s+o[1],s+o[2]));for(var u,c=0;u=e.vertices[c];c++)n.push(new f(u.x,u.y,u.z))}var l=new p;l.vertices=n,l.faces=i,l.verticesNeedUpdate=!0,l.elementsNeedUpdate=!0,l.normalsNeedUpdate=!0,l.computeBoundingSphere(),this._geoMesh.geometry=l}},{key:"__updateAssitGeometry__",value:function(t){this._wireframeGeometry.dispose();for(var e,n=[],i=0;e=t[i];i++)for(var r,o=e.segments,s=0;r=o[s];s++)n.push(r.sp.x,r.sp.y,r.sp.z),n.push(r.ep.x,r.ep.y,r.ep.z);var a=new d;a.setPositions(n),this._wireframeGeometry=a,this._assistMesh.geometry=a,this._wireframeMesh.geometry=a,this._wireframeMesh.computeLineDistances()}}]),n}(l);t.exports=m},function(t,e,n){"use strict";n(21),n(3),n(51);var i=n(72).colorRgbA,r={solid:"solid",dashed1:"dashed",dashed2:"dotted"},o=function(t,e){this._paper=e,this._isSelected=!1,this._isHighlight=!1,this._isExist=!0,this.el=document.createElement("div"),this._paper.el.appendChild(this.el),this.$el=$(this.el).css("position","absolute").css("left","0").css("top","0").css("pointer-events","visible").css("transform","translate(-50%,-50%)").css("z-index","-1")};o.prototype={raycaster:function(t,e){return!!this.selectedByTarget(e)&&{distance:0}},selectedByTarget:function(t){return this.el==t||this.$el.find(t).length>0},isInRect:function(t,e,n){return this.selectedByTarget(n)},update_geo:function(t){return!(!isFinite(t.position.left)||!isFinite(t.position.top))&&(this.__updateWidth__(t.textWidth),this.__updateText__(t),!0)},updateMaterial:function(t){this.__updateStroke__(t.stroke),this.__updateFill__(t.fill),this.updateFontDisplay(t.font)},updateTrace:function(t){},clearTrace:function(){},updateShow:function(t){this._isShow!==!!t&&(this._isShow=!!t,this.__updateShow__())},updateDeleted:function(t){this.updateShow(!t)},updateAssist:function(t,e){var n="";t?n="0px 0px 0px 2px #f0f":e&&(n="0px 0px 5px #f0f"),this.$el.css("box-shadow",n)},destory:function(){this.$el.remove()},__updateWidth__:function(t){t<0&&(t=-t),this.el.style.width=t?t+"px":""},__updateText__:function(t){this.el.style.left=t.position.left+"px",this.el.style.top=t.position.top+"px",this.el.innerHTML=t.value},updateFontDisplay:function(t){t&&(this.el.style.fontSize=t.size+"px",this.el.style.color=i(t.color,t.opacity))},__updateStroke__:function(t){t&&(this.el.style.border=i(t.color,t.opacity)+" "+t.width+"px  "+r[t.style])},__updateFill__:function(t){t&&(this.el.style.background=i(t.color,t.opacity))},__updateShow__:function(){this._isExist&&this._isShow?this.el.style.display="block":this.el.style.display="none"},__isUgly__:function(t,e){var n=!e(t);return this._isExist!==n&&(this._isExist=n,this.__updateShow__()),!n}},t.exports=o},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(199),h=n(284),p=n(176).zoomPoints,d=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){return(0,o.default)(this,n),e.call(this,t,i)}return(0,s.default)(n,[{key:"update_geo",value:function(t){var e,n=t.mesh;e=n.centre?p(n.vertices,n.centre,.996):n.vertices,this._updateSurfaceGeometry(this._createSurfaceGeometryByNPGeo(n,e)),this._updateWireframeGeometry(n.wireframePosition),this._updateClippingPlanes(t.planes)}}]),n}(f);(0,r.default)(d.prototype,h),t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(12)),u=i(n(5)),c=i(n(6)),l=i(n(7)),f=i(n(19));function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,l.default)(t);if(e){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var p=n(423),d=n(284),y=n(176).zoomPoints,v=function(t){(0,u.default)(n,t);var e=h(n);function n(t,i){var r;return(0,o.default)(this,n),r=e.call(this,t,i),(0,f.default)((0,a.default)(r),"_output_Model",null),r}return(0,s.default)(n,[{key:"update_geo",value:function(t){var e,n=t.mesh;this._wireframe&&(e=y(n.vertices,n.centre,.996)),this._updateSurfaceGeometry(this._createSurfaceGeometryByNPGeo(n,e)),this._updateWireframeGeometry(n.wireframePosition),this._updateClippingPlanes(t.planes)}}]),n}(p);(0,r.default)(v.prototype,d),t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(200),h=n(284),p=n(176).zoomPoints,d=npGeo.Vector3,y=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i){return(0,o.default)(this,n),e.call(this,t,i)}return(0,s.default)(n,[{key:"update_geo",value:function(t){var e,n=t.mesh;if(this._wireframe){var i=d.midPoint(n.topSideCentre,n.underSideCentre);e=p(n.vertices,i,.996)}else e=n.vertices;this._updateSurfaceGeometry(this._createSurfaceGeometryByNPGeo(n,e)),this._updateWireframeGeometry(n.wireframePosition),this._updateUndersideGeometry(e,n),this._updateClippingPlanes(t.planes)}}]),n}(f);(0,r.default)(y.prototype,h),t.exports=y},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"update_geo",value:function(t){var e=this,n=[],i={};for(var r in t.forEach((function(t){if(t.userData.dis.show){var r=e.getInfrastructureView(t,i);r.updateShow(e._isShow&&t.userData.dis.show),r.update_geo(t,t.userData.dis),r.updateMaterial(t.userData.dis),n.push(r)}})),this._collectionViews=n,this._viewsMap)for(var o,s=this._viewsMap[r],a=i[r]||0;o=s[a];a++)o.destory();return!0}},{key:"getInfrastructureView",value:function(t,e){if(this._viewsMap[t.type]||(this._viewsMap[t.type]=[]),e[t.type]||(e[t.type]=0),!this._viewsMap[t.type][e[t.type]]){var n=this._createInfrastructureView(t,null,this._scene,this._paper);n.updateTrace(this._isTraced),n.updateAssist(this._isHighlight,this._isSelected),this._viewsMap[t.type].push(n)}return this._viewsMap[t.type][e[t.type]++]}}]),n}(n(689));t.exports=l},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n,i){(0,r.default)(this,t),this._scene=e,this._paper=n,this._createInfrastructureView=i,this._tracedGroup=null,this._highLightMesh=null,this._selectedMesh=null,this._isShow=!0,this._isSelected=!1,this._isHighlight=!1,this._isTraced=!1,this._traceLength=1,this._viewsMap={},this._collectionViews=[]}return(0,o.default)(t,[{key:"update_geo",value:function(t,e){}},{key:"updateMaterial",value:function(t){}},{key:"updateTrace",value:function(t,e){this._isTraced=t,this._traceLength=e;for(var n,i=0;n=this._collectionViews[i];i++)n.updateTrace(t,e)}},{key:"clearTrace",value:function(){for(var t,e=0;t=this._collectionViews[e];e++)t.clearTrace()}},{key:"updateShow",value:function(t){this._isShow=t;for(var e,n=0;e=this._collectionViews[n];n++)e.updateShow(t)}},{key:"updateDeleted",value:function(t){for(var e,n=0;e=this._collectionViews[n];n++)e.updateDeleted(t)}},{key:"raycaster",value:function(t,e){for(var n,i=0;n=this._collectionViews[i];i++){var r=n.raycaster(t,e);if(r)return r}return!1}},{key:"updateAssist",value:function(t,e){this._isHighlight=t,this._isSelected=e;for(var n,i=0;n=this._collectionViews[i];i++)n.updateAssist(t,e)}},{key:"destory",value:function(){for(var t,e=0;t=this._collectionViews[e];e++)t.destory();this._collectionViews=[]}}]),t}();t.exports=s},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){var a;return(0,o.default)(this,n),a=e.call(this,t,i,r),t.el.addEventListener("mousedown",a.dragStart.bind((0,s.default)(a)),!0),t.el.addEventListener("mousemove",a.draging.bind((0,s.default)(a)),!0),t.el.addEventListener("mouseup",a.dragEnd.bind((0,s.default)(a)),!0),t.el.addEventListener("mousewheel",a.scale.bind((0,s.default)(a)),!1),t.el.addEventListener("DOMMouseScroll",a.scale.bind((0,s.default)(a)),!1),t.el.addEventListener("dblclick",a.dbClickEvent.bind((0,s.default)(a)),!1),t.el.addEventListener("touchstart",a.dbTouchEvent.bind((0,s.default)(a)),!1),t.el.addEventListener("touchstart",a.dragStartForTouch.bind((0,s.default)(a)),!0),a}return(0,r.default)(n)}(n(425));t.exports=f},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(425),p=0,d=0,y=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i,o){var a;return(0,r.default)(this,n),a=e.call(this,t,i,o),(0,l.default)((0,s.default)(a),"enable",!0),(0,l.default)((0,s.default)(a),"curCavansEvent",!0),a.elementsV=a.paperView.elementsV,a.contentEl=t.el,a.msgDOM=document.createElement("div"),a.msgDOM.style.cssText="position: absolute;left: 50%;top: 50%;transform: translate(-50%, -50%);background-color: rgba(0, 0, 0, .6);color: #fff;padding: 12px 25px;min-width: 100px;box-shadow: 1px 1px 5px rgba(0, 0, 0, .2);",a.el=t.el,a.__rotateSceneTouchStart__=a.__rotateSceneTouchStart__.bind((0,s.default)(a)),a.__rotateSceneTouchMove__=a.__rotateSceneTouchMove__.bind((0,s.default)(a)),a.__rotateSceneTouchEnd__=a.__rotateSceneTouchEnd__.bind((0,s.default)(a)),a.__rotateSceneMouseDown__=a.__rotateSceneMouseDown__.bind((0,s.default)(a)),a.__rotateSceneMouseMove__=a.__rotateSceneMouseMove__.bind((0,s.default)(a)),a.__rotateSceneMouseUp__=a.__rotateSceneMouseUp__.bind((0,s.default)(a)),t.el.addEventListener("mousedown",a.dragStart.bind((0,s.default)(a)),!0),t.el.addEventListener("mousemove",a.draging.bind((0,s.default)(a)),!0),t.el.addEventListener("mouseup",a.dragEnd.bind((0,s.default)(a)),!0),t.el.addEventListener("mousewheel",a.scaleFor3D.bind((0,s.default)(a)),!0),t.el.addEventListener("DOMMouseScroll",a.scaleFor3D.bind((0,s.default)(a)),!0),t.el.addEventListener("dblclick",a.dbClickEvent.bind((0,s.default)(a)),!1),t.el.addEventListener("touchstart",a.dbTouchEvent.bind((0,s.default)(a)),!1),t.el.addEventListener("touchstart",a.dragStartForTouch.bind((0,s.default)(a)),!0),t.el.addEventListener("mousedown",a.__rotateSceneMouseDown__),t.el.addEventListener("touchstart",a.__rotateSceneTouchStart__),a}return(0,o.default)(n,[{key:"scaleFor3D",value:function(t){return t.preventDefault(),t.stopPropagation(),t.ctrlKey?this.scale(t):this.scaleScreen(t),!1}},{key:"scaleScreen",value:function(t){var e=t.wheelDelta||t.detail;e<-500?e=-500:e>500&&(e=500),this.paperView.elementsV.scaleGlobalGroup(1-e/1e3)}},{key:"__rotateSceneTouchStart__",value:function(t){1==t.touches.length&&(this.el.addEventListener("touchmove",this.__rotateSceneTouchMove__),this.el.addEventListener("touchend",this.__rotateSceneTouchEnd__),this.el.removeEventListener("mousedown",this.__rotateSceneMouseDown__),t.stopPropagation(),this.__rotateSceneDown__(t.changedTouches[0]))}},{key:"__rotateSceneMouseDown__",value:function(t){t.ctrlKey||0!=t.button||(this.el.addEventListener("mousemove",this.__rotateSceneMouseMove__),this.el.addEventListener("mouseup",this.__rotateSceneMouseUp__,!0),t.stopPropagation(),this.__rotateSceneDown__(t))}},{key:"__rotateSceneDown__",value:function(t){p=t.pageX,d=t.pageY}},{key:"__rotateSceneTouchMove__",value:function(t){1==t.touches.length&&this.enable&&(t.stopPropagation(),this.__rotateSceneMove__(t.changedTouches[0]))}},{key:"__rotateSceneMouseMove__",value:function(t){this.enable&&this.__rotateSceneMove__(t)}},{key:"__rotateSceneMove__",value:function(t){this.isLandscape?this.paperView.elementsV.rotateByDxDy(t.pageY-d,p-t.pageX):this.paperView.elementsV.rotateByDxDy(t.pageX-p,t.pageY-d),p=t.pageX,d=t.pageY}},{key:"__rotateSceneTouchEnd__",value:function(){this.el.removeEventListener("touchmove",this.__rotateSceneTouchMove__),this.el.removeEventListener("touchend",this.__rotateSceneTouchEnd__),this.el.addEventListener("mousedown",this.__rotateSceneMouseDown__)}},{key:"__rotateSceneMouseUp__",value:function(){this.el.removeEventListener("mousemove",this.__rotateSceneMouseMove__),this.el.removeEventListener("mouseup",this.__rotateSceneMouseUp__,!0)}},{key:"__removeMSG__",value:function(){this.msgDOM.parentNode&&this.msgDOM.parentNode.removeChild(this.msgDOM),clearTimeout(this.canvasIndex),this.canvasIndex=null}},{key:"__canvasMSG__",value:function(){var t,e,n=this;this.canvasIndex&&this.__removeMSG__(),this.msgDOM=(t=this.curCavansEvent?"":"",(e=document.createElement("div")).className="jzjy-show-in",e.style.cssText="position: absolute;background-color: rgba(0, 0, 0, .6);color: #fff;padding: 12px 25px;min-width: 100px;box-shadow: 1px 1px 5px rgba(0, 0, 0, .2);",e.innerHTML=t,e),this.contentEl.appendChild(this.msgDOM),this.msgDOM.style.left=(this.contentEl.clientWidth-this.msgDOM.clientWidth)/2+"px",this.msgDOM.style.top=(this.contentEl.clientHeight-this.msgDOM.clientHeight)/2+"px",this.canvasIndex=setTimeout((function(){n.__removeMSG__()}),5e3)}},{key:"__dbTouchHandle__",value:function(){this.contentView.isLock||(this.curCavansEvent=!this.curCavansEvent,this.__canvasMSG__()),this.paperView.clearTrace()}}]),n}(h);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l={},f=n(693),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a,u,c,l,f,h,p,d,y,v){var _;return(0,r.default)(this,n),(_=e.call(this,t,i,c,f,h,p,d,y,v)).intersectionSets_P=o,_.intersectionSets_2Points=s,_.intersectionSets_V=a,_.tangentPointsSets=u,_.affineSets=l,_}return(0,o.default)(n,[{key:"restoreElementByJSON3",value:function(t){var e=new(l[t.type]||f)({undoRedo:this.preview.undoRedo,elementsRepository:this.elementsRepository,dataRepository:this.dataRepository,algebraic:this.algebraic,paper:this.paper,intersectionSets:this.intersectionSets,intersectionSets_P:this.intersectionSets_P,intersectionSets_2Points:this.intersectionSets_2Points,intersectionSets_V:this.intersectionSets_V,tangentPointsSets:this.tangentPointsSets,tangentSets:this.tangentSets,affineSets:this.affineSets,environmentConfig:this.environmentConfig},t);return this.elementsRepository.add(e),e.get("id")}},{key:"globalAxis",value:function(){this.restoreByJSON3([{type:"GlobalAxis",id:0,def:{type:"GlobalAxis"}},{name:"",type:"Point",id:1,def:{parents:[0],type:"OriginPoint"},dis:{show:!1}},{type:"GlobalAxisLine",id:2,def:{parents:[0],type:"XGlobalAxisLine"}},{type:"GlobalAxisLine",id:3,def:{parents:[0],type:"YGlobalAxisLine"}},{type:"Group",id:4,def:{parents:[0,1,2,3],type:"Group"}}])}},{key:"resetSets",value:function(){this.intersectionSets.reset(),this.intersectionSets_P.reset(),this.intersectionSets_2Points.reset(),this.intersectionSets_V.reset(),this.tangentPointsSets.reset(),this.tangentSets.reset(),this.affineSets.reset()}}]),n}(n(487));t.exports=h},function(t,e,n){"use strict";n(106),n(27);var i=n(426),r=n(430),o=n(72).deepCopy,s=n(287),a=n(697),u=n(847),c=["AngleLabel","Arc","Circle","Segment","Straight","Ray","AxisLine","Ellipse","Hyperbola","Parabola","Paths","Polygon","Point"];t.exports=i.extend({is2D:!0,_initConstraint:function(t,e){this.constraint=new a[e.type](this,t,e.attr),"Iter"==e.type&&this._setConstraintAttr(e.attr),this.calculateGeo()},_initDisplayModel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=u(e)||this.inputs[0].displayModel.constructor,i=this.environmentConfig.getDefalutDisplayJSONByDef(e);i=o(i,t),this.displayModel=new n,this.displayModel.setAttr(i)},_initLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c.includes(this.output_Model.type)){this.nameModel=new r(new s);var e=this.environmentConfig.getLabelDisplay();t=o({font:e},t),this.nameModel.setAttr(t)}},transSTG:function(t){return this.constraint.transSTG(t)},transGTS:function(t){return this.constraint.transGTS(t)},toJSON3:function(){return{id:this.get("id"),type:this.output_Model.type,name:this.get("name"),outVais:this.outVais?this.outVais.name:"",attr:{locked:this.get("locked"),selectable:this.get("selectable"),zIndex:this.get("zIndex")},def:this.constraint.toJSON3(this),dis:this.displayModel.toJSON3(),label:this.nameModel&&this.nameModel.toJSON3(),advanced:this.dynamicDisplay&&this.dynamicDisplay.toJSON3()}}})},function(t,e,n){"use strict";n(51);var i=n(695),r=n(428),o=n(696);function s(t){return t&&(""!=t.R||""!=t.G||""!=t.B||""!=t.A)}t.exports=Backbone.Model.extend({initialize:function(t,e){this.display=e.display,this.dataRepository=e.dataRepository,this.algebraic=e.algebraic,this.updateAttr(e.dynamicData),this.calculate()},calculate:function(){this.show&&this.show.calculate(),this.stroke&&this.stroke.calculate(),this.fill&&this.fill.calculate()},forceCalculate:function(){var t={};return this.show&&(t.show=this.show.forceCalculate()),this.stroke&&(t.stroke=this.stroke.forceCalculate()),this.fill&&(t.fill=this.fill.forceCalculate()),t},updateAttr:function(t){t.hasOwnProperty("show")&&this._updateShow_(t.show),t.hasOwnProperty("stroke")&&this._updateStroke_(t.stroke),t.hasOwnProperty("fill")&&this._updateFill_(t.fill)},isHasVari:function(t){return!(!this.show||!this.show.isHasVari(t))||(!(!this.stroke||!this.stroke.isHasVari(t))||!(!this.fill||!this.fill.isHasVari(t)))},toJSON3:function(){var t={};if(this.show){var e=this.show.toJSON3();void 0!==e&&(t.show=e)}if(this.stroke){var n=this.stroke.toJSON3();void 0!==n&&(t.stroke=n)}if(this.fill){var i=this.fill.toJSON3();void 0!==i&&(t.fill=i)}if(!function(t){return"{}"==JSON.stringify(t)}(t))return t},_updateShow_:function(t){if(null==t||""==t){if(!this.show)return;return this.show.dispose(),void(this.show=null)}this.show?this.show.updateAttr(t):this.show=new i({},{display:this.display,dataRepository:this.dataRepository,algebraic:this.algebraic,dynamicData:t})},_updateStroke_:function(t){if(this.display.strokeModel){if(!s(t)){if(!this.stroke)return;return this.stroke.dispose(),void(this.stroke=null)}this.stroke||(this.stroke=new r({},{display:this.display,dataRepository:this.dataRepository,algebraic:this.algebraic,dynamicData:t})),this.stroke.updateAttr(t)}},_updateFill_:function(t){if(this.display.fillModel){if(!s(t)){if(!this.fill)return;return this.fill.dispose(),void(this.fill=null)}this.fill||(this.fill=new o({},{display:this.display,dataRepository:this.dataRepository,algebraic:this.algebraic,dynamicData:t})),this.fill.updateAttr(t)}}})},function(t,e,n){"use strict";n(3),n(49);var i=n(427),r=npGeo.Utils.isZero;function o(t){return isFinite(t)&&t>0&&!r(t)}t.exports=i.extend({initialize:function(t,e){this._initialize(e),this.dirty=!1},updateAttr:function(t){this.showData=this.algebraic.createAlgeObjByStr(t),this._setDatas(this.showData.getVaris()),this._setDirty()},calculate:function(){this.dirty&&this.showData&&(this.display.setAttr({show:o(this.showData.calcu())}),this.dirty=!1)},forceCalculate:function(){return o(this.showData.calcu())},toJSON3:function(){return this.showData.toString()}})},function(t,e,n){"use strict";n(51);var i=n(428);t.exports=i.extend({_getColor:function(){return this.display.getAttr().fill},_setColor:function(t){return this.display.setAttr({fill:t})}})},function(t,e,n){"use strict";t.exports={GlobalAxis:n(698),XGlobalAxisLine:n(705),YGlobalAxisLine:n(706),OriginPoint:n(707),FreePoint:n(708),PointsMidPoint:n(710),LineMidPoint:n(711),CentrePoint:n(712),RightPoint:n(713),PolarPoint:n(714),FootPoint:n(715),FocusPoint:n(716),VertexPoint:n(717),VEqualPoint:n(718),ParaEqualPoint:n(719),TangentPoint:n(720),ClosestPoint:n(721),ConstraintPoint:n(722),IntersectionPoint:n(723),ParallelIntersection:n(724),VerticalIntersection:n(725),ThroughPointIntersection:n(726),XAxisControlPoint:n(727),YAxisControlPoint:n(728),XAxisSPoint:n(729),XAxisEPoint:n(730),YAxisSPoint:n(731),YAxisEPoint:n(732),InElementPoint:n(733),OnElementPoint:n(734),OnPLinePoint:n(735),OnVLinePoint:n(736),OnEqualSegmentPoint:n(737),OnIterPoint:n(738),OnCompositePathsPoint:n(739),Segment:n(740),Ray:n(741),Straight:n(742),Bisector:n(743),Asymptote:n(744),Directrix:n(745),ParaLine:n(746),VertiLine:n(747),TangentLine:n(748),LineByPointSlope:n(749),LineByPointAngle:n(750),LineByPointXIntercept:n(751),LineByPointYIntercept:n(752),UCSXAxisLine:n(753),UCSYAxisLine:n(754),UCSAxis:n(755),AngleLabel:n(756),LineLabel:n(757),LengthLabel:n(758),"3PointsArc":n(435),OnCircleArc:n(759),"2PointsCircle":n(760),"3PointsCircle":n(761),PointLineCircle:n(762),PointRCircle:n(763),TangentCircle:n(764),"3PointsConic":n(765),LineFocusConic:n(766),"5PointsConic":n(767),NormalParabola:n(768),NormalEllipse:n(769),NormalHyperbola:n(771),"3PointsParabola":n(772),YFunCurve:n(773),XFunCurve:n(774),ParamFunCurve:n(775),PolarFunCurve:n(776),ImplicitFunCurve:n(777),PointLocus:n(778),PointsPath:n(779),FreePaths:n(780),PointsPolygon:n(781),RegularPolygon:n(782),IntersectionPolygon:n(783),PointLinearPolygon:n(784),"2LinearPolygon":n(785),ConvexHull:n(786),Locus:n(787),Rotate:n(439),Centrosymmetric:n(440),Dilate:n(441),AffineByPoints:n(442),Inversion:n(443),TranslateByCoor:n(788),TranslateBy2Points:n(789),TranslateBySegment:n(790),Symmetric:n(791),AffineByFormula:n(792),CustomTransform:n(444),CustomTransformSpecialPoint:n(445),CustomTransformSpecialPoints:n(446),Action:n(447),Animation:n(448),DynamicAudio:n(453),CustomFunction:n(454),DerivativeFunction:n(456),DynamicText:n(457),MeasureExpress:n(460),MeasureGeneralForm:n(817),MeasureNormalForm:n(818),MeasureArea:n(462),MeasureLength:n(463),MeasureValueOfPointToObj:n(464),MeasureAngleOf3Points:n(819),MeasureAngleOfLabelAngle:n(820),MeasureArcAngle:n(821),MeasureRadius:n(465),MeasureAngleOfInclination:n(822),MeasureProportioOf2Lines:n(466),MeasureSlope:n(823),MeasureXIntercept:n(824),MeasureYIntercept:n(825),MeasureCoorX:n(467),MeasureCoorY:n(468),MeasureDistanceOf2Points:n(469),MeasurePolarAngle:n(826),MeasurePolarRadius:n(827),MeasureRatioOf3Points:n(470),MeasureEccentricity:n(828),MeasureSemiFocus:n(829),MeasureSemiMajorAxis:n(830),MeasureSemiMinorAxis:n(831),MeasureRightCoor:n(832),MeasureCentre:n(833),MeasureInterceptForm:n(834),MeasureSlopeInterceptForm:n(835),MeasureAsymptote:n(836),MeasureDirectrix:n(837),MeasureFocus:n(838),MeasureVertex:n(839),CombinationPicture:n(471),FreePicture:n(472),CombinationText:n(473),VariableRuler:n(474),Iter:n(475),Group:n(476)}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Vector2,p=f.RightGrid2,d=f.PolarGrid2,y=f.Utils.HALF_PI,v=Math.max,_=Math.abs,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),i.paper.on("change",(function(){return o.element.calculate()})),o.element.displayModel.on("change",(function(){return o.element.calculate()})),o.centre_G=new h(0,0),o}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.element.displayModel;return this.letTopPoint_S=new h(0,this.paper.get("height")),this.rightBottom_S=new h(this.paper.get("width"),0),1==t.get("type")?this.__right__():this.__polar__()}},{key:"__polar__",value:function(){var t=this.letTopPoint_S.applyMatrix(this.axisTransFormer.matrix_STG()),e=this.rightBottom_S.applyMatrix(this.axisTransFormer.matrix_STG()),n=v(_(t.x),_(t.y),_(e.x),_(e.y)),i=this.getStep("x");return new d(t.x,t.y,e.x,e.y,this.centre_G,i,24,n)}},{key:"__right__",value:function(){var t=this.letTopPoint_S.applyMatrix(this.axisTransFormer.matrix_STG()),e=this.rightBottom_S.applyMatrix(this.axisTransFormer.matrix_STG()),n=this.getStep("x"),i=this.getStep("y"),r=t.x-t.x%n-n,o=t.y-t.y%i-i,s=e.x+e.x%n,a=e.y+e.y%i;return new p(t.x,t.y,e.x,e.y,r,o,s,a,n,i)}},{key:"getStep",value:function(t){var e=this.element.displayModel,n=parseFloat(e.get(t).step);return e.get(t).PI2?n:n*y}}]),n}(l);g.prototype.type="GlobalAxis",g.prototype.isGlobalAxis=!0,g.prototype.canBindAction=!1,g.prototype.canCopy=!1,t.exports=g},function(t,e,n){"use strict";var i=n(29),r=n(9),o=n(13),s=n(137),a=n(52),u=n(432),c=n(249),l=n(123),f=n(26),h=n(35),p=n(17),d=n(190),y=n(98),v=n(194);t.exports=function(t,e,n){var _=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),m=_?"set":"add",x=r[t],P=x&&x.prototype,w=x,M={},b=function(t){var e=o(P[t]);a(P,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!h(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!h(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!h(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(s(t,!f(x)||!(g||P.forEach&&!p((function(){(new x).entries().next()})))))w=n.getConstructor(e,t,_,m),u.enable();else if(s(t,!0)){var R=new w,S=R[m](g?{}:-0,1)!=R,k=p((function(){R.has(1)})),E=d((function(t){new x(t)})),A=!g&&p((function(){for(var t=new x,e=5;e--;)t[m](e,e);return!t.has(-0)}));E||((w=e((function(t,e){l(t,P);var n=v(new x,t,w);return null!=e&&c(e,n[m],{that:n,AS_ENTRIES:_}),n}))).prototype=P,P.constructor=w),(k||A)&&(b("delete"),b("has"),_&&b("get")),(A||S)&&b(m),g&&P.clear&&delete P.clear}return M[t]=w,i({global:!0,forced:w!=x},M),y(w,t),g||n.setStrong(w,t,_),w}},function(t,e,n){var i=n(17),r=n(35),o=n(77),s=n(701),a=Object.isExtensible,u=i((function(){a(1)}));t.exports=u||s?function(t){return!!r(t)&&((!s||"ArrayBuffer"!=o(t))&&(!a||a(t)))}:a},function(t,e,n){var i=n(17);t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},function(t,e,n){var i=n(17);t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){"use strict";var i=n(44).f,r=n(80),o=n(173),s=n(81),a=n(123),u=n(249),c=n(219),l=n(174),f=n(42),h=n(432).fastKey,p=n(63),d=p.set,y=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,i){a(t,p),d(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=i&&u(i,t[c],{that:t,AS_ENTRIES:n})})),p=l.prototype,v=y(e),_=function(t,e,n){var i,r,o=v(t),s=g(t,e);return s?s.value=n:(o.last=s={index:r=h(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),f?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},g=function(t,e){var n,i=v(t),r=h(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(p,{clear:function(){for(var t=v(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=v(this),n=g(this,t);if(n){var i=n.next,r=n.previous;delete e.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),e.first==n&&(e.first=i),e.last==n&&(e.last=r),f?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=v(this),i=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),o(p,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return _(this,0===t?0:t,e)}}:{add:function(t){return _(this,t=0===t?0:t,t)}}),f&&i(p,"size",{get:function(){return v(this).size}}),l},setStrong:function(t,e,n){var i=e+" Iterator",r=y(e),o=y(i);c(t,e,(function(t,e){d(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(e){(0,r.default)(this,t),this.elementsRepository=e,this.value="",this.element=null,this.__actionElement__=this.__actionElement__.bind(this)}return(0,o.default)(t,[{key:"set",value:function(t){if(!this.element||this.element.get("id")!=t)if(""!=t){var e=this.elementsRepository.get(t);if(!e)return this.value=t,void this.elementsRepository.on("add",this.__actionElement__);e.output_Model.isActionButtonOutput&&(this.element=e)}else this.element=null}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.element&&!this.element.get("isDeleted")?this.element.get("id"):""}},{key:"validate",value:function(){return!0}},{key:"play",value:function(){this.element&&!this.element.get("isDeleted")&&this.element.play()}},{key:"__actionElement__",value:function(t){t.get("id")==this.value&&(this.elementsRepository.off("add",this.__actionElement__),t.output_Model.isActionButtonOutput&&(this.element=t))}}]),t}()},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Vector2,p=f.AxisLine2,d=f.LineType.STRAIGHT,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i)).inputs[0].displayModel.on("change",(function(t){var e=t.get("x");o.element.displayModel.set(e)})),o}return(0,o.default)(n,[{key:"calculate",value:function(){return new p(new h(0,0),new h(5,0),d,new h(0,0),1,0)}}]),n}(l);y.prototype.type="XGlobalAxisLine",y.prototype.canBindAction=!1,y.prototype.canCopy=!1,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Vector2,p=f.AxisLine2,d=f.LineType.STRAIGHT,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i)).inputs[0].displayModel.on("change",(function(t){var e=t.get("y");o.element.displayModel.set(e)})),o}return(0,o.default)(n,[{key:"calculate",value:function(){return new p(new h(0,0),new h(0,5),d,new h(0,0),1,0)}}]),n}(l);y.prototype.type="YGlobalAxisLine",y.prototype.canBindAction=!1,y.prototype.canCopy=!1,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return new f(0,0)}}]),n}(l);h.prototype.type="OriginPoint",h.prototype.isOriginPoint=!0,h.prototype.canCopy=!1,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(93);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(709),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.position.get();return new h(t.x,t.y)}},{key:"moveOffset",value:function(t,e){var n=this._attributes.position.get();this.moveToPos({x:n.x+t,y:n.y+e})}},{key:"moveToPos",value:function(t){this._attributes.position.set(t),this.element.setOutputNeedUpdate()}},{key:"toJSON3",value:function(){var t=this._attributes.position.get();return{type:this.type,attr:{position:{x:parseFloat(t.x.toFixed(4)),y:parseFloat(t.y.toFixed(4))},bindAction:this._attributes.bindAction.get()}}}}]),n}(l);p.prototype.type="FreePoint",p.prototype.isFreePoint=!0,t.exports=p},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(86)),o=i(n(1)),s=i(n(2)),a=n(18);t.exports=function(){function t(e){(0,o.default)(this,t),this.x=new a,this.y=new a,this.set(e)}return(0,s.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.x.set(t.x),this.y.set(t.y))}},{key:"get",value:function(){return{x:this.x.toString(),y:this.y.toString()}}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return"object"===(0,r.default)(t)&&isFinite(t.x)&&isFinite(t.y)}}]),t}()},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return f.midPoint(this.inputs[0].output_Model,this.inputs[1].output_Model)}}]),n}(l);h.prototype.type="PointsMidPoint",h.prototype.isMidPoint=!0,h.prototype.isPointsMidPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return f.midPoint(this.inputs[0].output_Model.sp,this.inputs[0].output_Model.ep)}}]),n}(l);h.prototype.type="LineMidPoint",h.prototype.isMidPoint=!0,h.prototype.isLineMidPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model.centre;return t||f.createUgly()}}]),n}(l);h.prototype.type="CentrePoint",h.prototype.isCentrePoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{x:new f(i.algebraic),y:new f(i.algebraic),dragX:new h(i.dataRepository),dragY:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.inputs&&this.inputs[0]?this.inputs[0].transGTS(t):new p(t.x,t.y):p.createUgly()}},{key:"getChildrenDataName",value:function(){return[this._attributes.dragX.get(),this._attributes.dragY.get()]}},{key:"moveOffset",value:function(t,e){this.inputs&&this.inputs[0]&&(t*=this.inputs[0].constraint.axisTransFormer.getXScale(),e*=this.inputs[0].constraint.axisTransFormer.getYScale()),this._attributes.dragX.addValue(t),this._attributes.dragY.addValue(e)}},{key:"moveToPos",value:function(t){this.inputs&&this.inputs[0]&&(t=this.inputs[0].transSTG(t)),this._attributes.dragX.setValue(t.x),this._attributes.dragY.setValue(t.y)}}]),n}(l);d.prototype.type="RightPoint",d.prototype.isRightPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=Math.cos,p=Math.sin,d=npGeo.Vector2,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{r:new f(i.algebraic),p:new f(i.algebraic)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return d.createUgly();var e=new d(t.r*h(t.p),t.r*p(t.p));return this.inputs&&this.inputs[0]?this.inputs[0].transGTS(e):e}}]),n}(l);y.prototype.type="PolarPoint",y.prototype.isPolarPoint=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Vector2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[1].output_Model.isLine?this.inputs[1].output_Model.foot(this.inputs[0].output_Model):f.createUgly()}}]),n}(l);h.prototype.type="FootPoint",h.prototype.isFootPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.isConic?this.inputs[0].output_Model.getFocusByIndex(this._attributes.index.get()):h.createUgly()}}]),n}(l);p.prototype.type="FocusPoint",p.prototype.isFocusPoint=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.isConic?this.inputs[0].output_Model.getVertexByIndex(this._attributes.index.get()):h.createUgly()}}]),n}(l);p.prototype.type="VertexPoint",p.prototype.isVertexPoint=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{direct:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[1].output_Model.sp,e=this.inputs[1].output_Model.ep,n=this.inputs[0].output_Model;return this._attributes.direct.get()?new h(n.x-t.y+e.y,n.y+t.x-e.x):new h(n.x+t.y-e.y,n.y-t.x+e.x)}}]),n}(l);p.prototype.type="VEqualPoint",p.prototype.isVEqualPoint=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{direct:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){if(!this.inputs[1].output_Model.isLine)return h.createUgly();var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model.toVector();return this._attributes.direct.get()||(e=h.reverse(e)),t.translate(e)}}]),n}(l);p.prototype.type="ParaEqualPoint",p.prototype.isParaEqualPoint=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Vector2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{index:new f(0)})).tangentPointsSet=i.tangentPointsSets.getTangentPointsSets(t.inputs[0],t.inputs[1]),s}return(0,o.default)(n,[{key:"calculate",value:function(){return this.tangentPointsSet.getTangentPoints()[this._attributes.index.get()]||h.createUgly()}}]),n}(l);p.prototype.type="TangentPoint",p.prototype.isTangentPoint=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[1].output_Model.closestPoint(this.inputs[0].output_Model)}}]),n}(n(11));l.prototype.type="ClosestPoint",l.prototype.isClosestPoint=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model}}]),n}(n(11));l.prototype.type="ConstraintPoint",l.prototype.isConstraintPoint=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){var s;return(0,o.default)(this,n),(s=e.call(this,t,i,r)).intersectionSet=i.intersectionSets.getIntersectionSets(t.inputs[0],t.inputs[1]),s}return(0,r.default)(n)}(n(288));l.prototype.type="IntersectionPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){var s;return(0,o.default)(this,n),(s=e.call(this,t,i,r)).intersectionSet=i.intersectionSets_P.getIntersectionSets(t.inputs[0],t.inputs[1],t.inputs[2]),s}return(0,r.default)(n)}(n(288));l.prototype.type="ParallelIntersection",l.prototype.isParallelIntersection=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){var s;return(0,o.default)(this,n),(s=e.call(this,t,i,r)).intersectionSet=i.intersectionSets_V.getIntersectionSets(t.inputs[0],t.inputs[1],t.inputs[2]),s}return(0,r.default)(n)}(n(288));l.prototype.type="VerticalIntersection",l.prototype.isVerticalIntersection=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){var s;return(0,o.default)(this,n),(s=e.call(this,t,i,r)).intersectionSet=i.intersectionSets_2Points.getIntersectionSets(t.inputs[0],t.inputs[1],t.inputs[2]),s}return(0,r.default)(n)}(n(288));l.prototype.type="ThroughPointIntersection",l.prototype.isThroughPointIntersection=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"xR")}return(0,r.default)(n)}(n(433));l.prototype.type="XAxisControlPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"yT")}return(0,r.default)(n)}(n(433));l.prototype.type="YAxisControlPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"xL")}return(0,r.default)(n)}(n(289));l.prototype.type="XAxisSPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"xR")}return(0,r.default)(n)}(n(289));l.prototype.type="XAxisEPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"yB")}return(0,r.default)(n)}(n(289));l.prototype.type="YAxisSPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,"yT")}return(0,r.default)(n)}(n(289));l.prototype.type="YAxisEPoint",t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{dx:new f(i.algebraic),dy:new f(i.algebraic),dragDx:new h(i.dataRepository),dragDy:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return p.createUgly();var e=this.inputs[0].output_Model;if(!e.pointIn)return p.createUgly();var n=e.pointIn(t);return this.inputs[0].output_Model.justPointIn(n)?n:this.inputs[0].output_Model.pointOn(this.inputs[0].output_Model.valueOn(n))}},{key:"getChildrenDataName",value:function(){return[this._attributes.dragDx.get(),this._attributes.dragDy.get()]}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i)}},{key:"moveToPos",value:function(t){var e=this.inputs[0].output_Model.valueIn(t);this._attributes.dragDx.setValue(e.dx),this._attributes.dragDy.setValue(e.dy)}}]),n}(l);d.prototype.type="InElementPoint",d.prototype.isInElementPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=n(18),d=Math.random,y=npGeo.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{inVais:new f(i.algebraic,"0.5"),outVais:new h(i.dataRepository),fValue:new p(t.inputs[0].output_Model.constructor.DEFAULT_RANGE.fValue),eValue:new p(t.inputs[0].output_Model.constructor.DEFAULT_RANGE.eValue)})).defalutRange=s.inputs[0].output_Model.constructor.DEFAULT_RANGE,s}return(0,o.default)(n,[{key:"calculate",value:function(t,e){var n;if(e)n=d();else if(n=this._attributes.inVais.calcu(),!isFinite(n))return y.createUgly();return this.inputs[0].output_Model.pointOn(n,{fValue:this._attributes.fValue.value,eValue:this._attributes.eValue.value})}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();this.moveToPos({x:i.x+t,y:i.y+e},n)}},{key:"moveToPos",value:function(t,e,n){var i=new y(t.x,t.y),r=this.inputs[0].output_Model.valueOn(i,{fValue:this._attributes.fValue.value,eValue:this._attributes.eValue.value});e.outVais&&e.outVais.setValue(r,n)}}]),n}(l);v.prototype.type="OnElementPoint",v.prototype.isHFPoint=!0,v.prototype.isOnElementPoint=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo,d=p.Line2,y=p.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?d.parallelLine(this.inputs[0].output_Model,this.inputs[1].output_Model).pointOn(t):y.createUgly()}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i,n)}},{key:"moveToPos",value:function(t,e,n){var i=d.parallelLine(this.inputs[0].output_Model,this.inputs[1].output_Model).valueOn(t);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);v.prototype.type="OnPLinePoint",v.prototype.isHFPoint=!0,v.prototype.isOnPLinePoint=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo,d=p.Line2,y=p.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?d.verticalLine(this.inputs[0].output_Model,this.inputs[1].output_Model,0).pointOn(t):y.createUgly()}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i,n)}},{key:"moveToPos",value:function(t,e,n){var i=d.verticalLine(this.inputs[0].output_Model,this.inputs[1].output_Model).valueOn(t);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);v.prototype.type="OnVLinePoint",v.prototype.isHFPoint=!0,v.prototype.isOnVLinePoint=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo,d=p.Circle2,y=p.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic,"1"),outVais:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?new d(this.inputs[0].output_Model,this.inputs[1].output_Model.length).pointOn(t):y.createUgly()}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();i.x+=t,i.y+=e,this.moveToPos(i,n)}},{key:"moveToPos",value:function(t,e,n){var i=new d(this.inputs[0].output_Model,this.inputs[1].output_Model.length).valueOn(t);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);v.prototype.type="OnEqualSegmentPoint",v.prototype.isHFPoint=!0,v.prototype.isOnEqualSegmentPoint=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=npGeo.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic),outVais:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();if(!isFinite(t))return p.createUgly();var e=this.inputs[0].output_Model.pointOn(t);return e||p.createUgly}},{key:"moveOffset",value:function(t,e,n){var i=n.output_Model;this.moveToPos({x:i.x+t,y:i.y+e},n)}},{key:"moveToPos",value:function(t,e,n){var i=this.inputs[0].output_Model.valueOn(t);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);d.prototype.type="OnIterPoint",d.prototype.isHFPoint=!0,d.prototype.isIterPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(99),p=n(18),d=n(38),y=npGeo,v=y.Vector2,_=y.LinearSet2,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{inVais:new f(i.algebraic),outVais:new h(i.dataRepository),fValue:new p(0),eValue:new p(1),segmentType:new d}))._attrChanged(),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?(this.linearSet=this.createLinearSet(),this.linearSet.pointOn(t,this._attributes.segmentType.get(),this.range)):v.createUgly()}},{key:"createLinearSet",value:function(){if(this.linearSet)return this.linearSet;for(var t,e=[],n=0;t=this.inputs[n];n++)!t.output_Model.isUgly&&t.output_Model.isLinear&&(e.push(t.output_Model),t.compositePathsSet||(t.compositePathsSet=[]),t.compositePathsSet.push(this));return this.linearSet=new _(e),this.linearSet}},{key:"disposeLiearSet",value:function(){this.linearSet=null}},{key:"_attrChanged",value:function(){this.range={fValue:this._attributes.fValue.get(),eValue:this._attributes.eValue.get()}}},{key:"moveOffset",value:function(t,e,n){var i=n.getValue();this.moveToPos({x:i.x+t,y:i.y+e},n)}},{key:"moveToPos",value:function(t,e,n){var i=new v(t.x,t.y),r=this.linearSet.valueOn(i,this._attributes.segmentType.get(),this.range);e.outVais&&e.outVais.setValue(r,n)}}]),n}(l);g.prototype.type="OnCompositePathsPoint",g.prototype.isHFPoint=!0,g.prototype.isPointOnCompositePaths=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Line2,p=f.LineType,d=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return new h(this.inputs[0].output_Model,this.inputs[1].output_Model,p.SEGMENT)}}]),n}(l);d.prototype.type="Segment",d.prototype.is2PointsLine=!0,d.prototype.isSegment=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Line2,p=f.LineType,d=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return new h(this.inputs[0].output_Model,this.inputs[1].output_Model,p.RADIAL)}}]),n}(l);d.prototype.type="Ray",d.prototype.is2PointsLine=!0,d.prototype.isRadial=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Line2,p=f.LineType,d=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return new h(this.inputs[0].output_Model,this.inputs[1].output_Model,p.STRAIGHT)}}]),n}(l);d.prototype.type="Straight",d.prototype.is2PointsLine=!0,d.prototype.isStraight=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=npGeo,d=p.Vector2,y=p.Line2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{ratio:new f(i.algebraic,"0.5"),isIn:new h(!0)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.ratio.calcu();return isFinite(t)?3===this.inputs.length?this.__calculateBy3Points__(t):this.__calculateBy2Lines__(t):y.createUgly()}},{key:"__calculateBy3Points__",value:function(t){var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=this.inputs[2].output_Model;if(this._attributes.isIn.get())return y.midLineBy3Points(e,n,i,t);var r=new d(2*n.x-e.x,2*n.y-e.y);return y.midLineBy3Points(r,n,i,t)}},{key:"__calculateBy2Lines__",value:function(t){var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=e.sp,r=e.ep,o=n.sp,s=n.ep,a=d.intersectionOfStraightLines(e,n);if(a.isUgly)return y.createUgly();if(r=_(i,r,a),s=_(o,s,a),this._attributes.isIn.get())return y.midLineBy3Points(r,a,s,t);var u=new d(2*a.x-r.x,2*a.y-r.y);return y.midLineBy3Points(u,a,s,t)}}]),n}(l);function _(t,e,n){var i=d.createByPoints(t,n);return e.translate(i)}v.prototype.type="Bisector",v.prototype.isBisector=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Line2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.isHyperbola?this.inputs[0].output_Model.getAsymptoteByIndex(this._attributes.index.get()):h.createUgly()}}]),n}(l);p.prototype.type="Asymptote",p.prototype.isAsymptoteLine=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo.Line2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.isConic?this.inputs[0].output_Model.getDirectrixByIndex(this._attributes.index.get()):h.createUgly()}}]),n}(l);p.prototype.type="Directrix",p.prototype.isDirectrixLine=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Line2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[1].output_Model.isLine?f.parallelLine(this.inputs[0].output_Model,this.inputs[1].output_Model):f.createUgly()}}]),n}(l);h.prototype.type="ParaLine",h.prototype.isParaLine=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Line2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return f.verticalLine(this.inputs[0].output_Model,this.inputs[1].output_Model,1)}}]),n}(l);h.prototype.type="VertiLine",h.prototype.isVertiLine=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(18),p=npGeo.Line2,d=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){var a;(0,o.default)(this,n),a=e.call(this,t,i,s,{index:new h(0)});var u=(0,r.default)(t.inputs,2),c=u[0],l=u[1];return a.tangentSet=i.tangentSets.getTangentSets(c,l),a}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this.tangentSet.getTangent();return t&&t[this._attributes.index.get()]||p.createUgly()}}]),n}(f);d.prototype.type="TangentLine",d.prototype.isTangentLine=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=Math.sqrt,d=npGeo,y=d.Line2,v=d.Vector2,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{slope:new f(i.algebraic,"0"),limit:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this._attributes.slope.calcu(),n=t;if(this.inputs[1]&&(n=this.inputs[1].transSTG(t)),!isFinite(e)||n.isUgly)return y.createUgly();var i,r=n.x,o=n.y,s=e*e+1,a=p(5*s);if(i=new v((s*r+a)/s,(s*o+e*a)/s),this.inputs[1]&&(i=this.inputs[1].transGTS(i)),this.inputs[1]&&this._attributes.limit.get()){var u=this.inputs[1].output_Model;return y.clipByRect(t,i,u.rMinX,u.rMaxX,u.rMinY,u.rMaxY,2)}return new y(t,i,2)}}]),n}(l);_.prototype.type="LineByPointSlope",_.prototype.isLineByPointSlope=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(56),d=Math.sqrt,y=Math.tan,v=npGeo,_=v.Line2,g=v.Vector2,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{slantAngle:new f(i.algebraic,"1"),unit:new p,limit:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=y(this.__angleToArc__(this._attributes.slantAngle.calcu(),this._attributes.unit.get())),n=t;if(this.inputs[1]&&(n=this.inputs[1].transSTG(t)),!isFinite(e)||n.isUgly)return _.createUgly();var i,r=n.x,o=n.y,s=e*e+1,a=d(5*s);if(i=new g((s*r+a)/s,(s*o+e*a)/s),this.inputs[1]&&(i=this.inputs[1].transGTS(i)),this.inputs[1]&&this._attributes.limit.get()){var u=this.inputs[1].output_Model;return _.clipByRect(t,i,u.rMinX,u.rMaxX,u.rMinY,u.rMaxY,2)}return new _(t,i,2)}}]),n}(l);m.prototype.type="LineByPointAngle",m.prototype.isLineByPointAngle=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=npGeo,d=p.Line2,y=p.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{xIntercept:new f(i.algebraic,"1"),limit:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this._attributes.xIntercept.calcu(),n=t;if(this.inputs[1]&&(n=this.inputs[1].transSTG(t)),!isFinite(e)||n.isUgly)return d.createUgly();var i=new y(e,0);if(this.inputs[1]&&(i=this.inputs[1].transGTS(i)),this.inputs[1]&&this._attributes.limit.get()){var r=this.inputs[1].output_Model;return d.clipByRect(t,i,r.rMinX,r.rMaxX,r.rMinY,r.rMaxY,2)}return new d(t,i,2)}}]),n}(l);v.prototype.type="LineByPointXIntercept",v.prototype.isLineByPointXIntercept=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=npGeo,d=p.Line2,y=p.Vector2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{yIntercept:new f(i.algebraic,"1"),limit:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this._attributes.yIntercept.calcu(),n=t;if(this.inputs[1]&&(n=this.inputs[1].transSTG(t)),!isFinite(e)||n.isUgly)return d.createUgly();var i=new y(0,e);if(this.inputs[1]&&(i=this.inputs[1].transGTS(i)),this.inputs[1]&&this._attributes.limit.get()){var r=this.inputs[1].output_Model;return d.clipByRect(t,i,r.rMinX,r.rMaxX,r.rMinY,r.rMaxY,2)}return new d(t,i,2)}}]),n}(l);v.prototype.type="LineByPointYIntercept",v.prototype.isLineByPointYIntercept=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,r.default)(n)}(n(434));l.prototype.type="UCSXAxisLine",l.prototype.isUCSXAxisLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,r.default)(n)}(n(434));l.prototype.type="UCSYAxisLine",l.prototype.isUCSYAxisLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(393),h=npGeo,p=h.Vector2,d=h.RightGrid2,y=h.PolarGrid2,v=h.Utils,_=v.DOUBLE_PI,g=v.HALF_PI,m=_/24,x=math.max,P=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o;return(0,r.default)(this,n),(o=e.call(this,t,i)).axisTransFormer=new f,o.inputs[0].displayModel.on("change",(function(t){o.element.displayModel.set({x:{step:t.get("step"),PI2:t.get("PI2")}})})),o.inputs[1].displayModel.on("change",(function(t){o.element.displayModel.set({y:{step:t.get("step"),PI2:t.get("PI2")}})})),o.element.displayModel.set({x:{step:o.inputs[0].displayModel.get("step"),PI2:o.inputs[0].displayModel.get("PI2")},y:{step:o.inputs[1].displayModel.get("step"),PI2:o.inputs[1].displayModel.get("PI2")}}),o.element.displayModel.on("change",(function(){o.element.calculate()})),o}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.element.displayModel,e=t.get("x").PI2?1:g,n=t.get("x").step*e,i=t.get("y").PI2?1:g,r=t.get("y").step*i;return this.resetAxisTransFormer(),1==t.get("type")?this.__right__(n,r):this.__polar__(n)}},{key:"resetAxisTransFormer",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;this.axisTransFormer.reset({translateX:e.sp.x-t.offset*t.unitStep,translateY:t.sp.y-e.offset*e.unitStep,scaleX:1/t.unitStep,scaleY:1/e.unitStep})}},{key:"__right__",value:function(t,e){var n=this.inputs[0].output_Model,i=this.inputs[1].output_Model,r=n.unitStep*t,o=i.unitStep*e,s=n.sp.x+(i.sp.x-n.sp.x)%r,a=i.sp.y+(n.sp.y-i.sp.y)%o,u=n.ep.x-(n.ep.x-i.sp.x)%r,c=i.ep.y-(i.ep.y-n.sp.y)%o;return new d(n.sp.x,i.sp.y,n.ep.x,i.ep.y,s,a,u,c,r,o)}},{key:"__polar__",value:function(t){var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=new p(n.sp.x,e.sp.y),r=e.unitStep*t,o=x(i.distanceTo(e.ep),i.distanceTo(e.sp),i.distanceTo(n.ep),i.distanceTo(n.sp));return new y(e.sp.x,n.sp.y,e.ep.x,n.ep.y,i,r,m,o)}},{key:"transSTG",value:function(t){return this.axisTransFormer.transSTG(t)}},{key:"transGTS",value:function(t){return this.axisTransFormer.transGTS(t)}}]),n}(l);P.prototype.type="UCSAxis",P.prototype.isUCSAxis=!0,P.prototype.canBindAction=!1,t.exports=P},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(62),p=n(18),d=npGeo,y=d.Vector2,v=d.Circle2,_=d.AngleLabel2,g=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,{angleDefine:new h(1,{0:0,1:1,2:0,3:1}),angleLabelRadius:new p(.5)})}return(0,s.default)(n,[{key:"angleLabelRadius",get:function(){return this._attributes.angleLabelRadius.get()}},{key:"angleDefine",get:function(){return this._attributes.angleDefine.get()}},{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,3),n=e[0],i=e[1],o=e[2],s=y.createByPoints(i,n),a=y.createByPoints(i,o);return s.isZero(1e-5)||a.isZero(1e-5)?_.createUgly():new _(new v(i,this.angleLabelRadius),s.angle(),a.angle(),this.__getDirection__(s,a))}},{key:"moveToPos",value:function(t){this._attributes.angleLabelRadius.set(this.element.output_Model.centre.distanceTo(t)),this.element.outPutNeedUpdate=!0}},{key:"__getDirection__",value:function(t,e){if(2==this.angleDefine)return 0;if(3==this.angleDefine)return 1;var n=t.cross(e);return 0==this.angleDefine?n>0?1:0:n>0?0:1}}]),n}(f);g.prototype.type="AngleLabel",g.prototype.isAngleLabel=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(18),h=npGeo,p=h.Utils,d=p.ANGLE_PER_ARC,y=p.DOUBLE_PI,v=p.PI,_=h.LineLabel2,g=h.Vector2,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;(0,r.default)(this,n);var a=(s=e.call(this,t,i,o,{d:new f(t.output_Model.isParabola?1.57:.5)})).inputs[0].output_Model;return s.fValue=function(t){return t.isParabola?-v:0}(a),s.eValue=function(t){return t.isCircle?y:t.isArc?1:t.isConic?t.isParabola?v:y:1}(a),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model.pointOn(this.__getValue__()),e=this.inputs[0].output_Model.pointOn(this.__getValue__()+1e-4),n=g.createByPoints(t,e).angle()*d;return new _(t,180-n)}},{key:"moveToPos",value:function(t,e){var n=this.inputs[0].output_Model.valueOn(t);this.inputs[0].output_Model.isSegment?n>1?n=1:n<0&&(n=0):this.inputs[0].output_Model.isRadial&&n<0&&(n=0),this._attributes.d.set(n),e.setOutputNeedUpdate()}},{key:"__getValue__",value:function(){var t=this._attributes.d.get();return this.inputs[0].output_Model.isLine?t:t>=this.eValue?this.eValue-1e-4:t<=this.fValue?this.fValue:t}}]),n}(l);m.prototype.type="LineLabel",m.prototype.isLineLabel=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(93);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(18),p=npGeo,d=p.Vector2,y=p.Line2,v=p.LengthLabel2,_=p.Utils,g=_.HALF_PI,m=_.PI,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{direct:new f,h:new h(.5),accuracy:new h(0,0,9)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=d.createByPoints(t,e),i=t.translate(new d(this._attributes.h.get(),0)).rotate(t,n.angle()+this.__getAngle__()),r=i.translate(n);return new v(new y(t,e),new y(i,r),this.__getLabel__(t,e))}},{key:"moveToPos",value:function(t,e){var n=this.element.output_Model.sLine,i=n.sp,r=d.createByPoints(i,t).directionAngleWith(n.toVector());this._attributes.direct.set(r<=m),this._attributes.h.set(new d(t.x,t.y).distanceToLine(n)),e.setOutputNeedUpdate()}},{key:"__getLabel__",value:function(t,e){return this.element.get("name")?this.element.get("name"):(this.inputs[2]?d.createByPoints(this.inputs[2].transSTG(t),this.inputs[2].transSTG(e)).length():t.distanceTo(e)).toFixed(this._attributes.accuracy.get())}},{key:"__getAngle__",value:function(){return this._attributes.direct.get()?3*g:g}}]),n}(l);x.prototype.type="LengthLabel",x.prototype.isLengthLabel=!0,t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=npGeo,p=h.Arc2,d=h.Line2,y=function(t){(0,a.default)(n,t);var e=l(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,3),n=e[0],i=e[1],o=e[2];return n.isLine?new d(i,o):p.arcOnCircle(n,i,o)}}]),n}(f);y.prototype.type="OnCircleArc",y.prototype.isOnCircleArc=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=npGeo.Circle2,p=function(t){(0,a.default)(n,t);var e=l(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,2),n=e[0],i=e[1];return h.createBy2Points(n,i)}}]),n}(f);p.prototype.type="2PointsCircle",p.prototype.is2PointsCircle=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(38),p=npGeo.Circle2,d=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,{isInner:new h})}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,3),n=e[0],i=e[1],o=e[2];return this._attributes.isInner.get()?p.inCircle(n,i,o):p.createBy3Points(n,i,o)}}]),n}(f);d.prototype.type="3PointsCircle",d.prototype.is3PointsCircle=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=npGeo.Circle2,p=function(t){(0,a.default)(n,t);var e=l(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,2),n=e[0],i=e[1];return new h(n,i.length)}}]),n}(f);p.prototype.type="PointLineCircle",p.prototype.isPointLineCircle=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=npGeo.Circle2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{radius:new f(i.algebraic,"1")})}return(0,o.default)(n,[{key:"calculate",value:function(){return new h(this.inputs[0].output_Model,this._attributes.radius.calcu())}}]),n}(l);p.prototype.type="PointRCircle",p.prototype.isPointRCircle=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=npGeo.Circle2,p=function(t){(0,a.default)(n,t);var e=l(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,s.default)(n,[{key:"calculate",value:function(){if(!this.inputs[1].output_Model.isLine)return h.createUgly();var t=this._getParentOutputs(),e=(0,r.default)(t,2),n=e[0],i=e[1];return h.centerTangent(n,i)}}]),n}(f);p.prototype.type="TangentCircle",p.prototype.isTangentCircle=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h=npGeo,p=h.Ellipse2,d=h.Hyperbola2,y=h.Parabola2,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{conicType:new f(0,{0:p.createBy3Points,1:d.createBy3Points,2:y.createBy3Points})})}return(0,o.default)(n,[{key:"calculate",value:function(){try{return this._attributes.conicType.getValue()(this.inputs[0].output_Model,this.inputs[1].output_Model,this.inputs[2].output_Model)}catch(t){return p.createUgly()}}}]),n}(l);v.prototype.type="3PointsConic",v.prototype.is3PointsConic=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(15),p=npGeo,d=p.Factory2.conicByDirectrixFoucsEccentricity,y=p.Ellipse2,v=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,{eccentricity:new h(i.algebraic,"1")})}return(0,s.default)(n,[{key:"eccentricity",get:function(){return this._attributes.eccentricity.calcu()}},{key:"calculate",value:function(){try{var t=this.eccentricity;if(!isFinite(t)||t<0)return y.createUgly();var e=this._getParentOutputs(),n=(0,r.default)(e,2),i=n[0],o=n[1];return i.isLine?d(i,o,t):y.createUgly()}catch(t){return console.log(t),y.createUgly()}}}]),n}(f);v.prototype.type="LineFocusConic",v.prototype.isLineFocusConic=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=npGeo.Factory2,p=function(t){(0,a.default)(n,t);var e=l(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,5),n=e[0],i=e[1],o=e[2],s=e[3],a=e[4];return h.conicBy5Points(n,i,o,s,a)}}]),n}(f);p.prototype.type="5PointsConic",p.prototype.is5PointsConic=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(15),p=n(62),d=npGeo,y=d.Factory2.conicByCoefficient,v=d.Parabola2;function _(t,e){return{a11:1,a12:0,a22:0,a13:-t.x,a23:-e,a33:t.x*t.x+2*e*t.y}}function g(t,e){return{a11:1,a12:0,a22:0,a13:-t.x,a23:e,a33:t.x*t.x-2*e*t.y}}function m(t,e){return{a11:0,a12:0,a22:-1,a13:-e,a23:t.y,a33:2*e*t.x-t.y*t.y}}function x(t,e){return{a11:0,a12:0,a22:-1,a13:e,a23:t.y,a33:-2*e*t.x-t.y*t.y}}var P=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,{para:new h(i.algebraic),direct:new p("upper",{upper:_,lower:g,left:m,right:x})})}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._attributes.para.calcu();if(!isFinite(t))return v.createUgly();var e=this._getParentOutputs(),n=(0,r.default)(e,1)[0],i=this.inputs[1];i&&(n=i.transSTG(n));var o=this._attributes.direct.getValue()(n,t),s=o.a11,a=(o.a12,o.a22),u=o.a13,c=o.a23,l=o.a33;if(i){var f=i.constraint.axisTransFormer.getXScale(),h=i.constraint.axisTransFormer.getYScale(),p=i.constraint.axisTransFormer.getTranslateX(),d=i.constraint.axisTransFormer.getTranslateY();l=l+(s=s*f*f)*p*p+(a=a*h*h)*d*d-2*(u*=f)*p-2*(c*=h)*d,u-=s*p,c-=a*d}return y({a11:s,a12:0,a22:a,a13:u,a23:c,a33:l})}}]),n}(f);P.prototype.type="NormalParabola",P.prototype.isNormalParabola=!0,t.exports=P},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(436),f=Math.abs,h=npGeo.Ellipse2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.Fun1(f(t.par1),f(t.par2),this._attributes.direct.get(),!0):h.createUgly()}}]),n}(l);p.prototype.type="NormalEllipse",p.prototype.isNormalEllipse=!0,t.exports=p},function(t,e,n){"use strict";var i=n(0)(n(43)),r=npGeo.Factory2.conicByCoefficient,o=Math.sqrt,s=function(t,e,n){var o=this._getParentOutputs(),s=(0,i.default)(o,1)[0],a="x"==n?e:t,u=this.inputs[1];if(u){s=u.transSTG(s);var c=u.constraint.axisTransFormer.getXScale(),l=u.constraint.axisTransFormer.getYScale();a="x"==n?a*c/(l*l):a*l/(c*c)}return r("x"==n?{a11:0,a12:0,a22:-1,a13:a,a23:s.y,a33:-2*a*s.x-s.y*s.y}:{a11:1,a12:0,a22:0,a13:-s.x,a23:-a,a33:s.x*s.x+2*a*s.y})},a=function(t,e,n){var o=this._getParentOutputs(),s=(0,i.default)(o,1)[0],a=this.inputs[1],u=s.x,c=s.y;if("y"==n){var l=t;t=e,e=l}return a&&(t/=a.constraint.axisTransFormer.getXScale(),e/=a.constraint.axisTransFormer.getYScale()),r({a11:e*e,a12:0,a22:t*t,a13:-e*e*u,a23:-t*t*c,a33:u*u*e*e+c*c*t*t-t*t*e*e})},u=function(t,e,n){var o=this._getParentOutputs(),s=(0,i.default)(o,1)[0],a=s.x,u=s.y,c=this.inputs[1];return c&&(t/=c.constraint.axisTransFormer.getXScale(),e/=c.constraint.axisTransFormer.getYScale()),r("x"==n?{a11:e*e,a12:0,a22:-t*t,a13:-e*e*a,a23:t*t*u,a33:e*e*a*a-t*t*u*u-t*t*e*e}:{a11:-t*t,a12:0,a22:e*e,a13:t*t*a,a23:-e*e*u,a33:e*e*u*u-t*t*a*a-t*t*e*e})},c={"a,b":function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return i?a.call(this,t,e,n):u.call(this,t,e,n)},"a,c":function(t,e,n){return e>t?u.call(this,t,o(e*e-t*t),n):a.call(this,t,o(t*t-e*e),n)},"a,e":function(t,e,n){var i=t*e;return e<1?a.call(this,t,o(t*t-i*i),n):e>1?u.call(this,t,o(i*i-t*t),n):s.call(this,t,t,n)},"b,c":function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return i?a.call(this,o(t*t+e*e),t,n):u.call(this,o(e*e-t*t),t,n)},"b,e":function(t,e,n){return e<1?a.call(this,t*o(1/(1-e*e)),t,n):e>1?u.call(this,t*o(1/(e*e-1)),t,n):s.call(this,t,t,n)},"c,e":function(t,e,n){var i=t/e;return e<1?a.call(this,i,o(i*i-t*t),n):e>1?u.call(this,i,o(t*t-i*i),n):s.call(this,i,i,n)}};t.exports=c},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(436),f=Math.abs,h=npGeo.Hyperbola2,p=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.Fun1(f(t.par1),f(t.par2),this._attributes.direct.get(),!1):h.createUgly()}}]),n}(l);p.prototype.type="NormalHyperbola",p.prototype.isNormalHyperbola=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(43)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(38),p=npGeo.Factory2,d=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,{isVertical:new h(!0)})}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this._getParentOutputs(),e=(0,r.default)(t,3),n=e[0],i=e[1],o=e[2];return p.normalParabolaBy3Points(n,i,o,this._attributes.isVertical.get())}}]),n}(f);d.prototype.type="3PointsParabola",d.prototype.is3PointsParabola=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(266),f=n(38),h=n(15),p=npGeo,d=p.Vector2,y=(p.Line2,function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new h(i.algebraic,"x"),min:new h(i.algebraic,"-5"),max:new h(i.algebraic,"5"),pNum:new h(i.algebraic,"10"),stepNum:new h(i.algebraic,"5"),limit:new f,isClosed:new f},"x")}return(0,o.default)(n,[{key:"isLine",get:function(){return this._attributes.funStr.isPower0("x")||this._attributes.funStr.isPower1("x")}},{key:"isParabola1",get:function(){return this._attributes.funStr.isPower2("x")}},{key:"__getCurrentSamplePoint__",value:function(t){return new d(t,this._attributes.funStr.calcu())}}]),n}(l));y.prototype.type="YFunCurve",y.prototype.isYFunCurve=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(266),f=n(38),h=n(15),p=npGeo,d=p.Vector2,y=(p.Line2,function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new h(i.algebraic,"y"),min:new h(i.algebraic,"-5"),max:new h(i.algebraic,"5"),pNum:new h(i.algebraic,"10"),stepNum:new h(i.algebraic,"5"),limit:new f,isClosed:new f},"y")}return(0,o.default)(n,[{key:"isLine",get:function(){return this._attributes.funStr.isPower0("y")||this._attributes.funStr.isPower1("y")}},{key:"isParabola0",get:function(){return this._attributes.funStr.isPower2("y")}},{key:"__getCurrentSamplePoint__",value:function(t){return new d(this._attributes.funStr.calcu(),t)}}]),n}(l));y.prototype.type="XFunCurve",y.prototype.isXFunCurve=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(266),f=n(38),h=n(15),p={funStrx:1,funStry:1},d=npGeo.Vector2,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrx:new h(i.algebraic,"t"),funStry:new h(i.algebraic,"t"),min:new h(i.algebraic,"-5"),max:new h(i.algebraic,"5"),pNum:new h(i.algebraic,"10"),stepNum:new h(i.algebraic,"5"),limit:new f,isClosed:new f},"t",p)}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(){return new d(this._attributes.funStrx.calcu(),this._attributes.funStry.calcu())}}]),n}(l);y.prototype.type="ParamFunCurve",y.prototype.isParamFunCurve=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(266),f=n(38),h=n(15),p=npGeo.Vector2,d=Math.cos,y=Math.sin,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new h(i.algebraic,"thet"),min:new h(i.algebraic,"0"),max:new h(i.algebraic,"5"),pNum:new h(i.algebraic,"100"),stepNum:new h(i.algebraic,"5"),limit:new f,isClosed:new f},"thet")}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(t){var e=this._attributes.funStr.calcu();return new p(e*d(t),e*y(t))}}]),n}(l);v.prototype.type="PolarFunCurve",v.prototype.isPolarFunCurve=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(266),f=n(38),h=n(15),p=Math.floor,d=Math.min,y=Math.max,v=npGeo,_=v.MarchSquaresUtils,g=_.marchSquares,m=_.createSquares,x=v.Vector2,P=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{funStr:new h(i.algebraic,"x ^ 3  + y ^ 3  - 6*x*y"),minX:new h(i.algebraic,"-5"),maxX:new h(i.algebraic,"5"),pNumX:new h(i.algebraic,"100"),minY:new h(i.algebraic,"-5"),maxY:new h(i.algebraic,"5"),pNumY:new h(i.algebraic,"60"),limit:new f,isClosed:new f})).samplePoints=[],s.squarePoints=[],s}return(0,o.default)(n,[{key:"isSegmentColor",get:function(){var t=this.element.dynamicDisplay;return t&&t.stroke&&(t.stroke.isHasVari("x")||t.stroke.isHasVari("y"))}},{key:"isLine",get:function(){return(this._attributes.funStr.isPower0("x")||this._attributes.funStr.isPower1("x"))&&(this._attributes.funStr.isPower0("y")||this._attributes.funStr.isPower1("y"))}},{key:"isConic",get:function(){return!(!this._attributes.funStr.isPower2("x")||!this._attributes.funStr.isPower2("y"))||(!(!this._attributes.funStr.isPower2("x")||!this._attributes.funStr.isPower1("y"))||!(!this._attributes.funStr.isPower1("x")||!this._attributes.funStr.isPower2("y")))}},{key:"isParabola1",get:function(){return this._attributes.funStr.isPower2("x")&&this._attributes.funStr.isPower1("y")}},{key:"isParabola0",get:function(){return this._attributes.funStr.isPower1("x")&&this._attributes.funStr.isPower2("y")}},{key:"__calculateSamples__",value:function(t,e,n){if(!t||t.pNumX<2||t.pNumY<2)return[[]];var i=this._getPathPoints(t,e,n);return this.__closePaths__(i)}},{key:"_getPathPoints",value:function(t,e,n){this._recordPosition(),this._createSquares(t);for(var i,r=this._attributes.funStr,o=this.samplePoints,s=0;i=o[s];s++)this._setXY(i),i.value=r.calcu();for(var a,u=g(this.squarePoints),c=[],l=this.axis,f=this.element,h=0;a=u[h];h++){for(var p,d=[],y=0;p=a[y];y++){var v=e(p,l);v?d.push(n.call(this,v,p,f)):(d.length>1&&c.push(d),d=[])}d.length<2||c.push(d)}return this._restorePosition(),c}},{key:"_createSquares",value:function(t){var e=this._getSquare_argu(t);if(JSON.stringify(this._square_argu)!==JSON.stringify(e)){this._square_argu=e;var n=e.minX,i=e.maxX,r=e.pNumX,o=e.minY,s=e.maxY,a=e.pNumY,u=m(n,i,r,o,s,a),c=u.points,l=u.squares;this.samplePoints=c,this.squarePoints=l}}},{key:"_getSquare_argu",value:function(t){var e=t.maxX,n=t.minX,i=t.maxY,r=t.minY,o=t.pNumX,s=t.pNumY;if(!this.isLimit)return{minX:n,maxX:e,minY:r,maxY:i,pNumX:p(o),pNumY:p(s)};var a=this.axis.transSTG({x:this.axis.output_Model.minX,y:this.axis.output_Model.minY}),u=a.x,c=a.y,l=this.axis.transSTG({x:this.axis.output_Model.maxX,y:this.axis.output_Model.maxY}),f=l.x,h=l.y;return{minX:d(n,u),maxX:y(e,f),minY:d(r,c),maxY:y(i,h),pNumX:p(o),pNumY:p(s)}}},{key:"_recordPosition",value:function(){this._originXY=new x(this.algebraic.get("x"),this.algebraic.get("y"))}},{key:"_restorePosition",value:function(){this._setXY(this._originXY)}},{key:"__notSegmentColor__",value:function(t,e,n){return new x(t.x,t.y)}},{key:"__segmentColor__",value:function(t,e,n){this._setXY(e);var i=n.forceCalulateDynamicDisplay();i.show=!0;var r=new x(t.x,t.y);return r.userData={dis:i},r}},{key:"_setXY",value:function(t){this.algebraic.set("x",t.x),this.algebraic.set("y",t.y)}}]),n}(l);P.prototype.type="ImplicitFunCurve",P.prototype.isImplicitFunCurve=!0,t.exports=P},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(437),f=npGeo.Paths2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.__calculate__(f)}}]),n}(l);h.prototype.type="PointLocus",h.prototype.isPointLocus=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(18),p=n(62),d=npGeo,y=d.Paths2,v=d.Vector2,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{density:new h(8,3,8),isSmooth:new f,algorithm:new p(0,{0:y.bezierCurve,1:y.catmullRom})})}return(0,o.default)(n,[{key:"calculate",value:function(){if(!(this.inputs.length<3)){var t=this.element.inputs.map((function(t){var e=t.output_Model;return new v(e.x,e.y)}));return this.isSmooth?this._attributes.algorithm.getValue()(t,this.density):new y([t])}}},{key:"_attrChanged",value:function(){this.isSmooth=this._attributes.isSmooth.get(),this.density=this._attributes.density.get()}}]),n}(l);_.prototype.type="PointsPath",_.prototype.isPathPoints=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Paths2,p=f.Vector2,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i)).pointArr=new h([[]]),o&&s.setAttr(o),s}return(0,o.default)(n,[{key:"calculate",value:function(){return this.pointArr}},{key:"setAttr",value:function(t){void 0!==t.pointArr&&(this.pointArr=new h(t.pointArr.map((function(t){return t.map((function(t){return new p(t.x,t.y)}))}))))}},{key:"toJSON3",value:function(){return{type:this.type,attr:{pointArr:this.pointArr.points.map((function(t){return t.map((function(t){return{x:t.x,y:t.y}}))}))}}}}]),n}(l);d.prototype.type="FreePaths",d.prototype.isFreePaths=!0,d.prototype.canBindAction=!1,d.prototype.canCopy=!1,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=n(38),h=n(18),p=n(62),d=npGeo,y=d.Polygon2,v=d.Paths2,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{density:new h(8,3,8),isSmooth:new f,algorithm:new p(0,{0:v.bezierCurve,1:v.catmullRom})})}return(0,o.default)(n,[{key:"calculate",value:function(){if(this.inputs.length<3)return y.createUgly();var t=this.inputs.map((function(t){return t.output_Model}));return this._attributes.isSmooth.get()?(t.push(t[0]),this._attributes.algorithm.getValue()(t,this._attributes.density.get())):new y(t)}}]),n}(l);_.prototype.type="PointsPolygon",_.prototype.isPointsPolygon=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=n(15),h=n(62),p=npGeo.Utils,d=p.PI,y=p.DOUBLE_PI,v=Math.round,_=npGeo.Polygon2,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{deneType:new h(0,{0:m,1:x,2:P}),edgeNum:new f(i.algebraic,"3")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=v(this._attributes.edgeNum.calcu());if(!isFinite(t)||t<3)return _.createUgly();var e=this._attributes.deneType.getValue()(this.inputs[0].output_Model,this.inputs[1].output_Model,t);return new _(e)}}]),n}(l);function m(t,e,n){var i=[],r=t,o=e;i.push(r),i.push(o);for(var s=(n-2)*d/n,a=0;a<n-2;a++){var u=r.rotate(o,y-s);i.push(u),r=o,o=u}return i}function x(t,e,n){return P(e,t,n)}function P(t,e,n){var i=[],r=t,o=e;i.push(r);for(var s=y/n,a=0;a<n-1;a++){var u=r.rotate(o,y-s);i.push(u),r=u}return i}g.prototype.type="RegularPolygon",g.prototype.isRegularPolygon=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=npGeo.Polygon2,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs;return t[0].output_Model.isUgly||t[1].output_Model.isUgly?f.createUgly():f.intersection(t[0].output_Model,t[1].output_Model)}}]),n}(l);h.prototype.type="IntersectionPolygon",h.prototype.isIntersectionPolygon=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=n(15),h=n(290),p={fValue:0,eValue:1},d=n(438).getRangeByModel,y=npGeo.Polygon2,v=npGeo.Utils.quantify,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{pNum:new f(i.algebraic,"50"),range1:new h(i.algebraic,{s:0,e:1})})).defaultElement1Range=d(s.inputs[1].output_Model),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return y.createUgly();var e=t.pNum,n=this._getSingeRange(t.range1,e);if(!isFinite(n.step))return y.createUgly();try{for(var i,r=[this.inputs[0].output_Model],o=n.s,s=0;s<=e;s++)(i=this._getPointOnElement1(o)).isUgly||r.push(i),o+=n.step;return new y(r)}catch(t){return console.log(t),y.createUgly()}}},{key:"_getPointOnElement1",value:function(t){return this.inputs[1].output_Model.pointOn(v(t,p,this.defaultElement1Range))}},{key:"_getSingeRange",value:function(t,e){return t.step=(t.e-t.s)/e,t}}]),n}(l);_.prototype.type="PointLinearPolygon",_.prototype.isPointLinearPolygon=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20),n(48);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=n(15),h=n(290),p=n(438).getRangeByModel,d={fValue:0,eValue:1},y=npGeo,v=y.Vector2,_=y.Polygon2,g=npGeo.Utils.quantify,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{pNum:new f(i.algebraic,"50"),range1:new h(i.algebraic,{s:0,e:1}),range2:new h(i.algebraic,{s:0,e:1})})).defaultElement1Range=p(s.inputs[0].output_Model),s.defaultElement2Range=p(s.inputs[1].output_Model),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return _.createUgly();var e=t.pNum,n=this._getSingeRange(t.range1,e),i=this._getSingeRange(t.range2,e);if(!isFinite(n.step)||!isFinite(i.step))return _.createUgly();try{for(var r,o,s=[],a=[],u=[],c=n.s,l=i.s,f=0;f<=e;f++)r=this._getPointOnElement1(c),o=this._getPointOnElement2(l),c+=n.step,l+=i.step,r.isUgly||o.isUgly||(a.push(r),u.push(o));return this._removeJunctionPoint(a,u),s=(s=s.concat(a)).concat(u.reverse()),new _(s)}catch(t){return console.log(t),_.createUgly()}}},{key:"_removeJunctionPoint",value:function(t,e){var n=t[0],i=e[0],r=t.length-1,o=t[r],s=e[r];n&&i&&v.isEqual(n,i)&&t.splice(0,1),o&&s&&v.isEqual(o,s)&&e.splice(r,1)}},{key:"_getPointOnElement1",value:function(t){return this.inputs[0].output_Model.pointOn(g(t,d,this.defaultElement1Range))}},{key:"_getPointOnElement2",value:function(t){return this.inputs[1].output_Model.pointOn(g(t,d,this.defaultElement2Range))}},{key:"_getSingeRange",value:function(t,e){return t.step=(t.e-t.s)/e,t}}]),n}(l);m.prototype.type="2LinearPolygon",m.prototype.is2LinearPolygon=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(221),f=n(38),h=n(18),p=n(62),d=npGeo,y=d.Polygon2,v=d.Paths2,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{density:new h(8,3,8),isSmooth:new f,algorithm:new p(0,{0:v.bezierCurve,1:v.catmullRom})})}return(0,o.default)(n,[{key:"calculate",value:function(){if(this.inputs.length<3)return y.createUgly();var t=this.inputs.map((function(t){return t.output_Model})),e=y.convexHullGrahamScan(t);if(!this._attributes.isSmooth.get())return e;var n=e.points;return n.push(n[0]),this._attributes.algorithm.getValue()(n,this._attributes.density.get())}}]),n}(l);_.prototype.type="ConvexHull",_.prototype.isConvexHull=!0,t.exports=_},function(t,e,n){"use strict";n(4);var i=n(0);n(20),n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(360),f=n(38),h=n(15),p=n(361),d=npGeo.GeoList,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{varis:new p(i.algebraic),pNum:new h(i.algebraic,"100"),isSegmentColor:new f})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.pNum;return t<1?new d:this.__calculate__(t)}},{key:"__calculate__",value:function(t){var e=this._calcuSamples(t);return new d(e)}},{key:"_handleArrByModel",value:function(t,e){return e.isUgly?t:e.output_Model.isGeoList?t.concat(this._getGeoByElement(e)):(t.push(this._getGeoByElement(e)),t)}},{key:"__segmentColor__",value:function(t){var e=t.getValue();return e.userData={dis:t.forceCalulateDynamicDisplay()},e}},{key:"__notSegmentColor__",value:function(t){var e=t.getValue(),n=this.element.displayModel.getAttr();return e.userData={dis:n},e.userData.dis.show=!0,e.isPath?(e.points.forEach((function(t){t.forEach((function(t){t.userData&&delete t.userData}))})),e):e}}]),n}(l);y.prototype.type="Locus",y.prototype.isLocus=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h=n(15),p=n(56),d=n(38),y=n(148),v=npGeo,_=v.Vector2,g=v.Utils.ARC_PER_ANGLE,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={coorType:new f(0,{0:0,1:1}),coorX:new h(i.algebraic,"1"),coorY:new h(i.algebraic,"1"),ratio:new h(i.algebraic,"1"),unit:new p};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new d(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return y(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this.__getExpressValues__();if(!e)return t.constructor.createUgly();var n=this.tranlateVectorFun(e.coorX,e.coorY);return t.translate(n.multiplyScalar(e.ratio))}},{key:"_attrChanged",value:function(){this.angleUnit=this.__isDegree__()?g:1,this.__isUserAxis__()?this.tranlateVectorFun=this.__isRightCoor__()?w:M:this.tranlateVectorFun=this.__isRightCoor__()?x:P}},{key:"__isRightCoor__",value:function(){return 0==this._attributes.coorType.get()}},{key:"__isDegree__",value:function(){return 0==this._attributes.unit.get()}},{key:"__isUserAxis__",value:function(){return!!this.inputs[1]}}]),n}(l);function x(t,e){return new _(t,e)}function P(t,e){return e*=this.angleUnit,new _(t*Math.cos(e),t*Math.sin(e))}function w(t,e){var n=new _(t,e),i=this.inputs[1].constraint.axisTransFormer.getXScale(),r=this.inputs[1].constraint.axisTransFormer.getYScale();return new _(n.x/i,n.y/r)}function M(t,e){var n=P.call(this,t,e),i=this.inputs[1].constraint.axisTransFormer.getXScale(),r=this.inputs[1].constraint.axisTransFormer.getYScale();return new _(n.x/i,n.y/r)}m.prototype.type="TranslateByCoor",m.prototype.isTranslateByCoor=!0,m.prototype.isTranslate=!0,m.prototype.isTransform=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(148),d=npGeo.Vector2,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={ratio:new f(i.algebraic,"1")};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new h(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return p(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.ratio.calcu();return isFinite(e)?t.translate(d.createByPoints(this.inputs[1].output_Model,this.inputs[2].output_Model).multiplyScalar(e)):t.constructor.createUgly()}}]),n}(l);y.prototype.type="TranslateBy2Points",y.prototype.isTranslateBy2Points=!0,y.prototype.isTransform=!0,y.prototype.isTranslate=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(148),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={ratio:new f(i.algebraic,"1")};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new h(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return p(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this._attributes.ratio.calcu();return isFinite(e)?t.translate(this.inputs[1].output_Model.toVector().multiplyScalar(e)):t.constructor.createUgly()}}]),n}(l);d.prototype.type="TranslateBySegment",d.prototype.isTranslateBySegment=!0,d.prototype.isTransform=!0,d.prototype.isTranslate=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(38),h=n(148),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new f(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return h(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){return this.inputs[1].output_Model.isLine?t.reflection(this.inputs[1].output_Model):t.constructor.createUgly()}}]),n}(l);p.prototype.type="Symmetric",p.prototype.isSymmetric=!0,p.prototype.isTransform=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(38),p=n(148),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){(0,r.default)(this,n);var s={a1:new f(i.algebraic,"1"),b1:new f(i.algebraic,"0"),x0:new f(i.algebraic,"1"),a2:new f(i.algebraic,"0"),b2:new f(i.algebraic,"1"),y0:new f(i.algebraic,"1")};return t.inputs[0].output_Model.isGeoList&&(s.isSegmentColor=new h(!0)),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"calculate",value:function(){return p(this,this.__calculate__())}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this.__getExpressValues__();return e?t.affine(e):t.constructor.createUgly()}}]),n}(l);d.prototype.type="AffineByFormula",d.prototype.isAffineByFormula=!0,d.prototype.isAffine=!0,d.prototype.isTransform=!0,t.exports=d},function(t,e,n){var i=n(794),r=n(795),o=n(275),s=n(796);t.exports=function(t){return i(t)||r(t)||o(t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(276);t.exports=function(t){if(Array.isArray(t))return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(0);n(8),n(27),n(3),n(49),n(22),n(130),n(65),n(66);var r=i(n(1)),o=i(n(2)),s={show:n(798),hide:n(799),animation:n(800),stop:n(801),setVarVal:n(802),movePoint:n(803),clearTrace:n(804),hyperlink:n(805),blick:n(806),viewPoint:n(807)},a=function(){function t(e){var n=e.elementsRepository,i=e.dataRepository,o=e.undoRedo,s=e.paper;(0,r.default)(this,t),this.elementsRepository=n,this.dataRepository=i,this.undoRedo=o,this.paper=s,this.actionItems=[]}return(0,o.default)(t,[{key:"set",value:function(t){var e=this;this.validate(t)&&(this.actionItems=t.map((function(t){return new s[t.name](t,e)})))}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){var t=[];return this.actionItems.forEach((function(e){var n=e.toJSON();n&&t.push(n)})),t}},{key:"validate",value:function(t){return t instanceof Array}},{key:"getItemByIndex",value:function(t){return this.actionItems[t]}},{key:"getDesciptionByindex",value:function(t){var e=this.getItemByIndex(t);return e?e.description:""}},{key:"length",value:function(){return this.actionItems.length}},{key:"excuteAll",value:function(){this.actionItems.forEach((function(t){return t.start()}))}},{key:"excuteByIndex",value:function(t){this.actionItems[t].start()}}]),t}();t.exports=a},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"name","show"),o}return(0,o.default)(n,[{key:"action",value:function(t){t.displayModel.setAttr({show:!0})}}]),n}(n(267));t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"name","hide"),o}return(0,o.default)(n,[{key:"action",value:function(t){t.displayModel.setAttr({show:!1})}}]),n}(n(267));t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"name","animation"),o}return(0,o.default)(n,[{key:"action",value:function(t){t.constraint.play(!0)}}]),n}(n(267));t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"name","stop"),o}return(0,o.default)(n,[{key:"action",value:function(t){t.constraint.stop(!0)}}]),n}(n(267));t.exports=h},function(t,e,n){"use strict";n(65),n(66),n(27),n(3),n(49);var i=function(t,e){var n=e.dataRepository;this.dataRepository=n,this.description=t.description,this.varName=this.dataRepository.getDataByName(t.destObjs[0].varName),this.varVal=this.dataRepository.algebraic.createAlgeObjByStr(t.destObjs[0].varValue)};i.prototype={name:"setVarVal",start:function(){this.varName.setValue(this.varVal.calcu())},toJSON:function(){return{name:this.name,description:this.description,destObjs:[{varName:this.varName.name,varValue:this.varVal.toString()}]}}},t.exports=i},function(t,e,n){"use strict";var i=n(0);n(65),n(66),n(27);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=npGeo.Utils.isZero,u=Math.sqrt,c=function(){function t(e,n){var i=this,o=n.elementsRepository,a=n.undoRedo;(0,r.default)(this,t),(0,s.default)(this,"name","movePoint"),this.description=e.description,this.elementsRepository=o,this.speed=e.speed,this.undoRedo=a,this._moveCommand=null,this.timerIndex=void 0;var u=this._getMaxElementsIDbyActionList(e.destObjs);if(this.elementsRepository.get(u))this.initMovePoint(e.destObjs);else{this.elementsRepository.on("add",(function t(n){n.get("id")==u&&(i.initMovePoint(e.destObjs),i.elementsRepository.off("add",t))}))}}return(0,o.default)(t,[{key:"initMovePoint",value:function(t){this.moveP=this.elementsRepository.get(t[0]),this.moveP_arr=[this.moveP],this.endP=this.elementsRepository.get(t[1])}},{key:"startFun",get:function(){return this.moveP.output_Model.isPoint2?this.start2D:this.start3D}},{key:"start",value:function(){void 0!==this.timerIndex&&clearTimeout(this.timerIndex);var t=this.moveP,e=this.endP;t&&!t.get("isDeleted")&&e&&!e.get("isDeleted")&&this.startFun()}},{key:"start2D",value:function(){var t=this.moveP.output_Model,e=this.endP.output_Model;if(!t.isUgly&&!e.isUgly){if(this._moveCommand=this.undoRedo.moveTo(this.moveP_arr,null,t),0==this.speed)return this.undoRedo.moveTo(this.moveP_arr,null,e);var n=3*parseInt(this.speed),i=e.x-t.x,r=e.y-t.y;if(!a(i)||!a(r)){var o=u(i*i+r*r)/n,s=parseInt(200*o),c=i/s,l=r/s,f=this,h=t.x,p=t.y;!function t(){s<=0||(s--,h+=c,p+=l,f._moveCommand.moveTo(null,{x:h,y:p}),f.timerIndex=setTimeout(t,5))}()}}}},{key:"start3D",value:function(){var t=this.moveP.output_Model,e=this.endP.output_Model;if(!t.isUgly&&!e.isUgly){if(this._moveCommand=this.undoRedo.moveTo(this.moveP_arr,null,t),0==this.speed)return this.undoRedo.moveTo(this.moveP_arr,null,e);var n=3*parseInt(this.speed),i=e.x-t.x,r=e.y-t.y,o=e.z-t.z;if(!(a(i)&&a(r)&&a(o))){var s=u(i*i+r*r+o*o)/n,c=parseInt(200*s),l=i/c,f=r/c,h=o/c,p=t.x,d=t.y,y=t.z,v=this;!function t(){c<=0||(c--,p+=l,d+=f,y+=h,v._moveCommand.moveTo(null,{x:p,y:d,z:y}),v.timerIndex=setTimeout(t,5))}()}}}},{key:"_getMaxElementsIDbyActionList",value:function(t){for(var e=0,n=0;n<t.length;n++)isNaN(t[n])||(e=Math.max(e,t[n]));return e}},{key:"toJSON",value:function(){if(this.moveP&&this.endP&&!this.moveP.get("isDeleted")&&!this.endP.get("isDeleted"))return{name:this.name,description:this.description,destObjs:[this.moveP.get("id"),this.endP.get("id")],speed:this.speed}}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=n(0);n(65),n(66),n(27);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=function(){function t(e,n){var i=n.paper;(0,r.default)(this,t),(0,s.default)(this,"name","clearTrace"),this.description=e.description,this.paper=i}return(0,o.default)(t,[{key:"start",value:function(){this.paper.trigger("clearTrace")}},{key:"toJSON",value:function(){return{name:this.name,description:this.description}}}]),t}();t.exports=a},function(t,e,n){"use strict";var i=n(0);n(65),n(66),n(27);var r=i(n(1)),o=i(n(2)),s=i(n(19)),a=function(){function t(e){(0,r.default)(this,t),(0,s.default)(this,"name","hyperlink"),this.description=e.description,this.url=e.url}return(0,o.default)(t,[{key:"start",value:function(){window.open(this.url)}},{key:"toJSON",value:function(){return{name:this.name,description:this.description,url:this.url}}}]),t}();t.exports=a},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(t){(0,a.default)(n,t);var e=f(n);function n(t,i){var o;return(0,r.default)(this,n),o=e.call(this,t,i),(0,l.default)((0,s.default)(o),"name","blick"),o}return(0,o.default)(n,[{key:"action",value:function(t){t.trigger("BLICK")}}]),n}(n(267));t.exports=h},function(t,e,n){"use strict";var i=n(0)(n(43));n(65),n(66),n(3),n(188),n(27);var r=npGeo.Utils,o=r.isZero,s=r.PI,a=r.DOUBLE_PI,u=function(t,e){var n=e.paper;if(this.paper=n,this.description=t.description,this.isAnimation=t.animation,t.rotation)this.position=t.position||[10,-10,10],this.rotation=t.rotation||[0,0,1],this.scale=t.scale||[1,1,1];else{var i=n.calcByCamera(t.position,t.up,n.get("perspective"));this.position=i.position,this.rotation=i.rotation,this.scale=i.scale}};function c(t,e){var n=(t%=a)-(e%=a);return n>s?n-a:n<-s?n+a:n}u.prototype={name:"viewPoint",start:function(){this.isAnimation?this.animation():this.updateViewPoint(this.scale,this.rotation,this.position)},animation:function(){clearTimeout(this.viewPointIndex);var t=this.paper.globalGroup.scale.x,e=this.paper.globalGroup.rotation.toArray(),n=(0,i.default)(e,3),r=n[0],s=n[1],a=n[2],u=this.paper.globalGroup.position.toArray(),l=(0,i.default)(u,3),f=l[0],h=l[1],p=l[2],d=100,y=(this.scale[0]-t)/d,v=c(this.rotation[0],r)/d,_=c(this.rotation[1],s)/d,g=c(this.rotation[2],a)/d,m=(this.position[0]-f)/d,x=(this.position[1]-h)/d,P=(this.position[2]-p)/d;if(!(o(y)&&o(v)&&o(_)&&o(g)&&o(m)&&o(x)&&o(P))){var w=this,M=function e(){--d<=1?w.updateViewPoint(w.scale,w.rotation,w.position):(t+=y,r+=v,s+=_,a+=g,f+=m,h+=x,p+=P,w.viewPointIndex=setTimeout(e,20),w.updateViewPoint([t,t,t],[r,s,a],[f,h,p]))};this.viewPointIndex=setTimeout(M,20)}},updateViewPoint:function(t,e,n){this.paper.updateViewPoint({scale:t,rotation:e,position:n})},toJSON:function(){return{name:this.name,description:this.description,destObjs:[],position:this.position,rotation:this.rotation,scale:this.scale,animation:this.isAnimation}}},t.exports=u},function(t,e,n){"use strict";var i=n(0);n(65),n(66);var r=i(n(1)),o=i(n(2)),s=function(){function t(e){var n=e.curStep,i=e.totalStep,o=e.description,s=e.position;(0,r.default)(this,t),this._attributes={curStep:n,totalStep:i,description:o,position:s}}return(0,o.default)(t,[{key:"curStep",get:function(){return this._attributes.curStep}},{key:"totalStep",get:function(){return this._attributes.totalStep}},{key:"description",get:function(){return this._attributes.description}},{key:"position",get:function(){return this._attributes.position}}]),t}();s.prototype.type="ActionButton",s.prototype.isActionButtonOutput=!0,t.exports=s},function(t,e,n){"use strict";var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s={0:n(449),1:n(450)},a={0:n(362),1:n(452)},u=function(){function t(e){var n=e.dataRepository,i=e.algebraic;(0,r.default)(this,t),this.dataRepository=n,this.algebraic=i,this.varObjs=[],this.varObjsExp=[],this.animationItem=new s[0]}return(0,o.default)(t,[{key:"updateAnimationItem",value:function(t){var e=t.aniType,n=t.quenceType,i=t.times;this.animationItem=2==e?new s[n]:new a[e],this.animationItem.setAttr({quenceType:n,aniType:e,times:i,varObjs:this.varObjsExp})}},{key:"set",value:function(t){var e=this;this.validate(t)&&(this.varObjs=t,this.varObjsExp=t.map((function(t){return{varis:e.dataRepository.getDataByName(t.varName),s:e.algebraic.createAlgeObjByStr(t.s),e:e.algebraic.createAlgeObjByStr(t.e),num:e.algebraic.createAlgeObjByStr(t.num),timer:parseInt(t.timer)}})))}},{key:"get",value:function(){return this.varObjs}},{key:"toString",value:function(){return this.varObjs}},{key:"validate",value:function(t){return t instanceof Array}},{key:"calculate",value:function(t){this.animationItem.calculate(t)}},{key:"play",value:function(t){this.animationItem.play(t)}},{key:"stop",value:function(){this.animationItem.stop()}}]),t}();t.exports=u},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t),this._attributes={position:e,playStatus:n}}return(0,o.default)(t,[{key:"position",get:function(){return this._attributes.position}},{key:"playStatus",get:function(){return this._attributes.playStatus}}]),t}();s.prototype.type="AnimationButton",s.prototype.isAnimationButtonOutput=!0,t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t),this._attributes={position:e,play:n}}return(0,o.default)(t,[{key:"position",get:function(){return this._attributes.position}},{key:"play",get:function(){return this._attributes.play}}]),t}();s.prototype.type="Audio",s.prototype.isAudioButtonOutput=!0,t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2));t.exports=function(){function t(e){(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=t)}},{key:"get",value:function(){return this.value}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return t instanceof Array}}]),t}()},function(t,e,n){"use strict";var i=n(0);n(75),n(223),n(8),n(195),n(159),n(121),n(3),n(49);var r=i(n(1)),o=i(n(2)),s=n(458),a=n(459),u=a.NETPAD_BL_REX,c=a.VARIS_REX,l=function(){function t(e,n,i){(0,r.default)(this,t);var o=document.createElement("div");o.innerHTML=e,e=(e=o.innerText).substring(2,e.length-2).replace(/&nbsp;/g," "),this.dataRepository=n,this.blList={};var s=(e=this.__handleBlList__(e)).split("=").map((function(t){if(t&&t.trim())return i.strToLatex(t)||t}));this.formularStr=s.join("=")}return(0,o.default)(t,[{key:"__handleBlList__",value:function(t){var e=this,n=0;return t.replace(c,(function(t){var i="NETPAD"+n+++"BL";return e.blList[i]=new s(t,e.dataRepository),i}))}},{key:"toString",value:function(){var t=this,e=this.formularStr.replace(u,(function(e){return t.blList[e].toString()}));try{return katex.renderToString(e)}catch(t){return e}}}]),t}();t.exports=l},function(t,e,n){"use strict";var i=n(0);n(87),n(3),n(132),n(75),n(185),n(223),n(195);var r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){(0,r.default)(this,t);var i=document.createElement("div");i.innerHTML=e,this.str=i.innerText,this.algebraic=n,this.conditions=[],this.values=[],this.defultValue="",this._init(),this._vm=void 0}return(0,o.default)(t,[{key:"vm",get:function(){if(this._vm)return this._vm;for(var t,e={},n=0;t=this.conditions[n];n++)e=$.extend({},e,t.getVaris());return this._vm=e,this._vm}},{key:"_init",value:function(){try{var t=this.str.match(/\((.+?)\)/g)[0],e=(t=t.substring(1,t.length-1).replace(/&nbsp;/g," ")).split(",");e.length%2==1&&(this.defultValue=e.pop());for(var n=0,i=0;n<e.length-1;n+=2,i++)this.conditions[i]=this.algebraic.createAlgeObjByStr(e[n]),this.values[i]=e[n+1]}catch(t){this.conditions=[],this.values=[],this.defultValue=""}}},{key:"toString",value:function(){for(var t,e=0;t=this.conditions[e];e++)if(t.calcu())return this.values[e];return this.defultValue}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2));t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.value=t)}},{key:"get",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(t){return t+""}}]),t}()},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(19)),a=function(){function t(e,n,i){(0,r.default)(this,t),(0,s.default)(this,"isHtmlTextOutput",!0),(0,s.default)(this,"type","HtmlText"),this._attributes={position:e,textWidth:n,value:i}}return(0,o.default)(t,[{key:"position",get:function(){return this._attributes.position}},{key:"textWidth",get:function(){return this._attributes.textWidth}},{key:"value",get:function(){return this._attributes.value}}]),t}();t.exports=a},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165),h=f.lineGeneralToTex,p=f.conicGeneralToTex,d=n(32),y=n(18),v=n(36),_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new d,accuracy:new y(2),bind:new v(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.isLine?h(t.coefficient,this._attributes.accuracy.get()):t.isConic?p(t.coefficient,this._attributes.accuracy.get()):"?"}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);_.prototype.type="MeasureGeneralForm",_.prototype.isMeasureGeneralForm=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165),h=f.circle00StandardToTex,p=f.parabolaStandardToTex,d=f.ellipseStandardToTex,y=f.hyperbolaStandardToTex,v=n(32),_=n(18),g=n(36),m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new v,accuracy:new _(2),bind:new g(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),!t.isNormal)return"?";var e=this._attributes.accuracy.get();return t.isCircle?h(t.centre,t.radius,e):t.isParabola?p(t.coefficient,e):t.isEllipse?d(t.coefficient,e):t.isHyperbola?y(t.coefficient,e):"?"}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);m.prototype.type="MeasureNormalForm",m.prototype.isMeasureNormalForm=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo,f=l.Utils.DOUBLE_PI,h=l.Vector2,p=n(57),d=n(32),y=n(62),v=n(18),_=n(56),g=n(36),m={0:function(t,e){return f-t.angleWith(e)},1:function(t,e){return t.angleWith(e)},2:function(t,e){return t.directionAngleWith(e)},3:function(t,e){return e.directionAngleWith(t)}},x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new d,angleDefine:new y(1,{0:0,1:1,2:2,3:3}),unit:new _(0),accuracy:new v(2),bind:new g(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this.inputs[2].output_Model;this.inputs[3]&&(t=this.inputs[3].transSTG(t),e=this.inputs[3].transSTG(e),n=this.inputs[3].transSTG(n));var i=h.createByPoints(e,t),r=h.createByPoints(e,n);return i.isZero()||r.isZero()?NaN:m[this._attributes.angleDefine.get()](i,r)}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name"),n=this.inputs[2].get("name");return t&&e&&n?"\\angle ".concat(t).concat(e).concat(n," = "):""}}]),n}(p);x.prototype.type="MeasureAngleOf3Points",x.prototype.isMeasureAngle3Points=!0,t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo,f=l.Utils.DOUBLE_PI,h=l.Vector2,p=n(57),d=n(32),y=n(18),v=n(56),_=n(36),g={0:function(t,e){return f-t.angleWith(e)},1:function(t,e){return t.angleWith(e)},2:function(t,e){return t.directionAngleWith(e)},3:function(t,e){return e.directionAngleWith(t)}},m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new d,unit:new v,accuracy:new y(2),bind:new _(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].inputs[0].output_Model,e=this.inputs[0].inputs[1].output_Model,n=this.inputs[0].inputs[2].output_Model;this.inputs[1]&&(t=this.inputs[1].transSTG(t),e=this.inputs[1].transSTG(e),n=this.inputs[1].transSTG(n));var i=h.createByPoints(e,t),r=h.createByPoints(e,n);return i.isZero()||r.isZero()?NaN:g[this.inputs[0].constraint.getAttr().angleDefine](i,r)}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"\\angle ".concat(t," = "):""}}]),n}(p);m.prototype.type="MeasureAngleOfLabelAngle",m.prototype.isMeasureAngleOfLabelAngle=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(56),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,unit:new p,accuracy:new h(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){return this.inputs[0].output_Model.centerAngle}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"\\angle ".concat(t," = "):""}}]),n}(l);y.prototype.type="MeasureArcAngle",y.prototype.isMeasureArcAngle=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Utils,f=l.isZero,h=l.PI,p=Math.atan,d=n(57),y=n(32),v=n(18),_=n(56),g=n(36),m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new y,unit:new _,accuracy:new v(2),bind:new g(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;if(!t.isLine)return NaN;this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()));var e=-t.coefficient.A/t.coefficient.B,n=p(e);return f(n)&&(n=0),n<0&&(n+=h),n}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} = "):""}}]),n}(d);m.prototype.type="MeasureAngleOfInclination",m.prototype.isMeasureAngleOfInclination=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Utils.isZero,f=n(57),h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;if(!t.isLine)return NaN;this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()));var e=t.coefficient;return l(e.B)?NaN:-e.A/e.B}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} = "):""}}]),n}(f);y.prototype.type="MeasureSlope",y.prototype.isMeasureSlope=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Utils.isZero,f=n(57),h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;if(!t.isLine)return NaN;this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()));var e=t.coefficient,n=NaN;return l(e.A)||(n=-e.C/e.A,l(n)&&(n=0)),n}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{x} = "):""}}]),n}(f);y.prototype.type="MeasureXIntercept",y.prototype.isMeasureXIntercept=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Utils.isZero,f=n(57),h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;if(!t.isLine)return NaN;this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()));var e=t.coefficient,n=NaN;return l(e.B)||(n=-e.C/e.B,l(n)&&(n=0)),n}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{y} = "):""}}]),n}(f);y.prototype.type="MeasureYIntercept",y.prototype.isMeasureYIntercept=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=n(56),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,unit:new d,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()),t.angle()}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"_{\\theta} = "):""}}]),n}(l);y.prototype.type="MeasurePolarAngle",y.prototype.isMeasurePolarAngle=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()),t.length()}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"_{\\rho} = "):""}}]),n}(l);d.prototype.type="MeasurePolarRadius",d.prototype.isMeasurePolarRadius=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(36),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new h(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){return this.inputs[0].output_Model.isConic?this.inputs[0].output_Model.eccentricity:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} = "):""}}]),n}(l);d.prototype.type="MeasureEccentricity",d.prototype.isMeasureEccentricity=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(36),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new h(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.isConic?t.halfFocalLength:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} = "):""}}]),n}(l);d.prototype.type="MeasureSemiFocus",d.prototype.isMeasureSemiFocus=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(36),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new h(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.isConic?t.longRadius:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name");if(!t)return"";var e=this.inputs[0].output_Model;return e.isEllipse?"".concat(t,"\\text{} = "):e.isHyperbola?"".concat(t,"\\text{} = "):""}}]),n}(l);d.prototype.type="MeasureSemiMajorAxis",d.prototype.isMeasureSemiMajorAxis=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(18),p=n(36),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new h(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.isConic?t.shortRadius:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name");if(!t)return"";var e=this.inputs[0].output_Model;return e.isEllipse?"".concat(t,"\\text{} = "):e.isHyperbola?"".concat(t,"\\text{} = "):""}}]),n}(l);d.prototype.type="MeasureSemiMinorAxis",d.prototype.isMeasureSemiMinorAxis=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(t,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t," "):""}}]),n}(l);y.prototype.type="MeasureRightCoor",y.prototype.isMeasureRightCoor=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.centre)return"(?, ?)";var e=t.centre;return this.inputs[1]&&(e=e.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(e,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);y.prototype.type="MeasureCentre",y.prototype.isMeasureCentre=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(93),n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=npGeo.Utils.isZero,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()));var e=t.coefficient,n="?";if(!f(e.A)&&!f(e.B)){var i=-e.C/e.A,r=-e.C/e.B,o=this._attributes.accuracy.get();isNaN(i)||isNaN(r)||(i=i.toFixed(o)/1,r=r.toFixed(o)/1,0!=i&&0!=r&&(n="".concat(i<0?"-":"","\\dfrac{x}{").concat(Math.abs(i),"} ").concat(r<0?"-":"+"," \\dfrac{y}{").concat(Math.abs(r),"} = 1")))}return n}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);y.prototype.type="MeasureInterceptForm",y.prototype.isMeasureInterceptForm=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(93),n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=npGeo.Utils.isZero,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(this.inputs[1]&&(t=t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),t.isLine){var e=t.coefficient,n=e.B,i=this._attributes.accuracy.get();if(!f(n)){var r=e.A,o=-(e.C/n).toFixed(i);if(f(r))return"y = ".concat(o);var s=-(r/n).toFixed(i)/1,a="";return a=1==s?"x":-1==s?"-x":"".concat(s,"x"),o<0?"y = ".concat(a," - ").concat(-o," "):0==o?"y = ".concat(a," "):"y = ".concat(a," + ").concat(o," ")}return"?"}}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);y.prototype.type="MeasureSlopeInterceptForm",y.prototype.isMeasureSlopeInterceptForm=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).lineGeneralToTex,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,index:new p(0),accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.getAsymptoteByIndex)return"";var e=t.getAsymptoteByIndex(this._attributes.index.get());return this.inputs[1]&&(e=e.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(e.coefficient,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{").concat(this._attributes.index.get()+1,"} "):""}}]),n}(l);y.prototype.type="MeasureAsymptote",y.prototype.isMeasureAsymptote=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).lineGeneralToTex,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,index:new p(0),accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.getDirectrixByIndex)return"";var e=t.getDirectrixByIndex(this._attributes.index.get());return this.inputs[1]&&(e=e.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(e.coefficient,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{").concat(this._attributes.index.get()+1,"} "):""}}]),n}(l);y.prototype.type="MeasureDirectrix",y.prototype.isMeasureDirectrix=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,index:new p(0),accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.getFocusByIndex)return"(?, ?)";var e=t.getFocusByIndex(this._attributes.index.get());return this.inputs[1]&&(e=e.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(e,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{").concat(this._attributes.index.get()+1,"} "):""}}]),n}(l);y.prototype.type="MeasureFocus",y.prototype.isMeasureFocus=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(165).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,index:new p(0),accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.getVertexByIndex)return"(?, ?)";var e=t.getVertexByIndex(this._attributes.index.get());return this.inputs[1]&&(e=e.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG())),f(e,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{").concat(this._attributes.index.get()+1,"} "):""}}]),n}(l);y.prototype.type="MeasureVertex",y.prototype.isMeasureVertex=!0,t.exports=y},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(86)),o=i(n(1)),s=i(n(2)),a=n(18);t.exports=function(){function t(e){(0,o.default)(this,t),this.a1=new a(1),this.a2=new a(0),this.b1=new a(0),this.b2=new a(1),this.x0=new a(0),this.y0=new a(0),this.set(e)}return(0,s.default)(t,[{key:"set",value:function(t){if(this.validate(t))for(var e in t)this[e]&&this[e].set(t[e])}},{key:"get",value:function(){return{a1:this.a1.toString(),a2:this.a2.toString(),b1:this.b1.toString(),b2:this.b2.toString(),x0:this.x0.toString(),y0:this.y0.toString()}}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return"object"===(0,r.default)(t)&&isFinite(t.a1)&&isFinite(t.a2)&&isFinite(t.b1)&&isFinite(t.b2)&&isFinite(t.x0)&&isFinite(t.y0)}}]),t}()},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(1)),o=i(n(2));t.exports=function(){function t(e){(0,r.default)(this,t),this.value=e}return(0,o.default)(t,[{key:"set",value:function(t){this.value=t}},{key:"get",value:function(){return this.toString()}},{key:"toString",value:function(){return this.value}},{key:"validate",value:function(){return!0}}]),t}()},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=npGeo.Utils,a=s.isZero,u=s.DOUBLE_PI,c=function(){function t(e,n){(0,r.default)(this,t),this._paper=e,this._attr=n,this._caluAttr={gPosition:void 0}}return(0,o.default)(t,[{key:"isUgly",get:function(){if(!this._paper)return!0;if(!this._attr.position)return!0;var t=this.position;return!isFinite(t.left)||!isFinite(t.top)}},{key:"affine_obj",get:function(){return this._attr.affine}},{key:"picPath",get:function(){return this._attr.picPath}},{key:"imgWidth",get:function(){return this._attr.imgWidth}},{key:"imgHeight",get:function(){return this._attr.imgHeight}},{key:"position",get:function(){return this._attr.position}},{key:"gPosition",get:function(){return void 0===this._caluAttr.gPosition&&(this._caluAttr.gPosition=this._paper.transSTG({x:this._attr.position.left+this._attr.imgWidth/2,y:this._attr.position.top+this._attr.imgHeight/2})),this._caluAttr.gPosition}},{key:"getAttr",value:function(){return this}},{key:"__calcRealAffine__",value:function(t,e){var n=t.a1,i=t.a2,r=t.b1,o=t.b2,s=t.x0,a=t.y0,u=e.a1,c=e.a2,l=e.b1,f=e.b2,h=e.x0,p=e.y0;return{a1:n*u+r*c,a2:i*u+o*c,b1:n*l+r*f,b2:i*l+o*f,x0:n*h+r*p+s,y0:i*h+o*p+a}}},{key:"transGPosToPostion",value:function(t,e,n){e=e||this._attr.imgWidth,n=n||this._attr.imgHeight;var i=this._paper.transGTS(t);return{left:i.x-e/2,top:i.y-n/2}}},{key:"translate",value:function(e){return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:this.affine_obj,position:this.transGPosToPostion(this.gPosition.translate(e))})}},{key:"zoom",value:function(e,n){var i=this._attr.imgWidth*n,r=this._attr.imgHeight*n;return new t(this._paper,{picPath:this._attr.picPath,imgWidth:i,imgHeight:r,affine:this.affine_obj,position:this.transGPosToPostion(this.gPosition.zoom(e,n),i,r)})}},{key:"rotate",value:function(e,n){var i=u-n;return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:this.__calcRealAffine__(this.affine_obj,{a1:Math.cos(i),a2:Math.sin(i),b1:-Math.sin(i),b2:Math.cos(i),x0:0,y0:0}),position:this.transGPosToPostion(this.gPosition.rotate(e,n))})}},{key:"reflection",value:function(e){var n,i=e.coefficient;if(a(i.B))n=this.__calcRealAffine__({a1:-1,a2:0,b1:0,b2:1,x0:0,y0:0},this.affine_obj);else{var r=i.A/i.B;n=this.__calcRealAffine__({a1:(1-r*r)/(1+r*r),a2:2*r/(1+r*r),b1:2*r/(1+r*r),b2:(r*r-1)/(1+r*r),x0:0,y0:0},this.affine_obj)}return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:n,position:this.transGPosToPostion(this.gPosition.reflection(e))})}},{key:"centroSymmetric",value:function(e){return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:this.__calcRealAffine__(this.affine,{a1:-1,a2:0,b1:0,b2:-1,x0:0,y0:0}),position:this.transGPosToPostion(this.gPosition.centroSymmetric(e))})}},{key:"affine",value:function(e){return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:this.__calcRealAffine__(this.affine_obj,{a1:e.a1,a2:-e.a2,b1:-e.b1,b2:e.b2,x0:e.x0,y0:e.y0}),position:this.transGPosToPostion(this.gPosition.affine(e))})}},{key:"mergeToPoint",value:function(e,n){var i=this.imgWidth,r=this.imgHeight,o=this._paper.transGTS(e),s={left:o.x+n.left-i/2,top:o.y+n.top-r/2};return new t(this._paper,{picPath:this._attr.picPath,imgWidth:this._attr.imgWidth,imgHeight:this._attr.imgHeight,affine:this._attr.affine,position:s})}}],[{key:"createUgly",value:function(){return new t(null,{position:{left:NaN,top:NaN}})}}]),t}();c.prototype.type="Picture",c.prototype.isAssist=!0,c.prototype.isPicture=!0,c.prototype.canTranslate=!0,c.prototype.canReflection=!0,c.prototype.canCentroSymmetric=!0,c.prototype.canRotate=!0,c.prototype.canZoom=!0,c.prototype.canAffine=!0,c.prototype.canIter=!0,t.exports=c},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e){(0,r.default)(this,t),this._attr=e}return(0,o.default)(t,[{key:"getAttr",value:function(){return this}},{key:"value",get:function(){return this._attr.value}},{key:"textWidth",get:function(){return this._attr.textWidth}},{key:"position",get:function(){return this._attr.position}},{key:"isUgly",get:function(){if(!this._attr.position)return!0;var t=this.position;return!isFinite(t.left)||!isFinite(t.top)}}],[{key:"createUgly",value:function(){return new this({position:{left:NaN,top:NaN}})}}]),t}();s.prototype.type="Text",s.prototype.isAssist=!0,s.prototype.isText=!0,s.prototype.canIter=!0,t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e){(0,r.default)(this,t),this._attributes=e}return(0,o.default)(t,[{key:"paramName",get:function(){return this._attributes.paramName}},{key:"min",get:function(){return this._attributes.min}},{key:"max",get:function(){return this._attributes.max}},{key:"step",get:function(){return this._attributes.step}},{key:"value",get:function(){return this._attributes.value}},{key:"val",get:function(){return this._attributes.val}},{key:"position",get:function(){return this._attributes.position}},{key:"playStatus",get:function(){return this._attributes.playStatus}}]),t}();s.prototype.type="Variable",s.prototype.isVariableRulerOutput=!0,t.exports=s},function(t,e,n){"use strict";function i(t,e){for(var n=e.slice(0),i=0;i<t.length;i++)n.splice(t[i],1,e[t[i]].outputsData[0]);return n}n(16),n(82),n(48),n(106),n(131),n(8),t.exports=function(){this.oriImageElements=this.inputs.slice(0,this.spNum),this.mapImageElements=function(t,e){for(var n=[],i=t.slice(e),r=[i[0]],o=1;o<i.length;o++)o%e==0&&(n.push(r),r=[]),r.push(i[o]);return n.push(r),n}(this.inputs,this.spNum),this.rs=function(t,e){for(var n,i=[],r=0;n=t[r];r++)n.getChildren00(i);i.sort((function(t,e){return t.get("id")-e.get("id")}));var o=i.indexOf(e);o>-1&&i.splice(o);for(var s,a=0;s=t[a];a++)i.includes(s)&&i.splice(i.indexOf(s),1);return i}(this.oriImageElements,this.element);var t,e,n,r=function(t){for(var e,n=[],i=0;e=t[i];i++)e.output_Model.isPoint||n.push(i);return n}(this.oriImageElements);this.oriImages=i(r,this.oriImageElements),this.mapImages=function(t,e){for(var n,r=[],o=0;n=e[o];o++)r.push(i(t,n));return r}(r,this.mapImageElements),this.elementsAffectToIter=function(t,e){for(var n,i=t.slice(0),r=0;n=e[r];r++)i.includes(n)||i.push(n);return i}(this.rs,this.inputs),this.mapgetValue=(t=this.rs,e=this.mapImages,n=this.isRandom,e.map((function(e){return e.map((function(e){return n&&e.getRandomPosition&&!t.includes(e)?"getGeoRandomPosition":"getValue"}))})))}},function(t,e,n){"use strict";var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(19)),a=(0,r.default)((function t(){(0,o.default)(this,t),(0,s.default)(this,"type","Group"),(0,s.default)(this,"isGroup",!0)}));t.exports=a},function(t,e,n){"use strict";var i={GlobalAxis:n(848),XGlobalAxisLine:n(477),YGlobalAxisLine:n(477),UCSXAxisLine:n(478),UCSYAxisLine:n(478),UCSAxis:n(849),OriginPoint:n(54),FreePoint:n(54),PointsMidPoint:n(54),LineMidPoint:n(54),CentrePoint:n(54),RightPoint:n(54),PolarPoint:n(54),FootPoint:n(54),FocusPoint:n(54),VertexPoint:n(54),VEqualPoint:n(54),ParaEqualPoint:n(54),TangentPoint:n(54),ClosestPoint:n(54),ConstraintPoint:n(54),IntersectionPoint:n(54),ParallelIntersection:n(54),VerticalIntersection:n(54),ThroughPointIntersection:n(54),XAxisControlPoint:n(54),YAxisControlPoint:n(54),XAxisSPoint:n(54),XAxisEPoint:n(54),YAxisSPoint:n(54),YAxisEPoint:n(54),InElementPoint:n(54),OnElementPoint:n(54),OnPLinePoint:n(54),OnVLinePoint:n(54),OnEqualSegmentPoint:n(54),OnIterPoint:n(54),OnCompositePathsPoint:n(54),Segment:n(124),Ray:n(124),Straight:n(124),Bisector:n(124),Asymptote:n(124),Directrix:n(124),ParaLine:n(124),VertiLine:n(124),TangentLine:n(124),LineByPointSlope:n(124),LineByPointAngle:n(124),LineByPointXIntercept:n(124),LineByPointYIntercept:n(124),AngleLabel:n(850),LineLabel:n(851),LengthLabel:n(852),"3PointsArc":n(479),OnCircleArc:n(479),"2PointsCircle":n(268),"3PointsCircle":n(268),PointLineCircle:n(268),PointRCircle:n(268),TangentCircle:n(268),"3PointsConic":n(203),LineFocusConic:n(203),"5PointsConic":n(203),NormalParabola:n(203),NormalEllipse:n(203),NormalHyperbola:n(203),"3PointsParabola":n(203),YFunCurve:n(204),XFunCurve:n(204),ParamFunCurve:n(204),PolarFunCurve:n(204),ImplicitFunCurve:n(204),PointLocus:n(204),PointsPath:n(204),FreePaths:n(853),PointsPolygon:n(224),RegularPolygon:n(224),IntersectionPolygon:n(224),PointLinearPolygon:n(224),"2LinearPolygon":n(224),ConvexHull:n(224),Locus:n(854),Action:n(480),Animation:n(481),DynamicAudio:n(482),CustomFunction:n(292),DerivativeFunction:n(292),DynamicText:n(483),MeasureExpress:n(33),MeasureGeneralForm:n(33),MeasureNormalForm:n(33),MeasureArea:n(33),MeasureLength:n(33),MeasureValueOfPointToObj:n(33),MeasureAngleOf3Points:n(33),MeasureAngleOfLabelAngle:n(33),MeasureArcAngle:n(33),MeasureRadius:n(33),MeasureAngleOfInclination:n(33),MeasureProportioOf2Lines:n(33),MeasureSlope:n(33),MeasureXIntercept:n(33),MeasureYIntercept:n(33),MeasureCoorX:n(33),MeasureCoorY:n(33),MeasureDistanceOf2Points:n(33),MeasurePolarAngle:n(33),MeasurePolarRadius:n(33),MeasureRatioOf3Points:n(33),MeasureEccentricity:n(33),MeasureSemiFocus:n(33),MeasureSemiMajorAxis:n(33),MeasureSemiMinorAxis:n(33),MeasureRightCoor:n(33),MeasureCentre:n(33),MeasureInterceptForm:n(33),MeasureSlopeInterceptForm:n(33),MeasureAsymptote:n(33),MeasureDirectrix:n(33),MeasureFocus:n(33),MeasureVertex:n(33),CombinationPicture:n(293),FreePicture:n(293),CombinationText:n(484),VariableRuler:n(485),Iter:n(486),Group:n(45)};t.exports=function(t){return i[t]}},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!1,type:1,x:{step:1,PI2:1,tick:0,number:0},y:{step:1,PI2:1,tick:0,number:0}},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.type=this.get("type"),t.x=this.get("x"),t.y=this.get("y"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,type:1,x:{step:1,PI2:1},y:{step:1,PI2:1}},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.type=this.get("type"),t.x=this.get("x"),t.y=this.get("y"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(73),s=i.extend({defaults:{show:!0,labelStyle:1,angleDirect:!1},initialize:function(){this.fillModel=new o,this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.labelStyle=this.get("labelStyle"),t.angleDirect=this.get("angleDirect"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,labelStyle:2},initialize:function(){this.strokeModel=new r,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.labelStyle=this.get("labelStyle"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(50),o=n(287),s=i.extend({defaults:{show:!0,lengthStyle:0},initialize:function(){this.strokeModel=new r,this.fontModel=new o,this.initializeBase()},getAttr:function(){var t=this.getAttrBase();return t.lengthStyle=this.get("lengthStyle"),t},setAttr:function(t){this.setAttrBase(t),this.set(t)}});t.exports=s},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=i.extend({defaults:{show:!0},initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.initializeBase()}});t.exports=s},function(t,e,n){"use strict";var i=n(45),r=n(202),o=n(50),s=n(178),a=i.extend({initialize:function(){this.fillModel=new r,this.strokeModel=new o,this.arrowModel=new s,this.initializeBase()}});t.exports=a},function(t,e,n){"use strict";var i=n(0);n(16),n(3),n(22);var r=(0,i(n(28)).default)(n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(864),n(865),n(866),n(867),n(488));t.exports=function(t){var e=this,n=t instanceof Array?t.slice(0):[t],i=[];return n.forEach((function(t){var n,o;for(var s in t)n=s,o=t[s];var a=r[n].apply(e,o);if(!(a instanceof Array))return i.push(e.undoRedo.constructByJSON3(a,!0));var u=!0;a.forEach((function(t){i.push(e.undoRedo.constructByJSON3(t,u)),u&&(u=!1)}))})),1===n.length&&n[0].hasOwnProperty("UCSAxis")?this.setCurrentUserAxisById(i[i.length-2]):(this.selectManager.clearSelected(),this.selectManager.selectByIds(i)),1===i.length?i[0]:i}},function(t,e,n){"use strict";n(8);var i=npGeo.Vector2;t.exports={Point:function(t,e){return{type:"Point",def:{type:"FreePoint",attr:{position:{x:t||0,y:e||0}}}}},MidPoint:function(t,e){return this.elementsRepos.get(t).output_Model.isSegment?{type:"Point",def:{type:"LineMidPoint",parents:[t]}}:{type:"Point",def:{type:"PointsMidPoint",parents:[t,e]}}},CentrePoint:function(t){return{type:"Point",def:{type:"CentrePoint",parents:[t]}}},Intersection:function(t,e,n){var r=this.getIntersectionSets(this.elementsRepos.get(t),this.elementsRepos.get(e));if(!r)return null;if(null!=n)return{type:"Point",def:{type:"IntersectionPoint",parents:[t,e],attr:{index:n}}};var o=r.getIntersection();if(o instanceof Array){if(0==o.length)return null;var s=o.length;2==s&&i.isEqual(o[0],o[1])&&(s=1);for(var a=[],u=0;u<s;u++)a.push(u);return a.map((function(n){return{type:"Point",def:{type:"IntersectionPoint",parents:[t,e],attr:{index:n}}}}))}return o.isUgly?null:{type:"Point",def:{type:"IntersectionPoint",parents:[t,e]}}},ParallelIntersection:function(t,e,n,i){return{type:"Point",def:{type:"ParallelIntersection",parents:[t,e,n],attr:{index:i}}}},Verticallntersection:function(t,e,n,i){return{type:"Point",def:{type:"Verticallntersection",parents:[t,e,n],attr:{index:i}}}},ThroughPointIntersection:function(t,e,n,i){return{type:"Point",def:{type:"ThroughPointIntersection",parents:[t,e,n],attr:{index:i}}}},RightPoint:function(t,e,n,i,r){var o={};return"number"==typeof t?(o.x=e,o.y=n,i&&(o.dragX=i),r&&(o.dragY=r),{type:"Point",def:{type:"RightPoint",parents:[t],attr:o}}):(o.x=t,o.y=e,n&&(o.dragX=n),i&&(o.dragY=i),{type:"Point",def:{type:"RightPoint",attr:o}})},PolarPoint:function(t,e,n){var i={};return"number"==typeof t?(i.r=e,i.p=n,{type:"Point",def:{type:"PolarPoint",parents:[t],attr:i}}):(i.r=t,i.p=e,{type:"Point",def:{type:"PolarPoint",attr:i}})},OnElementPoint:function(t,e,n){e||(n=e=this.dataRepository.getUDataName(),this.algbraicSys.set(e,Math.random()));var i="OnCompositePathsPoint",r=t;if(!(t instanceof Array)||1===t.length){var o=this.elementsRepos.get(t instanceof Array?t[0]:t);i=o.output_Model.isGeoList?"OnIterPoint":"OnElementPoint",r=[o.get("id")]}return{type:"Point",outVais:n,def:{type:i,parents:r,attr:{inVais:e,outVais:n}}}},InElementPoint:function(t){var e=this.dataRepository.getUDataName(),n=this.dataRepository.getUDataName();return this.algbraicSys.set(n,.5),this.algbraicSys.set(e,.5),{type:"Point",def:{type:"InElementPoint",parents:[t],attr:{dragDx:e,dragDy:n,dx:e,dy:n}}}},FocusPoint:function(t,e){var n=this.elementsRepos.get(t);return void 0!==e||n.output_Model.isParabola?{type:"Point",def:{type:"FocusPoint",parents:[t],attr:{index:e}}}:[0,1].map((function(e){return{type:"Point",def:{type:"FocusPoint",parents:[t],attr:{index:e}}}}))},VertexPoint:function(t,e){var n=this.elementsRepos.get(t);return void 0!==e||n.output_Model.isParabola?{type:"Point",def:{type:"VertexPoint",parents:[t],attr:{index:e}}}:[0,1,2,3].map((function(e){return{type:"Point",def:{type:"VertexPoint",parents:[t],attr:{index:e}}}}))},FootPoint:function(t,e){return{type:"Point",def:{type:"FootPoint",parents:[t,e]}}},OnVLinePoint:function(t,e,n){return{type:"Point",def:{type:"OnVLinePoint",parents:[t,e]}}},OnPLinePoint:function(t,e,n){return{type:"Point",def:{type:"OnPLinePoint",parents:[t,e]}}},OnEqualSegmentPoint:function(t,e,n){return{type:"Point",def:{type:"OnEqualSegementPoint",parents:[t,e]}}},VEqualPoint:function(t,e,n){return{type:"Point",def:{type:"VEqualPoint",parents:[t,e],attr:{direct:n||0}}}},ParaEqualPoint:function(t,e,n){return{type:"Point",def:{type:"ParaEqualPoint",parents:[t,e],attr:{direct:n||0}}}},TangentPoint:function(t,e,n){return{type:"Point",def:{type:"TangentPoint",parents:[t,e]}}},ClosestPoint:function(t,e){return{type:"Point",def:{type:"ClosestPoint",parents:[t,e]}}}}},function(t,e,n){"use strict";n(8),n(70),n(3);var i=npGeo.Line2;t.exports={Straight:function(t,e){return{type:"Line",def:{type:"Straight",parents:[t,e]}}},Ray:function(t,e){return{type:"Line",def:{type:"Ray",parents:[t,e]}}},Segment:function(t,e){return{type:"Line",def:{type:"Segment",parents:[t,e]}}},Bisector:function(t,e,n){var i=[t,e];return void 0!==n&&i.push(n),{type:"Line",def:{type:"Bisector",parents:i}}},Asymptote:function(t,e){return void 0!==e?{type:"Line",def:{type:"Asymptote",parents:[t],attr:{index:e}}}:[0,1].map((function(e){return{type:"Line",def:{type:"Asymptote",parents:[t],attr:{index:e}}}}))},Directrix:function(t,e){var n=this.elementsRepos.get(t);return void 0!==e||n.output_Model.isParabola?{type:"Line",def:{type:"Directrix",parents:[t],attr:{index:e||0}}}:[0,1].map((function(e){return{type:"Line",def:{type:"Directrix",parents:[t],attr:{index:e}}}}))},ParaLine:function(t,e){return{type:"Line",def:{type:"ParaLine",parents:[t,e]}}},VertiLine:function(t,e){return{type:"Line",def:{type:"VertiLine",parents:[t,e]}}},LineByPointSlope:function(t,e,n){var i=[t];return n&&i.push(n),{type:"Line",def:{type:"LineByPointSlope",parents:i,attr:{slope:e}}}},LineByPointXIntercept:function(t,e,n){var i=[t];return n&&i.push(n),{type:"Line",def:{type:"LineByPointXIntercept",parents:i,attr:{xIntercept:e}}}},LineByPointYIntercept:function(t,e,n){var i=[t];return n&&i.push(n),{type:"Line",def:{type:"LineByPointYIntercept",parents:i,attr:{yIntercept:e}}}},LineByPointAngle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=[t];return i&&r.push(i),{type:"Line",def:{type:"LineByPointAngle",parents:r,attr:{slantAngle:e,unit:n}}}},TangentLine:function(t,e,n){var r=this.getTangentSets(this.getElementById(t),this.getElementById(e)).getTangent(),o=r.filter((function(t){return!t.isUgly}));return 0==o.length?null:void 0!==n?{type:"Line",def:{type:"TangentLine",parents:[t,e],attr:{index:n}}}:(2==o.length&&this.getElementById(t).output_Model.isPoint&&i.isEqual(o[0],o[1])&&o.pop(),o.map((function(n){return{type:"Line",def:{type:"TangentLine",parents:[t,e],attr:{index:r.indexOf(n)}}}})))}}},function(t,e,n){"use strict";t.exports={Circle:function(t,e,n){return void 0!==n?{type:"Circle",def:{type:"3PointsCircle",parents:[t,e,n]}}:{type:"Circle",def:{type:this.getElementById(e).output_Model.isPoint?"2PointsCircle":"PointLineCircle",parents:[t,e]}}},RadiusCircle:function(t,e){return{type:"Circle",def:{type:"PointRCircle",parents:[t],attr:{radius:e}}}},TangentCircle:function(t,e){return{type:"Circle",def:{type:"TangentCircle",parents:[t,e]}}}}},function(t,e,n){"use strict";t.exports={Arc:function(t,e,n){return{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:0}}}},CircumArc:function(t,e,n){return{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:1}}}},CentreArc:function(t,e,n){return{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:2}}}},OnCircleArc:function(t,e,n){return{type:"Arc",def:{type:"OnCircleArc",parents:[t,e,n]}}}}},function(t,e,n){"use strict";t.exports={Conic:function(t,e,n,i,r){return{type:"Conic",def:{type:"5PointsConic",parents:[t,e,n,i,r]}}},Hyperbola:function(t,e,n){return void 0!==n?{type:"Conic",def:{type:"3PointsConic",parents:[t,e,n],attr:{conicType:1}}}:{type:"Conic",def:{type:"LineFocusConic",parents:[t,e],attr:{eccentricity:2}}}},NormalHyperbola:function(t,e,n){var i=t.a,r=t.b,o=t.c,s=t.e,a=t.direct,u=[];if(i&&u.push({a:i}),r&&u.push({b:r}),o&&u.push({c:o}),s&&u.push({e:s}),!(u.length<2)){var c={};for(var l in u[0])c.parName1=l,c.par1=u[0];for(var f in u[1])c.parName2=f,c.par2=u[1];c.direct=a||"x";var h=[];return e||(h.push({type:"Point",def:{type:"FreePoint",attr:{position:{x:5*Math.random(),y:5*Math.random()}}}}),e=this.elementsRepos.length),h.push({type:"Conic",def:{type:"NormalHyperbola",parents:[e,n],attr:c}}),h}},Parabola:function(t,e,n){return void 0!==n?{type:"Conic",def:{type:"3PointsConic",parents:[t,e,n],attr:{conicType:2}}}:{type:"Conic",def:{type:"LineFocusConic",parents:[t,e],attr:{eccentricity:1}}}},NormalParabola:function(t,e,n){if("number"==typeof t)return{type:"Conic",def:{type:"3PointsParabola",parents:[t,e,n]}};var i=[];return e||(i.push({type:"Point",def:{type:"FreePoint",attr:{position:{x:5*Math.random(),y:5*Math.random()}}}}),e=this.elementsRepos.length),i.push({type:"Conic",def:{type:"NormalParabola",parents:[e,n],attr:{para:t.p,direct:t.direct||"upper"}}}),i},Ellipse:function(t,e,n){return void 0!==n?{type:"Conic",def:{type:"3PointsConic",parents:[t,e,n],attr:{conicType:0}}}:{type:"Conic",def:{type:"LineFocusConic",parents:[t,e],attr:{eccentricity:.6}}}},NormalEllipse:function(t,e,n){var i=t.a,r=t.b,o=t.c,s=t.e,a=t.direct,u=[];if(i&&u.push({a:i}),r&&u.push({b:r}),o&&u.push({c:o}),s&&u.push({e:s}),!(u.length<2)){var c={};for(var l in u[0])c.parName1=l,c.par1=u[0];for(var f in u[1])c.parName2=f,c.par2=u[1];c.direct=a||"x";var h=[];return e||(h.push({type:"Point",def:{type:"FreePoint",attr:{position:{x:5*Math.random(),y:5*Math.random()}}}}),e=this.elementsRepos.length),h.push({type:"Conic",def:{type:"NormalEllipse",parents:[e,n],attr:c}}),h}}}},function(t,e,n){"use strict";n(16),t.exports={YCurve:function(){var t,e=Array.prototype.slice.call(arguments);return e[0]&&"number"==typeof e[0]&&(t=[e.shift()]),{type:"Curve",def:{type:"YFunCurve",parents:t,attr:{funStr:e[0]||"x",min:e[1]||"-5",max:e[2]||"5",pNum:e[3]||"200",stepNum:e[4]||5,isClosed:e[5]||!1,limit:e[6]||!1}}}},XCurve:function(){var t,e=Array.prototype.slice.call(arguments);return e[0]&&"number"==typeof e[0]&&(t=[e.shift()]),{type:"Curve",def:{type:"XFunCurve",parents:t,attr:{funStr:e[0]||"y",min:e[1]||"-5",max:e[2]||"5",pNum:e[3]||"200",stepNum:e[4]||5,isClosed:e[5]||!1,limit:e[6]||!1}}}},ParamCurve:function(){var t,e=Array.prototype.slice.call(arguments);return e[0]&&"number"==typeof e[0]&&(t=[e.shift()]),{type:"Curve",def:{type:"ParamFunCurve",parents:t,attr:{funStrx:e[0]||"t",funStry:e[1]||"t",min:e[2]||"-5",max:e[3]||"5",pNum:e[4]||"200",stepNum:e[5]||5,isClosed:e[6]||!1,limit:e[6]||!1}}}},PolarCurve:function(){var t,e=Array.prototype.slice.call(arguments);return e[0]&&"number"==typeof e[0]&&(t=[e.shift()]),{type:"Curve",def:{type:"PolarFunCurve",parents:t,attr:{funStr:e[0]||"thet",min:e[1]||"0",max:e[2]||"2*pi",pNum:e[3]||"200",stepNum:e[4]||5,isClosed:e[5]||!1,limit:e[6]||!1}}}},ImplicitCurve:function(){var t,e=Array.prototype.slice.call(arguments);return e[0]&&"number"==typeof e[0]&&(t=[e.shift()]),{type:"Curve",def:{type:"ImplicitFunCurve",parents:t,attr:{funStr:e[0]||"x ^ 3 + y ^ 3 - 6 * x * y",minX:e[1]||"-5",maxX:e[2]||"5",minY:e[3]||"-5",maxY:e[4]||"5"}}}},Path:function(){return{type:"Curve",def:{type:"PointsPath",parents:Array.prototype.slice.call(arguments)}}},FreePaths:function(t){return{type:"Curve",def:{type:"FreePaths",attr:{pointArr:t}}}}}},function(t,e,n){"use strict";n(16),t.exports={Polygon:function(t,e){if(arguments.length>2)return{type:"Polygon",def:{type:"PointsPolygon",parents:Array.prototype.slice.call(arguments)}};var n=this.getElementById(t);return{type:"Polygon",def:{type:n.output_Model.isPoint?"PointLinearPolygon":"2LinearPolygon",parents:[t,e]}}},RegularPolygon:function(t,e,n,i){return{type:"Polygon",def:{type:"RegularPolygon",parents:[t,e],attr:{edgeNum:n,deneType:i||0}}}},FixedEdgePolygon:function(t,e,n){var i=(n-2)*Math.PI/n,r=this.getElementById(t).displayModel.getAttr();r.show=!0;for(var o=t,s=e,a=this.elementsRepos.length,u=[t,e],c=[],l=0;l<n-2;l++)c.push({type:"Point",dis:r,def:{type:"Rotate",parents:[o,s],attr:{ang:i}}}),u.push(a),o=s,s=a++;return c.push({type:"Polygon",def:{type:"PointsPolygon",parents:u.slice(0)}}),u.push(a),c.push({type:"Group",name:"",def:{type:"Group",parents:u.slice(0)}}),c},IntersectionPolygon:function(t,e){return{type:"Polygon",def:{type:"IntersectionPolygon",parents:[t,e]}}},ConvexHull:function(){return{type:"Polygon",def:{type:"ConvexHull",parents:Array.prototype.slice.call(arguments)}}}}},function(t,e,n){"use strict";t.exports={LineLabel:function(t){return{type:"LineLabel",def:{type:"LineLabel",parents:[t]}}},AngleLabel:function(t,e,n){return{type:"AngleLabel",def:{type:"AngleLabel",parents:[t,e,n]}}},LengthLabel:function(t,e,n){return{type:"LengthLabel",def:{type:"LengthLabel",parents:[t,e,n]}}}}},function(t,e,n){"use strict";n(3);var i=["XAxisEPoint","XAxisSPoint","YAxisEPoint","YAxisSPoint","XAxisControlPoint"];t.exports={UCSAxis:function(t){var e=this,n=[],r=this.elementsRepos.length;t||(t=r,r++,n.push({type:"Point",name:"O",def:{type:"FreePoint",attr:{position:{x:5*Math.random(),y:5*Math.random()}}}}));for(var o=[t],s=0;s<9;s++)o.push(r+s);i.forEach((function(i){n.push(function(t,e,n){var i=t.dataRepository.getUDataName();return t.algbraicSys.set(i,1),{type:"Point",outVais:i,def:{type:n,parents:[e],attr:{inVais:i,outVais:i}}}}(e,t,i))}));var a=n[n.length-1].outVais;return n.push({type:"Point",outVais:a,def:{type:"YAxisControlPoint",parents:[t],attr:{inVais:a,outVais:a}}}),n.push({type:"UCSAxisLine",name:"x",def:{type:"UCSXAxisLine",parents:[o[2],o[1],t,o[5]]},label:{nameVal:1}}),n.push({type:"UCSAxisLine",name:"y",def:{type:"UCSYAxisLine",parents:[o[4],o[3],t,o[6]]},label:{nameVal:1}}),n.push({type:"UCSAxis",name:this.elementsRepos.uscLength+1+"",attr:{selectable:!1},def:{type:"UCSAxis",parents:[o[7],o[8]]}}),n.push({type:"Group",name:"",def:{type:"Group",parents:o}}),n}}},function(t,e,n){"use strict";function i(t,e){if(!e||0===e.length){if(!t.output_Model.isPoint||!t.constraint.isHFPoint&&!t.constraint.isRightPoint||!t.outputsData&&0===t.outputsData.length)return null;var n=[],i=[];return t.outputsData.forEach((function(e){var r=t.constraint.getAttr();-1!==e.getChildren00().indexOf(t)&&-1===i.indexOf(e)&&(i.push(e),n.push({varName:e.name,startVal:void 0!==r.fValue?r.fValue:-5,endVal:void 0!==r.eValue?r.eValue:5}))})),n}if(!t.output_Model.isPoint&&!t.output_Model.isLinear)return null;var r=[],o=[];return e.forEach((function(e){(e.outputsData||0!==!e.outputsData.length)&&e.outputsData.forEach((function(n){var i=e.constraint.getAttr();-1!==n.getChildren00().indexOf(t)&&-1===o.indexOf(n)&&(o.push(n),r.push({varName:n.name,startVal:void 0!==i.fValue?i.fValue:-5,endVal:void 0!==i.eValue?i.eValue:5}))}))})),t.outputsData&&t.outputsData.length>0&&t.outputsData.forEach((function(e){-1!==e.getChildren00().indexOf(t)&&-1===o.indexOf(e)&&(o.push(e),r.push({varName:e.name,startVal:e.name,endVal:e.name}))})),r}n(3),n(22),n(27),n(16),n(8),t.exports={Locus:function(){var t=this,e=Array.prototype.slice.call(arguments),n=this.getElementById(e.shift()),r=i(n,e.map((function(e){return t.getElementById(e)})));if(r&&0!==r.length)return{type:n.output_Model.isPoint?"Curve":"Locus",def:{type:n.output_Model.isPoint?"PointLocus":"Locus",parents:[n.get("id")],attr:{varis:r,pNum:100,stepNum:5}}}}}},function(t,e,n){"use strict";n(16),n(3),n(22);var i=n(222),r=n(201);function o(t,e,n){var i=this.getElementById(t),r=i.displayModel.getAttr(),o=i.get("name")?this.nameConstructor.getNameByElement(i):"";return r.show=!0,{type:n?n(i):s(i),name:o,def:e,dis:r}}function s(t){return"GlobalAxisLine"===t.type||"UCSAxisLine"===t.type?"Line":"Iter"===t.type?"TransformIter":t.type}function a(t){return t.output_Model.isPoint?"Point":t.output_Model.isLine?"Line":t.output_Model.isPicture?"Picture":t.output_Model.isPolygon?"Polygon":t.output_Model.isGeoList?"TransformIter":"Curve"}function u(t){return t.output_Model.isPoint?"Point":t.output_Model.isPolygon?"Polygon":t.output_Model.isCircle||t.constraint.isLine&&t.output_Model.isStraight?"Circle":t.output_Model.isArc||t.constraint.isLine&&t.output_Model.isLine?"Arc":t.output_Model.isGeoList?"TransformIter":"Curve"}t.exports={Translate:function(t,e,n,i,r,s){return o.call(this,t,{type:"TranslateByCoor",parents:[t,s],attr:{coorX:e,coorY:n,unit:r,coorType:i||0}})},TranslateBySegment:function(t,e,n){return o.call(this,t,{type:"TranslateBySegment",parents:[t,e],attr:{ratio:n||"1"}})},TranslateBy2Points:function(t,e,n,i){return o.call(this,t,{type:"TranslateBy2Points",parents:[t,e,n],attr:{ratio:i||"1"}})},Rotate:function(t,e,n,i,r){return o.call(this,t,{type:"Rotate",parents:[t,e],attr:{ang:n,nUnit:r||0,direct:i||0}})},Dilate:function(t,e,n){return o.call(this,t,{type:"Dilate",parents:[t,e],attr:{ratio:n||"0.5"}})},Reflect:function(t,e){var n=this.getElementById(e);return o.call(this,t,{type:n.output_Model.isPoint?"Centrosymmetric":"Symmetric",parents:[t,e]})},Inversion:function(t,e,n){return o.call(this,t,{type:"Inversion",parents:[t,e],attr:{inverPower:n}},u)},Affine:function(t,e){return o.call(this,t,{type:"AffineByFormula",parents:[t],attr:e},a)},AffineByPoints:function(){return o.call(this,arguments[0],{type:"AffineByPoints",parents:Array.prototype.slice.call(arguments)},a)},CustomTransform:function(t,e,n){var s=this.getElementById(t),u=this.getElementById(e),c=this.getElementById(n),l=r.isLegal(u,c);if(l){var f=[t];return l.inputs.forEach((function(t){f.push(t.get("id"))})),o.call(this,t,{type:s.output_Model.isPoint?"CustomTransformSpecialPoint":"CustomTransformSpecialPoints",parents:f},(function(t){return t.output_Model.isPoint?"Point":"Curve"}))}var h=i.isLegal(u,c);if(h){var p=[t];return h.inputs.forEach((function(t){p.push(t.get("id"))})),o.call(this,t,{type:"CustomTransform",parents:p},a)}}}},function(t,e,n){"use strict";function i(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.position=n.getNextAssistPosition(),e.forEach((function(t){if(t){var e=n.getElementById(t);e&&!e.constraint.isUCSAxis&&(e.get("name")||e.set({name:n.nameConstructor.getNameByElement(e)}),e.nameModel&&e.nameModel.set("callShow",!0))}}));var o=i?n.dataRepository.getMDataName():void 0;return{type:"Measure",name:o,outVais:o,def:{type:t,parents:e,attr:r}}}n(8),n(3),n(22),t.exports={MeasureCoorX:function(t,e){return i("MeasureCoorX",[t,e],this,!0)},MeasureCoorY:function(t,e){return i("MeasureCoorY",[t,e],this,!0)},MeasurePolarAngle:function(t,e,n){return i("MeasurePolarAngle",[t,e],this,!0,{unit:n})},MeasurePolarRadius:function(t,e){return i("MeasurePolarRadius",[t,e],this,!0)},MeasureRightCoor:function(t,e){return i("MeasureRightCoor",[t,e],this)},MeasureLength:function(t,e){return i("MeasureLength",[t,e],this,!0)},MeasureSlope:function(t,e){return i("MeasureSlope",[t,e],this,!0)},MeasureXIntercept:function(t,e){return i("MeasureXIntercept",[t,e],this,!0)},MeasureYIntercept:function(t,e){return i("MeasureYIntercept",[t,e],this,!0)},MeasureAngleOfInclination:function(t,e,n){return i("MeasureAngleOfInclination",[t,e],this,!0,{unit:n})},MeasureInterceptForm:function(t,e){return i("MeasureInterceptForm",[t,e],this)},MeasureSlopeInterceptForm:function(t,e){return i("MeasureSlopeInterceptForm",[t,e],this)},MeasureGeneralForm:function(t,e){return i("MeasureGeneralForm",[t,e],this)},MeasureRadius:function(t,e){return i("MeasureRadius",[t,e],this,!0)},MeasureArea:function(t,e){return i("MeasureArea",[t,e],this,!0)},MeasureCentre:function(t,e){return i("MeasureCentre",[t,e],this)},MeasureNormalForm:function(t,e){return i("MeasureNormalForm",[t,e],this)},MeasureArcAngle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i("MeasureArcAngle",[t,e],this,!0,{unit:n})},MeasureVertex:function(t,e,n){var r=this,o=this.getElementById(t).output_Model;if(o.isConic){var s=o.isParabola?[0]:[0,1,2,3];if(void 0!==n){if(-1===s[n])return;s=[n]}return s.map((function(n){return i("MeasureVertex",[t,e],r,!1,{index:n})}))}},MeasureFocus:function(t,e,n){var r=this,o=this.getElementById(t).output_Model;if(o.isConic){var s=o.isParabola?[0]:[0,1];if(void 0!==n){if(-1===s[n])return;s=[n]}return s.map((function(n){return i("MeasureFocus",[t,e],r,!1,{index:n})}))}},MeasureDirectrix:function(t,e,n){var r=this,o=this.getElementById(t).output_Model;if(o.isConic){var s=o.isParabola?[0]:[0,1];if(void 0!==n){if(-1===s[n])return;s=[n]}return s.map((function(n){return i("MeasureDirectrix",[t,e],r,!1,{index:n})}))}},MeasureAsymptote:function(t,e,n){var r=this;if(this.getElementById(t).output_Model.isConic){var o=[0,1];if(void 0!==n){if(-1===o[n])return;o=[n]}return o.map((function(n){return i("MeasureAsymptote",[t,e],r,!1,{index:n})}))}},MeasureSemiFocus:function(t,e){return i("MeasureSemiFocus",[t,e],this,!0)},MeasureEccentricity:function(t,e){return i("MeasureEccentricity",[t,e],this,!0)},MeasureSemiMajorAxis:function(t,e){return i("MeasureSemiMajorAxis",[t,e],this,!0)},MeasureSemiMinorAxis:function(t,e){return i("MeasureSemiMinorAxis",[t,e],this,!0)},MeasureAngle:function(t,e,n){return i("MeasureAngleOfLabelAngle",[t,e],this,!0,{unit:n})},MeasureBigAngle:function(t,e,n,r,o){return i("MeasureAngleOf3Points",[t,e,n,r],this,!0,{unit:o,angleDefine:0})},MeasureSmallAngle:function(t,e,n,r,o){return i("MeasureAngleOf3Points",[t,e,n,r],this,!0,{unit:o,angleDefine:1})},MeasureAnticlockwiseAngle:function(t,e,n,r,o){return i("MeasureAngleOf3Points",[t,e,n,r],this,!0,{unit:o,angleDefine:2})},MeasureClockwiseAngle:function(t,e,n,r,o){return i("MeasureAngleOf3Points",[t,e,n,r],this,!0,{unit:o,angleDefine:3})},MeasureRatioOf3Points:function(t,e,n,r){return i("MeasureRatioOf3Points",[t,e,n,r],this,!0)},MeasureDistance:function(t,e,n){return i("MeasureDistanceOf2Points",[t,e,n],this,!0)},MeasureProportioOf2Lines:function(t,e,n){return i("MeasureProportioOf2Lines",[t,e,n],this,!0)},MeasureValueOfPointToObj:function(t,e,n){var r={};return this.getElementById(e).output_Model.isCircle&&(r={fValue:0,eValue:6.284}),i("MeasureValueOfPointToObj",[t,e,n],this,!0,r)}}},function(t,e,n){"use strict";var i=n(0);n(3),n(22);var r=i(n(1)),o=i(n(2)),s=function(){function t(){(0,r.default)(this,t),this._commands=[]}return(0,o.default)(t,[{key:"add",value:function(t){this._commands.push(t)}},{key:"redo",value:function(){this._commands.forEach((function(t){return t.redo()}))}},{key:"undo",value:function(){for(var t,e=this._commands.length-1;t=this._commands[e];e--)t.undo()}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){var i=e.selectManager,o=e.elementsRepos,s=e.elementsFactory;(0,r.default)(this,t),this.selectManager=i,this.elementsRepos=o,this.elementsFactory=s,this.argu=n,this._results=[]}return(0,o.default)(t,[{key:"execute",value:function(){var t=this.argu,e=t.fun,n=t.arg,i=this.elementsFactory[e].apply(this.elementsFactory,n);if(!i)throw"";if(i instanceof Array&&i.length>0){for(var r=0;r<i.length;r++)this._results.push(this.elementsRepos.get(i[r]));return this.selectManager.selectByIds(i),i}return this._results.push(this.elementsRepos.get(i)),this.selectManager.clearSelected(),this.selectManager.selectByIds([i]),i}},{key:"redo",value:function(){this.selectManager.clearSelected();var t=this.elementsRepos.cancelDeleted(this._results);this.selectManager.selectByIds(t)}},{key:"undo",value:function(){this.selectManager.clearSelected(),this.elementsRepos.deleted(this._results)}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){var i=e.selectManager,o=e.elementsRepos,s=e.elementsFactory;(0,r.default)(this,t),this.selectManager=i,this.elementsRepos=o,this.elementsFactory=s,this.objs=n}return(0,o.default)(t,[{key:"execute",value:function(){this.redo()}},{key:"redo",value:function(){this.selectManager.clearSelected(),this.delObjs=this.elementsRepos.deleted(this.objs)}},{key:"undo",value:function(){this.selectManager.clearSelected();var t=this.elementsRepos.cancelDeleted(this.delObjs);this.selectManager.selectByIds(t)}}]),t}();t.exports=s},function(t,e,n){"use strict";var i=n(0),r=i(n(1)),o=i(n(2)),s=function(){function t(e,n){var i=e.selectManager,o=e.elementsRepos,s=e.elementsFactory;(0,r.default)(this,t),this.selectManager=i,this.elementsRepos=o,this.elementsFactory=s,this.arg=n,this.result={}}return(0,o.default)(t,[{key:"execute",value:function(){for(var t in this.arg)if(this.arg.hasOwnProperty(t)){var e=this.elementsRepos.get(t);e&&(this.result[t]={pre:e.toJSON3(),now:this.arg[t]})}this.redo()}},{key:"redo",value:function(){for(var t in this.result)this.elementsRepos.get(t).fromJSON3(this.result[t].now)}},{key:"undo",value:function(){for(var t in this.result)this.elementsRepos.get(t).fromJSON3(this.result[t].pre)}}]),t}();t.exports=s},function(t,e,n){"use strict";n(4);var i=n(0);n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Vector2,f=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o,s=t.paper,a=t.elementsRepos,u=i.elements,c=i.sPos,l=i.gPos,f=i.isCapture,h=i.userAxis_id;(0,r.default)(this,n),(o=e.call(this,u,c,l,s,a))._isCapture=f,o._userAxis=o.elementsRepos.get(h);for(var p,d=0;p=u[d];d++)if(!(p.get("id")>3)){o._isDragAxis=!0;break}return o._isDragAxis||o._findDragableElements(u),o._isCapture&&(o._moveFreePoints=function(t){o.freePoints&&o.freePoints.forEach((function(e){e.fromJSON3({def:{attr:{position:o._userAxis.output_Model.getGridPoint(o._getGridPos(e,t,o.origin_gPos))}}})}))}),o}return(0,o.default)(n,[{key:"_moveAxis",value:function(t){if(this._isDragAxis)return this.paper.moveOriginPos({x:t.x,y:t.y}),!0}},{key:"_getGridPos",value:function(t,e,n){var i=this.originPositions[t.get("id")];return new l(i.x+e.x-n.x,i.y+e.y-n.y)}}]),n}(n(490));t.exports=f},function(t,e,n){n(281)("iterator")},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo.Vector3,f=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i){var o,s=t.paper,a=t.elementsRepos,u=i.elements,c=i.sPos,l=i.gPos;return(0,r.default)(this,n),(o=e.call(this,u,c,l,s,a))._findDragableElements(u),o}return(0,o.default)(n,[{key:"_getGridPos",value:function(t,e,n){var i=this.originPositions[t.get("id")];return new l(i.x+e.x-n.x,i.y+e.y-n.y,i.z+e.z-n.z)}}]),n}(n(490));t.exports=f},function(t,e,n){"use strict";n(4);var i=n(0);n(130),n(3),n(22);var r=i(n(1)),o=i(n(2)),s=i(n(12)),a=i(n(5)),u=i(n(6)),c=i(n(7)),l=i(n(19));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var h=n(388),p=n(876),d=n(878),y=n(419),v=n(880),_=n(881),g=n(400),m=n(401),x=n(402),P=n(403),w=n(404),M=n(882),b=n(995),R=n(146),S=n(222),k=n(201),E=n(489),A=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(this,n),i=e.call(this,t),(0,l.default)((0,s.default)(i),"mode","3D"),i.is3D=!0,i.environmentConfig=new p,o&&o.environmentConfig&&i.environmentConfig.setEnvironmentConfig(o.environmentConfig),i.paper=new d({environmentConfig:i.environmentConfig,elementsRepos:i.elementsRepos}),i.elementsFactory=new M(i.elementsRepos,y,v,_,i.algbraicSys,i.dataRepository,i.paper,i.nameConstructor,i.environmentConfig,(0,s.default)(i)),i.undoRedo=new E((0,s.default)(i)),i.copyPasteService=new g((0,s.default)(i),o&&o.allowCopyCrossPages),i.cov=new w((0,s.default)(i)),i.paperView=i.cov.paperView,i.bindEvents=i.paperView.bindEvents,i.$el.append(i.cov.$el).focus(),R.isPhone&&i.$el.append(new P(i.selectManager,i.paperView.bindEvents).$el),new m((0,s.default)(i)),i.keyboardEvents=new x((0,s.default)(i),o&&o.forbidKeys,!1),i.elementsFactory.globalAxis(),i.cov.reset(),i.bindEvents.bindSelect(),i._addEvents(),i}return(0,o.default)(n,[{key:"getIntersectionSets",value:function(t,e){return y.getIntersectionSets(t,e)}},{key:"getTangentSets",value:function(t,e){return v.getTangentSets(t,e)}},{key:"canCustomTransformRule",value:function(t,e){return S.isLegal(t,e)}},{key:"canCustomTransformRule_ToPoints",value:function(t,e){return k.isLegal(t,e)}},{key:"resetCamera",value:function(t){this.paperView.model.resetViewPoint(t)}},{key:"toJSON3",value:function(){return{version:"3.1",environment:"3D",defaultTheme:this.environmentConfig.getEnvironmentConfig(),thumbnail:this.paper.get("thumbnail"),parameters:this.dataRepository.toJSON(),customFun:this.algbraicSys.toJSONArrayCustomFun(),paper:this.paper.toJSON3(),elements:this.elementsRepos.toJSON3()}}},{key:"_formJSON3",value:function(t){var e=this;this.environmentConfig.setEnvironmentConfig(t.defaultTheme?t.defaultTheme:{}),t.parameters.forEach((function(t){e.algbraicSys.set(t.paramName,t.value)})),t.customFun&&this.algbraicSys.fromJSONArrayCustomFun(t.customFun),this.paper.formJSON3(t.paper),t.thumbnail&&this.paper.set({thumbnail:t.thumbnail});try{this.elementsFactory.restoreByJSON3(t.elements)}catch(t){console.log(t)}}}]),n}(h);A.canSupport3D=function(){return Detector.webgl&&THREE.LineMaterial},A.prototype.createElements=b,t.exports=A},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(106),n(131);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=np.EventDispatcher,f=n(877),h=n(72),p=h.deepToJSON,d=h.deepCopy,y=["XAxisSPoint","XAxisEPoint","YAxisSPoint","YAxisEPoint","ZAxisSPoint","ZAxisEPoint"],v={FreePoint:["FreePoint"],HalfPoint:["RightPoint","OnElementPoint","OnIterPoint","OnCompositePathsPoint","OnPlanePoint"],ConstraintPoint:["OriginPoint","PointsMidPoint","LineMidPoint","CentrePoint","ClosestPoint","ConstraintPoint","PolyhedronPoint","IntersectionPoint"],Line:["2PointsLine","MidLine","ParaLine","VertiLine","TangentLine","PolyhedronLine","IntersectionLine"],Arc:["3PointsArc","PointNormalArc","RadiusArc"],Circle:["3PointsCircle","PointNormalCircle","LinePointCircle"],Curve:["FunctionCurve","PointLocus","PointsPath","IntersectionCurve"],Plane:["PointLinePlane","PointsPolygon","MidPlane","VertiPlane","ParaPlane"],Cylinder:["Cylinder","Prism"],Sphere:["PointNormalSphere","CircumscribedSphere","EquatorSphere","3PointsSphere","4PointsSphere"],Polyhedron:["Tetrahedron","Hexahedron","Octahedron","Dodecahedron","Icosahedron","Cuboid","ConvexHull"],Surface:["2LinearSurface","LocusSurface","FunctionSurface","RotateElementSurface","PointLinearSurface"],AngleMarker:["AngleLabel"],LineMarker:["LineLabel"],Action:["Action"],Animation:["Animation"],Audio:["DynamicAudio"],CustomFunction:["CustomFunction","DerivativeFunction"],DynamicText:["DynamicText"],Calculation:["MeasureExpress","MeasureArea","MeasureLength","MeasureRadius","MeasureDistanceOf2Points","MeasureValueOfPointToObj","MeasureRatioOf3Points","MeasureProportioOf2Lines","MeasureCoorX","MeasureCoorY","MeasureCoorZ","MeasureAngle","MeasureVolume","MeasureDistanceOf2Lines","MeasureCircleEquation","MeasureNormalVector","MeasureNormalVectors","MeasureEquation","MeasureVector","MeasureVectors","MeasureRightCoor"],Variable:["VariableRuler"],Picture:["CombinationPicture","FreePicture"]},_=function(t){(0,s.default)(n,t);var e=c(n);function n(){var t;return(0,r.default)(this,n),(t=e.call(this))._config=f,t}return(0,o.default)(n,[{key:"autoNamePoint",get:function(){return this._config.AutoNamePoint}},{key:"varisAccuracy",get:function(){return this._config.VarisAccuracy}},{key:"arrowStyle",get:function(){return this._config.ArrowStyle}},{key:"paper",get:function(){return d({},this._config.Paper)}},{key:"getEnvironmentConfig",value:function(){return p(this._config)}},{key:"setEnvironmentConfig",value:function(t){this._config=d(this._config,t),this.dispatchEvent("EnvironmentConfigChange")}},{key:"getLabelDisplay",value:function(){return d({},this._config.Label)}},{key:"getDefalutDisplayJSONByDef",value:function(t){if(y.includes(t))return d({},this._config.GlobalAxis.ControlPoint);if("XAxisLine"===t)return d({},this._config.GlobalAxis.XAxisLine);if("YAxisLine"===t)return d({},this._config.GlobalAxis.YAxisLine);if("ZAxisLine"===t)return d({},this._config.GlobalAxis.ZAxisLine);if("XOYAxisPlane"===t)return d({},this._config.GlobalAxis.XOYPlane);if("XOZAxisPlane"===t)return d({},this._config.GlobalAxis.XOZPlane);if("YOZAxisPlane"===t)return d({},this._config.GlobalAxis.YOZPlane);for(var e in v)if(v[e].includes(t))return d({},this._config[e]);return{}}}]),n}(l);t.exports=_},function(t,e,n){"use strict";t.exports={AutoNamePoint:!0,VarisAccuracy:2,Paper:{backgroundColor:"#000000",backgroundOpacity:1,fog:!0,antialias:!0,grid:!0,perspective:50},Label:{size:20,color:"#ff0000",opacity:1},GlobalAxis:{ControlPoint:{size:.3,fill:{color:"#F89E09",opacity:1}},XAxisLine:{blocking:!1,stroke:{color:"#ff0000",opacity:1,style:"solid",width:.5},arrow:{bArrow:!1,eArrow:!0}},YAxisLine:{blocking:!1,stroke:{color:"#228B22",opacity:1,style:"solid",width:.5},arrow:{bArrow:!1,eArrow:!0}},ZAxisLine:{blocking:!1,stroke:{color:"#0000ff",opacity:1,style:"solid",width:.5},arrow:{bArrow:!1,eArrow:!0}},XOYPlane:{blocking:!0,show:!1,stroke:{color:"#0000ff",opacity:1,style:"solid",width:1},fill:{color:"#0000ff",opacity:.8}},XOZPlane:{blocking:!0,show:!1,stroke:{color:"#ff0000",opacity:1,style:"solid",width:1},fill:{color:"#ff0000",opacity:.8}},YOZPlane:{blocking:!0,show:!1,stroke:{color:"#417505",opacity:1,style:"solid",width:1},fill:{color:"#417505",opacity:.8}}},FreePoint:{size:.5,fill:{color:"#ff0000",opacity:.8}},HalfPoint:{size:.5,fill:{color:"#F8E71C",opacity:1}},ConstraintPoint:{size:.5,fill:{color:"#F89E09",opacity:1}},Line:{blocking:!1,stroke:{color:"#0000ff",opacity:1,style:"solid",width:1},arrow:{bArrow:!1,eArrow:!1}},Circle:{blocking:!1,stroke:{color:"#1674b8",opacity:1,style:"solid",width:1}},Arc:{blocking:!1,stroke:{color:"#1674b8",opacity:1,style:"solid",width:1}},Curve:{blocking:!0,stroke:{color:"#ff9933",opacity:1,style:"solid",width:1}},Plane:{blocking:!0,stroke:{color:"#417505",opacity:1,style:"solid",width:1},fill:{color:"#417505",opacity:.8}},Cylinder:{wireframe:!1,colorful:!1,blocking:!0,fill:{color:"#ffcccc",opacity:1}},Sphere:{wireframe:!1,colorful:!1,blocking:!0,fill:{color:"#ffcccc",opacity:1}},Polyhedron:{wireframe:!1,colorful:!1,blocking:!0,fill:{color:"#ffcccc",pacity:1},stroke:{color:"#0000ff",opacity:1,style:"solid",width:1}},Surface:{wireframe:!1,colorful:!1,blocking:!0,fill:{color:"#ffcccc",opacity:1}},AngleMarker:{stroke:{color:"#1674b8",opacity:1,style:"solid",width:1}},LineMarker:{fill:{color:"#417505",opacity:.6}},Action:{borderRadius:4,stroke:{color:"#fff",opacity:1,style:"solid",width:2},fill:{color:"#337ab7",opacity:0},font:{size:20,color:"#fff",opacity:1}},Animation:{animationType:"2",borderRadius:4,stroke:{color:"#fff",opacity:1,style:"solid",width:2},fill:{color:"#337ab7",opacity:0},font:{size:20,color:"#fff",opacity:1},icon:{color:"#fff",opacity:1}},Audio:{font:{size:24,color:"#fff",opacity:1},icon:{color:"#fff",opacity:1}},CustomFunction:{stroke:{color:"#000000",opacity:0,style:"solid",width:1},fill:{color:"#c9db93",opacity:0},font:{size:20,color:"#4A90E2",opacity:1}},DynamicText:{stroke:{color:"#000000",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0}},Calculation:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0},font:{size:20,color:"#4A90E2",opacity:1}},Variable:{rulerWidth:140,showBtn:!0,showRuler:!0,showVariable:!0,showInput:!0,stroke:{color:"#ccc",opacity:1,style:"solid",width:1},fill:{color:"#0064cd",opacity:1},font:{size:18,color:"#fff",opacity:1},icon:{color:"#0064cd",opacity:1}},Picture:{stroke:{color:"#000000",opacity:0,style:"solid",width:1},fill:{color:"#c9db93",opacity:0}},CombinationText:{stroke:{color:"#ffffff",opacity:0,style:"solid",width:1},fill:{color:"#ffffff",opacity:0},font:{size:20,color:"#fff",opacity:1}}}},function(t,e,n){"use strict";n(3),n(188);var i=n(72),r=(i.deepToJSON,i.deepCopy,n(879)),o=npGeo.Utils,s=o.isZero,a=o.HALF_PI,u=o.ARC_PER_ANGLE,c=Math.sin,l=Math.abs,f=[0,-.9424777960769378,-.7853981633974483],h=17*M(50),p=THREE,d=p.Vector3,y=p.Plane,v=p.Group,_=new d(.3,.3,.3),g=new d(5,5,5),m=new d,x=Backbone.Model.extend({defaults:{width:1366,height:768,fog:!0,antialias:!0,perspective:50,backgroundColor:"#000000",backgroundOpacity:1,thumbnail:{x:383,y:84,width:600,height:600}},initialize:function(){this.globalGroup=new v,this.globalGroup.rotation.fromArray(f),this.camera=new THREE.PerspectiveCamera(this.get("perspective"),this.get("width")/this.get("height"),.01,1e4),this.camera.up.set(0,0,1),this.camera.lookAt(0,0,0),this.cameraPlane=new y(new d(0,1,0)),this.cameraPlane.set(new d(0,0,this.getCameraPosition()),0),this.raycaster=new THREE.Raycaster,this.raycaster.linePrecision=.1,this.environmentConfig=this.get("environmentConfig"),this.set(this.environmentConfig.paper),this.grid=new r({show:this.get("grid")}),this.elementsRepos=this.get("elementsRepos"),this.listenTo(this.elementsRepos,"add",this.isXYAxisAdd),this.listenTo(this.elementsRepos,"reset",this.resetGrid),this.on("change:perspective",(function(){this.cameraPlane.set(new d(0,0,this.getCameraPosition()),0)})),this.on("change:width",this.updateCameraBySize),this.on("change:height",this.updateCameraBySize),this.updateCameraBySize()},updateCameraBySize:function(){var t=this.get("width"),e=this.get("height");this._halfWidth=.5*t,this._haflHeight=.5*e,this.camera.aspect=t/e,this.camera.updateProjectionMatrix()},resizeScaleRatio:function(t){this.globalGroup.scale.divideScalar(t).clamp(_,g),this.trigger("globalGroupChange")},isXYAxisAdd:function(){this.elementsRepos.length>9&&(this.x_axis=this.elementsRepos.get(7),this.y_axis=this.elementsRepos.get(8),this.listenTo(this.x_axis.displayModel,"change",this.updateGrid),this.listenTo(this.y_axis.displayModel,"change",this.updateGrid),this.listenTo(this.x_axis,"OUTPUT_CHANGE",this.updateGrid),this.listenTo(this.y_axis,"OUTPUT_CHANGE",this.updateGrid),this.stopListening(this.elementsRepos,"add"))},getCameraPosition:function(){return h/M(this.get("perspective"))},calcByCamera:function(t,e,n){var i=h/((new d).fromArray(t).length()*M(n));s(t[0])&&(t[0]=0),s(t[1])&&(t[1]=0),s(t[2])&&(t[2]=0);var r=(new THREE.Vector3).fromArray(t),o=new THREE.Vector2(t[0],t[1]).angle();1==e[1]&&(o-=Math.PI/2);var a=r.applyAxisAngle(new THREE.Vector3(0,0,1),-o),u=new THREE.Vector2(a.z,a.x).angle(),c=new v;return c.rotateOnAxis(new THREE.Vector3(0,0,1),-o),c.rotateOnWorldAxis(new THREE.Vector3(0,1,0),e[2]<0?u:-u),e[2]<0&&c.rotateOnAxis(new THREE.Vector3(0,0,1),Math.PI),{rotation:c.rotation.toArray(),position:c.position.toArray(),scale:[i,i,i]}},updateViewPoint:function(t){var e=t.scale,n=t.position,i=t.rotation;n&&this.globalGroup.position.fromArray(n),e&&this.globalGroup.scale.fromArray(e),i&&this.globalGroup.rotation.fromArray(i),this.trigger("globalGroupChange")},resetViewPoint:function(t){return t?"Z"===t?this.updateViewPoint({rotation:[0,0,a]}):"Y"===t?this.updateViewPoint({rotation:[0,-a,-a]}):"X"===t?this.updateViewPoint({rotation:[0,-a,0]}):void 0:this.updateViewPoint({position:[0,0,0],scale:[1,1,1],rotation:f})},transGTS:function(t){var e=(new d).copy(t);return(e=this.globalGroup.localToWorld(e)).project(this.camera),e.x=e.x*this._halfWidth+this._halfWidth,e.y=-e.y*this._haflHeight+this._haflHeight,e},transSTG:function(t){return this.updateRaycaster(t),this.raycaster.ray.intersectPlane(this.cameraPlane,m),this.globalGroup.worldToLocal(m).clone()},getCanvasPos:function(t){return{x:t.x/this.get("width")*2-1,y:-t.y/this.get("height")*2+1}},updateRaycaster:function(t){this.raycaster.setFromCamera(this.getCanvasPos(t),this.camera)},resetGrid:function(){this.listenTo(this.elementsRepos,"add",this.isXYAxisAdd),this.x_axis&&this.y_axis&&(this.stopListening(this.x_axis.displayModel,"change"),this.stopListening(this.y_axis.displayModel,"change"),this.stopListening(this.x_axis,"OUTPUT_CHANGE"),this.stopListening(this.y_axis,"OUTPUT_CHANGE"))},setGridAttr:function(t){this.grid.setValue(t)},updateGrid:function(){var t=this.x_axis.getValue(),e=this.y_axis.getValue(),n=this.x_axis.displayModel.getAttr(),i=this.y_axis.displayModel.getAttr(),r=P(n.PI2,n.step),o=P(i.PI2,i.step);this.setGridAttr({x:{step:r,min:w(t.sp.x,r,!0),max:w(t.ep.x,r,!1)},y:{step:o,min:w(e.sp.y,o,!0),max:w(e.ep.y,o,!1)}})},formJSON3:function(t){t.grid&&(this.setGridAttr(t.grid),delete t.grid);var e=t.globalGroup;delete t.globalGroup,this.set(t),e&&this.updateViewPoint(e)},toJSON3:function(){return{width:this.get("width"),height:this.get("height"),backgroundColor:this.get("backgroundColor"),backgroundOpacity:this.get("backgroundOpacity"),fog:this.get("fog"),antialias:this.get("antialias"),grid:this.grid.getValue(),perspective:this.get("perspective"),globalGroup:{position:this.globalGroup.position.toArray(),rotation:this.globalGroup.rotation.toArray(),scale:this.globalGroup.scale.toArray()}}}});function P(t,e){return parseFloat(t?e:e*a)}function w(t,e,n){return t=parseInt(t),n?t+l(t%e):t-l(t%e)}function M(t){return t<1&&(t=1),c(t/2*u)}t.exports=x},function(t,e,n){"use strict";t.exports=Backbone.Model.extend({defaults:{show:!0,x:{step:1,min:-5,max:5},y:{step:1,min:-5,max:5},color:{color:"#fff",opacity:.4}},setValue:function(t,e){this.set(t,e)},getValue:function(){return{show:this.get("show"),x:this.get("x"),y:this.get("y"),color:this.get("color")}}})},function(t,e,n){"use strict";var i=npGeo.Line3,r=function(t,e){this.inputs=[t,e],this.dirty=!0};r.isLegal=function(t,e){return t.output_Model.isPoint&&(e.output_Model.isCircle||e.output_Model.isArc||e.output_Model.isPaths)?new r(t,e):e.output_Model.isPoint&&(t.output_Model.isCircle||t.output_Model.isArc||t.output_Model.isPaths)?new r(e,t):(t.output_Model.isCircle3||t.output_Model.isArc3)&&(e.output_Model.isCircle3||e.output_Model.isArc3)?new r(t,e):void 0},r.prototype.getTangent=function(){return this.dirty&&(this.Tangents=i.tangent(this.inputs[0].output_Model,this.inputs[1].output_Model)||[],this.dirty=!1),this.Tangents};var o=[];t.exports={getTangentSets:function(t,e){if(t!=e){for(var n=0;n<o.length;n++){var i=o[n].inputs;if(i.indexOf(t)>-1&&i.indexOf(e)>-1)return o[n]}var s=r.isLegal(t,e);return s&&(o.push(s),t.tangentSets||(t.tangentSets=[]),t.tangentSets.push(s),e.tangentSets||(e.tangentSets=[]),e.tangentSets.push(s)),s}},reset:function(){o=[]}}},function(t,e,n){"use strict";var i=n(0);n(8),n(20);var r=i(n(1)),o=i(n(2)),s=npGeo,a=s.Utils3.affineBy8Points,u=s.Vector3,c=[new u(0,0,0),new u(1,0,0),new u(0,1,0),new u(0,0,1)],l=[],f=function(){function t(e){(0,r.default)(this,t),this.inputs=e,this.global=4===e.length,this.dirty=!0}return(0,o.default)(t,[{key:"getAffine",value:function(){if(this.dirty){var t=this.inputs.map((function(t){return t.output_Model}));this.global&&(t=c.concat(t)),this.affine=a(t),this.dirty=!1}return this.affine}},{key:"isSameInputs",value:function(t){if(t.length!==this.inputs.length)return!1;for(var e,n=this.inputs,i=0;e=t[i];i++)if(n[i]!==e)return!1;return!0}}]),t}();t.exports={getAffineSet:function(t){for(var e,n=0;e=l[n];n++)if(e.isSameInputs(t))return e;var i=new f(t);l.push(i);for(var r,o=0;r=t[o];o++)r.affineSets||(r.affineSets=[]),r.affineSets.push(i);return i},reset:function(){l=[]}}},function(t,e,n){"use strict";n(4);var i=n(0);n(3);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(487),f={Clip:n(883)},h=n(491),p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s,a,u,c,l,f,h){var p;return(0,r.default)(this,n),(p=e.call(this,t,i,o,a,u,c,l,f,h)).affineSets=s,p}return(0,o.default)(n,[{key:"restoreElementByJSON3",value:function(t){var e=f[t.type]||h;return this.addElement(new e({undoRedo:this.preview.undoRedo,elementsRepository:this.elementsRepository,dataRepository:this.dataRepository,algebraic:this.algebraic,paper:this.paper,intersectionSets:this.intersectionSets,tangentSets:this.tangentSets,affineSets:this.affineSets,environmentConfig:this.environmentConfig},t))}},{key:"OnPlanePoint",value:function(t){var e=this.dataRepository.getUDataName(),n=this.dataRepository.getUDataName();return this.algebraic.set(n,.3),this.algebraic.set(e,.6),this.ElementByJSON3({type:"Point",def:{type:"OnPlanePoint",parents:[t],attr:{dragDy:n,dragDx:e,dx:e,dy:n}}})}},{key:"resetSets",value:function(){this.intersectionSets.reset(),this.tangentSets.reset(),this.affineSets.reset()}},{key:"globalAxis",value:function(){var t=this;["u0","u1","u2","u3","u4","u5"].forEach((function(e){t.algebraic.set(e,5)})),this.restoreByJSON3([{name:"",type:"Point",id:0,def:{type:"OriginPoint"}},{type:"Point",id:1,def:{parents:[0],type:"XAxisSPoint",attr:{inVais:"u0",outVais:"u0"}}},{type:"Point",id:2,def:{parents:[0],type:"XAxisEPoint",attr:{inVais:"u1",outVais:"u1"}}},{type:"Point",id:3,def:{parents:[0],type:"YAxisSPoint",attr:{inVais:"u2",outVais:"u2"}}},{type:"Point",id:4,def:{parents:[0],type:"YAxisEPoint",attr:{inVais:"u3",outVais:"u3"}}},{type:"Point",id:5,def:{parents:[0],type:"ZAxisSPoint",attr:{inVais:"u4",outVais:"u4"}}},{type:"Point",id:6,def:{parents:[0],type:"ZAxisEPoint",attr:{inVais:"u5",outVais:"u5"}}},{type:"Line",id:7,def:{parents:[1,2],type:"XAxisLine"},name:"x",label:{nameVal:1,font:{color:"#FF0000",opacity:1,size:20}}},{type:"Line",id:8,def:{parents:[3,4],type:"YAxisLine"},name:"y",label:{nameVal:1,font:{color:"#228B22",opacity:1,size:20}}},{type:"Line",id:9,def:{parents:[5,6],type:"ZAxisLine"},name:"z",label:{nameVal:1,font:{color:"#0000ff",opacity:1,size:20}}},{type:"Plane",id:10,def:{parents:[7,8],type:"XOYAxisPlane"},dis:{show:!1}},{type:"Plane",id:11,def:{parents:[7,9],type:"XOZAxisPlane"},dis:{show:!1}},{type:"Plane",id:12,def:{parents:[8,9],type:"YOZAxisPlane"},dis:{show:!1}},{type:"Group",id:13,def:{parents:[0,1,2,3,4,5,6,7,8,9,10,11,12],type:"Group"}}])}}]),n}(l);t.exports=p},function(t,e,n){"use strict";n(3),n(22),n(27);var i=n(491),r=n(372),o=n(227),s=n(180),a=n(207),u=n(994);t.exports=i.extend({type:"Clip",_initConstraint:function(t,e){this.constraint=new u(this,t,e.attr),this.output_Model=this.constraint.calculate()},_initDisplayModel:function(t){var e;this.displayModel=(e=this.inputs[0].output_Model).isPolyhedron?new s:e.isSphere?new o:e.isSurfaceTriangle||e.isPrism||e.isPrismoid||e.isPyramid||e.isCylinder||e.isFrustumOfCone||e.isCone?new r:new a,t&&this.displayModel.setAttr(t)},calculate:function(t){t||this.inputs[0].displayModel.set({show:!1});var e=this.constraint.calculate();this.setValue(e,{silent:t})},setValue:function(t,e){this.output_Model=t,e&&e.silent||this.trigger("OUTPUT_CHANGE")},getValue:function(){var t=this;return this.output_Model.forEach((function(e){e.userData={dis:t.displayModel.getAttr()}})),this.output_Model},toJSON3:function(){return{id:this.get("id"),type:"Clip",name:this.get("name"),outVais:this.outVais?this.outVais.name:"",attr:{locked:this.get("locked"),selectable:this.get("selectable"),zIndex:this.get("zIndex")},def:this.constraint.toJSON3(this),dis:this.displayModel.toJSON3(),label:this.nameModel&&this.nameModel.toJSON3(),advanced:this.dynamicDisplay&&this.dynamicDisplay.toJSON3()}}})},function(t,e,n){"use strict";var i=n(164),r=n(72).deepToJSON,o=i.extend();o.defaultAttributes={size:20,color:"#ff0000",opacity:1},o.Attributes=r(o.defaultAttributes),t.exports=o},function(t,e,n){"use strict";t.exports={OriginPoint:n(886),XAxisSPoint:n(887),XAxisEPoint:n(888),YAxisSPoint:n(889),YAxisEPoint:n(890),ZAxisSPoint:n(891),ZAxisEPoint:n(892),FreePoint:n(893),RightPoint:n(895),PointsMidPoint:n(896),LineMidPoint:n(897),CentrePoint:n(898),ClosestPoint:n(899),ConstraintPoint:n(900),OnElementPoint:n(901),OnIterPoint:n(902),OnCompositePathsPoint:n(903),OnPlanePoint:n(904),PolyhedronPoint:n(905),IntersectionPoint:n(906),AngleLabel:n(907),LineLabel:n(908),XAxisLine:n(909),YAxisLine:n(910),ZAxisLine:n(911),"2PointsLine":n(912),MidLine:n(913),ParaLine:n(914),VertiLine:n(915),TangentLine:n(916),PolyhedronLine:n(917),IntersectionLine:n(918),"3PointsArc":n(435),PointNormalArc:n(919),RadiusArc:n(920),"3PointsCircle":n(921),PointNormalCircle:n(922),LinePointCircle:n(923),FunctionCurve:n(924),PointLocus:n(931),PointsPath:n(932),IntersectionCurve:n(933),XOYAxisPlane:n(934),XOZAxisPlane:n(935),YOZAxisPlane:n(936),"3PointsPlane":n(937),PointLinePlane:n(938),PointsPolygon:n(939),MidPlane:n(940),VertiPlane:n(941),ParaPlane:n(942),PointNormalSphere:n(943),CircumscribedSphere:n(944),EquatorSphere:n(945),"3PointsSphere":n(946),"4PointsSphere":n(947),Tetrahedron:n(948),Hexahedron:n(949),Octahedron:n(950),Dodecahedron:n(951),Icosahedron:n(952),Cuboid:n(953),ConvexHull:n(954),Cylinder:n(955),Prism:n(956),"2LinearSurface":n(957),LocusSurface:n(958),FunctionSurface:n(959),RotateElementSurface:n(969),PointLinearSurface:n(970),Rotate:n(439),Centrosymmetric:n(440),Dilate:n(441),AffineByPoints:n(442),Inversion:n(443),TranslateByCoor:n(971),TranslateBy2Points:n(972),TranslateBySegment:n(973),Axisymmetric:n(974),Planesymmetric:n(975),AffineByFormula:n(976),ProjectionToLine:n(977),ProjectionToPlane:n(978),CustomTransform:n(444),CustomTransformSpecialPoint:n(445),CustomTransformSpecialPoints:n(446),CustomTransformSpecialSurface:n(979),Action:n(447),Animation:n(448),DynamicAudio:n(453),CustomFunction:n(454),DerivativeFunction:n(456),DynamicText:n(457),MeasureExpress:n(460),MeasureArea:n(462),MeasureLength:n(463),MeasureRadius:n(465),MeasureDistanceOf2Points:n(469),MeasureValueOfPointToObj:n(464),MeasureRatioOf3Points:n(470),MeasureProportioOf2Lines:n(466),MeasureCoorX:n(467),MeasureCoorY:n(468),MeasureCoorZ:n(980),MeasureAngle:n(981),MeasureVolume:n(982),MeasureDistanceOf2Lines:n(983),MeasureCircleEquation:n(984),MeasureNormalVector:n(985),MeasureNormalVectors:n(986),MeasureEquation:n(987),MeasureVector:n(988),MeasureVectors:n(989),MeasureRightCoor:n(990),CombinationPicture:n(471),FreePicture:n(472),CombinationText:n(473),VariableRuler:n(474),Iter:n(475),Group:n(476)}},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return new f(0,0,0)}}]),n}(l);h.prototype.type="OriginPoint",h.prototype.isOriginPoint=!0,h.prototype.canCopy=!1,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(-1,0,0))}return(0,r.default)(n)}(l);h.prototype.type="XAxisSPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(1,0,0))}return(0,r.default)(n)}(l);h.prototype.type="XAxisEPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(0,-1,0))}return(0,r.default)(n)}(l);h.prototype.type="YAxisSPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(0,1,0))}return(0,r.default)(n)}(l);h.prototype.type="YAxisEPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(0,0,-1))}return(0,r.default)(n)}(l);h.prototype.type="ZAxisSPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(225),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,new f(0,0,1))}return(0,r.default)(n)}(l);h.prototype.type="ZAxisEPoint",t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(93);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(894),h=npGeo.Vector3,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.position.get();return new h(t.x,t.y,t.z)}},{key:"moveOffset",value:function(t,e,n,i){var r=this._attributes.position.get();this.moveToPos({x:r.x+t,y:r.y+e,z:r.z+n},i)}},{key:"moveToPos",value:function(t,e){this._attributes.position.set(t),e.setOutputNeedUpdate()}},{key:"toJSON3",value:function(){var t=this._attributes.position.get();return{type:this.type,attr:{position:{x:parseFloat(t.x.toFixed(4)),y:parseFloat(t.y.toFixed(4)),z:parseFloat(t.z.toFixed(4))},bindAction:this._attributes.bindAction.get()}}}}]),n}(l);p.prototype.type="FreePoint",p.prototype.isFreePoint=!0,t.exports=p},function(t,e,n){"use strict";var i=n(0);n(3),n(49);var r=i(n(86)),o=i(n(1)),s=i(n(2)),a=n(18);t.exports=function(){function t(e){(0,o.default)(this,t),this.x=new a,this.y=new a,this.z=new a,this.set(e)}return(0,s.default)(t,[{key:"set",value:function(t){this.validate(t)&&(this.x.set(t.x),this.y.set(t.y),this.z.set(t.z))}},{key:"get",value:function(){return{x:this.x.toString(),y:this.y.toString(),z:this.z.toString()}}},{key:"toString",value:function(){return JSON.stringify(this.get())}},{key:"validate",value:function(t){return"object"===(0,r.default)(t)&&isFinite(t.x)&&isFinite(t.y)&&isFinite(t.z)}}]),t}()},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(15),h=n(99),p=npGeo.Vector3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{x:new f(i.algebraic),y:new f(i.algebraic),z:new f(i.algebraic),dragX:new h(i.dataRepository),dragY:new h(i.dataRepository),dragZ:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?new p(t.x,t.y,t.z):p.createUgly()}},{key:"getChildrenDataName",value:function(){return[this._attributes.dragX.get(),this._attributes.dragY.get(),this._attributes.dragZ.get()]}},{key:"moveOffset",value:function(t,e,n){this._attributes.dragX.addValue(t),this._attributes.dragY.addValue(e),this._attributes.dragZ.addValue(n)}},{key:"moveToPos",value:function(t){this._attributes.dragX.setValue(t.x),this._attributes.dragY.setValue(t.y),this._attributes.dragZ.setValue(t.z)}}]),n}(l);d.prototype.type="RightPoint",d.prototype.isRightPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs;return f.midPoint(t[0].output_Model,t[1].output_Model)}}]),n}(l);h.prototype.type="PointsMidPoint",h.prototype.isPointsMidPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model;return t.isLine?f.midPoint(t.sp,t.ep):f.createUgly()}}]),n}(l);h.prototype.type="LineMidPoint",h.prototype.isLineMidPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=npGeo.Vector3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.centre||f.createUgly()}}]),n}(l);h.prototype.type="CentrePoint",h.prototype.isCentrePoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[1].output_Model.closestPoint(this.inputs[0].output_Model)}}]),n}(n(108));l.prototype.type="ClosestPoint",l.prototype.isClosestPoint=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model}}]),n}(n(108));l.prototype.type="ConstraintPoint",l.prototype.isConstraintPoint=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(27);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(15),h=n(99),p=n(18),d=npGeo.Vector3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic,"0.5"),outVais:new h(i.dataRepository),fValue:new p(t.inputs[0].output_Model.constructor.DEFAULT_RANGE.fValue),eValue:new p(t.inputs[0].output_Model.constructor.DEFAULT_RANGE.eValue)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?this.inputs[0].output_Model.pointOn(t,{fValue:this._attributes.fValue.get(),eValue:this._attributes.eValue.get()}):d.createUgly()}},{key:"moveOffset",value:function(t,e,n,i){var r=i.getValue();r.x+=t,r.y+=e,r.z+=n,this.moveToPos(r,i)}},{key:"moveToPos",value:function(t,e,n){var i=this.inputs[0].output_Model.valueOn(t,{fValue:this._attributes.fValue.value,eValue:this._attributes.eValue.value});this.inputs[0].output_Model.isLine&&(i<0&&(i=0),i>1&&(i=1)),e.outVais&&e.outVais.setValue(i,n)}},{key:"getChildrenDataName",value:function(){return this.element.outVais?[this.element.outVais.name]:[]}}]),n}(l);y.prototype.type="OnElementPoint",y.prototype.isHFPoint=!0,y.prototype.isOnElementPoint=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(15),h=n(99),p=npGeo.Vector3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inVais:new f(i.algebraic),outVais:new h(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();if(!isFinite(t))return p.createUgly();var e=this.inputs[0].output_Model.pointOn(t);return new p(e.x,e.y,e.z)}},{key:"moveOffset",value:function(t,e,n,i){var r=i.output_Model;this.moveToPos({x:r.x+t,y:r.y+e,z:r.z+n},i)}},{key:"moveToPos",value:function(t,e,n){var i=this.inputs[0].output_Model.valueOn(t);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);d.prototype.type="OnIterPoint",d.prototype.isHFPoint=!0,d.prototype.isIterPoint=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(15),h=n(99),p=n(18),d=n(38),y=npGeo,v=y.Vector3,_=y.LinearSet3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{inVais:new f(i.algebraic),outVais:new h(i.dataRepository),fValue:new p(0),eValue:new p(1),segmentType:new d}))._attrChanged(),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.inVais.calcu();return isFinite(t)?(this.linearSet=this.createLinearSet(),this.linearSet.pointOn(t,this._attributes.segmentType.get(),this.range)):v.createUgly()}},{key:"createLinearSet",value:function(){if(this.linearSet)return this.linearSet;for(var t,e=[],n=0;t=this.inputs[n];n++)!t.output_Model.isUgly&&t.output_Model.isLinear&&(e.push(t.output_Model),t.compositePathsSet||(t.compositePathsSet=[]),t.compositePathsSet.push(this));return this.linearSet=new _(e),this.linearSet}},{key:"disposeLiearSet",value:function(){this.linearSet=null}},{key:"_attrChanged",value:function(){this.range={fValue:this._attributes.fValue.get(),eValue:this._attributes.eValue.get()}}},{key:"moveOffset",value:function(t,e,n,i){var r=i.getValue();r.x+=t,r.y+=e,r.z+=n,this.moveToPos(r,i)}},{key:"moveToPos",value:function(t,e,n){var i=this.linearSet.valueOn(t,this._attributes.segmentType.get(),this.range);e.outVais&&e.outVais.setValue(i,n)}}]),n}(l);g.prototype.type="OnCompositePathsPoint",g.prototype.isHFPoint=!0,g.prototype.isPointOnCompositePaths=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(38),h=n(15),p=n(99),d=npGeo.Vector3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{inPlane:new f(!0),dx:new h(i.algebraic,"1"),dy:new h(i.algebraic,"0"),dragDx:new p(i.dataRepository),dragDy:new p(i.dataRepository)})}return(0,o.default)(n,[{key:"calculate",value:function(){if(!this.inputs[0].output_Model.isPlane)return d.createUgly();var t=this._attributes.dx.calcu();if(!isFinite(t))return d.createUgly();var e=this._attributes.dy.calcu();if(!isFinite(e))return d.createUgly();var n=this.inputs[0].output_Model.pointIn({dx:t,dy:e});return this._attributes.inPlane.get()&&!this.inputs[0].output_Model.justPointIn(n)&&(n=this.inputs[0].output_Model.pointOn(this.inputs[0].output_Model.valueOn(n))),n}},{key:"moveOffset",value:function(t,e,n,i){var r=i.getValue();r.x+=t,r.y+=e,r.z+=n,this.moveToPos(r,i)}},{key:"moveToPos",value:function(t,e,n){try{var i=this.inputs[0].output_Model.valueIn(t);this._attributes.dragDx.setValue(i.dx,n),this._attributes.dragDy.setValue(i.dy,n)}catch(t){console.log(t)}}},{key:"getChildrenDataName",value:function(){return[this._attributes.dragDx.get(),this._attributes.dragDy.get()]}}]),n}(l);y.prototype.type="OnPlanePoint",y.prototype.isOnPlanePoint=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(108),f=n(18),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.getVerticeByIndex(this._attributes.index.get())}}]),n}(l);h.prototype.type="PolyhedronPoint",h.prototype.isPolyhedronPoint=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(108),h=n(18),p=n(38),d=npGeo.Vector3,y=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){var a;return(0,o.default)(this,n),(a=e.call(this,t,i,s,(0,r.default)({index:new h(0)},function(t){for(var e,n=0;e=t[n];n++)if(e.output_Model.isLine||e.output_Model.isPlane)return!0;return!1}(t.inputs)?{inLine:new p}:{}))).intersectionSet=i.intersectionSets.getIntersectionSets(t.inputs[0],t.inputs[1]),a}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this.intersectionSet.getIntersection();if(!t)return d.createUgly();var e=Array.isArray(t)?t[this._attributes.index.get()]:t;return e?this._attributes.inLine&&this._attributes.inLine.get()&&!this.__isInLine__(e)?d.createUgly():e:d.createUgly()}},{key:"__isInLine__",value:function(t){return!(this.inputs[0].output_Model.isLine&&!this.inputs[0].output_Model.justPointOn(t))&&(!(this.inputs[1].output_Model.isLine&&!this.inputs[1].output_Model.justPointOn(t))&&(!(this.inputs[0].output_Model.isPlane&&!this.inputs[0].output_Model.justPointIn(t))&&!(this.inputs[1].output_Model.isPlane&&!this.inputs[1].output_Model.justPointIn(t))))}}]),n}(f);y.prototype.type="IntersectionPoint",y.prototype.isIntersectionPoint=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h=n(18),p=npGeo,d=p.Vector3,y=p.Line3,v=p.Arc3,_=p.Circle3,g=p.AngleLabel3,m=p.Utils.PI,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{angleDefine:new f(1,{0:0,1:1,2:0,3:1}),angleLabelRadius:new h(.5,.1)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this.inputs[2].output_Model,i=d.createByPoints(e,t),r=d.createByPoints(e,n);if(i.isZero(1e-5)||r.isZero(1e-5))return g.createUgly();var o=i.cross(r),s=new _(e,this.radius,o.normalize(),null,this.getDirection(i,r,o)),a=new v(s,s.valueOn(t),s.valueOn(n));return new g(a)}},{key:"_attrChanged",value:function(){this.radius=this._attributes.angleLabelRadius.get(),this.angleDefine=this._attributes.angleDefine.get()}},{key:"getDirection",value:function(t,e,n){if(2==this.angleDefine)return!0;if(3==this.angleDefine)return!1;var i=t.directionAngleWith(e,n);return 0==this.angleDefine?i>m:i<=m}},{key:"getRadius",value:function(t){var e=this.element.output_Model.arc.centre,n=this.element.output_Model.midpoint,i=new y(e,n).valueOn(t);if(i<0)return.1;var r=e.distanceTo(n)*i;return r>2&&(r=2),r<.1&&(r=.1),r}},{key:"moveToPos",value:function(t){this.radius=this.getRadius(t),this._attributes.angleLabelRadius.set(this.radius),this.element.setOutputNeedUpdate()}}]),n}(l);x.prototype.type="AngleLabel",x.prototype.isAngleLabel=!0,t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(18),p=npGeo,d=p.Utils.DOUBLE_PI,y=p.Line3,v=p.Circle3,_=p.Plane3,g=p.LineLabel3,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{edgeNum:new f(i.algebraic,"3"),radius:new f(i.algebraic,"0.3"),d:new h(.5),interval:new h(.2),strokes:new h(2)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return g.createUgly();var e=this.inputs[0].output_Model.pointOn(this._attributes.d.get()),n=parseInt(t.edgeNum);n<3&&(n=3);var i=d/n,r=t.radius;r<.1&&(r=.1);for(var o=this.inputs[0].output_Model,s=this._attributes.interval.get()/o.length,a=[],u=0;u<this._attributes.strokes.get();u++){var c=this._attributes.d.get()+u*s,l=o.isLine?this.__calcLine__(c,r,o):this.__calcCurve__(c,r,o);a.push(this.__getPlane__(l,i,n))}return new g(e,a)}},{key:"__calcLine__",value:function(t,e,n){var i=this.inputs[0].output_Model.pointOn(t);return new v(i,e,n.normalVector)}},{key:"__calcCurve__",value:function(t,e,n){t%=1;var i=n.pointOn(t),r=y.tangent(i,n)[0];return new v(i,e,r.normalVector)}},{key:"moveToPos",value:function(t,e){var n=this.inputs[0].output_Model.valueOn(t);n>1&&(n=1),n<0&&(n=0),this._attributes.d.set(n),e.setOutputNeedUpdate()}},{key:"__getPlane__",value:function(t,e,n){for(var i=[],r=[],o=0;o<n;o++)i.push(t.pointOn(o*e));for(var s=2;s<i.length;s+=1)r.push([0,s-1,s]);return new _(i,r)}}]),n}(l);m.prototype.type="LineLabel",m.prototype.isLineLabel=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(364));l.prototype.type="XAxisLine",l.prototype.isXAxisLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(364));l.prototype.type="YAxisLine",l.prototype.isYAxisLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(364));l.prototype.type="ZAxisLine",l.prototype.isZAxisLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=n(62),h=n(15),p=npGeo.Line3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{lineType:new f(0,{0:"seg_sp_ep",1:"ral_sp_ep",2:"straight_sp_ep"}),lineLength:new h(i.algebraic,"15")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t;return 0==this._attributes.lineType.get()||(t=this._attributes.lineLength.calcu(),isFinite(t))?this.cal_sp_ep(this.inputs[0].output_Model,this.inputs[1].output_Model,t):p.createUgly()}}]),n}(l);d.prototype.type="2PointsLine",d.prototype.is2PointsLine=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=n(62),h=n(15),p=n(38),d=npGeo,y=d.Vector3,v=d.Line3,_=d.Circle3,g=d.Utils.isZero,m=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{lineType:new f(1,{0:"__ray_sp_direction__",1:"__ray_sp_direction__",2:"__straight_sp_direction__"}),lineLength:new h(i.algebraic,"5"),isIn:new p(!0),directReverse:new p(!1),ratio:new h(i.algebraic,"0.5")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return v.createUgly();var e=t.lineLength;return this._attributes.directReverse.get()&&(e=-e),3===this.inputs.length?this.__calculateBy3Points__(t.ratio,e):this.inputs[0].output_Model.isLine?this.inputs[1].output_Model.isLine?this.__calculateBy2Lines__(t.ratio,e):this.__calculateByLineNormal__(t.ratio,e):v.createUgly()}},{key:"__spdirection_linemid_3P__",value:function(t,e,n,i,r){this._attributes.isIn.get()||(n=n.centroSymmetric(e));var o=v.midLineBy3Points(t,e,n,i);return this.cal_sp_ep(o.sp,o.toVector(),r)}},{key:"__calculateBy3Points__",value:function(t,e){return this.__spdirection_linemid_3P__(this.inputs[0].output_Model,this.inputs[1].output_Model,this.inputs[2].output_Model,t,e)}},{key:"__calculateBy2Lines__",value:function(t,e){var n,i=this.inputs[0].output_Model,r=this.inputs[1].output_Model;if(y.isParallel(i.toVector(),r.toVector())){var o=new v(i.sp,r.sp).pointOn(t);return this.cal_sp_ep(o,i.normalVector.clone(),e)}return n=i.isCoplanar(r)?y.intersectionOfStraightLines(i,r):new v.commonVerticalLine(i,r).midPoint,this.__spdirection_linemid_3P__(n.translate(i.toVector()),n,n.translate(r.toVector()),t,e)}},{key:"__calculateByLineNormal__",value:function(t,e){var n=this.inputs[0].output_Model,i=this.inputs[1].output_Model,r=n.normalVector;if(g(r.dot(i.normalVector))){var o=new v(n.sp,i.plane.foot(n.sp)).pointOn(t);return this.cal_sp_ep(o,n.normalVector.clone(),e)}var s,a=y.intersectionOfLineAndPlane(n,i.plane),u=a.translate(n.toVector());return s=y.isParallel(n.toVector(),i.normalVector)?new _(a,1,i.normalVector).pointOn(0):i.closestPoint(u),this.__spdirection_linemid_3P__(u,a,s,t,e)}}]),n}(l);m.prototype.type="MidLine",m.prototype.isLinesBisector=!0,t.exports=m},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(179),h=n(62),p=n(56),d=n(15),y=n(38),v=npGeo,_=v.Vector3,g=v.Line3,m=v.Circle3,x=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({lineType:new h(1,{0:"__ray_sp_direction__",1:"__ray_sp_direction__",2:"__straight_sp_direction__"}),lineLength:new d(i.algebraic,"5"),directReverse:new y},t.inputs[1].output_Model.isLine?{}:{corner:new d(i.algebraic,"0"),unit:new p}))}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return g.createUgly();var e=this.inputs[1].output_Model.isLine?this.__directionByLine__():this.__directionByNormal__(t.corner);return this._attributes.directReverse.get()&&e.multiplyScalar(-1),this.cal_sp_ep(this.inputs[0].output_Model,e,t.lineLength)}},{key:"__directionByLine__",value:function(){return this.inputs[1].output_Model.normalVector.clone()}},{key:"__directionByNormal__",value:function(t){t=this.__angleToArc__(t,this._attributes.unit.get());var e=this.inputs[1].output_Model;if(e.isCircle)return _.createByPoints(e.centre,e.pointOn(t));if(e.isArc)return _.createByPoints(e.centre,e.circle.pointOn(t));var n=e.vertices[0],i=new m(n,1,e.normalVector).pointOn(t);return _.createByPoints(n,i)}}]),n}(f);x.prototype.type="ParaLine",x.prototype.isParaLine=!0,t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(179),h=n(62),p=n(56),d=n(15),y=n(38),v=npGeo,_=v.Vector3,g=v.Line3,m=v.Circle3,x=v.Utils,P=x.HALF_PI,w=x.isZero,M=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({lineType:new h(1,{0:"__ray_sp_direction__",1:"__ray_sp_direction__",2:"__straight_sp_direction__"}),lineLength:new d(i.algebraic,"5"),directReverse:new y},t.inputs[0].output_Model.isPoint&&t.inputs[1].output_Model.isLine?{corner:new d(i.algebraic,"0"),unit:new p}:{}))}return(0,s.default)(n,[{key:"calculate",value:function(){var t,e=this.__getExpressValues__();if(!e)return g.createUgly();if(this.inputs[0].output_Model.isPoint)t=this.inputs[1].output_Model.isLine?this.__pointLine__(e.corner):this.__pointNormal__();else{if(!this.inputs[0].output_Model.isLine)return g.createUgly();t=this.inputs[1].output_Model.isLine?this.__2Lines__():this.__lineNormal__()}return this.cal_sp_ep(t.sp,t.toVector(),this._attributes.directReverse.get()?-e.lineLength:e.lineLength)}},{key:"__pointLine__",value:function(t){return t=this.__angleToArc__(t,this._attributes.unit.get()),g.verticalLineByPointLine(this.inputs[0].output_Model,this.inputs[1].output_Model,t)}},{key:"__pointNormal__",value:function(){var t=this.inputs[0].output_Model;return new g(t,t.translate(this.inputs[1].output_Model.normalVector))}},{key:"__2Lines__",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;if(_.isParallel(t.toVector(),e.toVector())){var n=e.pointOn(e.valueOn(t.sp));return new g(t.sp,n)}var i,r=t.toVector().cross(e.toVector());return i=t.isCoplanar(e)?_.intersectionOfStraightLines(t,e):new g.commonVerticalLine(t,e).midPoint,new g(i,i.translate(r))}},{key:"__lineNormal__",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=t.normalVector;if(w(n.dot(e.normalVector))){var i=e.plane.foot(t.sp),r=t.ep.translate(_.createByPoints(t.sp,i)).rotate(new g(i,i.translate(e.normalVector)),P);return new g(i,r)}var o=_.intersectionOfLineAndPlane(t,e.plane);if(_.isParallel(t.toVector(),e.normalVector)){var s=new m(o,1,e.normalVector).pointOn(P);return new g(o,s)}var a=e.closestPoint(t.ep).rotate(new g(o,o.translate(e.normalVector)),P);return new g(o,a)}}]),n}(f);M.prototype.type="VertiLine",M.prototype.isVertiLine=!0,t.exports=M},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=n(62),h=n(15),p=n(18),d=npGeo.Line3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{lineType:new f(1,{0:"ral_sp_ep",1:"ral_sp_ep",2:"straight_sp_ep"}),lineLength:new h(i.algebraic,"10"),index:new p(0)})).tangentSet=i.tangentSets.getTangentSets(t.inputs[0],t.inputs[1]),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.lineLength.calcu();if(!isFinite(t))return d.createUgly();var e=this.tangentSet.getTangent()[this._attributes.index.get()];return this.cal_sp_ep(e.sp,e.ep,t)}}]),n}(l);y.prototype.type="TangentLine",y.prototype.isTangentLine=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=n(18),h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{index:new f(0)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.inputs[0].output_Model.getEdgeByIndex(this._attributes.index.get())}},{key:"_attrChanged",value:function(){}}]),n}(l);h.prototype.type="PolyhedronLine",h.prototype.isPolyhedronLine=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20),n(82),n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(179),f=n(62),h=n(15),p=npGeo,d=p.Line3,y=p.Vector3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{lineType:new f(0,{0:"seg_sp_ep",1:"ral_sp_ep",2:"straight_sp_ep"}),lineLength:new h(i.algebraic,"10")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t;if(0!=this._attributes.lineType.get()&&(t=this._attributes.lineLength.calcu(),!isFinite(t)))return d.createUgly();var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model;if(!e.isPlane||!n.isPlane)return d.createUgly();var i=d.intersection(e,n);if(i.isUgly)return i;var r=_(e.segments,i),o=_(n.segments,i);if(r&&o){var s=r.concat(o).map((function(t){return{p:t,v:i.valueOn(t)}})).sort((function(t,e){return t.v-e.v}));return this.cal_sp_ep(s[1].p,s[2].p,t)}if(r)return this.cal_sp_ep(r[0],r[1],t);if(o)return this.cal_sp_ep(o[0],o[1],t);var a=y.midPoint(e.gravity,n.gravity);return this.cal_sp_ep(a,a.translate(i.toVector()),t)}}]),n}(l);function _(t,e){for(var n,i,r,o=0;r=t[o];o++){var s=y.intersectionOfStraightLines(r,e);!s.isUgly&&r.justPointOn(s)&&(n?y.isEqual(n,s,.001)||(i=s):n=s)}return n&&i?[n,i]:null}v.prototype.type="IntersectionLine",v.prototype.isIntersectionLine=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(492),f=n(15),h=n(38),p=n(56),d=npGeo,y=d.Circle3,v=d.Arc3,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{ang:new f(i.algebraic,"1"),fixedAngle:new h(!0),unit:new p,directReverse:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return v.createUgly();var e=this.__angleToArc__(t.ang,this._attributes.unit.get()),n=3===this.inputs.length?this.__points__():this.inputs[1].output_Model.isLine?this.__line__():this.__normal__();return this.__calculate__(n,n.valueOn(this.inputs[0].output_Model),e)}},{key:"__line__",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model.foot(t),n=this.inputs[1].output_Model.normalVector,i=t.distanceTo(e);return new y(e,i,n,null,!this.directReverse)}},{key:"__normal__",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;if(!e.axis)return y.createUgly();var n=e.axis.foot(t),i=t.distanceTo(n);return new y(n,i,e.normalVector,null,!this.directReverse)}},{key:"__points__",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this.inputs[2].output_Model.normalVector,i=t.distanceTo(e);return new y(e,i,n,null,!this.directReverse)}}]),n}(l);_.prototype.type="PointNormalArc",_.prototype.isPointNormalArc=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(492),f=n(15),h=n(38),p=n(56),d=npGeo,y=d.Vector3,v=d.Circle3,_=d.Arc3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{corner:new f(i.algebraic,"0"),radius:new f(i.algebraic,"2"),ang:new f(i.algebraic,"1"),unit:new p,fixedAngle:new h(!0),directReverse:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return _.createUgly();var e=this.__angleToArc__(t.corner,this._attributes.unit.get()),n=this.__angleToArc__(t.ang,this._attributes.unit.get());return this.__calculate__(new v(this.inputs[0].output_Model,t.radius,this.__normalVector__(),null,!this.directReverse),e,n)}},{key:"__normalVector__",value:function(){return this.inputs[1].output_Model.isPoint?y.createByPoints(this.inputs[0].output_Model,this.inputs[1].output_Model).normalize():this.inputs[1].output_Model.normalVector}}]),n}(l);g.prototype.type="RadiusArc",g.prototype.isRadiusArc=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(56),h=n(15),p=n(38),d=npGeo.Circle3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{corner:new h(i.algebraic,"0"),unit:new f,isInner:new p})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.corner.calcu();if(!isFinite(t))return d.createUgly();var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=this.inputs[2].output_Model;return t=this.__angleToArc__(t,this._attributes.unit.get()),this._attributes.isInner.get()?d.inCircle(e,n,i,t):d.createBy3Points(e,n,i,t)}}]),n}(l);y.prototype.type="3PointsCircle",y.prototype.is3PointsCircle=!0,y.prototype.isCircle=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(56),h=n(15),p=npGeo,d=p.Circle3,y=p.Vector3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{corner:new h(i.algebraic,"0"),unit:new f,radius:new h(i.algebraic,"4")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return d.createUgly();var e=this.inputs[1].output_Model.isPoint?this.__point__():this.inputs[1].output_Model.normalVector,n=this.__angleToArc__(t.corner,this._attributes.unit.get());return d.centreRadiusAndNormal(this.inputs[0].output_Model,t.radius,e,n)}},{key:"__point__",value:function(){return y.createByPoints(this.inputs[0].output_Model,this.inputs[1].output_Model).normalize()}}]),n}(l);v.prototype.type="PointNormalCircle",v.prototype.isPointNormalCircle=!0,v.prototype.isCircle=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(56),h=n(15),p=npGeo.Circle3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{corner:new h(i.algebraic,"0"),unit:new f})}return(0,o.default)(n,[{key:"calculate",value:function(){if(!this.inputs[0].output_Model.isLine)return p.createUgly();var t=this._attributes.corner.calcu();if(!isFinite(t))return p.createUgly();var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=e.foot(n);return t=this.__angleToArc__(t,this._attributes.unit.get()),p.centreRadiusAndNormal(i,i.distanceTo(n),e.normalVector,t)}}]),n}(l);d.prototype.type="LinePointCircle",d.prototype.isLinePointCircle=!0,d.prototype.isCircle=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h={0:n(925),1:n(926),2:n(927),3:n(928),4:n(929),5:n(930)},p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{curveType:new f(0,h)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.constraint.calculate(this.element)}},{key:"_attrChanged",value:function(t,e){var n=this._attributes.curveType.getValue();e&&this.constraint&&this.constraint instanceof n||(this.constraint=new n(this.element,{algebraic:this.algebraic},e)),e&&this.constraint.setAttr(e)}},{key:"getAttr",value:function(){var t=this.constraint.getAttr();return t.curveType=this._attributes.curveType.get(),t.bindAction=this._attributes.bindAction.get(),t}},{key:"getParentsDataName",value:function(){return this.constraint.getParentsDataName()}},{key:"getCustomFuns",value:function(){return this.constraint.getCustomFuns()}}]),n}(l);p.prototype.type="FunctionCurve",p.prototype.isFunCurve=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=n(38),p={funStry:1},d=npGeo.Vector3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStry:new f(i.algebraic,"x"),min:new f(i.algebraic,"-5"),max:new f(i.algebraic,"5"),pNum:new f(i.algebraic,"100"),stepNum:new f(i.algebraic,"5"),isClosed:new h},"x",p)}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(){return new d(this.algebraic.get(this.vari),this._attributes.funStry.calcu(),0)}}]),n}(l);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=n(38),p={funStrx:1,funStry:1,funStrz:1},d=npGeo.Vector3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrx:new f(i.algebraic,"t"),funStry:new f(i.algebraic,"t"),funStrz:new f(i.algebraic,"t"),min:new f(i.algebraic,"-5"),max:new f(i.algebraic,"5"),pNum:new f(i.algebraic,"100"),stepNum:new f(i.algebraic,"5"),isClosed:new h},"t",p)}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(){return new d(this._attributes.funStrx.calcu(),this._attributes.funStry.calcu(),this._attributes.funStrz.calcu())}}]),n}(l);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=n(38),p={funStrr:1},d=npGeo.Vector3,y=Math.cos,v=Math.sin,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrr:new f(i.algebraic,"t"),min:new f(i.algebraic,"-5"),max:new f(i.algebraic,"5"),pNum:new f(i.algebraic,"100"),stepNum:new f(i.algebraic,"5"),isClosed:new h},"t",p)}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(){var t=this.algebraic.get(this.vari),e=this._attributes.funStrr.calcu();return new d(e*y(t),e*v(t),0)}}]),n}(l);t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=n(38),p={funStrr:1,funStrm:1,funStrn:1},d=npGeo.Vector3,y=Math.cos,v=Math.sin,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrr:new f(i.algebraic,"t"),funStrm:new f(i.algebraic,"t"),funStrn:new f(i.algebraic,"t"),min:new f(i.algebraic,"-5"),max:new f(i.algebraic,"5"),pNum:new f(i.algebraic,"100"),stepNum:new f(i.algebraic,"5"),isClosed:new h},"t",p)}return(0,o.default)(n,[{key:"__getCurrentSamplePoint__",value:function(){var t=this._attributes.funStrm.calcu(),e=this._attributes.funStrn.calcu(),n=this._attributes.funStrr.calcu();return new d(n*v(t)*y(e),n*v(t)*v(e),n*y(t))}}]),n}(l);t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=math.floor,p={funStr:1},d=npGeo,y=d.MarchSquaresUtils,v=y.marchSquares,_=y.createSquares,g=d.Vector3,m=d.Paths3,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{funStr:new f(i.algebraic,"x ^ 3  + y ^ 3  - 6*x*y"),minX:new f(i.algebraic,"-5"),maxX:new f(i.algebraic,"5"),gridX:new f(i.algebraic,"100"),minY:new f(i.algebraic,"-5"),maxY:new f(i.algebraic,"5"),gridY:new f(i.algebraic,"60")},"xy",p)).samplePoints=[],s.squarePoints=[],s}return(0,o.default)(n,[{key:"__isDynamic__",value:function(t){return this.isSegmentColor=t.dynamicDisplay&&t.dynamicDisplay.stroke&&(t.dynamicDisplay.stroke.isHasVari("x")||t.dynamicDisplay.stroke.isHasVari("y")),this.isSegmentColor}},{key:"calculate",value:function(t){var e=this.__getExpressValues__(this.ignores);return!e||e.gridX<2||e.gridY<2?m.createUgly():(this.__isDynamic__(t),this.displayCallFun=this.isSegmentColor?this.__segmentColor__:this.__notSegmentColor__,new m(this.__getPathPoints__(t,e)))}},{key:"__recordPosition__",value:function(){this.originX=this.algebraic.get("x"),this.originY=this.algebraic.get("y")}},{key:"__restorePosition__",value:function(){this.algebraic.set("x",this.originX),this.algebraic.set("y",this.originY)}},{key:"__getPathPoints__",value:function(t,e){this.__recordPosition__();var n=e.maxX,i=e.minX,r=e.maxY,o=e.minY,s=h(e.gridX),a=h(e.gridY);this.__isOnlyFunstrChange__(i,n,s,o,r,a)||this.__calcSamplesAndSquares__(i,n,s,o,r,a);for(var u,c=0;u=this.samplePoints[c];c++)this.algebraic.set("x",u.x),this.algebraic.set("y",u.y),u.value=this._attributes.funStr.calcu();for(var l,f=v(this.squarePoints),p=[],d=0;l=f[d];d++){for(var y,_=[],m=0;y=l[m];m++){var x=new g(y.x,y.y,0);_.push(this.displayCallFun(x,t))}p.push(_)}return this.__restorePosition__(),p}},{key:"__isOnlyFunstrChange__",value:function(t,e,n,i,r,o){return this.minXValue===t&&this.maxXValue===e&&this.gridXValue===n&&this.minYValue===i&&this.maxYValue===r&&this.gridYValue===o||(this.minXValue=t,this.maxXValue=e,this.gridXValue=n,this.minYValue=i,this.maxYValue=r,this.gridYValue=o,!1)}},{key:"__calcSamplesAndSquares__",value:function(t,e,n,i,r,o){var s=_(t,e,n,i,r,o),a=s.points,u=s.squares;this.samplePoints=a,this.squarePoints=u}},{key:"__segmentColor__",value:function(t,e){this.algebraic.set("x",t.x),this.algebraic.set("y",t.y);var n=new g(t.x,t.y,0),i=e.forceCalulateDynamicDisplay();return i.fill=i.stroke,n.userData={dis:i},n}},{key:"__notSegmentColor__",value:function(t){return new g(t.x,t.y,0)}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(51);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(226),f=n(15),h=math.floor,p=Math.cos,d=Math.sin,y={funStr:1},v=npGeo,_=v.MarchSquaresUtils,g=_.marchSquares,m=_.createSquares,x=v.Vector3,P=v.Paths3,w=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,{funStr:new f(i.algebraic,"r-t"),minR:new f(i.algebraic,"0"),maxR:new f(i.algebraic,"5"),gridR:new f(i.algebraic,"100"),minT:new f(i.algebraic,"0"),maxT:new f(i.algebraic,"2*pi"),gridT:new f(i.algebraic,"60")},"xy",y)).samplePoints=[],s.squarePoints=[],s}return(0,o.default)(n,[{key:"__isDynamic__",value:function(t){return this.isSegmentColor=t.dynamicDisplay&&t.dynamicDisplay.stroke&&(t.dynamicDisplay.stroke.isHasVari("r")||t.dynamicDisplay.stroke.isHasVari("t")),this.isSegmentColor}},{key:"calculate",value:function(t){var e=this.__getExpressValues__(this.ignores);return!e||e.gridR<2||e.gridT<2?P.createUgly():(this.__isDynamic__(t),this.displayCallFun=this.isSegmentColor?this.__segmentColor__:this.__notSegmentColor__,new P(this.__getPathPoints__(t,e)))}},{key:"__recordPosition__",value:function(){this.originT=this.algebraic.get("t"),this.originR=this.algebraic.get("r")}},{key:"__restorePosition__",value:function(){this.algebraic.set("t",this.originT),this.algebraic.set("r",this.originR)}},{key:"__getPathPoints__",value:function(t,e){this.__recordPosition__();var n=e.maxR,i=e.minR,r=e.maxT,o=e.minT,s=h(e.gridR),a=h(e.gridT);this.__isOnlyFunstrChange__(i,n,s,o,r,a)||this.__calcSamplesAndSquares__(i,n,s,o,r,a);for(var u,c=0;u=this.samplePoints[c];c++)this.algebraic.set("r",u.x),this.algebraic.set("t",u.y),u.value=this._attributes.funStr.calcu();for(var l,f=g(this.squarePoints),p=[],d=0;l=f[d];d++){for(var y,v=[],_=0;y=l[_];_++){var m=new x(y.x,y.y,0);v.push(this.displayCallFun(m,t))}p.push(v)}return this.__restorePosition__(),p}},{key:"__isOnlyFunstrChange__",value:function(t,e,n,i,r,o){return this.minRValue===t&&this.maxRValue===e&&this.gridRValue===n&&this.minTValue===i&&this.maxTValue===r&&this.gridTValue===o||(this.minRValue=t,this.maxRValue=e,this.gridRValue=n,this.minTValue=i,this.maxTValue=r,this.gridTValue=o,!1)}},{key:"__calcSamplesAndSquares__",value:function(t,e,n,i,r,o){var s=m(t,e,n,i,r,o),a=s.points,u=s.squares;this.samplePoints=a,this.squarePoints=u}},{key:"__segmentColor__",value:function(t,e){this.algebraic.set("r",t.x),this.algebraic.set("t",t.y);var n=M(t.x,t.y),i=e.forceCalulateDynamicDisplay();return i.fill=i.stroke,n.userData={dis:i},n}},{key:"__notSegmentColor__",value:function(t){return M(t.x,t.y)}}]),n}(l);function M(t,e){return new x(t*p(e),t*d(e),0)}t.exports=w},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(437),f=npGeo.Paths3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(){return(0,r.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"calculate",value:function(){return this.__calculate__(f)}}]),n}(l);h.prototype.type="PointLocus",h.prototype.isPointLocus=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo.Paths3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.element.inputs.map((function(t){return t.output_Model}));return new f([t])}}]),n}(l);h.prototype.type="PointsPath",h.prototype.isPointsPath=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=npGeo,h=f.Paths3,p=f.Circle3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;return t.isPlane?h.intersectionOfPlaneEntity(t,e):e.isPlane?h.intersectionOfPlaneEntity(e,t):t.isSphere&&e.isSphere?p.intersectionOfSpheres(t,e):h.intersectionOfEntities(t,e)}}]),n}(l);d.prototype.type="IntersectionCurve",d.prototype.isIntersectionCurve=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(365));l.prototype.type="XOYAxisPlane",l.prototype.isXOYAxisPlane=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(365));l.prototype.type="XOZAxisPlane",l.prototype.isXOZAxisPlane=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r)}return(0,r.default)(n)}(n(365));l.prototype.type="YOZAxisPlane",l.prototype.isYOZAxisPlane=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=n(62),h=n(15),p=npGeo.Plane3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{planeType:new f(0,{0:0,1:1,2:2}),ratio:new h(i.algebraic,"1")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.ratio.calcu();return isFinite(t)?p.createBy3Points(this.inputs[0].output_Model,this.inputs[1].output_Model,this.inputs[2].output_Model,this.planeType,t):p.createUgly()}},{key:"_attrChanged",value:function(){this.planeType=this._attributes.planeType.getValue()}}]),n}(l);d.prototype.type="3PointsPlane",d.prototype.is3PointsPlane=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=n(62),h=n(15),p=npGeo.Plane3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{planeType:new f(0,{0:0,1:1,2:2}),ratio:new h(i.algebraic,"1")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this._attributes.ratio.calcu();return isFinite(t)?p.createBy3Points(this.inputs[0].output_Model,this.inputs[1].output_Model.sp,this.inputs[1].output_Model.ep,this.planeType,t):p.createUgly()}},{key:"_attrChanged",value:function(){this.planeType=this._attributes.planeType.getValue()}}]),n}(l);d.prototype.type="PointLinePlane",d.prototype.isPointLinePlane=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=npGeo.Plane3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs.map((function(t){return t.output_Model}));return f.polygonByPoints(t)}}]),n}(l);h.prototype.type="PointsPolygon",h.prototype.isPolygon=!0,h.prototype.isPointsPolygon=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=n(56),h=n(15),p=npGeo,d=p.Vector3,y=p.Line3,v=p.Plane3,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{unit:new f,ratio:new h(i.algebraic,"0.5"),corner:new h(i.algebraic,"0"),width:new h(i.algebraic,"5"),height:new h(i.algebraic,"10")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return v.createUgly();var e=this.inputs[1].output_Model,n=e.isPoint?this.__2points__(t.ratio):e.isLine?this.__pointLine__(t.ratio):this.__normal__(t.ratio);return this.__vertices_rectangle__(n.c,n.n,t)}},{key:"__2points__",value:function(t){var e=new y(this.inputs[0].output_Model,this.inputs[1].output_Model);return{c:e.pointOn(t),n:e.normalVector}}},{key:"__pointLine__",value:function(t){var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model.foot(e);if(d.isEqual(e,n))return{c:n,n:this.inputs[1].output_Model.normalVector};var i=new y(n,e);return{c:i.pointOn(t),n:i.normalVector}}},{key:"__normal__",value:function(t){var e=this.inputs[0].output_Model,n=new y(this.inputs[1].output_Model.plane.foot(e),e);return{c:n.pointOn(t),n:n.normalVector}}}]),n}(l);_.prototype.type="MidPlane",_.prototype.isMidPlane=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(205),f=n(56),h=n(15),p=npGeo,d=p.Vector3,y=p.Plane3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{unit:new f,corner:new h(i.algebraic,"0"),width:new h(i.algebraic,"5"),height:new h(i.algebraic,"10")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.__vertices_rectangle__(this.inputs[0].output_Model,this.__calculate__().normalize(),t):y.createUgly()}},{key:"__calculate__",value:function(){return 3===this.inputs.length?this.inputs[2].output_Model.isPoint?this.inputs[2].output_Model.isPoint:this.inputs[2].output_Model.isLine?this.__normalLine__():this.__normalNormal__():this.inputs[1].output_Model.isPoint?this.__point__():this.__line__()}},{key:"__point__",value:function(){return d.createByPoints(this.inputs[0].output_Model,this.inputs[1].output_Model)}},{key:"__line__",value:function(){return this.inputs[1].output_Model.normalVector}},{key:"__normalPoint__",value:function(){var t=d.createByPoints(this.inputs[0].output_Model,this.inputs[2].output_Model),e=this.inputs[1].output_Model.normalVector.clone().cross(t);return e.isZero()?t:e}},{key:"__normalLine__",value:function(){var t=this.inputs[1].output_Model.normalVector.clone(),e=this.inputs[2].output_Model.normalVector,n=t.cross(e);if(!n.isZero())return n;var i=d.createByPoints(this.inputs[0].output_Model,this.inputs[2].output_Model.sp);return d.isParallel(i,e)?t:i.cross(e)}},{key:"__normalNormal__",value:function(){var t=this.inputs[1].output_Model.normalVector.clone(),e=this.inputs[2].output_Model.normalVector,n=t.cross(e);return n.isZero()?t:n}}]),n}(l);v.prototype.type="VertiPlane",v.prototype.isVerticalPlane=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(205),h=n(56),p=n(15),d=npGeo,y=d.Line3,v=d.Plane3,_=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({unit:new h,corner:new p(i.algebraic,"0"),width:new p(i.algebraic,"5"),height:new p(i.algebraic,"10")},t.inputs[1].output_Model.isLine?{lineAngle:new p(i.algebraic,"0"),unit:new h}:{}))}return(0,s.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return v.createUgly();var e=this.inputs[1].output_Model.isLine?this.__lineNormal__(t.lineAngle):this.__normal__(),n=this.inputs[0].output_Model;return this.__vertices_rectangle__(n,e,t)}},{key:"__lineNormal__",value:function(t){var e=this.inputs[1].output_Model,n=this.__angleToArc__(t,this._attributes.unit.get()),i=y.verticalLineByPointLine(this.inputs[0].output_Model,this.inputs[1].output_Model,n);return e.toVector().cross(i.toVector()).normalize()}},{key:"__normal__",value:function(){return this.inputs[1].output_Model.normalVector}}]),n}(f);_.prototype.type="ParaPlane",_.prototype.isParaPlane=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(366),f=n(15),h=n(56),p=n(18),d=npGeo,y=d.Vector3,v=d.Sphere3,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{radius:new f(i.algebraic,"3"),gapAngle:new f(i.algebraic),corner:new f(i.algebraic),unit:new h,roundness:new p(1)})}return(0,o.default)(n,[{key:"__calculate__",value:function(t){if(0==t.radius)return v.createUgly();var e=this.__calculateNormalVector__();return this.__getInfo__(t.radius,this.inputs[0].output_Model,e,t)}},{key:"__calculateNormalVector__",value:function(){return this.inputs[1].output_Model.isPoint?this.__point__():this.inputs[1].output_Model.normalVector}},{key:"__point__",value:function(){return y.createByPoints(this.inputs[0].output_Model,this.inputs[1].output_Model).normalize()}}]),n}(l);_.prototype.type="PointNormalSphere",_.prototype.isPointNormalSphere=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(56),p=n(18),d=npGeo.Sphere3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{gapAngle:new f(i.algebraic),unit:new h,roundness:new p(1)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return d.createUgly();var e=this.inputs[0].output_Model;return new d(e.centre,e.radius,e.normalVector,e.xVector,e.isRight,this._attributes.roundness.get(),this.__angleToArc__(t.gapAngle,this._attributes.unit.get()))}}]),n}(l);y.prototype.type="CircumscribedSphere",y.prototype.isCircumscribedSphere=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(56),p=n(18),d=npGeo.Sphere3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{gapAngle:new f(i.algebraic),unit:new h,roundness:new p(1)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return d.createUgly();var e=this.inputs[0].output_Model;return e.isCircle3?new d(e.centre,e.radius,e.normalVector,e.xVector,e.isRight,this._attributes.roundness.get(),this.__angleToArc__(t.gapAngle,this._attributes.unit.get())):d.createUgly()}}]),n}(l);y.prototype.type="EquatorSphere",y.prototype.isEquatorSphere=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(366),f=n(15),h=n(56),p=n(38),d=n(18),y=npGeo.Sphere3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{gapAngle:new f(i.algebraic),corner:new f(i.algebraic),unit:new h,roundness:new d(8),isInner:new p})}return(0,o.default)(n,[{key:"_attrChanged",value:function(){this.isInner=this._attributes.isInner.get()}},{key:"__calculate__",value:function(t){var e=t.roundness,n=t.corner,i=t.gapAngle,r=this.inputs[0].output_Model,o=this.inputs[1].output_Model,s=this.inputs[2].output_Model,a=this._attributes.unit.get();return this.isInner?y.inSphere(r,o,s,this.__angleToArc__(n,a),e,this.__angleToArc__(n,i)):y.createBy3Points(r,o,s,this.__angleToArc__(n,a),e,this.__angleToArc__(n,i))}}]),n}(l);v.prototype.type="3PointsSphere",v.prototype.is3PointsSphere=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(366),f=n(15),h=n(56),p=n(38),d=n(18),y=npGeo.Sphere3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{gapAngle:new f(i.algebraic),corner:new f(i.algebraic),unit:new h,roundness:new d(8),isInner:new p})}return(0,o.default)(n,[{key:"_attrChanged",value:function(){this.isInner=this._attributes.isInner.get()}},{key:"__calculate__",value:function(t){var e=t.roundness,n=t.corner,i=t.gapAngle,r=this.inputs[0].output_Model,o=this.inputs[1].output_Model,s=this.inputs[2].output_Model,a=this.inputs[3].output_Model,u=this._attributes.unit.get();return y.createBy4Points(r,o,s,a,this.isInner,this.__angleToArc__(n,u),e,this.__angleToArc__(n,i))}}]),n}(l);v.prototype.type="4PointsSphere",v.prototype.is4PointsSphere=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(269),f=npGeo.RegularTetrahedron3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,f)}return(0,r.default)(n)}(l);h.prototype.type="Tetrahedron",h.prototype.isTetrahedron=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(269),f=npGeo.RegularHexahedron3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,f)}return(0,r.default)(n)}(l);h.prototype.type="Hexahedron",h.prototype.isHexahedron=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(269),f=npGeo.RegularOctahedron3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,f)}return(0,r.default)(n)}(l);h.prototype.type="Octahedron",h.prototype.isOctahedron=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(269),f=npGeo.RegularDodecahedron3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,f)}return(0,r.default)(n)}(l);h.prototype.type="Dodecahedron",h.prototype.isDodecahedron=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(269),f=npGeo.RegularIcosahedron3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r){return(0,o.default)(this,n),e.call(this,t,i,r,f)}return(0,r.default)(n)}(l);h.prototype.type="Icosahedron",h.prototype.Icosahedron=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(270),f=n(15),h=n(56),p=n(38),d=npGeo.Cuboid3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{length:new f(i.algebraic,"3"),width:new f(i.algebraic,"4"),height:new f(i.algebraic,"2"),corner:new f(i.algebraic),unit:new h,cornerPoint:new p})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return d.createUgly();var e=t.length,n=t.width,i=t.height,r=this.__calculateNormalVector__(),o=this.inputs[0].output_Model,s=this.__getCorner__(t.corner);return this._attributes.cornerPoint.get()?d.createByPointAndCorner(o,e,n,i,r,s):d.createByUnderCentreAndCorner(o,e,n,i,r,s)}},{key:"__getCorner__",value:function(t){return this.__angleToArc__(t,this._attributes.unit.get())}}]),n}(l);y.prototype.type="Cuboid",y.prototype.isCuboid=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(270),f=npGeo.SurfaceTriangle3,h=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o)}return(0,o.default)(n,[{key:"calculate",value:function(){for(var t,e=[],n=0;t=this.inputs[n];n++)e.push(t.output_Model);return f.convexHull(e)}}]),n}(l);h.prototype.type="ConvexHull",h.prototype.isConvexHull=!0,t.exports=h},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(270),f=n(15),h=n(56),p=n(18),d=npGeo,y=d.FrustumOfCone3,v=d.Cylinder3,_=d.Cone3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{taper:new f(i.algebraic,"0.5"),radius:new f(i.algebraic,"2"),height:new f(i.algebraic,"2"),gapAngle:new f(i.algebraic),corner:new f(i.algebraic),unit:new h,roundness:new p(8)})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.__calculate__(t):_.createUgly()}},{key:"__calculate__",value:function(t){var e=this.__getTaperValue__(t.taper),n=this._attributes.roundness.get(),i=this.inputs[0].output_Model,r=t.radius,o=t.height,s=this.__calculateNormalVector__(),a=this.__angleToArc__(t.gapAngle,this._attributes.unit.get()),u=this.__angleToArc__(t.corner,this._attributes.unit.get());if(0==e)return _.createByNormalAndCorner(i,r,s,o,u,n,a);if(1==e)return v.createByNormalAndCorner(i,r,s,o,u,n,a);var c=r*e;return y.createByNormalAndCorner(i,r,c,s,o,u,n,a)}},{key:"__getTaperValue__",value:function(t){return t<0&&(t=0),t>1&&(t=1),t}}]),n}(l);g.prototype.type="Cylinder",g.prototype.isCylinder=!0,t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(270),f=n(15),h=n(56),p=npGeo,d=p.Prism3,y=p.Pyramid3,v=p.Prismoid3,_=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{taper:new f(i.algebraic,"0.5"),radius:new f(i.algebraic,"2"),height:new f(i.algebraic,"2"),edgeNum:new f(i.algebraic,"3"),corner:new f(i.algebraic),unit:new h})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();return t?this.__calculate__(t):d.createUgly()}},{key:"__calculate__",value:function(t){var e=this.__getTaperValue__(t.taper),n=this.inputs[0].output_Model,i=t.radius,r=t.height,o=this.__getEdgeNum__(t.edgeNum),s=this.__calculateNormalVector__(),a=this.__angleToArc__(t.corner,this._attributes.unit.get());if(0==e)return y.createByNormalAndCorner(n,i,r,o,s,a);if(1==e)return d.createByNormalAndCorner(n,i,r,o,s,a);var u=i*e;return v.createByNormalAndCorner(n,i,u,r,o,s,a)}},{key:"__getEdgeNum__",value:function(t){return(t=parseInt(t))<3&&(t=3),t}},{key:"__getTaperValue__",value:function(t){return t<0&&(t=0),t>1&&(t=1),t}}]),n}(l);_.prototype.type="Prism",_.prototype.isPrism=!0,t.exports=_},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(290),h=n(15),p=npGeo.SurfaceQuad3,d={fValue:0,eValue:1},y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{pNum:new h(i.algebraic,"50"),range1:new f(i.algebraic,{s:0,e:1}),range2:new f(i.algebraic,{s:0,e:1})})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return p.createUgly();for(var e=t.pNum,n=this.inputs[0].output_Model,i=this.inputs[1].output_Model,r=this.__clacStep__(t.range1,e),o=this.__clacStep__(t.range2,e),s=[],a=[],u=0,c=t.range1.s,l=t.range2.s;u<e-1;u++)s.push(n.pointOn(c,d)),a.push(i.pointOn(l,d)),c+=r,l+=o;return s.push(n.pointOn(t.range1.e,d)),a.push(i.pointOn(t.range2.e,d)),new p(s.concat(a),2,e)}},{key:"__clacStep__",value:function(t,e){return(t.e-t.s)/(e-1)}}]),n}(l);y.prototype.type="2LinearSurface",t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(360),f=n(15),h=n(361),p=npGeo.SurfaceQuad3,d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{varis:new h(i.algebraic),pNum:new f(i.algebraic,"50")})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.pNum;return t<1?p.createUgly():(this.column=this.inputs[0].output_Model.isLine?2:t,this.__calculate__(t))}},{key:"__calculate__",value:function(t){var e=this._calcuSamples(t);return 0===e.length?p.createUgly():new p(e,e.length/this.column,this.column)}},{key:"_handleArrByModel",value:function(t,e){if(e.isUgly)return t;for(var n,i=e.toPoints(this.column),r=0;n=i.points[r];r++)t=t.concat(n);return t}}]),n}(l);d.prototype.type="LocusSurface",d.prototype.isSurface=!0,d.prototype.isLocusSurface=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(62),h={0:n(960),1:n(961),2:n(962),3:n(963),4:n(964),5:n(965),6:n(966),7:n(967),8:n(968)},p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{surfaceType:new f(0,h)})}return(0,o.default)(n,[{key:"calculate",value:function(){return this.constraint.calculate()}},{key:"_attrChanged",value:function(t,e){var n=this._attributes.surfaceType.getValue();e&&this.constraint&&this.constraint instanceof n||(this.constraint=new n(this.element,{algebraic:this.algebraic},e)),e&&this.constraint.setAttr(e)}},{key:"getAttr",value:function(){var t=this.constraint.getAttr();return t.surfaceType=this._attributes.surfaceType.get(),t.bindAction=this._attributes.bindAction.get(),t}},{key:"getParentsDataName",value:function(){return this.constraint.getParentsDataName()}},{key:"getCustomFuns",value:function(){return this.constraint.getCustomFuns()}}]),n}(l);p.prototype.type="FunctionSurface",p.prototype.isFunSurface=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStr:1},p=Math.abs,d=Math.floor,y=npGeo,v=y.Vector3,_=y.SurfaceQuad3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"x ^ 2  + y ^ 2  - 4"),minX:new f(i.algebraic,"-2"),maxX:new f(i.algebraic,"2"),gridX:new f(i.algebraic,"20"),minY:new f(i.algebraic,"-2"),maxY:new f(i.algebraic,"2"),gridY:new f(i.algebraic,"20")},["x","y"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridX<1||t.gridY<1)return _.createUgly();var e=d(t.gridX),n=d(t.gridY),i=this.__calculateVertices__(t.minX,t.maxX,e,t.minY,t.maxY,n);return new _(i,e+1,n+1)}},{key:"__calculateVertice__",value:function(t,e){return new v(t,e,this._attributes.funStr.calcu())}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=p(e-t)/n,a=p(r-i)/o,u=[],c=t,l=0;l<=n;l++){this.algebraic.set("x",c);for(var f=i,h=0;h<=o;h++)this.algebraic.set("y",f),u.push(this.__calculateVertice__(c,f)),f+=a;c+=s}return u}}]),n}(l);t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStrx:1,funStry:1,funStrz:1},p=Math.abs,d=Math.floor,y=npGeo,v=y.Vector3,_=y.SurfaceQuad3,g=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrx:new f(i.algebraic,"2 * sin(u) * cos(v)"),funStry:new f(i.algebraic,"2 * sin(u) * sin(v)"),funStrz:new f(i.algebraic,"2 * cos(u)"),minU:new f(i.algebraic,"0"),maxU:new f(i.algebraic,"pi"),gridU:new f(i.algebraic,"20"),minV:new f(i.algebraic,"0"),maxV:new f(i.algebraic,"2*pi"),gridV:new f(i.algebraic,"20")},["u","v"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridU<1||t.gridV<1)return _.createUgly();var e=d(t.gridU),n=d(t.gridV),i=this.__calculateVertices__(t.minU,t.maxU,e,t.minV,t.maxV,n);return new _(i,e+1,n+1)}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=this.algebraic.get("u"),a=this.algebraic.get("v"),u=p(e-t)/n,c=p(r-i)/o,l=[],f=t,h=0;h<=n;h++){this.algebraic.set("u",f);for(var d=i,y=0;y<=o;y++)this.algebraic.set("v",d),l.push(this.__calculateVertice__()),d+=c;f+=u}return this.algebraic.set("u",s),this.algebraic.set("v",a),l}},{key:"__calculateVertice__",value:function(){return new v(this._attributes.funStrx.calcu(),this._attributes.funStry.calcu(),this._attributes.funStrz.calcu())}}]),n}(l);t.exports=g},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(367),f=n(15),h={funStr:1},p=Math.floor,d=npGeo.SurfaceTriangle3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"x^2 + y^2 + z^2 - 4"),minX:new f(i.algebraic,"-2"),maxX:new f(i.algebraic,"2"),gridX:new f(i.algebraic,"20"),minY:new f(i.algebraic,"-2"),maxY:new f(i.algebraic,"2"),gridY:new f(i.algebraic,"20"),minZ:new f(i.algebraic,"-2"),maxZ:new f(i.algebraic,"2"),gridZ:new f(i.algebraic,"20")},["x","y","z"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridX<1||t.gridY<1||t.gridZ<1)return d.createUgly();var e=p(t.gridX),n=p(t.gridY),i=p(t.gridZ);return this.__isOnlyFunstrChange__(t.minX,t.maxX,e,t.minY,t.maxY,n,t.minZ,t.maxZ,i)?this.__calcFunStr__():this.__calcRestart__(t.minX,t.maxX,e,t.minY,t.maxY,n,t.minZ,t.maxZ,i)}},{key:"__updateSamplePoints",value:function(){for(var t,e=0;t=this.samplePoints[e];e++)this.algebraic.set("x",t.x),this.algebraic.set("y",t.y),this.algebraic.set("z",t.z),t.value=this._attributes.funStr.calcu()}},{key:"__getRightPoint__",value:function(t){return t}}]),n}(l);t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStr:1},p=Math.abs,d=Math.floor,y=Math.cos,v=Math.sin,_=npGeo,g=_.Vector3,m=_.SurfaceQuad3,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"2"),minM:new f(i.algebraic,"0"),maxM:new f(i.algebraic,"6.28"),gridM:new f(i.algebraic,"20"),minN:new f(i.algebraic,"0"),maxN:new f(i.algebraic,"3.14"),gridN:new f(i.algebraic,"20")},["m","n"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridM<1||t.gridN<1)return m.createUgly();var e=d(t.gridM),n=d(t.gridN);return new m(this.__calculateVertices__(t.minM,t.maxM,e,t.maxN,t.minN,n),e+1,n+1)}},{key:"__calculateVertice__",value:function(t,e){var n=this._attributes.funStr.calcu();return new g(n*v(t)*y(e),n*v(t)*v(e),n*y(t))}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=p(e-t)/n,a=p(i-r)/o,u=[],c=r,l=0;l<=o;l++){this.algebraic.set("n",c);for(var f=t,h=0;h<=n;h++)this.algebraic.set("m",f),u.push(this.__calculateVertice__(f,c)),f+=s;c+=a}return u}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStrr:1,funStrm:1,funStrn:1},p=Math.abs,d=Math.floor,y=Math.cos,v=Math.sin,_=npGeo,g=_.Vector3,m=_.SurfaceQuad3,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrr:new f(i.algebraic,"2"),funStrm:new f(i.algebraic,"u"),funStrn:new f(i.algebraic,"v"),minU:new f(i.algebraic,"0"),maxU:new f(i.algebraic,"6.28"),gridU:new f(i.algebraic,"20"),minV:new f(i.algebraic,"0"),maxV:new f(i.algebraic,"3.14"),gridV:new f(i.algebraic,"20")},["u","v"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridU<1||t.gridV<1)return m.createUgly();var e=d(t.gridU),n=d(t.gridV);return new m(this.__calculateVertices__(t.minU,t.maxU,n,t.minV,t.maxV,n),e+1,n+1)}},{key:"__calculateVertice__",value:function(){var t=this._attributes.funStrr.calcu(),e=this._attributes.funStrm.calcu(),n=this._attributes.funStrn.calcu();return new g(t*v(e)*y(n),t*v(e)*v(n),t*y(e))}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=p(e-t)/o,a=p(r-i)/n,u=[],c=t,l=0;l<=o;l++){this.algebraic.set("u",c);for(var f=i,h=0;h<=n;h++)this.algebraic.set("v",f),u.push(this.__calculateVertice__()),f+=a;c+=s}return u}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(367),f=n(15),h={funStr:1},p=Math.cos,d=Math.sin,y=Math.floor,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"sin(n)-r"),minM:new f(i.algebraic,"0"),maxM:new f(i.algebraic,"6.28"),gridM:new f(i.algebraic,"2"),minN:new f(i.algebraic,"0"),maxN:new f(i.algebraic,"1.57"),gridN:new f(i.algebraic,"2"),minR:new f(i.algebraic,"0"),maxR:new f(i.algebraic,"3"),gridR:new f(i.algebraic,"2")},["r","m","n"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!(!t||t.gridM<1||t.gridN<1||t.gridR<1)){var e=y(t.gridM),n=y(t.gridN),i=y(t.gridR);return this.__isOnlyFunstrChange__(t.minR,t.maxR,i,t.minM,t.maxM,e,t.minN,t.maxN,n)?this.__calcFunStr__():this.__calcRestart__(t.minR,t.maxR,i,t.minM,t.maxM,e,t.minN,t.maxN,n)}}},{key:"__updateSamplePoints",value:function(){for(var t,e=0;t=this.samplePoints[e];e++)this.algebraic.set("r",t.x),this.algebraic.set("m",t.y),this.algebraic.set("n",t.z),this.samplePoints[e].value=this._attributes.funStr.calcu()}},{key:"__getRightPoint__",value:function(t){return{x:t.x*d(t.y)*p(t.z),y:t.x*d(t.y)*d(t.z),z:t.x*p(t.y)}}}]),n}(l);t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStr:1},p=Math.abs,d=Math.floor,y=Math.cos,v=Math.sin,_=npGeo,g=_.Vector3,m=_.SurfaceQuad3,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"r"),minM:new f(i.algebraic,"0"),maxM:new f(i.algebraic,"6.28"),gridM:new f(i.algebraic,"20"),minR:new f(i.algebraic,"0"),maxR:new f(i.algebraic,"2"),gridR:new f(i.algebraic,"20")},["r","m"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridM<1||t.gridR<1)return m.createUgly();var e=d(t.gridM),n=d(t.gridR);return new m(this.__calculateVertices__(t.minM,t.maxM,e,t.minR,t.maxR,n),e+1,n+1)}},{key:"__calculateVertice__",value:function(t,e){return new g(e*y(t),e*v(t),this._attributes.funStr.calcu())}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=p(e-t)/n,a=p(r-i)/o,u=[],c=i,l=0;l<=o;l++){this.algebraic.set("r",c);for(var f=t,h=0;h<=n;h++)this.algebraic.set("m",f),u.push(this.__calculateVertice__(f,c)),f+=s;c+=a}return u}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h={funStrr:1,funStrm:1,funStrz:1},p=Math.abs,d=Math.floor,y=Math.cos,v=Math.sin,_=npGeo,g=_.Vector3,m=_.SurfaceQuad3,x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStrr:new f(i.algebraic,"cos(u)"),funStrm:new f(i.algebraic,"sin(u)"),funStrz:new f(i.algebraic,"v"),minU:new f(i.algebraic,"0"),maxU:new f(i.algebraic,"2*pi"),gridU:new f(i.algebraic,"20"),minV:new f(i.algebraic,"0"),maxV:new f(i.algebraic,"2"),gridV:new f(i.algebraic,"20")},["u","v"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!t||t.gridU<1||t.gridV<1)return m.createUgly();var e=d(t.gridU),n=d(t.gridV);return new m(this.__calculateVertices__(t.minU,t.maxU,n,t.minV,t.maxV,e),e+1,n+1)}},{key:"__calculateVertice__",value:function(){var t=this._attributes.funStrr.calcu(),e=this._attributes.funStrm.calcu();return new g(t*y(e),t*v(e),this._attributes.funStrz.calcu())}},{key:"__calculateVertices__",value:function(t,e,n,i,r,o){for(var s=p(e-t)/o,a=p(r-i)/n,u=[],c=t,l=0;l<=o;l++){this.algebraic.set("u",c);for(var f=i,h=0;h<=n;h++)this.algebraic.set("v",f),u.push(this.__calculateVertice__()),f+=a;c+=s}return u}}]),n}(l);t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(367),f=n(15),h={funStr:1},p=Math.floor,d=Math.cos,y=Math.sin,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{funStr:new f(i.algebraic,"m"),minR:new f(i.algebraic,"0"),maxR:new f(i.algebraic,"6"),gridR:new f(i.algebraic,"4"),minM:new f(i.algebraic,"0"),maxM:new f(i.algebraic,"6.28"),gridM:new f(i.algebraic,"4"),minZ:new f(i.algebraic,"0"),maxZ:new f(i.algebraic,"8"),gridZ:new f(i.algebraic,"2")},["r","m","z"])}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__(h);if(!(!t||t.gridR<1||t.gridM<1||t.gridZ<1)){var e=p(t.gridR),n=p(t.gridM),i=p(t.gridZ);return this.__isOnlyFunstrChange__(t.minR,t.maxR,e,t.minM,t.maxM,n,t.minZ,t.maxZ,i)?this.__calcFunStr__():this.__calcRestart__(t.minR,t.maxR,e,t.minM,t.maxM,n,t.minZ,t.maxZ,i)}}},{key:"__updateSamplePoints",value:function(){for(var t,e=0;t=this.samplePoints[e];e++)this.algebraic.set("r",t.x),this.algebraic.set("m",t.y),this.algebraic.set("z",t.z),this.samplePoints[e].value=this._attributes.funStr.calcu()}},{key:"__getRightPoint__",value:function(t){return{x:t.x*d(t.y),y:t.x*y(t.y),z:t.z}}}]),n}(l);t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(56),p=n(18),d=npGeo.SurfaceQuad3,y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{corner:new f(i.algebraic,"6.283"),unit:new h(1),roundness:new p(32),precision:new p(t.inputs[0].output_Model.isLine?12:200)})}return(0,o.default)(n,[{key:"calculate",value:function(){if(!this.inputs[1].output_Model.isLine)return d.createUgly();var t=this._attributes.corner.calcu();if(!isFinite(t))return d.createUgly();var e=this.inputs[1].output_Model,n=[];t=this.__angleToArc__(t,this._attributes.unit.get());for(var i,r=this._attributes.roundness.get(),o=t/r,s=this.inputs[0].toPoints(this._attributes.precision.get()),a=0;i=s.points[a];a++)for(var u,c=0;u=i[c];c++)this.__roate__(u,e,o,r,n);return new d(n,n.length/(r+1),r+1)}},{key:"__roate__",value:function(t,e,n,i,r){r.push(t);for(var o=1;o<i+1;o++)t=t.rotate(e,n),r.push(t);return r}}]),n}(l);y.prototype.type="RotateElementSurface",t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(290),h=n(15),p=npGeo.SurfaceQuad3,d={fValue:0,eValue:1},y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{pNum:new h(i.algebraic,"50"),range1:new f(i.algebraic,{s:0,e:1})})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.__getExpressValues__();if(!t)return p.createUgly();for(var e=this.inputs[0].output_Model,n=this.inputs[1].output_Model,i=n.isLine?2:t.pNum,r=this.__clacStep__(t.range1,i),o=[],s=[],a=0,u=t.range1.s;a<i-1;a++)o.push(e),s.push(n.pointOn(u,d)),u+=r;return o.push(e),s.push(n.pointOn(t.range1.e,d)),new p(o.concat(s),2,i)}},{key:"__clacStep__",value:function(t,e){return(t.e-t.s)/(e-1)}}]),n}(l);y.prototype.type="PointLinearSurface",t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(368),f=n(15),h=npGeo.Vector3,p=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{coorX:new f(i.algebraic,"1"),coorY:new f(i.algebraic,"1"),coorZ:new f(i.algebraic,"1")})}return(0,o.default)(n,[{key:"getVector",value:function(t){return this.getTranslateVector(t)}},{key:"getTranslateVector",value:function(t){return new h(t.coorX,t.coorY,t.coorZ)}}]),n}(l);p.prototype.type="TranslateByCoor",p.prototype.isTranslateByCoor=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(368),h=n(15),p=npGeo.Vector3,d=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s,a){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({ratio:new h(i.algebraic,"1")},a))}return(0,s.default)(n,[{key:"getVector",value:function(t){return this.getTranslateVector().multiplyScalar(t.ratio)}},{key:"getTranslateVector",value:function(){return p.createByPoints(this.inputs[1].output_Model,this.inputs[2].output_Model)}}]),n}(f);d.prototype.type="TranslateBy2Points",d.prototype.isTranslateBy2Points=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(368),h=n(15),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s,a){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({ratio:new h(i.algebraic,"1")},a))}return(0,s.default)(n,[{key:"__calculate__",value:function(){return this.inputs[1].output_Model.isLine?this.transformByOutput_Model(this.inputs[0].output_Model):this.inputs[0].output_Model.constructor.createUgly()}},{key:"getVector",value:function(t){return this.getTranslateVector().multiplyScalar(t.ratio)}},{key:"getTranslateVector",value:function(){return this.inputs[1].output_Model.toVector().clone()}}]),n}(f);p.prototype.type="TranslateBySegment",p.prototype.isTranslateBySegment=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"transformByOutput_Model",value:function(t){return this.inputs[1].output_Model.isLine?t.reflection(this.inputs[1].output_Model):t.reflection(this.inputs[1].output_Model.plane)}}]),n}(n(494));l.prototype.type="Axisymmetric",l.prototype.isAxisymmetric=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o,s){return(0,r.default)(this,n),e.call(this,t,i,o,s)}return(0,o.default)(n,[{key:"transformByOutput_Model",value:function(t){return this.inputs[1].output_Model.isPlane?t.reflection(this.inputs[1].output_Model.plane):t.constructor.createUgly()}}]),n}(n(494));l.prototype.type="Planesymmetric",l.prototype.isPlanesymmetric=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(28)),o=i(n(1)),s=i(n(2)),a=i(n(5)),u=i(n(6)),c=i(n(7));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var f=n(11),h=n(15),p=function(t){(0,a.default)(n,t);var e=l(n);function n(t,i,s,a){return(0,o.default)(this,n),e.call(this,t,i,s,(0,r.default)({a1:new h(i.algebraic,"1"),b1:new h(i.algebraic,"0"),c1:new h(i.algebraic,"0"),x0:new h(i.algebraic,"0"),a2:new h(i.algebraic,"0"),b2:new h(i.algebraic,"1"),c2:new h(i.algebraic,"0"),y0:new h(i.algebraic,"0"),a3:new h(i.algebraic,"0"),b3:new h(i.algebraic,"0"),c3:new h(i.algebraic,"1"),z0:new h(i.algebraic,"1")},a))}return(0,s.default)(n,[{key:"calculate",value:function(){return this.__calculate__()}},{key:"__calculate__",value:function(){return this.transformByOutput_Model(this.inputs[0].output_Model)}},{key:"transformByOutput_Model",value:function(t){var e=this.__getExpressValues__();return e?t.affine(e):t.constructor.createUgly()}}]),n}(f);p.prototype.type="AffineByFormula",p.prototype.isAffineByFormula=!0,p.prototype.isAffine=!0,p.prototype.isTransform=!0,t.exports=p},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r,s){return(0,o.default)(this,n),e.call(this,t,i,r,s)}return(0,r.default)(n)}(n(495));l.prototype.type="ProjectionToLine",l.prototype.isProjectionToLine=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(2)),o=i(n(1)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,r,s){return(0,o.default)(this,n),e.call(this,t,i,r,s)}return(0,r.default)(n)}(n(495));l.prototype.type="ProjectionToPlane",l.prototype.isProjectionToPlane=!0,t.exports=l},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(201),h=n(18),p=npGeo,d=p.SurfaceQuad3,y=p.SurfaceTriangle3,v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){var s;return(0,r.default)(this,n),(s=e.call(this,t,i,o,t.inputs[0].output_Model.isPlane?{gridNum:new h(1)}:{})).customTransform=new f(t.inputs[1],t.inputs[2]),s}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this.inputs[0].getValue();if(!this.gridNum){var e=this.customTransform.tranformByGridMesh(t.vertices);return t.isSurfaceQuad3?new d(e,t.row,t.column):new y(e,t.vplanes,t.vedges)}var n=t.toSurfaceTriangle(this.gridNum);return new y(this.customTransform.tranformByGridMesh(n.vertices),n.vplanes,n.vedges)}},{key:"_attrChanged",value:function(){this._attributes.gridNum&&(this.gridNum=this._attributes.gridNum.get())}}]),n}(l);v.prototype.type="CustomTransformSpecialSurface",v.prototype.isTransform=!0,v.prototype.isCustomTransformSpecial=!0,v.prototype.isCustomTransformSpecialSurface=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return this.inputs[1]&&t.applyMatrix(this.inputs[1].constraint.axisTransFormer.matrix_STG()),t.z}},{key:"_description",value:function(){return this.inputs[0].get("name")?"".concat(this.inputs[0].get("name"),"_{z} = "):""}}]),n}(l);d.prototype.type="MeasureCoorZ",d.prototype.isMeasureCoorZ=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=npGeo,f=l.Vector3,h=l.Utils,p=h.HALF_PI,d=(h.ANGLE_PER_ARC,math.abs),y=n(57),v=n(32),_=n(18),g=n(36),m=n(56),x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new v,unit:new m,accuracy:new _(2),bind:new g(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs;return 3==t.length?this._calc3Points():t[0].output_Model.isLine&&t[1].output_Model.isLine?this._calc2Lines():t[0].output_Model.isLine?this._calcLinePlane():this._calcPlanes()}},{key:"_calc3Points",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model,n=this.inputs[2].output_Model;return f.createByPoints(e,t).angleWith(f.createByPoints(e,n))}},{key:"_calc2Lines",value:function(){return this.inputs[0].output_Model.normalVector.angleWith(this.inputs[1].output_Model.normalVector)}},{key:"_calcLinePlane",value:function(){var t=this.inputs[0].output_Model.normalVector,e=this.inputs[1].output_Model.normalVector;return d(p-t.angleWith(e))}},{key:"_calcPlanes",value:function(){var t=this.inputs[0].output_Model.normalVector,e=this.inputs[1].output_Model.normalVector;return t.angleWith(e)}},{key:"_description",value:function(){if(3===this.inputs.length){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name"),n=this.inputs[2].get("name");return t&&e&&n?"\\angle ".concat(t).concat(e).concat(n," = "):""}var i=this.inputs[0].get("name"),r=this.inputs[1].get("name");return i&&r?"\\angle ".concat(i).concat(r," = "):""}}]),n}(y);x.prototype.type="MeasureAngle",x.prototype.isMeasureAngle=!0,t.exports=x},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return void 0===t.volume?0:t.volume}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"V_{".concat(t,"} = "):""}}]),n}(l);d.prototype.type="MeasureVolume",d.prototype.isMeasureVolume=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model,e=this.inputs[1].output_Model;return t.isLine&&e.isLine?t.distanceToLine(e):NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name"),e=this.inputs[1].get("name");return t&&e?"D_{".concat(t).concat(e,"} = "):""}}]),n}(l);d.prototype.type="MeasureDistanceOf2Lines",d.prototype.isMeasureDistanceOf2L=!0,t.exports=d},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(271).circleToStr,h=npGeo.Vector3,p=n(32),d=n(18),y=n(36),v=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new p,accuracy:new d(2),bind:new y(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(!t.isCircle)return"?";var e,n,i=t.normalVector;return 0==i.x*i.x+i.y*i.y?(e=new h(i.z,0,-i.x),n=new h(i.x*e.z,i.z*e.x-i.x*e.z,0)):(e=new h(i.y,-i.x,0),n=new h(-i.z*e.y,i.z*e.x,i.x*e.y-i.y*e.x)),f(t.centre,t.radius,e.normalize(),n.normalize(),this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);v.prototype.type="MeasureCircleEquation",v.prototype.isMeasureEquation=!0,t.exports=v},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(271).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){return f(this.inputs[0].output_Model.normalVector,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"{\\overrightarrow{n}}_{".concat(t,"} "):""}}]),n}(l);y.prototype.type="MeasureNormalVector",y.prototype.isMeasureNormalVector=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=["x","y","z"],y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,vectorUnit:new p(0),accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return void 0===t.normalVector?"?":t.normalVector[d[this._attributes.vectorUnit.get()]]}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"{\\overrightarrow{n}}_{".concat(t,"}[").concat(d[this._attributes.vectorUnit.get()],"] = "):""}}]),n}(l);y.prototype.type="MeasureNormalVectors",y.prototype.isMeasureNormalVectors=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(271).lineToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){var t=this.inputs[0].output_Model;if(t.isLine)return f(t.sp,t.ep,this.accuracy)}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t,"\\text{} "):""}}]),n}(l);y.prototype.type="MeasureEquation",y.prototype.isMeasureEquation=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(107),f=n(271).coorToStr,h=n(32),p=n(18),d=n(36),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new p(2),bind:new d(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){return this.inputs[0].output_Model.toVector?f(this.inputs[0].output_Model.toVector(),this._attributes.accuracy.get()):"?"}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"{\\overrightarrow{n}}_{".concat(t,"} "):""}}]),n}(l);y.prototype.type="MeasureVector",y.prototype.isMeasureVector=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(20);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(57),f=n(32),h=n(36),p=n(18),d=["x","y","z"],y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new f,vectorUnit:new p(0),accuracy:new p(2),bind:new h(i,t)})}return(0,o.default)(n,[{key:"_calcVal",value:function(){var t=this.inputs[0].output_Model;return t.toVector?t.toVector()[d[this._attributes.vectorUnit.get()]]:NaN}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"{\\overrightarrow{n}}_{".concat(t,"}[").concat(d[this._attributes.vectorUnit.get()],"] = "):""}}]),n}(l);y.prototype.type="MeasureVectors",y.prototype.isMeasureVectors=!0,t.exports=y},function(t,e,n){"use strict";n(3),n(4);var i=n(0),r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(271).coorToStr,f=n(107),h=n(32),p=n(36),d=n(18),y=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{position:new h,accuracy:new d(2),bind:new p(i,t)})}return(0,o.default)(n,[{key:"_calcLatex",value:function(){return l(this.inputs[0].output_Model,this._attributes.accuracy.get())}},{key:"_description",value:function(){var t=this.inputs[0].get("name");return t?"".concat(t):""}}]),n}(f);y.prototype.type="MeasureRightCoor",y.prototype.isMeasureRightCoor=!0,t.exports=y},function(t,e,n){"use strict";var i={XAxisSPoint:n(83),XAxisEPoint:n(83),YAxisSPoint:n(83),YAxisEPoint:n(83),ZAxisSPoint:n(83),ZAxisEPoint:n(83),FreePoint:n(83),RightPoint:n(83),OnElementPoint:n(83),OnIterPoint:n(83),OnCompositePathsPoint:n(83),OnPlanePoint:n(83),OriginPoint:n(83),PointsMidPoint:n(83),LineMidPoint:n(83),CentrePoint:n(83),ClosestPoint:n(83),ConstraintPoint:n(83),PolyhedronPoint:n(83),IntersectionPoint:n(83),AngleLabel:n(992),LineLabel:n(993),XAxisLine:n(369),YAxisLine:n(369),ZAxisLine:n(369),"2PointsLine":n(206),MidLine:n(206),ParaLine:n(206),VertiLine:n(206),TangentLine:n(206),PolyhedronLine:n(206),IntersectionLine:n(206),XOYAxisPlane:n(166),XOZAxisPlane:n(166),YOZAxisPlane:n(166),"3PointsPlane":n(166),PointLinePlane:n(166),PointsPolygon:n(166),MidPlane:n(166),VertiPlane:n(166),ParaPlane:n(166),"3PointsArc":n(370),PointNormalArc:n(370),RadiusArc:n(370),"3PointsCircle":n(371),PointNormalCircle:n(371),LinePointCircle:n(371),FunctionCurve:n(295),PointLocus:n(295),PointsPath:n(295),IntersectionCurve:n(295),PointNormalSphere:n(227),CircumscribedSphere:n(227),EquatorSphere:n(227),"3PointsSphere":n(227),"4PointsSphere":n(227),Tetrahedron:n(180),Hexahedron:n(180),Octahedron:n(180),Dodecahedron:n(180),Icosahedron:n(180),Cuboid:n(180),ConvexHull:n(180),Cylinder:n(372),Prism:n(372),"2LinearSurface":n(207),LocusSurface:n(207),FunctionSurface:n(207),RotateElementSurface:n(207),PointLinearSurface:n(207),CustomTransformSpecialSurface:n(207),Action:n(480),Animation:n(481),DynamicAudio:n(482),CustomFunction:n(292),DerivativeFunction:n(292),DynamicText:n(483),MeasureExpress:n(33),MeasureArea:n(33),MeasureLength:n(33),MeasureRadius:n(33),MeasureDistanceOf2Points:n(33),MeasureValueOfPointToObj:n(33),MeasureRatioOf3Points:n(33),MeasureProportioOf2Lines:n(33),MeasureCoorX:n(33),MeasureCoorY:n(33),MeasureCoorZ:n(33),MeasureAngle:n(33),MeasureVolume:n(33),MeasureDistanceOf2Lines:n(33),MeasureCircleEquation:n(33),MeasureNormalVector:n(33),MeasureNormalVectors:n(33),MeasureEquation:n(33),MeasureVector:n(33),MeasureVectors:n(33),MeasureRightCoor:n(33),CombinationPicture:n(293),FreePicture:n(293),CombinationText:n(484),VariableRuler:n(485),Iter:n(486),Group:n(45)};t.exports=function(t){return i[t]}},function(t,e,n){"use strict";var i=n(45),r=n(50),o=i.extend({defaults:{show:!0,midPos:{x:0,y:0}},initialize:function(){this.strokeModel=new r,this.initializeBase()}});t.exports=o},function(t,e,n){"use strict";var i=n(45),r=n(73),o=i.extend({defaults:{show:!0},initialize:function(){this.fillModel=new r,this.initializeBase()}});t.exports=o},function(t,e,n){"use strict";n(3),n(4);var i=n(0);n(8),n(16);var r=i(n(1)),o=i(n(2)),s=i(n(5)),a=i(n(6)),u=i(n(7));function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,u.default)(t);if(e){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.default)(this,n)}}var l=n(11),f=n(15),h=n(18),p=n(38),d=Math.abs,y=npGeo,v=y.Vector3,_=y.Plane3,g=y.GeoList,m=new v(0,0,0),x=function(t){(0,s.default)(n,t);var e=c(n);function n(t,i,o){return(0,r.default)(this,n),e.call(this,t,i,o,{transform:new f(i.algebraic),translate:new h(2),isParallel:new p})}return(0,o.default)(n,[{key:"calculate",value:function(){var t=this,e=[[]],n=(e=this._attributes.isParallel.get()?this.__calcParallel__(e):this.__calcSerial(e)).map((function(e){return t.__calcMesh__(e)}));return new g(n)}},{key:"__calcSerial",value:function(t){for(var e=1,n=Math.ceil(this.__calcTransform__());e<=n;e++)t=this.__calcClips__(t,this.inputs[e].getValue(),this.__calcTranslateByIndex__(e-1));return t}},{key:"__calcParallel__",value:function(t){for(var e,n=P(d(this._attributes.transform.calcu()),1)*this._attributes.translate.get(),i=1;e=this.inputs[i];i++)t=this.__calcClips__(t,e.getValue(),n);return t}},{key:"__calcClips__",value:function(t,e,n){for(var i,r=[],o=0;i=t[o];o++)(i=i.slice(0)).push({plane:e,translate:0}),r.push(i);for(var s,a=0;s=t[a];a++)(s=s.slice(0)).push({plane:new _(e.vertices.slice(0).reverse(),[]),translate:n}),r.push(s);return r}},{key:"__calcMesh__",value:function(t){for(var e,n=[],i=this.__calcVectors__(t),r=0;e=t[r];r++){var o=e.plane.translate(i);n.push({normalVector:o.normalVector,distance:v.createByPoints(o.vertices[0],m).dot(o.normalVector)})}return{mesh:this.inputs[0].output_Model.translate(i),type:this.__getType__(this.inputs[0].output_Model)+"Clip",planes:n}}},{key:"__calcVectors__",value:function(t){for(var e,n=new v(0,0,0),i=0;e=t[i];i++)n=n.add(e.plane.normalVector.clone().multiplyScalar(e.translate));return n}},{key:"__calcTranslateByIndex__",value:function(t){var e=this.__calcTransform__()-t;return e<0&&(e=0),e>=1&&(e=1),e*this._attributes.translate.get()}},{key:"__calcTransform__",value:function(){return P(d(this._attributes.transform.calcu()),this.inputs.length-1)}},{key:"__getType__",value:function(t){return t.isPolyhedron?"Polyhedron":t.isSphere?"Sphere":t.isPrism||t.isPrismoid||t.isPyramid||t.isCylinder||t.isFrustumOfCone||t.isCone?"Cylinder":t.isSurfaceQuad?"SurfaceQuad":"SurfaceTriangle"}}]),n}(l);function P(t,e){return 0==t?0:t%e==0?e:t%e}x.prototype.type="Clip",x.prototype.isClip=!0,t.exports=x},function(t,e,n){"use strict";var i=n(0);n(16),n(3),n(22);var r=(0,i(n(28)).default)(n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1006),n(488));t.exports=function(t){var e=this,n=t instanceof Array?t.slice(0):[t],i=[];return n.forEach((function(t){var n,o;for(var s in t)n=s,o=t[s];var a=r[n].apply(e,o);if(!(a instanceof Array))return i.push(e.undoRedo.constructByJSON3(a,!0));var u=!0;a.forEach((function(t){i.push(e.undoRedo.constructByJSON3(t,u)),u&&(u=!1)}))})),this.selectManager.clearSelected(),this.selectManager.selectByIds(i),1===i.length?i[0]:i}},function(t,e,n){"use strict";n(8);var i=npGeo.Vector3;t.exports={Point:function(t,e,n){return{type:"Point",def:{type:"FreePoint",attr:{position:{x:t||0,y:e||0,z:n||0}}}}},MidPoint:function(t,e){return this.elementsRepos.get(t).output_Model.isLine?{type:"Point",def:{type:"LineMidPoint",parents:[t]}}:{type:"Point",def:{type:"PointsMidPoint",parents:[t,e]}}},CentrePoint:function(t){return{type:"Point",def:{type:"CentrePoint",parents:[t]}}},Intersection:function(t,e,n){var r=this.getIntersectionSets(this.elementsRepos.get(t),this.elementsRepos.get(e));if(!r)return null;if(null!=n)return{type:"Point",def:{type:"IntersectionPoint",parents:[t,e],attr:{index:n}}};var o=r.getIntersection();if(o instanceof Array){if(0==o.length)return null;var s=o.length;2==s&&i.isEqual(o[0],o[1])&&(s=1);for(var a=[],u=0;u<s;u++)a.push(u);return a.map((function(n){return{type:"Point",def:{type:"IntersectionPoint",parents:[t,e],attr:{index:n}}}}))}return o.isUgly?null:{type:"Point",def:{type:"IntersectionPoint",parents:[t,e]}}},RightPoint:function(t,e,n,i,r,o){var s={};return s.x=t,s.y=e,s.z=n,i&&(s.dragX=i),r&&(s.dragY=r),o&&(s.dragZ=o),{type:"Point",def:{type:"RightPoint",attr:s}}},OnElementPoint:function(t,e,n){e||(n=e=this.dataRepository.getUDataName(),this.algbraicSys.set(e,Math.random()));var i="OnCompositePathsPoint",r=t;if(!(t instanceof Array)||1===t.length){var o=this.elementsRepos.get(t instanceof Array?t[0]:t);i=o.output_Model.isGeoList?"OnIterPoint":"OnElementPoint",r=[o.get("id")]}return{type:"Point",outVais:n,def:{type:i,parents:r,attr:{inVais:e,outVais:n}}}},InElementPoint:function(t){var e=this.dataRepository.getUDataName(),n=this.dataRepository.getUDataName();return this.algbraicSys.set(n,Math.random()),this.algbraicSys.set(e,Math.random()),{type:"Point",def:{type:"OnPlanePoint",parents:[t],attr:{dragDy:n,dragDx:e,dx:e,dy:n}}}},PolyhedronPoint:function(t,e){if(void 0!==e)return{type:"Point",def:{type:"PolyhedronPoint",parents:[t],attr:{index:e}}};for(var n=this.elementsRepos.get(t).output_Model.vertices.length,i=[],r=[],o=0;o<n;o++)i.push({type:"Point",def:{type:"PolyhedronPoint",parents:[t],attr:{index:o}}}),r.push(this.elementsRepos.length+o);return i.push({type:"Group",name:"",def:{type:"Group",parents:r}}),i},ClosestPoint:function(t,e){return{type:"Point",def:{type:"ClosestPoint",parents:[t,e]}}}}},function(t,e,n){"use strict";n(16),n(8);var i=npGeo.Line3;t.exports={Straight:function(t,e,n){return{type:"Line",def:{type:"2PointsLine",parents:[t,e],attr:{lineType:2,lineLength:n||"15"}}}},Ray:function(t,e,n){return{type:"Line",def:{type:"2PointsLine",parents:[t,e],attr:{lineType:1,lineLength:n||"15"}}}},Segment:function(t,e,n){return{type:"Line",def:{type:"2PointsLine",parents:[t,e],attr:{lineType:0,lineLength:n||"15"}}}},MidLine:function(){return{type:"Line",def:{type:"MidLine",parents:Array.prototype.slice.call(arguments)}}},ParaLine:function(t,e){return{type:"Line",def:{type:"ParaLine",parents:[t,e]}}},VertiLine:function(t,e){return{type:"Line",def:{type:"VertiLine",parents:[t,e]}}},TangentLine:function(t,e,n){var r=this.getTangentSets(this.getElementById(t),this.getElementById(e));if(!r)return null;for(var o=r.getTangent(),s=[],a=0;a<o.length;a++)o[a].isUgly||s.push(a);return 0==s.length?null:(2==o.length&&this.getElementById(t).output_Model.isPoint&&!o[0].isUgly&&i.isEqual(o[0],o[1])&&(s=[0]),void 0!==n&&(s=[n]),s.map((function(n){return{type:"Line",def:{type:"TangentLine",parents:[t,e],attr:{index:n}}}})))},PolyhedronLine:function(t,e){if(void 0!==e)return{type:"Line",def:{type:"PolyhedronLine",parents:[t],attr:{index:e}}};for(var n=this.elementsRepos.get(t).output_Model.vedges.length,i=[],r=[],o=0;o<n;o++)i.push({type:"Line",def:{type:"PolyhedronLine",parents:[t],attr:{index:o}}}),r.push(this.elementsRepos.length+o);return i.push({type:"Group",name:"",def:{type:"Group",parents:r}}),i}}},function(t,e,n){"use strict";n(16),t.exports={Circle:function(t,e,n){if(3===arguments.length)return{type:"Circle",def:{type:"3PointsCircle",parents:[t,e,n]}};var i=this.getElementById(t);return{type:"Circle",def:{type:i.output_Model.isLine?"LinePointCircle":"PointNormalCircle",parents:[t,e]}}},Arc:function(t,e,n){return 3===arguments.length&&this.getElementById(n).output_Model.isPoint?{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:0}}}:{type:"Arc",def:{type:"PointNormalArc",parents:Array.prototype.slice.call(arguments)}}},CircumArc:function(t,e,n){return{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:1}}}},CentreArc:function(t,e,n){return{type:"Arc",def:{type:"3PointsArc",parents:[t,e,n],attr:{defineType:2}}}},RadiusArc:function(t,e){return{type:"Arc",def:{type:"RadiusArc",parents:[t,e]}}}}},function(t,e,n){"use strict";n(16),t.exports={YCurve:function(){return{type:"Curve",def:{type:"FunctionCurve"}}},IntersectionCurve:function(t,e){return this.getElementById(t).output_Model.isPlane&&this.getElementById(e).output_Model.isPlane?{type:"Line",def:{type:"IntersectionLine",parents:[t,e]}}:{type:"Curve",def:{type:"IntersectionCurve",parents:[t,e]}}},Path:function(){return{type:"Curve",def:{type:"PointsPath",parents:Array.prototype.slice.call(arguments)}}}}},function(t,e,n){"use strict";n(16),t.exports={Plane:function(){return{type:"Plane",def:{type:2===arguments.length?"PointLinePlane":"3PointsPlane",parents:Array.prototype.slice.call(arguments)}}},Polygon:function(){return{type:"Plane",def:{type:"PointsPolygon",parents:Array.prototype.slice.call(arguments)}}},MidPlane:function(t,e){return{type:"Plane",def:{type:"MidPlane",parents:[t,e]}}},VertiPlane:function(){return{type:"Plane",def:{type:"VertiPlane",parents:Array.prototype.slice.call(arguments)}}},ParaPlane:function(t,e){return{type:"Plane",def:{type:"ParaPlane",parents:[t,e]}}}}},function(t,e,n){"use strict";t.exports={Surface:function(t,e){return{type:"Surface",def:{type:this.getElementById(t).output_Model.isPoint?"PointLinearSurface":"2LinearSurface",parents:[t,e]}}},RotateSuface:function(t,e){return{type:"Surface",def:{type:"RotateElementSurface",parents:[t,e]}}},ZSurface:function(){return{type:"Surface",def:{type:"FunctionSurface"}}}}},function(t,e,n){"use strict";n(16),t.exports={Tetrahedron:function(t,e){return{type:"Polyhedron",def:{type:"Tetrahedron",parents:[t,e]}}},Hexahedron:function(t,e){return{type:"Polyhedron",def:{type:"Hexahedron",parents:[t,e]}}},Octahedron:function(t,e){return{type:"Polyhedron",def:{type:"Octahedron",parents:[t,e]}}},Dodecahedron:function(t,e){return{type:"Polyhedron",def:{type:"Dodecahedron",parents:[t,e]}}},Icosahedron:function(t,e){return{type:"Polyhedron",def:{type:"Icosahedron",parents:[t,e]}}},Cuboid:function(t,e){return{type:"Cuboid",def:{type:"Cuboid",parents:[t,e]}}},Cylinder:function(t,e){return{type:"Cylinder",def:{type:"Cylinder",parents:[t,e]}}},Prism:function(t,e){return{type:"Prism",def:{type:"Prism",parents:[t,e]}}},Sphere:function(){if(1===arguments.length){var t=this.getElementById(arguments[0]);return{type:"Sphere",def:{type:t.output_Model.isPolyhedron?"CircumscribedSphere":"EquatorSphere",parents:[arguments[0]]}}}return 2===arguments.length?{type:"Sphere",def:{type:"PointNormalSphere",parents:[arguments[0],arguments[1]]}}:{type:"Sphere",def:{type:3===arguments.length?"3PointsSphere":"4PointsSphere",parents:Array.prototype.slice.call(arguments)}}},ConvexHull:function(){return{type:"ConvexHull",def:{type:"ConvexHull",parents:Array.prototype.slice.call(arguments)}}}}},function(t,e,n){"use strict";t.exports={LineLabel:function(t){return{type:"LineLabel",def:{type:"LineLabel",parents:[t]}}},AngleLabel:function(t,e,n){return{type:"AngleLabel",def:{type:"AngleLabel",parents:[t,e,n]}}}}},function(t,e,n){"use strict";function i(t,e){if(!e||0===e.length){if(!t.output_Model.isPoint||!t.constraint.isHFPoint&&!t.constraint.isRightPoint&&!t.constraint.isOnPlanePoint||!t.outputsData&&0===t.outputsData.length)return null;var n=[],i=[];return t.outputsData.forEach((function(e){var r=t.constraint.getAttr();-1!==e.getChildren00().indexOf(t)&&-1===i.indexOf(e)&&(i.push(e),n.push({varName:e.name,startVal:void 0!==r.fValue?r.fValue:-5,endVal:void 0!==r.eValue?r.eValue:5}))})),n}if(!t.output_Model.isPoint&&!t.output_Model.isLinear)return null;var r=[],o=[];return e.forEach((function(e){(e.outputsData||0!==!e.outputsData.length)&&e.outputsData.forEach((function(n){var i=e.constraint.getAttr();-1!==n.getChildren00().indexOf(t)&&-1===o.indexOf(n)&&(o.push(n),r.push({varName:n.name,startVal:void 0!==i.fValue?i.fValue:-5,endVal:void 0!==i.eValue?i.eValue:5}))}))})),t.outputsData&&t.outputsData.length>0&&t.outputsData.forEach((function(e){-1!==e.getChildren00().indexOf(t)&&-1===o.indexOf(e)&&(o.push(e),r.push({varName:e.name,startVal:e.name,endVal:e.name}))})),r}n(3),n(22),n(27),n(16),n(8),t.exports={Locus:function(){var t=this,e=Array.prototype.slice.call(arguments),n=this.getElementById(e.shift()),r=i(n,e.map((function(e){return t.getElementById(e)})));if(r&&0!==r.length)return{type:n.output_Model.isPoint?"Curve":"Surface",def:{type:n.output_Model.isPoint?"PointLocus":"LocusSurface",parents:[n.get("id")],attr:{varis:r,pNum:100,stepNum:5}}}}}},function(t,e,n){"use strict";n(16),n(3),n(22);var i=n(222),r=n(201);function o(t,e,n){var i=this.getElementById(t),r=i.displayModel.getAttr(),o=i.get("name")?this.nameConstructor.getNameByElement(i):"";return r.show=!0,{type:n?n(i):i.output_Model.isGeoList?"TransformIter":i.type,name:o,def:e,dis:r}}function s(t){return t.output_Model.isPoint?"Point":t.output_Model.isLine?"Line":t.output_Model.isLinear?"Curve":t.output_Model.isPlane?"Plane":t.output_Model.isGeoList?"TransformIter":"Surface"}function a(t){return t.output_Model.isPoint?"Point":t.output_Model.isLinear?t.output_Model.type:t.output_Model.isPlane?"Plane":t.output_Model.isSphere?"Sphere":t.output_Model.isGeoList?"TransformIter":"Surface"}t.exports={Translate:function(t,e,n,i){return o.call(this,t,{type:"TranslateByCoor",parents:[t],attr:{coorX:e,coorY:n,coorZ:i}})},TranslateBySegment:function(t,e,n){return o.call(this,t,{type:"TranslateBySegment",parents:[t,e],attr:{ratio:n||"1"}})},TranslateBy2Points:function(t,e,n,i){return o.call(this,t,{type:"TranslateBy2Points",parents:[t,e,n],attr:{ratio:i||"1"}})},Rotate:function(t,e,n,i,r){return o.call(this,t,{type:"Rotate",parents:[t,e],attr:{ang:n,nUnit:r||0,direct:i||0}})},Dilate:function(t,e,n){return o.call(this,t,{type:"Dilate",parents:[t,e],attr:{ratio:n||"0.5"}})},Reflect:function(t,e){var n=this.getElementById(e);return o.call(this,t,{type:n.output_Model.isPoint?"Centrosymmetric":n.output_Model.isLine?"Axisymmetric":"Planesymmetric",parents:[t,e]})},Affine:function(t,e){return o.call(this,t,{type:"AffineByFormula",parents:[t],attr:e},s)},AffineByPoints:function(){return o.call(this,arguments[0],{type:"AffineByPoints",parents:Array.prototype.slice.call(arguments)},s)},Projection:function(t,e,n){return o.call(this,arguments[0],{type:this.getElementById(e).output_Model.isLine?"ProjectionToLine":"ProjectionToPlane",parents:[t,e],attr:{ratio:n||0}},s)},ProjectionWidthLight:function(t,e,n,i){return o.call(this,arguments[0],{type:this.getElementById(e).output_Model.isLine?"ProjectionToLine":"ProjectionToPlane",parents:[t,e,n],attr:{ratio:i||0}},s)},Inversion:function(t,e){return o.call(this,t,{type:"Inversion",parents:[t,e]},a)},CustomTransform:function(t,e,n){var a=this.getElementById(t),u=this.getElementById(e),c=this.getElementById(n),l=r.isLegal(u,c);if(l){var f=[t];return l.inputs.forEach((function(t){f.push(t.get("id"))})),o.call(this,t,{type:a.output_Model.isPoint?"CustomTransformSpecialPoint":a.output_Model.isLinear?"CustomTransformSpecialPoints":"CustomTransformSpecialSurface",parents:f},(function(t){return t.output_Model.isPoint?"Point":a.output_Model.isLinear?"Curve":"Surface"}))}var h=i.isLegal(u,c);if(h){var p=[t];return h.inputs.forEach((function(t){p.push(t.get("id"))})),o.call(this,t,{type:"CustomTransform",parents:p},s)}},Clip:function(){var t=this.getAutoDataName();this.algbraicSys.set(t,0);var e=[{type:"AnimationButton",name:"",def:{type:"Animation",attr:{varObjs:[{varName:t,s:t,e:t+"+1",num:50,timer:40}],aniType:2,quenceType:0,position:this.getNextAssistPosition()}}}];return e.push({type:"Clip",def:{type:"Clip",parents:Array.prototype.slice.call(arguments),attr:{transform:t}}}),e}}},function(t,e,n){"use strict";function i(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.position=n.getNextAssistPosition(),e.forEach((function(t){if(t){var e=n.getElementById(t);e&&!e.constraint.isUCSAxis&&(e.get("name")||e.set({name:n.nameConstructor.getNameByElement(e)}),e.nameModel&&e.nameModel.set("callShow",!0))}}));var o=i?n.dataRepository.getMDataName():void 0;return{type:"Measure",name:o,outVais:o,def:{type:t,parents:e,attr:r}}}n(3),n(22),t.exports={MeasureCoorX:function(t){return i("MeasureCoorX",[t],this,!0)},MeasureCoorY:function(t){return i("MeasureCoorY",[t],this,!0)},MeasureCoorZ:function(t){return i("MeasureCoorZ",[t],this,!0)},MeasureRightCoor:function(t){return i("MeasureRightCoor",[t],this)},MeasureLength:function(t){return i("MeasureLength",[t],this,!0)},MeasureEquation:function(t){return i("MeasureEquation",[t],this)},MeasureVector:function(t){return i("MeasureVector",[t],this)},MeasureVectorX:function(t){return i("MeasureVectors",[t],this,!0,{vectorUnit:0})},MeasureVectorY:function(t){return i("MeasureVectors",[t],this,!0,{vectorUnit:1})},MeasureVectorZ:function(t){return i("MeasureVectors",[t],this,!0,{vectorUnit:2})},MeasureCircleEquation:function(t){return i("MeasureCircleEquation",[t],this)},MeasureNormalVector:function(t){return i("MeasureNormalVector",[t],this)},MeasureNormalVectorX:function(t){return i("MeasureNormalVectors",[t],this,!0,{vectorUnit:0})},MeasureNormalVectorY:function(t){return i("MeasureNormalVectors",[t],this,!0,{vectorUnit:1})},MeasureNormalVectorZ:function(t){return i("MeasureNormalVectors",[t],this,!0,{vectorUnit:2})},MeasureRadius:function(t){return i("MeasureRadius",[t],this,!0)},MeasureArea:function(t){return i("MeasureArea",[t],this,!0)},MeasureVolume:function(t){return i("MeasureVolume",[t],this,!0)},MeasureAngle:function(){return this.getElementById(arguments[0]).output_Model.isPoint?i("MeasureAngle",[arguments[0],arguments[1],arguments[2]],this,!0,{unit:arguments[3]}):i("MeasureAngle",[arguments[0],arguments[1]],this,!0,{unit:arguments[2]})},MeasureRatioOf3Points:function(t,e,n){return i("MeasureRatioOf3Points",[t,e,n],this,!0)},MeasureDistance:function(t,e){return i(this.getElementById(t).output_Model.isPoint&&this.getElementById(t).output_Model.isPoint?"MeasureDistanceOf2Points":"MeasureDistanceOf2Lines",[t,e],this,!0)},MeasureProportioOf2Lines:function(t,e){return i("MeasureProportioOf2Lines",[t,e],this,!0)},MeasureValueOfPointToObj:function(t,e){var n={};return this.getElementById(e).output_Model.isCircle&&(n={fValue:0,eValue:6.284}),i("MeasureValueOfPointToObj",[t,e],this,!0,n)}}}])}));